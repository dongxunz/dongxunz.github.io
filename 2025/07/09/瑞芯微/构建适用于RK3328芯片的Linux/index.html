

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">

  <link rel="apple-touch-icon" sizes="76x76" href="/img/favicon.png">
  <link rel="icon" href="/img/favicon.png">
  

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="dongxunz">
  <meta name="keywords" content="å†™ä½œ,è®°å½•,å‘ç°,æ„Ÿæ‚Ÿ">
  
    <meta name="description" content="å‰è¨€ç½‘ä¸Šèƒ½æ‰¾åˆ°é€‚ç”¨äºç‘èŠ¯å¾®RK3328èŠ¯ç‰‡çš„Linuxç³»ç»Ÿç‰ˆæœ¬éƒ½æœ‰äº›æ—§äº†ï¼Œæœ‰äº›åŠŸèƒ½å†…æ ¸ä¸æ”¯æŒï¼Œäºæ˜¯æ‰“ç®—è‡ªå·±æŠ˜è…¾æ„å»ºæœ€æ–°ç‰ˆæœ¬çš„Linuxç³»ç»Ÿï¼Œå¼€å¯ä¸€äº›æ–°çš„åŠŸèƒ½ï¼Œé¡ºä¾¿å­¦ä¹ ä¸€ä¸‹åµŒå…¥å¼å¼€å‘ï¼Œä»…ä¾›å‚è€ƒã€‚ å¯åŠ¨æµç¨‹ ä¸Šå›¾å¯ä»¥çœ‹å‡ºç‘èŠ¯å¾®çš„èŠ¯ç‰‡æœ‰2æ¡å¯åŠ¨æµç¨‹ï¼š Boot Flow 1 &#x2F;  Boot Flow 2ï¼Œæ¯æ¡æµç¨‹åªæœ‰loader1ã€loader2åœ¨æ„æˆæ–¹å¼ä¸Šæœ‰æ‰€ä¸åŒï¼Œè€Œtrustã€kernel">
<meta property="og:type" content="article">
<meta property="og:title" content="æ„å»ºé€‚ç”¨äºRK3328èŠ¯ç‰‡çš„Linux">
<meta property="og:url" content="https://dongxunz.github.io/2025/07/09/%E7%91%9E%E8%8A%AF%E5%BE%AE/%E6%9E%84%E5%BB%BA%E9%80%82%E7%94%A8%E4%BA%8ERK3328%E8%8A%AF%E7%89%87%E7%9A%84Linux/index.html">
<meta property="og:site_name" content="dongxunz&#39;s blogs">
<meta property="og:description" content="å‰è¨€ç½‘ä¸Šèƒ½æ‰¾åˆ°é€‚ç”¨äºç‘èŠ¯å¾®RK3328èŠ¯ç‰‡çš„Linuxç³»ç»Ÿç‰ˆæœ¬éƒ½æœ‰äº›æ—§äº†ï¼Œæœ‰äº›åŠŸèƒ½å†…æ ¸ä¸æ”¯æŒï¼Œäºæ˜¯æ‰“ç®—è‡ªå·±æŠ˜è…¾æ„å»ºæœ€æ–°ç‰ˆæœ¬çš„Linuxç³»ç»Ÿï¼Œå¼€å¯ä¸€äº›æ–°çš„åŠŸèƒ½ï¼Œé¡ºä¾¿å­¦ä¹ ä¸€ä¸‹åµŒå…¥å¼å¼€å‘ï¼Œä»…ä¾›å‚è€ƒã€‚ å¯åŠ¨æµç¨‹ ä¸Šå›¾å¯ä»¥çœ‹å‡ºç‘èŠ¯å¾®çš„èŠ¯ç‰‡æœ‰2æ¡å¯åŠ¨æµç¨‹ï¼š Boot Flow 1 &#x2F;  Boot Flow 2ï¼Œæ¯æ¡æµç¨‹åªæœ‰loader1ã€loader2åœ¨æ„æˆæ–¹å¼ä¸Šæœ‰æ‰€ä¸åŒï¼Œè€Œtrustã€kernel">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://dongxunz.github.io/2025/07/09/%E7%91%9E%E8%8A%AF%E5%BE%AE/%E6%9E%84%E5%BB%BA%E9%80%82%E7%94%A8%E4%BA%8ERK3328%E8%8A%AF%E7%89%87%E7%9A%84Linux/rockchip_boot_flow_20181122.jpg">
<meta property="og:image" content="https://dongxunz.github.io/2025/07/09/%E7%91%9E%E8%8A%AF%E5%BE%AE/%E6%9E%84%E5%BB%BA%E9%80%82%E7%94%A8%E4%BA%8ERK3328%E8%8A%AF%E7%89%87%E7%9A%84Linux/system_info.png">
<meta property="article:published_time" content="2025-07-09T07:27:15.000Z">
<meta property="article:modified_time" content="2025-07-20T12:55:11.615Z">
<meta property="article:author" content="dongxunz">
<meta property="article:tag" content="ç‘èŠ¯å¾®">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://dongxunz.github.io/2025/07/09/%E7%91%9E%E8%8A%AF%E5%BE%AE/%E6%9E%84%E5%BB%BA%E9%80%82%E7%94%A8%E4%BA%8ERK3328%E8%8A%AF%E7%89%87%E7%9A%84Linux/rockchip_boot_flow_20181122.jpg">
  
  
    <meta name="referrer" content="no-referrer-when-downgrade">
  
  
  <title>æ„å»ºé€‚ç”¨äºRK3328èŠ¯ç‰‡çš„Linux - dongxunz&#39;s blogs</title>

  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@4/github-markdown.min.css" />

  <link  rel="stylesheet" href="/lib/hint/hint.min.css" />

  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3/dist/jquery.fancybox.min.css" />



<!-- ä¸»é¢˜ä¾èµ–çš„å›¾æ ‡åº“ï¼Œä¸è¦è‡ªè¡Œä¿®æ”¹ -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1749284_5i9bdhy70f8.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_kmeydafke9r.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  



  
<link rel="stylesheet" href="/css/macpanel.css">



  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"dongxunz.github.io","root":"/","version":"1.9.8","typing":{"enable":true,"typeSpeed":80,"cursorChar":"ğŸ€","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"right","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":true,"follow_dnt":true,"baidu":"c524bca28dcbbfa00ddaa02b141c7bbf","google":null,"tencent":{"sid":null,"cid":null},"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false},"umami":{"src":null,"website_id":null,"domains":null,"start_time":"2024-01-01T00:00:00.000Z","token":null,"api_server":null},"gtag":null,"woyaola":null,"cnzz":null},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  

  
    <!-- Baidu Analytics -->
    <script async>
      if (!Fluid.ctx.dnt) {
        var _hmt = _hmt || [];
        (function() {
          var hm = document.createElement("script");
          hm.src = "https://hm.baidu.com/hm.js?c524bca28dcbbfa00ddaa02b141c7bbf";
          var s = document.getElementsByTagName("script")[0];
          s.parentNode.insertBefore(hm, s);
        })();
      }
    </script>
  

  

  

  

  



  
<meta name="generator" content="Hexo 7.3.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>dongxunz&#39;s blogsğŸ’¬</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/" target="_self">
                <i class="iconfont icon-home-fill"></i>
                <span>é¦–é¡µ</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/" target="_self">
                <i class="iconfont icon-archive-fill"></i>
                <span>å½’æ¡£</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/" target="_self">
                <i class="iconfont icon-category-fill"></i>
                <span>åˆ†ç±»</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/" target="_self">
                <i class="iconfont icon-tags-fill"></i>
                <span>æ ‡ç­¾</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" target="_self" href="javascript:;" role="button"
                 data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                <i class="iconfont icon-cliplist"></i>
                <span>åˆ†äº«</span>
              </a>
              <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                
                  
                  
                  
                  <a class="dropdown-item" href="/share/circuitry/" target="_self">
                    <i class="iconfont icon-apple-fill"></i>
                    <span>ç”µè·¯</span>
                  </a>
                
                  
                  
                  
                  <a class="dropdown-item" href="/share/construction/" target="_self">
                    <i class="iconfont icon-codepen-fill"></i>
                    <span>ç»“æ„</span>
                  </a>
                
                  
                  
                  
                  <a class="dropdown-item" href="/share/game/" target="_self">
                    <i class="iconfont icon-steam"></i>
                    <span>æ¸¸æˆ</span>
                  </a>
                
                  
                  
                  
                  <a class="dropdown-item" href="/share/reading-corner/" target="_self">
                    <i class="iconfont icon-book"></i>
                    <span>é˜…è¯»è§’</span>
                  </a>
                
              </div>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/" target="_self">
                <i class="iconfont icon-user-fill"></i>
                <span>å…³äº</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/links/" target="_self">
                <i class="iconfont icon-link-fill"></i>
                <span>å‹é“¾</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/clover.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="æ„å»ºé€‚ç”¨äºRK3328èŠ¯ç‰‡çš„Linux"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2025-07-09 15:27" pubdate>
          2025å¹´7æœˆ9æ—¥ ä¸‹åˆ
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          <!-- compatible with older versions-->
          5.2k å­—
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          <!-- compatible with older versions-->
          17 åˆ†é’Ÿ
        
      </span>
    

    
    
      
        <span id="busuanzi_container_page_pv" style="display: none">
          <i class="iconfont icon-eye" aria-hidden="true"></i>
          <span id="busuanzi_value_page_pv"></span> æ¬¡
        </span>
        

      
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header">æ„å»ºé€‚ç”¨äºRK3328èŠ¯ç‰‡çš„Linux</h1>
            
              <p id="updated-time" class="note note-info" style="">
                
                  
                    <!-- compatible with older versions-->
                    æœ¬æ–‡æœ€åæ›´æ–°äºï¼š2025å¹´7æœˆ20æ—¥ æ™šä¸Š
                  
                
              </p>
            
            
              <div class="markdown-body">
                
                <h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>ç½‘ä¸Šèƒ½æ‰¾åˆ°é€‚ç”¨äºç‘èŠ¯å¾®RK3328èŠ¯ç‰‡çš„Linuxç³»ç»Ÿç‰ˆæœ¬éƒ½æœ‰äº›æ—§äº†ï¼Œæœ‰äº›åŠŸèƒ½å†…æ ¸ä¸æ”¯æŒï¼Œäºæ˜¯æ‰“ç®—è‡ªå·±æŠ˜è…¾æ„å»ºæœ€æ–°ç‰ˆæœ¬çš„Linuxç³»ç»Ÿï¼Œå¼€å¯ä¸€äº›æ–°çš„åŠŸèƒ½ï¼Œé¡ºä¾¿å­¦ä¹ ä¸€ä¸‹åµŒå…¥å¼å¼€å‘ï¼Œä»…ä¾›å‚è€ƒã€‚</p>
<h2 id="å¯åŠ¨æµç¨‹"><a href="#å¯åŠ¨æµç¨‹" class="headerlink" title="å¯åŠ¨æµç¨‹"></a>å¯åŠ¨æµç¨‹</h2><p><img src="/2025/07/09/%E7%91%9E%E8%8A%AF%E5%BE%AE/%E6%9E%84%E5%BB%BA%E9%80%82%E7%94%A8%E4%BA%8ERK3328%E8%8A%AF%E7%89%87%E7%9A%84Linux/rockchip_boot_flow_20181122.jpg" srcset="/img/loading.gif" lazyload alt="RKChip Boot Flow"></p>
<p>ä¸Šå›¾å¯ä»¥çœ‹å‡ºç‘èŠ¯å¾®çš„èŠ¯ç‰‡æœ‰2æ¡å¯åŠ¨æµç¨‹ï¼š<font color="#008000"> <b>Boot Flow 1</b></font> &#x2F; <font color="#fe0000"> <b>Boot Flow 2</b></font>ï¼Œæ¯æ¡æµç¨‹åªæœ‰loader1ã€loader2åœ¨æ„æˆæ–¹å¼ä¸Šæœ‰æ‰€ä¸åŒï¼Œè€Œtrustã€kernelã€rootfsåŸºæœ¬ä¸€è‡´ï¼Œåç»­æ“ä½œä¼šå¯¹ä¸åŒçš„åœ°æ–¹è¿›è¡Œå•ç‹¬è®°å½•ï¼Œè€Œç›¸åŒçš„éƒ¨åˆ†åˆ™æ”¾åœ¨ä¸€èµ·ã€‚<sup id="fnref:1" class="footnote-ref"><a href="#fn:1" rel="footnote"><span class="hint--top hint--rounded" aria-label="[ Boot option ](https://opensource.rock-chips.com/wiki_Boot_option)">[1]</span></a></sup></p>
<h2 id="çƒ§å½•åœ°å€"><a href="#çƒ§å½•åœ°å€" class="headerlink" title="çƒ§å½•åœ°å€"></a>çƒ§å½•åœ°å€</h2><p>æŸ¥é˜…<a target="_blank" rel="noopener" href="http://opensource.rock-chips.com/images/d/d5/RK3328_Linux-Debian_V1.1_Development_Guide-20170711.pdf">RK3328_Linux-Debian_V1.1_Development_Guide-20170711å®˜æ–¹æ‰‹å†Œ</a>å¯çŸ¥ï¼Œåœ¨RK3328èŠ¯ç‰‡ä¸Šè¿è¡ŒLinuxç³»ç»Ÿï¼Œéœ€è¦å°†æ‰€éœ€æ–‡ä»¶çƒ§å½•åˆ°å¯¹åº”çš„åœ°å€ä¸­ï¼š</p>
<!-- è®©è¡¨æ ¼å±…ä¸­æ˜¾ç¤ºçš„é£æ ¼ -->
<style>
.center
{
  width: auto;
  display: table;
  margin-left: auto;
  margin-right: auto;
}
</style>

<div class="center">

<table>
<thead>
<tr>
<th align="center">Address</th>
<th align="center">Name</th>
<th align="center">Path</th>
</tr>
</thead>
<tbody><tr>
<td align="center"></td>
<td align="center">Boot</td>
<td align="center">rk3328_loader_v1.21.250.bin</td>
</tr>
<tr>
<td align="center">0x00000040</td>
<td align="center">loader1</td>
<td align="center">idbloader.img</td>
</tr>
<tr>
<td align="center">0x00004000</td>
<td align="center">loader2</td>
<td align="center">uboot.img</td>
</tr>
<tr>
<td align="center">0x00006000</td>
<td align="center">atf</td>
<td align="center">trust.img</td>
</tr>
<tr>
<td align="center">0x00008000</td>
<td align="center">boot</td>
<td align="center">boot.img</td>
</tr>
<tr>
<td align="center">0x00040000</td>
<td align="center">rootfs</td>
<td align="center">rootfs.img</td>
</tr>
</tbody></table>
</div>

<h2 id="ä¸»æ¿ä¿¡æ¯"><a href="#ä¸»æ¿ä¿¡æ¯" class="headerlink" title="ä¸»æ¿ä¿¡æ¯"></a>ä¸»æ¿ä¿¡æ¯</h2><p>ä¸»èŠ¯ç‰‡ï¼š<a target="_blank" rel="noopener" href="https://opensource.rock-chips.com/wiki_RK3328">ç‘èŠ¯å¾®RK3288</a><br>å†…å­˜é¢—ç²’ï¼š<a target="_blank" rel="noopener" href="https://www.absunshine.com/en/parts/K4B2G0446C-HYH9-SAMSUNG-3886027">K4B2G0446C-HYH9</a> * 8ï¼š2GB<br>eMMCèŠ¯ç‰‡ï¼š<a target="_blank" rel="noopener" href="https://semiconductor.samsung.cn/estorage/emmc/emmc-5-1/klmag1jetd-b041/">KLMAG1JETD-B041</a>ï¼š16G<br>è®¾å¤‡æ ‘æ–‡ä»¶ï¼š<a target="_blank" rel="noopener" href="https://github.com/unifreq/linux-6.0.y/tree/main/arch/arm64/boot/dts/rockchip">rk3328-beikeyun-1296mhz.dts form linux-6.0.y</a></p>
<h2 id="å¼€å‘ç¯å¢ƒ"><a href="#å¼€å‘ç¯å¢ƒ" class="headerlink" title="å¼€å‘ç¯å¢ƒ"></a>å¼€å‘ç¯å¢ƒ</h2><p><img src="/2025/07/09/%E7%91%9E%E8%8A%AF%E5%BE%AE/%E6%9E%84%E5%BB%BA%E9%80%82%E7%94%A8%E4%BA%8ERK3328%E8%8A%AF%E7%89%87%E7%9A%84Linux/system_info.png" srcset="/img/loading.gif" lazyload alt="ç³»ç»Ÿä¿¡æ¯"></p>
<p>å®‰è£…æ‰€éœ€å·¥å…·ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> apt-get update<br><br><span class="hljs-built_in">sudo</span> apt-get upgrade<br><br><span class="hljs-built_in">sudo</span> apt-get install git gitk git-core git-gui bc bison flex make gcc-arm-linux-gnueabihf u-boot-tools device-tree-compiler gcc-aarch64-linux-gnu mtools parted libudev-dev libusb-1.0-0-dev libssl-dev android-tools-adb android-tools-fastboot python-is-python3 python3 python3-distutils swig python3-dev python3-pyelftools python3-all-dev python3-setuptools liblz4-tool libgnutls28-dev gcc-aarch64-linux-gnu device-tree-compiler libncurses5 libncurses5-dev build-essential libssl-dev mtools bc python2 dosfstools libelf-dev elfutils dwarves<br></code></pre></td></tr></table></figure>

<h2 id="æ„å»ºæ–‡ä»¶"><a href="#æ„å»ºæ–‡ä»¶" class="headerlink" title="æ„å»ºæ–‡ä»¶"></a>æ„å»ºæ–‡ä»¶</h2><h3 id="loader1"><a href="#loader1" class="headerlink" title="loader1"></a>loader1</h3><h4 id="Boot-Flow-1"><a href="#Boot-Flow-1" class="headerlink" title="Boot Flow 1"></a>Boot Flow 1</h4><h5 id="ä½¿ç”¨æ„å»ºå·¥å…·"><a href="#ä½¿ç”¨æ„å»ºå·¥å…·" class="headerlink" title="ä½¿ç”¨æ„å»ºå·¥å…·"></a>ä½¿ç”¨æ„å»ºå·¥å…·</h5><p>ç‘èå®˜æ–¹æä¾›äº†é€‚ç”¨äºç‘èŠ¯å¾®èŠ¯ç‰‡çš„<a target="_blank" rel="noopener" href="https://github.com/radxa/rockchip-bsp">rockchip-bspæ„å»ºå·¥å…·</a>ï¼Œå¯ä»¥å¾ˆè½»æ¾æ–¹ä¾¿çš„æ„å»ºå‡º<font color="#008000"> <b>Boot Flow 1</b></font>æ‰€éœ€çš„idbloaderã€ubootä»¥åŠtrustæ–‡ä»¶ï¼Œå‚è€ƒèµ„æ–™ï¼š<sup id="fnref:2" class="footnote-ref"><a href="#fn:2" rel="footnote"><span class="hint--top hint--rounded" aria-label="[ ROCK Pi E Build Debian ](https://wiki.radxa.com/RockpiE/dev/Debian)">[2]</span></a></sup> <sup id="fnref:3" class="footnote-ref"><a href="#fn:3" rel="footnote"><span class="hint--top hint--rounded" aria-label="[ Beelink-IPC-R(rk3588)æ”¯æŒä½¿ç”¨OpenWrtå’ŒArmbian ](https://github.com/ophub/amlogic-s9xxx-openwrt/issues/415#issuecomment-1508234307)">[3]</span></a></sup></p>
<ol>
<li><p>å…‹éš†æ„å»ºå·¥å…·</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash">git <span class="hljs-built_in">clone</span> -b stable-4.4-rockpie https://github.com/radxa/rockchip-bsp.git<br><br><span class="hljs-built_in">cd</span> rockchip-bsp<br><br>git submodule init<br><br>git submodule update<br></code></pre></td></tr></table></figure>

<p> æ‰§è¡Œä¸Šè¿°å‘½ä»¤ä¼šæ‹‰å–radxaé…ç½®çš„ç›¸å…³å­æ¨¡å—é¡¹ç›®ï¼Œå¦‚æœä¸æƒ³ä½¿ç”¨å…¶ä¸­çš„u-bootã€kernelé¡¹ç›®ï¼ˆç‰ˆæœ¬è¿‡äºè€æ—§ï¼‰ï¼Œå¯ä»¥åˆ æ‰ç›¸å…³ç›®å½•å¹¶å…‹éš†å…¶ä»–ä»“åº“çš„æºç åˆ°rockchip-bspç›®å½•ä¸­ï¼ˆæ³¨æ„æ–‡ä»¶å¤¹åç§°éœ€ä¿æŒä¸€è‡´ï¼Œå¦åˆ™åç»­æ‰§è¡Œè„šæœ¬ä¼šæŠ¥é”™ï¼‰ï¼›æˆ‘ä½¿ç”¨çš„u-bootæ˜¯å®˜æ–¹u-bootï¼Œkernelåˆ™æ¥è‡ªunifreqï¼š</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">rm</span> -rf u-boot kernel<br><br>git <span class="hljs-built_in">clone</span> https://github.com/u-boot/u-boot.git<br><br>git <span class="hljs-built_in">clone</span> https://github.com/unifreq/linux-6.1.y-rockchip.git<br><br><span class="hljs-built_in">mv</span> linux-6.1.y-rockchip kernel<br></code></pre></td></tr></table></figure>
</li>
<li><p>æ–°å¢ä¸»æ¿ä¿¡æ¯</p>
<p> ä¿®æ”¹rockchip-bsp&#x2F;build&#x2F;board_configs.shæ–‡ä»¶ï¼Œåœ¨é€‚å½“ä½ç½®æ–°å¢ä¸»æ¿é…ç½®ä¿¡æ¯ï¼š</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-string">&quot;rk3328-beikeyun&quot;</span>)<br>    DEFCONFIG=rockchip_linux_defconfig<br>    UBOOT_DEFCONFIG=evb-rk3328_defconfig<br>    DTB=rk3328-beikeyun-1296mhz.dtb<br>    <span class="hljs-built_in">export</span> ARCH=arm64<br>    <span class="hljs-built_in">export</span> CROSS_COMPILE=aarch64-linux-gnu-<br>    CHIP=<span class="hljs-string">&quot;rk3328&quot;</span><br>    ;;<br></code></pre></td></tr></table></figure>

 
    <div class="fold">
      <div class="fold-title fold-info collapsed" data-toggle="collapse" href="#collapse-224da1ac" role="button" aria-expanded="false" aria-controls="collapse-224da1ac">
        <div class="fold-arrow">â–¶</div>å‚æ•°å«ä¹‰
      </div>
      <div class="fold-collapse collapse" id="collapse-224da1ac">
        <div class="fold-content">
          <p><code>DEFCONFIG</code>ï¼škernelé…ç½®æ–‡ä»¶<br><code>UBOOT_DEFCONFIG</code>ï¼šu-booté…ç½®æ–‡ä»¶<br><code>DTB</code>ï¼šè®¾å¤‡æ ‘æ–‡ä»¶<br><code>ARCH</code>ï¼šæ ¸å¿ƒæ¶æ„<br><code>CROSS_COMPILE</code>ï¼šäº¤å‰ç¼–è¯‘å·¥å…·é“¾<br><code>CHIP</code>ï¼šèŠ¯ç‰‡å‹å·</p>
        </div>
      </div>
    </div>
</li>
<li><p>é…ç½®BL31æ–‡ä»¶ç¯å¢ƒ</p>
<p> ä¸‹è½½è¯¥é¡¹ç›®ä¸­çš„<a target="_blank" rel="noopener" href="https://github.com/mrfixit2001/uboot_builder/tree/master/rk3328">rk3328_bl31_v1.39.bin</a>æ–‡ä»¶ï¼Œå°†å…¶æ”¾å…¥è·¯å¾„ï¼šrockchip-bsp&#x2F;rkbin&#x2F;bin&#x2F;rk33&#x2F;ï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤é…ç½®BL31æ–‡ä»¶ç¯å¢ƒï¼š</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">export</span> BL31=/home/dongxun/Desktop/rockchip-linux/radxa/rockchip-bsp/rkbin/bin/rk33/rk3328_bl31_v1.39.bin<br></code></pre></td></tr></table></figure>

<blockquote>
<p>U-Boot éœ€è¦ ARM Trusted Firmware (ATF) çš„ BL31 äºŒè¿›åˆ¶æ–‡ä»¶ä½œä¸ºå®‰å…¨å›ºä»¶ç»„ä»¶æ‰èƒ½ç”Ÿæˆå®Œæ•´å¯ç”¨çš„å¯åŠ¨é•œåƒ</p>
</blockquote>
</li>
<li><p>å¼€å§‹æ„å»º</p>
<p> åˆ‡æ¢åˆ°rockchip-bspç›®å½•æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å¼€å§‹æ„å»ºu-bootï¼š</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">./build/mk-uboot.sh rk3328-beikeyun<br></code></pre></td></tr></table></figure>

<p> ç­‰å¾…æ„å»ºå®Œæˆï¼Œä¼šåœ¨rockchip-bsp&#x2F;out&#x2F;u-bootç›®å½•ç”Ÿæˆ<font color="#008000"> <b>Boot Flow 1</b></font>æ‰€éœ€çš„æ–‡ä»¶ï¼š</p>
 <div class="note note-success">
            <p>.<br>â”œâ”€â”€ idbloader.img<br>â”œâ”€â”€ rk3328_loader_ddr333_v1.16.250.bin<br>â”œâ”€â”€ spi&#x2F;<br>â”œâ”€â”€ trust.img<br>â””â”€â”€ uboot.img</p>
          </div></li>
</ol>

    <div class="fold">
      <div class="fold-title fold-info collapsed" data-toggle="collapse" href="#collapse-90e3b1f3" role="button" aria-expanded="false" aria-controls="collapse-90e3b1f3">
        <div class="fold-arrow">â–¶</div>æ ¹æ®è®¾å¤‡æ ‘è¿›è¡Œæ„å»ºu-boot
      </div>
      <div class="fold-collapse collapse" id="collapse-90e3b1f3">
        <div class="fold-content">
          <p>ä¸Šè¿°é€šç”¨çš„æ„å»ºæ–¹æ³•è¶³çŸ£æ»¡è¶³æ­£å¸¸å¯åŠ¨Linuxç³»ç»Ÿï¼›å¦‚æœæƒ³åœ¨u-booté˜¶æ®µå¯¹è®¾å¤‡å®Œæˆç¡¬ä»¶åˆå§‹åŒ–ä»¥åŠæ‰§è¡Œæ›´å¤šæ“ä½œï¼Œå°±éœ€è¦ä½¿ç”¨å¯¹åº”çš„è®¾å¤‡æ ‘æ„å»ºu-bootï¼Œå±äºé«˜çº§åŠŸèƒ½ã€‚</p><p><font color="#ff0000"> <b>è¯¥æ–¹æ³•åœ¨æœ€æ–°çš„u-booté¡¹ç›®ä¸­æ„å»ºæœªæˆåŠŸâ€¦</b></font></p><p>å°†rk3328-beikeyun-1296mhz.dtsæ–‡ä»¶å¼€å¤´çš„ <strong><code>#include &quot;rk3328.dtsi</code>â€œ</strong> æ”¹ä¸º <strong><code>#include &quot;rk3328-u-boot.dtsi&quot;</code></strong> åæ”¾å…¥è·¯å¾„ï¼šu-boot&#x2F;arch&#x2F;arm&#x2F;dtsä¸­ï¼Œç„¶åä¿®æ”¹è¯¥ç›®å½•ä¸‹çš„MakeFileï¼Œåœ¨é€‚å½“ä½ç½®æ–°å¢ä»¥ä¸‹å†…å®¹ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs bash">dONFIG_ROCKCHIP_RK3328) += \<br>        rk3328-beikeyun-1296mhz.dtb \<br>        rk3328-nanopi-r2s-u-boot.dtb \<br>        rk3328-rock-pi-e-v3.dtb \<br>        rk3328-evb-u-boot.dtb \<br>        rk3328-orangepi-r1-plus-lts-u-boot.dtb \<br>        rk3328-rock-pi-e-v3-u-boot.dtb \<br>        rk3328-generic.dtb \<br>        rk3328-orangepi-r1-plus-u-boot.dtb \<br>        rk3328-sdram-ddr3-666.dtb \<br>        rk3328-generic-u-boot.dtb \<br>        rk3328-roc-cc-u-boot.dtb \<br>        rk3328-sdram-ddr4-666.dtb \<br>        rk3328-nanopi-r2c-plus-u-boot.dtb \<br>        rk3328-rock64-u-boot.dtb \<br>        rk3328-sdram-lpddr3-1600.dtb \<br>        rk3328-nanopi-r2c-u-boot.dtb \<br>        rk3328-rock-pi-e-base-u-boot.dtb \<br>        rk3328-sdram-lpddr3-666.dtb \<br>        rk3328-nanopi-r2s-plus-u-boot.dtb \<br>        rk3328-rock-pi-e-u-boot.dtb \<br>        rk3328-u-boot.dtb<br></code></pre></td></tr></table></figure><p>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤åŠ è½½RK3328é»˜è®¤é…ç½®æ–‡ä»¶åˆ° <strong>.config</strong>ï¼Œå¹¶æŸ¥è¯¢é»˜è®¤è®¾å¤‡æ ‘åç§°åœ¨è¯¥æ–‡ä»¶ä¸­å“ªå‡ ä¸ªè¡Œå‡ºç°è¿‡ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">make CROSS_COMPILE=aarch64-linux-gnu- ARCH=arm evb-rk3328_defconfig<br><br>grep -n <span class="hljs-string">&quot;rk3328-evb&quot;</span> .config<br></code></pre></td></tr></table></figure><div class="note note-info">            <p>212:CONFIG_DEFAULT_DEVICE_TREE&#x3D;â€rockchip&#x2F;rk3328-evbâ€<br>554:CONFIG_DEFAULT_FDT_FILE&#x3D;â€rockchip&#x2F;rk3328-evb.dtbâ€<br>1112:CONFIG_OF_LIST&#x3D;â€rockchip&#x2F;rk3328-evbâ€<br>1116:CONFIG_SPL_OF_LIST&#x3D;â€rockchip&#x2F;rk3328-evbâ€</p>          </div><p>å°†ä¸Šè¿°æŸ¥è¯¢ç»“æœä¸­å‡ºç°rk3328-evbçš„åœ°æ–¹åç§°æ”¹ä¸ºå½“å‰ä¸»æ¿çš„è®¾å¤‡æ ‘åç§°ï¼š</p><div class="note note-success">            <p>212:CONFIG_DEFAULT_DEVICE_TREE&#x3D;â€rockchip&#x2F;rk3328-beikeyun-1296mhzâ€<br>554:CONFIG_DEFAULT_FDT_FILE&#x3D;â€rockchip&#x2F;rk3328-beikeyun-1296mhz.dtbâ€<br>1112:CONFIG_OF_LIST&#x3D;â€rockchip&#x2F;rk3328-beikeyun-1296mhzâ€<br>1116:CONFIG_SPL_OF_LIST&#x3D;â€rockchip&#x2F;rk3328-beikeyun-1296mhzâ€</p>          </div><p>å°†rk3328-beikeyun-1296mhz.dtsæ–‡ä»¶æ”¾å…¥ä»¥ä¸‹è·¯å¾„ï¼šu-boot&#x2F;dts&#x2F;upstream&#x2F;src&#x2F;arm64&#x2F;rockchipï¼Œç„¶åä¿å­˜å½“å‰é…ç½®åˆ°defconfigï¼Œå¹¶å¤åˆ¶åˆ°u-boot&#x2F;configsæ–‡ä»¶å¤¹ä¸­é‡å‘½åï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">nano .config<br><br>make savedefconfig<br><br><span class="hljs-built_in">cp</span> defconfig configs/rk3328_beikeyun_defconfig<br></code></pre></td></tr></table></figure><p>ä¿®æ”¹build&#x2F;board_configs.shæ–‡ä»¶ï¼Œä¿®æ”¹ä¸»æ¿ä¿¡æ¯çš„UBOOTé…ç½®æ–‡ä»¶åï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-string">&quot;rk3328-beikeyun&quot;</span>)<br>    ...<br>    UBOOT_DEFCONFIG=rk3328_beikeyun_defconfig<br>    ...<br></code></pre></td></tr></table></figure><p>åˆ‡æ¢åˆ°rockchip-bspç›®å½•ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤å¼€å§‹æ„å»ºu-bootï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">./build/mk-uboot.sh rk3328-beikeyun<br></code></pre></td></tr></table></figure>
        </div>
      </div>
    </div>

<h5 id="å•ç‹¬æ„å»ºæ–‡ä»¶"><a href="#å•ç‹¬æ„å»ºæ–‡ä»¶" class="headerlink" title="å•ç‹¬æ„å»ºæ–‡ä»¶"></a>å•ç‹¬æ„å»ºæ–‡ä»¶</h5><p>å•ç‹¬æ„å»ºå„æ–‡ä»¶ä½¿ç”¨çš„æºç å¤§éƒ¨åˆ†å‡æ¥è‡ªç‘èŠ¯å¾®å®˜æ–¹Githubä»“åº“ï¼š<a target="_blank" rel="noopener" href="https://github.com/rockchip-linux">rockchip-linux</a>ï¼Œåªæœ‰<a target="_blank" rel="noopener" href="https://github.com/radxa/u-boot/tree/stable-4.4-rockpie">u-boot</a>æºç æ¥è‡ªradxaï¼Œå› ä¸ºå®˜æ–¹u-bootæ„å»ºæ—¶ä¼šæœ‰å„ç§æŠ¥é”™ï¼Œè€Œä¸”æ— æ³•ç”Ÿæˆu-boot-tpl.binæ–‡ä»¶ï¼Œæš‚ä¸æ¸…æ¥šå…·ä½“åŸå› ã€‚<sup id="fnref:1" class="footnote-ref"><a href="#fn:1" rel="footnote"><span class="hint--top hint--rounded" aria-label="[ Boot option ](https://opensource.rock-chips.com/wiki_Boot_option)">[1]</span></a></sup></p>
<h6 id="loader1-idbloader-img-miniloader"><a href="#loader1-idbloader-img-miniloader" class="headerlink" title="loader1 - idbloader.img(miniloader)"></a>loader1 - idbloader.img(miniloader)</h6><p><strong>idbloader.img(miniloader)</strong> ç”±2ä¸ªæ–‡ä»¶ç»„æˆï¼šddr.bin + miniloader.binï¼Œå‡ç”±ç‘èŠ¯å¾®å®˜æ–¹æä¾›ï¼Œè€Œè¿™2ä¸ªæ–‡ä»¶éƒ½ä¿å­˜åœ¨<a target="_blank" rel="noopener" href="https://github.com/rockchip-linux/rkbin">rkbinä»“åº“</a>ä¸­ï¼Œé¦–å…ˆå°†ä»“åº“å…‹éš†åˆ°æœ¬åœ°ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">git <span class="hljs-built_in">clone</span> https://github.com/rockchip-linux/rkbin<br></code></pre></td></tr></table></figure>

<p>å¯¹äºRK3328è€Œè¨€ï¼Œåœ¨rkbin&#x2F;bin&#x2F;rk33ç›®å½•ä¸­æ²¡æœ‰æä¾›rk3328_miniloader_vx.xx.binæ–‡ä»¶ï¼Œä¸è¿‡æˆ‘å‘ç°äº†ä¸€ä¸ªGithubä»“åº“ï¼š<a target="_blank" rel="noopener" href="https://github.com/mrfixit2001/uboot_builder/tree/master">uboot_builder</a>ï¼Œé‡Œé¢æœ‰é€‚ç”¨äºRK3328èŠ¯ç‰‡çš„miniloaderæ–‡ä»¶ï¼ˆæœ¬æ¬¡æ“ä½œæš‚æœªä½¿ç”¨ï¼‰ã€‚</p>
<p>é€šè¿‡æŸ¥çœ‹rkbin&#x2F;RKBOOT&#x2F;RK3328MINIALL.inié…ç½®ä¿¡æ¯å¾—çŸ¥å¯ä½¿ç”¨ï¼šrk322xh_miniloader_v2.50.binï¼Œè·¯å¾„å¦‚ä¸‹ï¼šrkbin&#x2F;bin&#x2F;rk33&#x2F;rk322xh_miniloader_v2.50.binï¼Œåœ¨rkbinæ ¹ç›®å½•æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">tools/mkimage -n rk3328 -T rksd -d /home/dongxun/Desktop/rockchip-linux/rkbin/bin/rk33/rk3328_ddr_333MHz_v1.21.bin idbloader.img<br><br><span class="hljs-built_in">cat</span> /home/dongxun/Desktop/rockchip-linux/rkbin/bin/rk33/rk322xh_miniloader_v2.50.bin &gt;&gt; idbloader.img<br></code></pre></td></tr></table></figure>


    <div class="fold">
      <div class="fold-title fold-info collapsed" data-toggle="collapse" href="#collapse-75acd6a6" role="button" aria-expanded="false" aria-controls="collapse-75acd6a6">
        <div class="fold-arrow">â–¶</div>å‚æ•°å«ä¹‰
      </div>
      <div class="fold-collapse collapse" id="collapse-75acd6a6">
        <div class="fold-content">
          <p><code>-n</code> &#x3D;&#x3D;&gt; set image name to â€˜nameâ€™ ï¼šæŒ‡å®šé•œåƒåç§°ï¼Œä¸€èˆ¬æ˜¯èŠ¯ç‰‡å‹å·æˆ–è€…ä¸»æ¿å‹å·<br><code>-T</code> &#x3D;&#x3D;&gt; set image type to â€˜typeâ€™ ï¼šæŒ‡å®šé•œåƒç±»å‹ï¼Œå¯ä»¥è¾“å…¥tools&#x2F;mkimage -T listæŸ¥çœ‹æ›´å¤šç±»å‹ï¼Œè¿™é‡Œä½¿ç”¨çš„ç±»å‹ä¸ºï¼šrksd : Rockchip SD Boot Image<br><code>-d</code> &#x3D;&#x3D;&gt; use image data from â€˜datafileâ€™ ï¼šä½¿ç”¨çš„äºŒè¿›åˆ¶æ•°æ®æ–‡ä»¶ï¼Œè¿™é‡Œä½¿ç”¨å¯¹åº”èŠ¯ç‰‡çš„rkxx_ddr_vx.xx.binäºŒè¿›åˆ¶æ–‡ä»¶<br><code>rkxx_miniloader_vx.xx.bin</code> ï¼šå¯¹åº”èŠ¯ç‰‡miniloaderäºŒè¿›åˆ¶æ–‡ä»¶</p>
        </div>
      </div>
    </div>

<div class="note note-info">
            <p>çƒ§å½•åœ°å€ï¼šAddressï¼š<code>0x00000040</code>ï¼ŒNameï¼š<code>loader1</code>ã€‚</p>
          </div>

<h6 id="loader1-idbloader-img-TPL-SPL"><a href="#loader1-idbloader-img-TPL-SPL" class="headerlink" title="loader1 - idbloader.img(TPL&#x2F;SPL)"></a>loader1 - idbloader.img(TPL&#x2F;SPL)</h6><p><strong>idbloader.img(TPL&#x2F;SPL)</strong> ç”±2ä¸ªæ–‡ä»¶ç»„æˆï¼šu-boot-tpl.bin + u-boot-spl.binï¼Œåœ¨æ„å»ºu-booté¡¹ç›®æ—¶ä¼šè‡ªåŠ¨ç”Ÿæˆï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ“ä½œè¿›è¡Œæ‰‹åŠ¨ç”Ÿæˆã€‚</p>
<p>è¿›å…¥u-bootç›®å½•ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤å¼€å§‹é…ç½®u-bootç„¶åå¼€å§‹æ„å»ºï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">make CROSS_COMPILE=aarch64-linux-gnu- ARCH=arm evb-rk3328_defconfig<br><br>make menuconfig<br><br>make CROSS_COMPILE=aarch64-linux-gnu- ARCH=arm -j$(<span class="hljs-built_in">nproc</span>)<br></code></pre></td></tr></table></figure>

<p>ç­‰å¾…æ„å»ºå®Œæˆï¼Œä¼šåœ¨u-bootæ ¹ç›®å½•ä¸‹ç”Ÿæˆä»¥<code>u-boot</code>åç§°å¼€å¤´çš„ä¸€ç³»åˆ—æ–‡ä»¶ï¼Œä»¥åŠ2ä¸ªæ ¸å¿ƒæ–‡ä»¶ï¼š<code>spl/u-boot-spl.bin</code>ã€<code>tpl/u-boot-tpl.bin</code>ã€‚</p>
<p>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å³å¯å¾—åˆ°idbloader.img(TPL&#x2F;SPL)ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">tools/mkimage -n rk3328 -T rksd -d tpl/u-boot-tpl.bin idbloader.img<br><span class="hljs-built_in">cat</span> spl/u-boot-spl.bin &gt;&gt; idbloader.img<br></code></pre></td></tr></table></figure>


    <div class="fold">
      <div class="fold-title fold-info collapsed" data-toggle="collapse" href="#collapse-069981d2" role="button" aria-expanded="false" aria-controls="collapse-069981d2">
        <div class="fold-arrow">â–¶</div>å‚æ•°å«ä¹‰
      </div>
      <div class="fold-collapse collapse" id="collapse-069981d2">
        <div class="fold-content">
          <p><code>-n</code> &#x3D;&#x3D;&gt; set image name to â€˜nameâ€™ ï¼šæŒ‡å®šé•œåƒåç§°ï¼Œä¸€èˆ¬æ˜¯èŠ¯ç‰‡å‹å·æˆ–è€…ä¸»æ¿å‹å·<br><code>-T</code> &#x3D;&#x3D;&gt; set image type to â€˜typeâ€™ ï¼šæŒ‡å®šé•œåƒç±»å‹ï¼Œå¯ä»¥è¾“å…¥tools&#x2F;mkimage -T listæŸ¥çœ‹æ›´å¤šç±»å‹ï¼Œè¿™é‡Œä½¿ç”¨çš„ç±»å‹ä¸ºï¼šrksd : Rockchip SD Boot Image<br><code>-d</code> &#x3D;&#x3D;&gt; use image data from â€˜datafileâ€™ ï¼šä½¿ç”¨çš„äºŒè¿›åˆ¶æ•°æ®æ–‡ä»¶ï¼Œè¿™é‡Œä½¿ç”¨u-bootæ„å»ºç”Ÿæˆçš„u-boot-tpl.binäºŒè¿›åˆ¶æ–‡ä»¶<br><code>u-boot-spl.bin.bin</code> ï¼šè¿™é‡Œä½¿ç”¨u-bootæ„å»ºç”Ÿæˆçš„u-boot-spl.binäºŒè¿›åˆ¶æ–‡ä»¶</p>
        </div>
      </div>
    </div>

<div class="note note-info">
            <p>çƒ§å½•åœ°å€ï¼šAddressï¼š<code>0x00000040</code>ï¼ŒNameï¼š<code>loader1</code>ã€‚</p>
          </div>

<h3 id="loader2"><a href="#loader2" class="headerlink" title="loader2"></a>loader2</h3><h4 id="Boot-Flow-2"><a href="#Boot-Flow-2" class="headerlink" title="Boot Flow 2"></a>Boot Flow 2</h4><h5 id="å•ç‹¬æ„å»ºæ–‡ä»¶-1"><a href="#å•ç‹¬æ„å»ºæ–‡ä»¶-1" class="headerlink" title="å•ç‹¬æ„å»ºæ–‡ä»¶"></a>å•ç‹¬æ„å»ºæ–‡ä»¶</h5><h6 id="loader2-uboot-img"><a href="#loader2-uboot-img" class="headerlink" title="loader2 - uboot.img"></a>loader2 - uboot.img</h6><p><strong>uboot.img</strong> éœ€è¦ä½¿ç”¨u-bootå’Œrkbinä¸¤ä¸ªé¡¹ç›®çš„æ–‡ä»¶ï¼Œå…ˆå…‹éš†u-bootä»“åº“ï¼Œç„¶åå°†rkbinä»“åº“çš„æ–‡ä»¶å…¨éƒ¨å¤åˆ¶åˆ°u-bootä¸­ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">git <span class="hljs-built_in">clone</span> -b stable-4.4-rockpie https://github.com/radxa/u-boot.git<br><br><span class="hljs-built_in">cp</span> -r rkbin/* u-boot/<br></code></pre></td></tr></table></figure>

<div class="note note-warning">
            <p><font color="#ff0000"><b>éœ€è¦ä¿®æ”¹scripts&#x2F;dtc&#x2F;dtc-lexer.læ–‡ä»¶ï¼Œå°†<code>YYLTYPE yylloc;</code>æ”¹ä¸º<code>extern YYLTYPE yylloc;</code>ï¼Œå¦åˆ™åç»­æ„å»ºä¼šæŠ¥é”™ï¼šmultiple definition of &#96;yyllocâ€™</b></font></p>
          </div>

<p>åœ¨u-booté¡¹ç›®ä¸­ï¼Œå·²ç»åŒ…å«å„ç§èŠ¯ç‰‡çš„u-bootç¤ºä¾‹é…ç½®æ–‡ä»¶ï¼Œå­˜æ”¾è·¯å¾„ä¸ºï¼šu-boot&#x2F;configs&#x2F;ï¼Œå¯¹äºRK3328ï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åŠ è½½é»˜è®¤é…ç½®å¹¶å¼€å§‹æ„å»ºï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">make CROSS_COMPILE=aarch64-linux-gnu- ARCH=arm evb-rk3328_defconfig<br><br>make menuconfig<br><br>make CROSS_COMPILE=aarch64-linux-gnu- ARCH=arm -j$(<span class="hljs-built_in">nproc</span>)<br></code></pre></td></tr></table></figure>

<p>ç­‰å¾…æ„å»ºå®Œæˆï¼Œä¼šåœ¨æ ¹ç›®å½•ä¸‹ç”Ÿæˆä»¥<code>u-boot</code>åç§°å¼€å¤´çš„ä¸€ç³»åˆ—æ–‡ä»¶ï¼Œå¯¹äº<font color="#008000"><b>Boot Flow 1</b></font>ï¼Œè¿˜éœ€å°†ç”Ÿæˆçš„u-boot.binè½¬æ¢æˆminiloaderå¯è¯†åˆ«æ–‡ä»¶uboot.imgæ‰èƒ½çƒ§å½•åˆ°ä¸»æ¿ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤å³å¯ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">tools/loaderimage --pack --uboot u-boot.bin uboot.img<br></code></pre></td></tr></table></figure>

<div class="note note-info">
            <p>çƒ§å½•åœ°å€ï¼šAddressï¼š<code>0x00004000</code>ï¼ŒNameï¼š<code>loader2</code>ã€‚</p>
          </div>

<h6 id="loader2-u-boot-itb"><a href="#loader2-u-boot-itb" class="headerlink" title="loader2 - u-boot.itb"></a>loader2 - u-boot.itb</h6><p><strong>u-boot.itb</strong> ç”±bl31.elf, u-boot-nodtb.bin, u-boot.dtbæ–‡ä»¶ç»„æˆï¼Œç¬¬ä¸€ä¸ªæ–‡ä»¶å¯ä»¥ä¸‹è½½è¯¥é¡¹ç›®ä¸­çš„<a target="_blank" rel="noopener" href="https://github.com/mrfixit2001/uboot_builder/blob/master/rk3328">rk3328&#x2F;rk3328_bl31_v1.42.elf</a>æ–‡ä»¶ï¼Œå2ä¸ªæ–‡ä»¶å‡æ˜¯u-booté¡¹ç›®æ„å»ºæ—¶ç”Ÿæˆçš„ï¼Œå°†è¿™3ä¸ªæ–‡ä»¶æ”¾å…¥u-bootæ ¹ç›®å½•ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤å¼€å§‹æ„å»ºï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">mv</span> rk3328/rk3328_bl31_v1.42.elf bl31.elf<br><br>make CROSS_COMPILE=aarch64-linux-gnu- ARCH=arm u-boot.itb<br></code></pre></td></tr></table></figure>

<div class="note note-info">
            <p>çƒ§å½•åœ°å€ï¼šAddressï¼š<code>0x00004000</code>ï¼ŒNameï¼š<code>loader2</code>ã€‚</p>
          </div>

<h3 id="trust"><a href="#trust" class="headerlink" title="trust"></a>trust</h3><p>è¿›å…¥rkbinç›®å½•ï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼Œé€šè¿‡rkbin&#x2F;RKTRUSRT&#x2F;ç›®å½•ä¸­å¯¹åº”èŠ¯ç‰‡çš„é…ç½®æ–‡ä»¶æ¥ç”Ÿæˆtrust.imgï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">tools/trust_merger /home/dongxun/Desktop/rockchip-linux/rkbin/RKTRUST/RK3328TRUST.ini<br></code></pre></td></tr></table></figure>

<div class="note note-info">
            <p>çƒ§å½•åœ°å€ï¼šAddressï¼š<code>0x00006000</code>ï¼ŒNameï¼š<code>atf</code>ã€‚</p>
          </div>

<h3 id="kernel"><a href="#kernel" class="headerlink" title="kernel"></a>kernel</h3><h4 id="ç‘èŠ¯å¾®kernel"><a href="#ç‘èŠ¯å¾®kernel" class="headerlink" title="ç‘èŠ¯å¾®kernel"></a>ç‘èŠ¯å¾®kernel</h4><p>é¦–å…ˆå…‹éš†å®˜æ–¹kernelæºç ï¼š<sup id="fnref:4" class="footnote-ref"><a href="#fn:4" rel="footnote"><span class="hint--top hint--rounded" aria-label="[Rockchip Kernel ](https://opensource.rock-chips.com/wiki_Rockchip_Kernel#Install_Boot.2Fkernel)">[4]</span></a></sup></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">git <span class="hljs-built_in">clone</span> -b develop-6.1 https://github.com/rockchip-linux/kernel.git<br></code></pre></td></tr></table></figure>

<p>ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹å½“å‰é¡¹ç›®æ˜¯å¦ä¸º<code>develop-6.1</code>åˆ†æ”¯ï¼Œé»˜è®¤ä¸º<code>develop-4.4</code>åˆ†æ”¯ï¼Œåç»­æ„å»ºæ—¶ä¼šæŠ¥é”™ï¼Œæš‚ä¸æ¸…æ¥šå…·ä½“åŸå› ï¼›</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">git branch -a<br></code></pre></td></tr></table></figure>

<p>åœ¨kernelé¡¹ç›®ä¸­ï¼Œå·²ç»åŒ…å«å„èŠ¯ç‰‡çš„kernelç¤ºä¾‹é…ç½®æ–‡ä»¶ï¼Œç¨ä½œä¿®æ”¹å³å¯è¿›è¡Œä½¿ç”¨ï¼Œå¯¹äºRK3328è€Œè¨€ï¼Œå…¶èŠ¯ç‰‡æ¶æ„ä¸º<strong>arm64</strong>ï¼Œå¯¹åº”çš„ç¤ºä¾‹é…ç½®æ–‡ä»¶è·¯å¾„ä¸ºï¼škernel&#x2F;arch&#x2F;arm64&#x2F;configsï¼Œä½†æ˜¯è¯¥è·¯å¾„ä¸‹æ²¡æœ‰RK3328ä¸“å±çš„ç¤ºä¾‹é…ç½®æ–‡ä»¶ï¼Œæ‰€ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åŠ è½½é€šç”¨é…ç½®åˆ° <strong>.config</strong>æ–‡ä»¶ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">make ARCH=arm64 CROSS_COMPILE=aarch64-linux-gnu- rockchip_linux_defconfig<br></code></pre></td></tr></table></figure>

<p>å°†rk3328-beikeyun-1296mhz.dtsæ”¾å…¥ä»¥ä¸‹è·¯å¾„ï¼škernel&#x2F;arch&#x2F;arm64&#x2F;boot&#x2F;dts&#x2F;rockchipï¼Œç„¶åä¿®æ”¹è¯¥ç›®å½•ä¸‹çš„MakeFileï¼Œåœ¨é€‚å½“ä½ç½®æ–°å¢ä¸€è¡Œå¡«å…¥ä»¥ä¸‹å†…å®¹ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">dtb-$(CONFIG_ARCH_ROCKCHIP) += rk3328-beikeyun-1296mhz.dtb<br></code></pre></td></tr></table></figure>

<p>åˆ‡æ¢åˆ°kernelæ ¹ç›®å½•ï¼Œå¼€å§‹ç¼–è¯‘å®˜æ–¹kernelæ–‡ä»¶ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">make ARCH=arm64 CROSS_COMPILE=aarch64-linux-gnu- -j$(<span class="hljs-built_in">nproc</span>)<br></code></pre></td></tr></table></figure>

<p>ç­‰å¾…ç¼–è¯‘å®Œæˆï¼Œä¼šç”Ÿæˆä»¥ä¸‹æ–‡ä»¶ï¼š</p>
<div class="note note-success">
            <p>OBJCOPY arch&#x2F;arm64&#x2F;boot&#x2F;Image<br>GZIP    arch&#x2F;arm64&#x2F;boot&#x2F;Image.gz</p>
          </div>

<blockquote>
<p>å¯¹äº32ä½æ¶æ„çš„æ ¸å¿ƒï¼Œç¼–è¯‘æ—¶ä¼šç”ŸæˆzImageæ–‡ä»¶<br>å¯¹äº64ä½æ¶æ„çš„æ ¸å¿ƒï¼Œç¼–è¯‘ä¼šç”ŸæˆImageæ–‡ä»¶</p>
</blockquote>
<p>æ ¹æ®å¯¹åº”è®¾å¤‡æ ‘ç¼–è¯‘boot.imgæ–‡ä»¶ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">make rk3328-beikeyun-1296mhz.img -j$(<span class="hljs-built_in">nproc</span>)<br></code></pre></td></tr></table></figure>

<p>ç­‰å¾…ç¼–è¯‘å®Œæˆï¼Œä¼šç”Ÿæˆä»¥ä¸‹æ–‡ä»¶ï¼š</p>
<div class="note note-success">
            <p>Image:  resource.img (with rk3328-beikeyun-1296mhz.dtb logo.bmp logo_kernel.bmp) is ready<br>Image:  boot.img (with Image  resource.img) is ready<br>Image:  zboot.img (with Image.lz4  resource.img) is ready</p>
          </div>

<p>ç”Ÿæˆçš„ä¸Šè¿°æ–‡ä»¶éƒ½æ˜¯ç‹¬ç«‹å­˜åœ¨çš„ï¼Œæ— æ³•çƒ§å½•åˆ°ä¸»æ¿ï¼Œè¿˜éœ€è¦æ ¹æ®è®¾å¤‡æ ‘äºŒè¿›åˆ¶æ–‡ä»¶ä»¥åŠextlinux.confæ–‡ä»¶æ‰“åŒ…æˆboot.imgæ‰è¡Œï¼Œä¾æ¬¡æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">mkdir</span> boot<br><br><span class="hljs-built_in">cp</span> <span class="hljs-built_in">arch</span>/arm64/boot/dts/rockchip/rk3328-beikeyun-1296mhz.dtb boot/rk3328.dtb<br><br><span class="hljs-built_in">cp</span> <span class="hljs-built_in">arch</span>/arm64/boot/Image boot/<br><br><span class="hljs-built_in">mkdir</span> boot/extlinux<br><br>wget http://opensource.rock-chips.com/images/6/60/Boot_extlinux.zip<br><br>unzip Boot_extlinux.zip boot/extlinux<br><br>nano boot/extlinux/extlinux.conf<br><br><span class="hljs-built_in">dd</span> <span class="hljs-keyword">if</span>=/dev/zero of=boot.img bs=1M count=32<br><br><span class="hljs-built_in">sudo</span> mkfs.fat boot.img<br><br><span class="hljs-built_in">mkdir</span> tmp<br><br><span class="hljs-built_in">sudo</span> mount boot.img tmp/<br><br><span class="hljs-built_in">cp</span> -r boot/* tmp/<br><br>umount tmp<br></code></pre></td></tr></table></figure>

<p>extlinux.confæ–‡ä»¶éœ€è¦æ ¹æ®å¯¹åº”èŠ¯ç‰‡è¿›è¡Œä¿®æ”¹ï¼šè®¾å¤‡æ ‘æ–‡ä»¶åã€è°ƒè¯•UARTçš„åŸºåœ°å€ã€ä¸»æ¿çš„æ ¹åˆ†åŒºç­‰ä¿¡æ¯ï¼Œå¦åˆ™å¯èƒ½æ— æ³•æ­£å¸¸å¯åŠ¨ã€‚<sup id="fnref:5" class="footnote-ref"><a href="#fn:5" rel="footnote"><span class="hint--top hint--rounded" aria-label="[ Partitions ](https://opensource.rock-chips.com/wiki_Partitions)">[5]</span></a></sup></p>
<p>ç»è¿‡ä¸Šè¿°æ“ä½œï¼Œboot.imgæ–‡ä»¶æ‰å¯ä»¥çƒ§å½•åˆ°ä¸»æ¿çš„kernelåˆ†åŒºã€‚</p>
<div class="note note-info">
            <p>çƒ§å½•åœ°å€ï¼šAddressï¼š<code>0x00008000</code>ï¼ŒNameï¼š<code>boot</code>ã€‚</p>
          </div>

<h4 id="æœ€æ–°ç‰ˆkernel"><a href="#æœ€æ–°ç‰ˆkernel" class="headerlink" title="æœ€æ–°ç‰ˆkernel"></a>æœ€æ–°ç‰ˆkernel</h4><h5 id="ä½¿ç”¨æ„å»ºå·¥å…·-1"><a href="#ä½¿ç”¨æ„å»ºå·¥å…·-1" class="headerlink" title="ä½¿ç”¨æ„å»ºå·¥å…·"></a>ä½¿ç”¨æ„å»ºå·¥å…·</h5><p>è¯·å…ˆå®Œæˆæœ¬æ–‡ç« ç›®å½•ï¼šæ„å»ºæ–‡ä»¶ -&gt; loader1 -&gt; Boot Flow 1 -&gt; ä½¿ç”¨æ„å»ºå·¥å…· çš„ç›¸å…³æ“ä½œåŠé…ç½®ã€‚</p>
<p>é¦–å…ˆéœ€è¦é…ç½®kernelä¸­ç”¨åˆ°çš„è®¾å¤‡æ ‘æ–‡ä»¶ï¼Œå°†rk3328-beikeyun-1296mhz.dtsæ–‡ä»¶æ”¾å…¥ä»¥ä¸‹è·¯å¾„ï¼škernel&#x2F;arch&#x2F;arm64&#x2F;boot&#x2F;dts&#x2F;rockchipï¼Œç„¶åä¿®æ”¹è¯¥ç›®å½•ä¸‹çš„MakeFileï¼Œåœ¨é€‚å½“ä½ç½®æ–°å¢ä»¥ä¸‹å†…å®¹ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">dtb-$(CONFIG_ARCH_ROCKCHIP) += rk3328-beikeyun-1296mhz.dtb<br></code></pre></td></tr></table></figure>

<p>åˆ‡æ¢åˆ°rockchip-bspæ ¹ç›®å½•ï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å¼€å§‹æ„å»ºkernelï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">./build/mk-kernel.sh rk3328-beikeyun<br></code></pre></td></tr></table></figure>

<p>ç­‰å¾…æ„å»ºå®Œæˆï¼Œä¼šåœ¨rockchip-bsp&#x2F;out&#x2F;kernelç›®å½•ç”Ÿæˆæ‰€éœ€çš„æ–‡ä»¶ï¼š</p>
<div class="note note-success">
            <p>.<br>â”œâ”€â”€ boot.img<br>â”œâ”€â”€ kernel<br>â”‚Â Â  â”œâ”€â”€ Image<br>â”‚Â Â  â””â”€â”€ rk3328-beikeyun-1296mhz.dtb</p>
          </div>

<div class="note note-info">
            <p>çƒ§å½•åœ°å€ï¼šAddressï¼š<code>0x00008000</code>ï¼ŒNameï¼š<code>boot</code>ã€‚</p>
          </div>

<h5 id="å•ç‹¬æ„å»ºKernel"><a href="#å•ç‹¬æ„å»ºKernel" class="headerlink" title="å•ç‹¬æ„å»ºKernel"></a>å•ç‹¬æ„å»ºKernel</h5><p>æœ¬æ¬¡æ„å»ºä½¿ç”¨å®˜æ–¹Linux Kernelï¼š<a target="_blank" rel="noopener" href="https://www.kernel.org/">The Linux Kernel Archives</a>ã€‚</p>
<div class="note note-danger">
            <p><font color="#ff0000"> <b>âš å®˜æ–¹æœ€æ–°å†…æ ¸ä¸ä¸€å®šé€‚é…å½“å‰èŠ¯ç‰‡ï¼Œç”šè‡³å¯èƒ½é€ æˆä¸å…¼å®¹ç­‰åæœï¼Œè¯·æ…é‡æ“ä½œï¼</b></font></p>
          </div>

<p>ä¸‹è½½Linux 6.15.5å†…æ ¸æºç å¹¶è§£å‹ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">wget https://cdn.kernel.org/pub/linux/kernel/v6.x/linux-6.15.5.tar.xz<br><br>tar -xf linux-6.15.5.tar.xz<br></code></pre></td></tr></table></figure>

<p>åœ¨Linuxå®˜æ–¹å†…æ ¸ä¸­ï¼Œå¹¶ä¸åŒ…å«ç‘èŠ¯å¾®èŠ¯ç‰‡çš„é…ç½®æ–‡ä»¶ï¼Œéœ€è¦ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ä»ç‘èŠ¯å¾®å®˜æ–¹kernelä¸­å¤åˆ¶ä¸€ä»½é€šç”¨é…ç½®æ–‡ä»¶åˆ°æœ€æ–°çš„Linuxå†…æ ¸ä¸­ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cp</span> ~/Desktop/rockchip-linux/kernel/arch/arm64/configsrockchip_linux_defconfig ~/Desktop/linux-kernel/linux-6.15.5/arch/arm64/configs/rockchip_linux_defconfig<br></code></pre></td></tr></table></figure>

<p>è¿˜éœ€é…ç½®è®¾å¤‡æ ‘æ–‡ä»¶ï¼Œå…ˆå°†<a target="_blank" rel="noopener" href="https://github.com/unifreq/linux-6.1.y-rockchip/blob/main/arch/arm64/boot/dts/rockchip/rk3328.dtsi">rk3328.dtsi</a>æ–‡ä»¶ä¸‹è½½ä¸‹æ¥ï¼Œå’Œrk3328-beikeyun-1296mhz.dtsæ–‡ä»¶ä¸€èµ·æ”¾å…¥ä»¥ä¸‹è·¯å¾„ï¼šlinux-6.15.5&#x2F;arch&#x2F;arm64&#x2F;boot&#x2F;dts&#x2F;rockchip&#x2F;ï¼Œç„¶åä¿®æ”¹è¯¥ç›®å½•ä¸‹çš„MakeFileï¼Œåœ¨é€‚å½“ä½ç½®æ–°å¢ä»¥ä¸‹å†…å®¹ï¼š</p>
<blockquote>
<p>å¦‚æœä¸ä½¿ç”¨unifreqä»“åº“çš„rk3328.dtsiæ–‡ä»¶ï¼Œåç»­æ„å»ºä¼šæŠ¥é”™ã€‚</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">dtb-$(CONFIG_ARCH_ROCKCHIP) += rk3328-beikeyun-1296mhz.dtb<br></code></pre></td></tr></table></figure>

<p>è¿›å…¥linux-6.15.5ç›®å½•ï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤é…ç½®æ„å»ºç¯å¢ƒï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">export</span> ARCH=arm64<br><br><span class="hljs-built_in">export</span> CROSS_COMPILE=aarch64-linux-gnu-<br></code></pre></td></tr></table></figure>

<p>ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åŠ è½½é€šç”¨é…ç½®åˆ° <strong>.config</strong>æ–‡ä»¶ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">make ARCH=arm64 CROSS_COMPILE=aarch64-linux-gnu- rockchip_linux_defconfig<br></code></pre></td></tr></table></figure>

<p>æ ¹æ®éœ€æ±‚ä¿®æ”¹é»˜è®¤é…ç½®å¹¶ä¿å­˜é€€å‡ºï¼Œç„¶åå¼€å§‹æ„å»ºkernelï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">make menuconfig<br><br>make -j$(<span class="hljs-built_in">nproc</span>)<br></code></pre></td></tr></table></figure>

<p>ç­‰å¾…æ„å»ºå®Œæˆï¼Œå¯çœ‹åˆ°ä»¥ä¸‹ä¿¡æ¯ï¼Œå…¶ä¸­Imageå°±æ˜¯éœ€è¦çš„æ–‡ä»¶ï¼Œä½†æ˜¯è¿˜éœ€è¦è¿›ä¸€æ­¥å¤„ç†æ‰èƒ½ç”Ÿæˆboot.imgã€‚</p>
<div class="note note-success">
            <p>SORTTAB vmlinux<br>OBJCOPY arch&#x2F;arm64&#x2F;boot&#x2F;Image<br>GZIP    arch&#x2F;arm64&#x2F;boot&#x2F;Image.gz</p>
          </div>

<p>åˆ‡æ¢åˆ°kernelä¸Šä¸€çº§ç›®å½•æ–°å»ºä¸€ä¸ª3328æ–‡ä»¶å¤¹ï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ‰“åŒ…kernel-dtbæ–‡ä»¶ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">mkdir</span> 3328<br><br><span class="hljs-built_in">cd</span> 3328<br><br><span class="hljs-built_in">cat</span> ../linux-6.15.5/arch/arm64/boot/Image ../linux-6.15.5/arch/arm64/boot/dts/rockchip/rk3328-beikeyun-1296mhz.dtb &gt; kernel-dtb<br></code></pre></td></tr></table></figure>

<p>å…‹éš†rockchip-mkbootimgé¡¹ç›®å¹¶ç¼–è¯‘ç›¸å…³å·¥å…·ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs bash">git <span class="hljs-built_in">clone</span> https://github.com/neo-technologies/rockchip-mkbootimg.git<br><br><span class="hljs-built_in">sudo</span> apt-get install libssl-dev<br><br><span class="hljs-built_in">cd</span> rockchip-mkbootimg<br><br>make<br><br><span class="hljs-built_in">sudo</span> make install<br></code></pre></td></tr></table></figure>

<p>åœ¨3328ç›®å½•æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ç”Ÿæˆboot.imgï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">mkbootimg --kernel kernel-dtb -o boot.img<br></code></pre></td></tr></table></figure>

<div class="note note-info">
            <p>çƒ§å½•åœ°å€ï¼šAddressï¼š<code>0x00008000</code>ï¼ŒNameï¼š<code>boot</code>ã€‚</p>
          </div>

<h3 id="rootfs"><a href="#rootfs" class="headerlink" title="rootfs"></a>rootfs</h3><p>ä¸€èˆ¬ç®€ç§°æ ¹æ–‡ä»¶ç³»ç»Ÿã€‚</p>
<h4 id="ä½¿ç”¨ç°æœ‰rootfs"><a href="#ä½¿ç”¨ç°æœ‰rootfs" class="headerlink" title="ä½¿ç”¨ç°æœ‰rootfs"></a>ä½¿ç”¨ç°æœ‰rootfs</h4><p>å¯æŸ¥çœ‹<a target="_blank" rel="noopener" href="https://mirrors.cernet.edu.cn/list">æ ¡å›­ç½‘è”åˆé•œåƒç«™</a>ï¼Œ<a target="_blank" rel="noopener" href="https://mirrors.tuna.tsinghua.edu.cn/">æ¸…åå¤§å­¦å¼€æºè½¯ä»¶é•œåƒç«™</a>è·å–æ›´å¤šç³»ç»Ÿé•œåƒæºç æ–‡ä»¶ï¼Œä»¥ä¸‹åªåˆ—å‡ºéƒ¨åˆ†Linuxé•œåƒæºç ä¸‹è½½åœ°å€ï¼š</p>
<p>Armbianï¼š<a target="_blank" rel="noopener" href="https://rsync.armbian.com/apt/dists/">Index of &#x2F;apt&#x2F;dists&#x2F;</a><br>Debianï¼š<a target="_blank" rel="noopener" href="https://images.linuxcontainers.org/">Image server for Incus and LXC</a><br>Ubuntuï¼š<a target="_blank" rel="noopener" href="https://cdimage.ubuntu.com/ubuntu-base/releases/">Index of &#x2F;ubuntu-base&#x2F;releases</a></p>
<blockquote>
<p>éœ€è¦æ ¹æ®èŠ¯ç‰‡æ¶æ„é€‰æ‹©åˆé€‚çš„ç‰ˆæœ¬</p>
</blockquote>
<p>ä»¥ä¸‹æ“ä½œä½¿ç”¨çš„Linuxé•œåƒæºç æ–‡ä»¶ä¸ºï¼šubuntu-base-22.04-base-arm64.tar.gz <sup id="fnref:6" class="footnote-ref"><a href="#fn:6" rel="footnote"><span class="hint--top hint--rounded" aria-label="[ åˆ›å»º Ubuntu æ ¹æ–‡ä»¶ç³»ç»Ÿ ](https://wiki.t-firefly.com/zh_CN/ROC-RK3328-PC/linux_build_ubuntu_rootfs.html)">[6]</span></a></sup></p>
<p>é…ç½®æ ¹æ–‡ä»¶ç³»ç»Ÿï¼š</p>
<ol>
<li><p>å®‰è£…qemu</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> apt-get install qemu-user-static<br></code></pre></td></tr></table></figure>
</li>
<li><p>åˆ›å»ºä¸´æ—¶æ–‡ä»¶å¤¹å¹¶å°†ä¸‹è½½çš„é•œåƒæºç æ–‡ä»¶è§£å‹åˆ°å…¶ä¸­</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">mkdir</span> temp<br><br><span class="hljs-built_in">sudo</span> tar -zxvf ubuntu-base-22.04-base-arm64.tar.gz -C temp<br></code></pre></td></tr></table></figure>

 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> tar -xvf rootfs.tar.xz -C temp<br></code></pre></td></tr></table></figure>
</li>
<li><p>å‡†å¤‡ç½‘ç»œå·¥ä½œ</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> <span class="hljs-built_in">cp</span> -b /etc/resolv.conf temp/etc/resolv.conf<br></code></pre></td></tr></table></figure>
</li>
<li><p>å‡†å¤‡qemu</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> <span class="hljs-built_in">cp</span> /usr/bin/qemu-aarch64-static temp/usr/bin/<br></code></pre></td></tr></table></figure>
</li>
<li><p>æŒ‚è½½ä¸»æœº&#x2F;dev</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> mount --<span class="hljs-built_in">bind</span> /dev /home/dongxun/Desktop/temp/dev<br></code></pre></td></tr></table></figure>

<blockquote>
<p>å¦‚æœä¸æ‰§è¡Œè¯¥æ“ä½œï¼Œåç»­apt updateä¼šæœ‰æŠ¥é”™ï¼š&#x2F;usr&#x2F;bin&#x2F;apt-key: 95: cannot create &#x2F;dev&#x2F;null: Permission denied</p>
</blockquote>
</li>
<li><p>è¿›å…¥æ ¹æ–‡ä»¶ç³»ç»Ÿ</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> <span class="hljs-built_in">chroot</span> temp<br></code></pre></td></tr></table></figure>
</li>
<li><p>æ›´æ¢è½¯ä»¶æº</p>
<p> ç³»ç»Ÿæºåœ°å€é»˜è®¤ä¸ºå®˜æ–¹æºï¼Œåœ¨å›½å†…æ›´æ–°ã€ä¸‹è½½æ—¶å¾ˆä¸æ–¹ä¾¿ï¼Œä½¿ç”¨<code>vi</code>å·¥å…·ç¼–è¾‘<code>/etc/apt/sources.list</code>ï¼Œå°†å…¶æ›´æ¢ä¸ºæ¸…åæºï¼š</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs bash">deb http://mirrors.tuna.tsinghua.edu.cn/debian/ bookworm main contrib non-free non-free-firmware<br><span class="hljs-comment"># deb-src http://mirrors.tuna.tsinghua.edu.cn/debian/ bookworm main contrib non-free non-free-firmware</span><br><br>deb http://mirrors.tuna.tsinghua.edu.cn/debian/ bookworm-updates main contrib non-free non-free-firmware<br><span class="hljs-comment"># deb-src http://mirrors.tuna.tsinghua.edu.cn/debian/ bookworm-updates main contrib non-free non-free-firmware</span><br><br>deb http://mirrors.tuna.tsinghua.edu.cn/debian/ bookworm-backports main contrib non-free non-free-firmware<br><span class="hljs-comment"># deb-src http://mirrors.tuna.tsinghua.edu.cn/debian/ bookworm-backports main contrib non-free non-free-firmware</span><br><br>deb http://mirrors.tuna.tsinghua.edu.cn/debian-security bookworm-security main contrib non-free non-free-firmware<br><span class="hljs-comment"># deb-src http://mirrors.tuna.tsinghua.edu.cn/debian-security bookworm-security main contrib non-free non-free-firmware</span><br></code></pre></td></tr></table></figure>

<blockquote>
<p>è¿™é‡Œå¼ºåˆ¶ä½¿ç”¨HTTPï¼Œè€Œä¸æ˜¯å®˜æ–¹æ¨èçš„HTTPSï¼Œæ˜¯å› ä¸ºä½¿ç”¨HTTPSæ›´æ–°æ—¶ä¼šæœ‰CAè¯ä¹¦æŠ¥é”™ï¼šCertificate verification failed<br>åç»­æ­£å¸¸è¿›å…¥ç³»ç»Ÿï¼Œè¯·æ›´æ¢ä¸ºHTTPSå³å¯</p>
</blockquote>
</li>
<li><p>æ›´æ–°è½¯ä»¶åŒ…</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">apt update<br><br>apt upgrade<br></code></pre></td></tr></table></figure>
</li>
<li><p>å®‰è£…æ‰€éœ€å·¥å…·</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">apt install usbutils fdisk man-db <span class="hljs-built_in">sudo</span> nano openssh-server net-tools network-manager iputils-ping bash-completion kmod initramfs-tools linux-base netplan.io git systemd-timesyncd apt-utils dialog vim ifupdown ethtool wireless-tools udev htop rsyslog lsb-release<br></code></pre></td></tr></table></figure>
</li>
<li><p>å¼€å¯sshè¿œç¨‹è®¿é—®</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">sed -i <span class="hljs-string">&#x27;/PasswordAuthentication /c PasswordAuthentication yes&#x27;</span> /etc/ssh/ssh_config<br><br>sed -i <span class="hljs-string">&#x27;/PermitRootLogin /c PermitRootLogin yes&#x27;</span> /etc/ssh/sshd_config<br></code></pre></td></tr></table></figure>
</li>
<li><p>æ·»åŠ ç”¨æˆ·å¹¶è®¾ç½®å¯†ç </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">useradd -s <span class="hljs-string">&#x27;/bin/bash&#x27;</span> -m -G adm,<span class="hljs-built_in">sudo</span> username<br><br>passwd username<br></code></pre></td></tr></table></figure>
</li>
<li><p>ç»™rootç”¨æˆ·è®¾ç½®å¯†ç </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">passwd root<br></code></pre></td></tr></table></figure>
</li>
<li><p>ä¿®æ”¹ä¸»æœºå</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;ubuntu&quot;</span> &gt; /etc/hostname<br></code></pre></td></tr></table></figure>
</li>
<li><p>é€€å‡ºæ ¹æ–‡ä»¶ç³»ç»Ÿ</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">exit</span><br></code></pre></td></tr></table></figure>
</li>
<li><p>å®‰è£…å†…æ ¸æ¨¡å—</p>
<p>æ­¤æ“ä½œéœ€è¦åœ¨kernelç›®å½•ä¸‹æ‰§è¡Œï¼Œä¼šå°†æ„å»ºçš„.koæ–‡ä»¶å¤åˆ¶åˆ°æ ¹æ–‡ä»¶ç³»ç»Ÿä¸­ã€‚</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> make INSTALL_MOD_PATH=~/Desktop/temp modules_install<br></code></pre></td></tr></table></figure></li>
</ol>
<p>åˆ¶ä½œæ ¹æ–‡ä»¶ç³»ç»Ÿé•œåƒï¼š</p>
<ol>
<li><p>åˆ›å»ºæ ¹æ–‡ä»¶ç³»ç»Ÿç›®å½•</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">mkdir</span> rootfs<br></code></pre></td></tr></table></figure>
</li>
<li><p>æŸ¥çœ‹tempæ–‡ä»¶å¤¹å¤§å°</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> <span class="hljs-built_in">du</span> -sh temp/<br></code></pre></td></tr></table></figure>
</li>
<li><p>åˆ›å»ºä¸€ä¸ªlinuxroot.imgæ–‡ä»¶</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">dd</span> <span class="hljs-keyword">if</span>=/dev/zero of=linuxroot.img bs=1M count=1000<br></code></pre></td></tr></table></figure>

<blockquote>
<p>countçš„æ•°å€¼éœ€è¦æ ¹æ®æ­¥éª¤2ä¸­æŸ¥è¯¢åˆ°çš„tempæ–‡ä»¶å¤¹å¤§å°è¿›è¡Œç›¸åº”çš„è°ƒæ•´</p>
</blockquote>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">actual_size=$(<span class="hljs-built_in">sudo</span> <span class="hljs-built_in">du</span> -s /temp | <span class="hljs-built_in">cut</span> -f1)<br><br>img_size=$((actual_size * <span class="hljs-number">11</span> / <span class="hljs-number">10</span>))<br><br><span class="hljs-built_in">dd</span> <span class="hljs-keyword">if</span>=/dev/zero of=linuxroot.img bs=1K count=<span class="hljs-variable">$img_size</span><br></code></pre></td></tr></table></figure>

<blockquote>
<p>è‡ªåŠ¨è®¡ç®—tempå¤§å°å¹¶åˆ›å»ºåˆé€‚çš„å¤§å°æ–‡ä»¶</p>
</blockquote>
</li>
<li><p>æ ¼å¼åŒ–æ–‡ä»¶æ ¼å¼</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">mkfs.ext4 linuxroot.img<br></code></pre></td></tr></table></figure>
</li>
<li><p>å°†æ–‡ä»¶æŒ‚åœ¨åˆ°ç›®å½•</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> mount linuxroot.img rootfs/<br></code></pre></td></tr></table></figure>
</li>
<li><p>å¤åˆ¶æ ¹æ–‡ä»¶ç³»ç»Ÿ</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> <span class="hljs-built_in">cp</span> -rfp temp/*  rootfs/<br></code></pre></td></tr></table></figure>
</li>
<li><p>å–æ¶ˆæŒ‚è½½ç›®å½•</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> umount rootfs/<br><br><span class="hljs-built_in">sudo</span> umount /home/dongxun/Desktop/temp/dev<br></code></pre></td></tr></table></figure>

<blockquote>
<p>æ­¤æ“ä½œä¼šåˆ é™¤rootfsæ–‡ä»¶å¤¹å†…çš„æ‰€æœ‰æ–‡ä»¶ï¼Œä½†ç›¸å…³æ–‡ä»¶å·²ç»ä¿å­˜åˆ°äº†linuxroot.imgä¸­</p>
</blockquote>
</li>
<li><p>æ£€æŸ¥æ–‡ä»¶ç³»ç»Ÿ</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">e2fsck -p -f linuxroot.img<br></code></pre></td></tr></table></figure>
</li>
<li><p>è°ƒæ•´é•œåƒåˆ°æœ€å°å°ºå¯¸</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">resize2fs -M linuxroot.img<br></code></pre></td></tr></table></figure>
</li>
<li><p>å°†linuxroot.imgæ‹·è´åˆ°radxaå·¥å…·çš„rootfsç›®å½•ä¸­ï¼Œå¹¶ä¿®æ”¹æ–‡ä»¶åä¸ºï¼šlinaro-rootfs.img</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cp</span> linuxroot.img ~/Desktop/rockchip-linux/radxa/rockchip-bsp/rootfs/linaro-rootfs.img<br></code></pre></td></tr></table></figure>
</li>
<li><p>åˆ‡æ¢åˆ°rockchip-bspç›®å½•ï¼Œå¼€å§‹ç”Ÿæˆå¯ä»¥çƒ§å½•çš„system.img</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">./build/mk-image.sh -c rk3328 -t system -r rootfs/linaro-rootfs.img<br></code></pre></td></tr></table></figure></li>
</ol>
<div class="note note-info">
            <p>çƒ§å½•åœ°å€ï¼šAddressï¼š<code>0x00000000</code>ï¼ŒNameï¼š<code>system</code>ã€‚</p>
          </div>

<h4 id="æ‰‹åŠ¨æ„å»ºrootfs"><a href="#æ‰‹åŠ¨æ„å»ºrootfs" class="headerlink" title="æ‰‹åŠ¨æ„å»ºrootfs"></a>æ‰‹åŠ¨æ„å»ºrootfs</h4><p>ä½¿ç”¨<a target="_blank" rel="noopener" href="https://buildroot.org/">Buildroot</a>é¡¹ç›®è¿›è¡Œæ„å»ºã€‚</p>
<p>é¦–å…ˆä¸‹è½½Buildrootæºç ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">wget https://buildroot.org/downloads/buildroot-2025.02.4.tar.gz<br></code></pre></td></tr></table></figure>

<p>è§£å‹æºç ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">tar -zxvf buildroot-2025.02.4.tar.gz<br></code></pre></td></tr></table></figure>

<p>åç»­æœ‰éœ€æ±‚å†è¡¥å……â€¦</p>
<p>çƒ§å½•åœ°å€ï¼šAddressï¼š<code>0x00040000</code>ï¼ŒNameï¼š<code>rootfs</code>ã€‚</p>
<h2 id="é€‚é…é©±åŠ¨"><a href="#é€‚é…é©±åŠ¨" class="headerlink" title="é€‚é…é©±åŠ¨"></a>é€‚é…é©±åŠ¨</h2><h3 id="USBæ— çº¿ç½‘å¡"><a href="#USBæ— çº¿ç½‘å¡" class="headerlink" title="USBæ— çº¿ç½‘å¡"></a>USBæ— çº¿ç½‘å¡</h3><h4 id="MT7601U"><a href="#MT7601U" class="headerlink" title="MT7601U"></a>MT7601U</h4><p>å®˜æ–¹Linux Kernelä¸­å·²ç»åŒ…å«äº†è¯¥èŠ¯ç‰‡çš„é©±åŠ¨æºç ï¼Œä½¿ç”¨<code>make menuconfig</code>æ‰“å¼€é…ç½®èœå•é¡µé¢ï¼Œåœ¨ <strong>Device Drivers &gt; Network device support &gt; Wireless LAN</strong> ä¸‹å°±èƒ½æ‰¾åˆ° <strong>MediaTek MT7601U (USB) support</strong>ï¼Œå¼€å¯åé‡æ–°æ„å»ºå†…æ ¸ï¼ˆé‡æ–°çƒ§å½•å†…æ ¸ï¼‰æˆ–è€…å•ç‹¬ç¼–è¯‘é©±åŠ¨ï¼ˆæ‰‹åŠ¨åŠ è½½é©±åŠ¨ï¼‰å³å¯æ­£å¸¸ä½¿ç”¨ã€‚</p>
<h4 id="RTL8192CU"><a href="#RTL8192CU" class="headerlink" title="RTL8192CU"></a>RTL8192CU</h4><p>å®˜æ–¹Linux Kernelä¸­å·²ç»åŒ…å«äº†è¯¥èŠ¯ç‰‡çš„é©±åŠ¨æºç ï¼Œä½¿ç”¨<code>make menuconfig</code>æ‰“å¼€é…ç½®èœå•é¡µé¢ï¼Œåœ¨ <strong>Device Drivers &gt; Network device support &gt; Wireless LAN &gt; Realtek rtlwifi family of devices</strong> ä¸‹å°±èƒ½æ‰¾åˆ° <strong>Realtek RTL8192CU&#x2F;RTL8188CU USB Wireless Network Adapter</strong>ï¼Œå¼€å¯åé‡æ–°æ„å»ºå†…æ ¸ï¼ˆé‡æ–°çƒ§å½•å†…æ ¸ï¼‰æˆ–è€…å•ç‹¬ç¼–è¯‘é©±åŠ¨ï¼ˆæ‰‹åŠ¨åŠ è½½é©±åŠ¨ï¼‰å³å¯æ­£å¸¸ä½¿ç”¨ã€‚</p>
<h3 id="SDIOæ— çº¿ç½‘å¡"><a href="#SDIOæ— çº¿ç½‘å¡" class="headerlink" title="SDIOæ— çº¿ç½‘å¡"></a>SDIOæ— çº¿ç½‘å¡</h3><h4 id="RTL8189ETV"><a href="#RTL8189ETV" class="headerlink" title="RTL8189ETV"></a>RTL8189ETV</h4><p>å®˜æ–¹Linux Kernelä¸­ç›®å‰æ²¡æœ‰é€‚é…è¯¥èŠ¯ç‰‡çš„é©±åŠ¨ï¼Œå¯ä»¥ä½¿ç”¨<a target="_blank" rel="noopener" href="https://github.com/jwrdegoede/rtl8189ES_linux">rtl8189ES_linuxä»“åº“</a>æä¾›çš„é©±åŠ¨æºç è‡ªè¡Œç¼–è¯‘ã€‚<sup id="fnref:7" class="footnote-ref"><a href="#fn:7" rel="footnote"><span class="hint--top hint--rounded" aria-label="[ ç½‘ç»œé©±åŠ¨ç§»æ¤ï¼ˆRTL8189ï¼‰ ](https://blog.csdn.net/m0_54929728/article/details/140646790)">[7]</span></a></sup></p>
<p>å…ˆå°†ä»“åº“å…‹éš†åˆ°kernel&#x2F;drivers&#x2F;net&#x2F;wireless&#x2F;realtekä¸­å¹¶é‡å‘½åï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">git <span class="hljs-built_in">clone</span> https://github.com/jwrdegoede/rtl8189ES_linux.git<br><br><span class="hljs-built_in">mv</span> rtl8189ES_linux rtl8189es<br></code></pre></td></tr></table></figure>

<p>ç¼–è¾‘è¯¥ç›®å½•ä¸‹çš„Kconfigï¼Œåœ¨é€‚å½“ä½ç½®æ–°å¢ä»¥ä¸‹å†…å®¹ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">source</span> <span class="hljs-string">&quot;drivers/net/wireless/realtek/rtl8189es/Kconfig&quot;</span><br></code></pre></td></tr></table></figure>

<p>ç¼–è¾‘è¯¥ç›®å½•ä¸‹çš„Makefileï¼Œåœ¨é€‚å½“ä½ç½®æ–°å¢ä»¥ä¸‹å†…å®¹ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">obj-$(CONFIG_RTL8187)		+= rtl8189es/<br></code></pre></td></tr></table></figure>

<p>è¿›å…¥rtl8189esç›®å½•ï¼Œç¼–è¾‘Kconfigï¼Œæ”¹ä¸ºä»¥ä¸‹æ ¼å¼ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">config RTL8189ES<br>	tristate <span class="hljs-string">&quot;Realtek 8189E SDIO WiFi&quot;</span><br>	depends on USB<br>	<span class="hljs-built_in">help</span><br>	  Help message of RTL8189ES<br></code></pre></td></tr></table></figure>

<p>åˆ‡æ¢åˆ°kernelæ ¹ç›®å½•ï¼Œä½¿ç”¨<code>make menuconfig</code>æ‰“å¼€é…ç½®èœå•é¡µé¢ï¼Œåœ¨ <strong>Device Drivers &gt; Network device support &gt; Wireless LAN</strong> ä¸‹å°±èƒ½æ‰¾åˆ° <strong>Realtek 8189E SDIO WIFI</strong>ï¼Œå¼€å¯åé‡æ–°æ„å»ºå†…æ ¸ï¼ˆé‡æ–°çƒ§å½•å†…æ ¸ï¼‰æˆ–è€…å•ç‹¬ç¼–è¯‘é©±åŠ¨ï¼ˆæ‰‹åŠ¨åŠ è½½é©±åŠ¨ï¼‰å³å¯æ­£å¸¸ä½¿ç”¨ã€‚</p>
<h2 id="eMMCæ‰©å®¹"><a href="#eMMCæ‰©å®¹" class="headerlink" title="eMMCæ‰©å®¹"></a>eMMCæ‰©å®¹</h2><p>å¯¹äºè‡ªå·±æ„å»ºçš„Linuxç³»ç»Ÿï¼Œçƒ§å½•åˆ°æ¿è½½eMMCèŠ¯ç‰‡åä¸Šç”µå¯åŠ¨ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ç³»ç»Ÿåˆ†åŒºæ˜¯æœªå®Œå…¨å æ»¡eMMCçš„æ‰€æœ‰ç£ç›˜ç©ºé—´ï¼Œéœ€è¦æ ¹æ®ä»¥ä¸‹æ“ä½œå¯¹ç£ç›˜è¿›è¡Œæ‰©å®¹ã€‚</p>
<p>æŸ¥çœ‹ç£ç›˜å­˜å‚¨æƒ…å†µï¼š<sup id="fnref:8" class="footnote-ref"><a href="#fn:8" rel="footnote"><span class="hint--top hint--rounded" aria-label="[ linux arm fdisk, å¯¹æœªä½¿ç”¨emmcåˆ†åŒºæ‰©å®¹ ](https://blog.csdn.net/shliang310/article/details/125907840)">[8]</span></a></sup></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">df</span> -h<br></code></pre></td></tr></table></figure>

<div class="note note-info">
            <p>Filesystem      Size  Used Avail Use% Mounted on<br>&#x2F;dev&#x2F;root       966M  836M   65M  93% &#x2F;<br>devtmpfs        975M     0  975M   0% &#x2F;dev<br>tmpfs           987M     0  987M   0% &#x2F;dev&#x2F;shm<br>tmpfs           395M  784K  394M   1% &#x2F;run<br>tmpfs           5.0M     0  5.0M   0% &#x2F;run&#x2F;lock<br>tmpfs           198M     0  198M   0% &#x2F;run&#x2F;user&#x2F;0</p>
          </div>

<p>æŸ¥çœ‹å½“å‰ç³»ç»Ÿåˆ†åŒºç£ç›˜ä¿¡æ¯ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">fdisk -l<br></code></pre></td></tr></table></figure>

<div class="note note-info">
            <p>Disk &#x2F;dev&#x2F;ram0: 4 MiB, 4194304 bytes, 8192 sectors<br>Units: sectors of 1 * 512 &#x3D; 512 bytes<br>Sector size (logical&#x2F;physical): 512 bytes &#x2F; 4096 bytes<br>I&#x2F;O size (minimum&#x2F;optimal): 4096 bytes &#x2F; 4096 bytes<br>GPT PMBR size mismatch (3131391 !&#x3D; <font color="#00ff00">30535679</font>) will be corrected by write.<br>The backup GPT table is not on the end of the device.</p><p>Disk &#x2F;dev&#x2F;mmcblk1: 14.56 GiB, 15634268160 bytes, 30535680 sectors<br>Units: sectors of 1 * 512 &#x3D; 512 bytes<br>Sector size (logical&#x2F;physical): 512 bytes &#x2F; 512 bytes<br>I&#x2F;O size (minimum&#x2F;optimal): 512 bytes &#x2F; 512 bytes<br>Disklabel type: gpt<br>Disk identifier: 81FFA5A3-EA0D-4276-94EE-1FE84A77ACB0</p><p>Device           Start     End Sectors  Size Type<br>&#x2F;dev&#x2F;mmcblk1p1   32768 1081343 1048576  512M EFI System<br>&#x2F;dev&#x2F;mmcblk1p2 <font color="#ff0000"> <b>1081344</b></font> 3131358 2050015 1001M Linux filesystem</p><p>Disk &#x2F;dev&#x2F;mmcblk1boot0: 4 MiB, 4194304 bytes, 8192 sectors<br>Units: sectors of 1 * 512 &#x3D; 512 bytes<br>Sector size (logical&#x2F;physical): 512 bytes &#x2F; 512 bytes<br>I&#x2F;O size (minimum&#x2F;optimal): 512 bytes &#x2F; 512 bytes</p><p>Disk &#x2F;dev&#x2F;mmcblk1boot1: 4 MiB, 4194304 bytes, 8192 sectors<br>Units: sectors of 1 * 512 &#x3D; 512 bytes<br>Sector size (logical&#x2F;physical): 512 bytes &#x2F; 512 bytes<br>I&#x2F;O size (minimum&#x2F;optimal): 512 bytes &#x2F; 512 bytes</p>
          </div>

<blockquote>
<p><font color="#00ff00">30535679</font>ï¼šeMMCæœ€å¤§æ‰‡åŒºæ•°<br><font color="#ff0000"> <b>1081344</b></font>ï¼šç³»ç»Ÿèµ·å§‹æ‰‡åŒºæ•°</p>
</blockquote>
<p>è®°ä¸‹ç³»ç»Ÿèµ·å§‹æ‰‡åŒºæ•°ï¼Œä½¿ç”¨fdiskå·¥å…·æ–°å»ºåˆ†åŒºæ—¶ä¼šä½¿ç”¨ï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">fdisk /dev/mmcblk1<br></code></pre></td></tr></table></figure>

<div class="note note-info">
            <p>Welcome to fdisk (util-linux 2.38.1).<br>Changes will remain in memory only, until you decide to write them.<br>Be careful before using the write command.</p><p>GPT PMBR size mismatch (3131391 !&#x3D; 30535679) will be corrected by write.<br>The backup GPT table is not on the end of the device. This problem will be corrected by write.<br>This disk is currently in use - repartitioning is probably a bad idea.<br>Itâ€™s recommended to umount all file systems, and swapoff all swap<br>partitions on this disk.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">Command (m <span class="hljs-keyword">for</span> <span class="hljs-built_in">help</span>): d<br>Partition number (1,2, default 2): 2<br></code></pre></td></tr></table></figure><p>Partition 2 has been deleted.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">Command (m <span class="hljs-keyword">for</span> <span class="hljs-built_in">help</span>): n<br>Partition number (2-128, default 2):<br>First sector (34-30535646, default 1081344): 1081344<br>Last sector, +/-sectors or +/-size&#123;K,M,G,T,P&#125; (1081344-30535646, default 30533631):<br></code></pre></td></tr></table></figure><p>Created a new partition 2 of type â€˜Linux filesystemâ€™ and of size 14 GiB.<br>Partition #2 contains a ext4 signature.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">Do you want to remove the signature? [Y]es/[N]o: n<br>Command (m <span class="hljs-keyword">for</span> <span class="hljs-built_in">help</span>): w<br></code></pre></td></tr></table></figure><p>The partition table has been altered.<br>Syncing disks.</p>
          </div>

<p>æ›´æ–°ç³»ç»Ÿåˆ†åŒºï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">resize2fs /dev/mmcblk1p2<br></code></pre></td></tr></table></figure>

<div class="note note-info">
            <p>resize2fs 1.47.0 (5-Feb-2023)<br>Filesystem at &#x2F;dev&#x2F;mmcblk1p2 is mounted on &#x2F;; on[  521.217845] EXT4-fs (mmcblk1p2): resizing filesystem from 256000 to 3681536 blocks<br>-line resizing required<br>old_desc_blocks &#x3D; 1, new_desc_blocks &#x3D; 2<br>[  521.300662] EXT4-fs (mmcblk1p2): resized filesystem to 3681536<br>The filesystem on &#x2F;dev&#x2F;mmcblk1p2 is now 3681536 (4k) blocks long.</p>
          </div>

<p>å†æ¬¡æŸ¥è¯¢ç£ç›˜æƒ…å†µï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">df</span> -h<br></code></pre></td></tr></table></figure>

<div class="note note-info">
            <p>Filesystem      Size  Used Avail Use% Mounted on<br>&#x2F;dev&#x2F;root        14G  836M   13G   7% &#x2F;<br>devtmpfs        975M     0  975M   0% &#x2F;dev<br>tmpfs           987M     0  987M   0% &#x2F;dev&#x2F;shm<br>tmpfs           395M  784K  394M   1% &#x2F;run<br>tmpfs           5.0M     0  5.0M   0% &#x2F;run&#x2F;lock<br>tmpfs           198M     0  198M   0% &#x2F;run&#x2F;user&#x2F;0</p>
          </div>

<h2 id="ç‰¹åˆ«é¸£è°¢"><a href="#ç‰¹åˆ«é¸£è°¢" class="headerlink" title="ç‰¹åˆ«é¸£è°¢"></a>ç‰¹åˆ«é¸£è°¢</h2><section class="footnotes"><div class="footnote-list"><ol><li><span id="fn:1" class="footnote-text"><span><a target="_blank" rel="noopener" href="https://opensource.rock-chips.com/wiki_Boot_option"> Boot option </a>
<a href="#fnref:1" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:2" class="footnote-text"><span><a target="_blank" rel="noopener" href="https://wiki.radxa.com/RockpiE/dev/Debian"> ROCK Pi E Build Debian </a>
<a href="#fnref:2" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:3" class="footnote-text"><span><a target="_blank" rel="noopener" href="https://github.com/ophub/amlogic-s9xxx-openwrt/issues/415#issuecomment-1508234307"> Beelink-IPC-R(rk3588)æ”¯æŒä½¿ç”¨OpenWrtå’ŒArmbian </a>
<a href="#fnref:3" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:4" class="footnote-text"><span><a target="_blank" rel="noopener" href="https://opensource.rock-chips.com/wiki_Rockchip_Kernel#Install_Boot.2Fkernel">Rockchip Kernel </a>
<a href="#fnref:4" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:5" class="footnote-text"><span><a target="_blank" rel="noopener" href="https://opensource.rock-chips.com/wiki_Partitions"> Partitions </a>
<a href="#fnref:5" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:6" class="footnote-text"><span><a target="_blank" rel="noopener" href="https://wiki.t-firefly.com/zh_CN/ROC-RK3328-PC/linux_build_ubuntu_rootfs.html"> åˆ›å»º Ubuntu æ ¹æ–‡ä»¶ç³»ç»Ÿ </a>
<a href="#fnref:6" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:7" class="footnote-text"><span><a target="_blank" rel="noopener" href="https://blog.csdn.net/m0_54929728/article/details/140646790"> ç½‘ç»œé©±åŠ¨ç§»æ¤ï¼ˆRTL8189ï¼‰ </a>
<a href="#fnref:7" rev="footnote" class="footnote-backref"> â†©</a></span></span></li><li><span id="fn:8" class="footnote-text"><span><a target="_blank" rel="noopener" href="https://blog.csdn.net/shliang310/article/details/125907840"> linux arm fdisk, å¯¹æœªä½¿ç”¨emmcåˆ†åŒºæ‰©å®¹ </a>
<a href="#fnref:8" rev="footnote" class="footnote-backref"> â†©</a></span></span></li></ol></div></section>
                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/Linux/" class="category-chain-item">Linux</a>
  
  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/%E7%91%9E%E8%8A%AF%E5%BE%AE/" class="print-no-link">#ç‘èŠ¯å¾®</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>æ„å»ºé€‚ç”¨äºRK3328èŠ¯ç‰‡çš„Linux</div>
      <div>https://dongxunz.github.io/2025/07/09/ç‘èŠ¯å¾®/æ„å»ºé€‚ç”¨äºRK3328èŠ¯ç‰‡çš„Linux/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>ä½œè€…</div>
          <div>dongxunz</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>å‘å¸ƒäº</div>
          <div>2025å¹´7æœˆ9æ—¥</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>è®¸å¯åè®®</div>
          <div>
            
              
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - ç½²å">
                    <i class="iconfont icon-cc-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2025/07/19/%E7%91%9E%E8%8A%AF%E5%BE%AE/%E4%BB%8E%E5%A4%87%E4%BB%BD%E7%9A%84%E5%88%86%E5%8C%BA%E6%96%87%E4%BB%B6%E4%B8%AD%E6%8F%90%E5%8F%96%E8%AE%BE%E5%A4%87%E6%A0%91%E6%96%87%E4%BB%B6/" title="ä»å¤‡ä»½çš„åˆ†åŒºæ–‡ä»¶ä¸­æå–è®¾å¤‡æ ‘æ–‡ä»¶">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">ä»å¤‡ä»½çš„åˆ†åŒºæ–‡ä»¶ä¸­æå–è®¾å¤‡æ ‘æ–‡ä»¶</span>
                        <span class="visible-mobile">ä¸Šä¸€ç¯‡</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2025/07/08/Linux/Linux%E5%9F%BA%E7%A1%80%E9%85%8D%E7%BD%AE/" title="LinuxåŸºç¡€é…ç½®">
                        <span class="hidden-mobile">LinuxåŸºç¡€é…ç½®</span>
                        <span class="visible-mobile">ä¸‹ä¸€ç¯‡</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>ç›®å½•</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">æœç´¢</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">å…³é”®è¯</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> <div style="font-size: 0.85rem"> <span id="timeDate">è½½å…¥å¤©æ•°...</span> <span id="times">è½½å…¥æ—¶åˆ†ç§’...</span> <script src="/js/duration.js"></script> </div> 
    </div>
  
  
    <div class="statistics">
  
  

  
    
      <span id="busuanzi_container_site_pv" style="display: none">
        æ€»è®¿é—®é‡ 
        <span id="busuanzi_value_site_pv"></span>
         æ¬¡
      </span>
    
    
      <span id="busuanzi_container_site_uv" style="display: none">
        æ€»è®¿å®¢æ•° 
        <span id="busuanzi_value_site_uv"></span>
         äºº
      </span>
    
    

  

</div>

  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://cdn.jsdelivr.net/npm/nprogress@0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nprogress@0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js" ></script>
<script  src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://cdn.jsdelivr.net/npm/typed.js@2/lib/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://cdn.jsdelivr.net/npm/tocbot@4/dist/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://cdn.jsdelivr.net/npm/anchor-js@4/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3/dist/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>

  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>





<!-- ä¸»é¢˜çš„å¯åŠ¨é¡¹ï¼Œå°†å®ƒä¿æŒåœ¨æœ€åº•éƒ¨ -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">åšå®¢åœ¨å…è®¸ JavaScript è¿è¡Œçš„ç¯å¢ƒä¸‹æµè§ˆæ•ˆæœæ›´ä½³</div>
  </noscript>
<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/shizuku.model.json"},"display":{"position":"left","width":210,"height":340,"hOffset":40},"mobile":{"show":false,"scale":0.8},"name":{"canvas":"live2dcanvas","div":"live2d-widget"},"dialog":{"enable":true,"hitokoto":true,"script":{"every idle 10s":"$hitokoto$","tap body":"ğŸˆ²","tap face":"ğŸ¤"}},"react":{"opacity":1},"dev":{"border":false},"log":false});</script></body>
</html>
