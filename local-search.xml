<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>魔百和电视盒子安装Klipper</title>
    <link href="/2025/06/01/3D%E6%89%93%E5%8D%B0/%E9%AD%94%E7%99%BE%E5%92%8C%E7%94%B5%E8%A7%86%E7%9B%92%E5%AD%90%E5%AE%89%E8%A3%85Klipper/"/>
    <url>/2025/06/01/3D%E6%89%93%E5%8D%B0/%E9%AD%94%E7%99%BE%E5%92%8C%E7%94%B5%E8%A7%86%E7%9B%92%E5%AD%90%E5%AE%89%E8%A3%85Klipper/</url>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>偶尔在闲鱼捡到一款魔百和的电视盒子，型号为：CM201-1（YS），在网上搜寻一番后，发现可以烧录Linux系统，所以想着试试能不能安装Klipper来给3D打印机当上位机。</p><h2 id="硬件信息"><a href="#硬件信息" class="headerlink" title="硬件信息"></a>硬件信息</h2><p>我手上这款电视盒子主板的硬件信息如下：<br>主芯片：晶晨S905-L3（GXLX2）<br>运行内存：三星<a href="https://semiconductor.samsung.com/dram/ddr/ddr3/k4b4g1646e-bcma/">K4B4G1646E-BCMA</a> * 2 （1GB）<br>存储芯片：深圳佰维<a href="https://bbs.16rd.com/thread-454241-1-1.html">BWCMGSC11G08G</a>（8GB）<br>无线网卡：瑞昱<a href="https://www.semiee.com/1c4e23a6-d0de-46f8-8591-7fe2d3dbb2c3.html">RLT8822BS</a></p><p><img src="/2025/06/01/3D%E6%89%93%E5%8D%B0/%E9%AD%94%E7%99%BE%E5%92%8C%E7%94%B5%E8%A7%86%E7%9B%92%E5%AD%90%E5%AE%89%E8%A3%85Klipper/cm201-1-ys-top.jpg" alt="主板顶面"></p><p><img src="/2025/06/01/3D%E6%89%93%E5%8D%B0/%E9%AD%94%E7%99%BE%E5%92%8C%E7%94%B5%E8%A7%86%E7%9B%92%E5%AD%90%E5%AE%89%E8%A3%85Klipper/cm201-1-ys-bottom.jpg" alt="主板底面"></p><p>观察主板顶面：可以看到在AV接口后面有一个按钮，后续线刷时会用到；<br>观察主板底面：有一个TTL接口（图中左下角焊线位置），以及未焊接的TF槽接口（图中是我自己焊了一个上去，但是系统好像无法识别，不清楚是不是需要修改固件才能正常读取）。</p><h2 id="烧录底包"><a href="#烧录底包" class="headerlink" title="烧录底包"></a>烧录底包</h2><p>电视盒子运行的都是官方修改的Android系统，无法开启adb，也没有root，所以无法直接使用Linux系统，首先需要烧录一个合适的Android底包（自带root或者可以开启adb即可），然后通过升级操作来引导烧录Linux系统。</p><p>操作步骤：</p><ol><li><p>焊接TTL接口<br>先将主板的TTL接口使用导线引出来，通过串口线与电脑进行连接，打开<a href="https://mobaxterm.mobatek.net/">MobaXterm软件</a>，点击Session -&gt; Serial，Serial port选择串口线的COM号，Speed选择115200，这样在每次上电以及后续刷机操作时都会输出对应的日志，便于分析。</p></li><li><p>下载工具<br>下载晶晨芯片的烧录工具<a href="https://www.znds.com/tv-1201239-1-1.html">Amlogic USB Burning Tool（ v2.2.4、v3.1.0）</a></p></li><li><p>下载Android底包<br>各型号电视盒子适用的Android底包都被ophub收录于<a href="https://github.com/ophub/kernel/releases/tag/tools">kernel-tools仓库</a>，一般情况下，选择与<strong>电视盒子型号以及主芯片相同</strong>的Android底包即可，如果没有一一对应的底包，优先选择<strong>同芯片型号</strong>的Android底包进行尝试。</p><blockquote><p>本人的电视盒子型号是CM201-1（YS），芯片是晶晨S905-L3（GXLX2），首先下载：android_tv_cm201-1-ys_s905l3b.tar.xz，未能成功；后尝试：android_tv_cm201-1-6-ys_s905l3.tar.xz，只能烧录Android 4.4.2的底包，Android9的底包无法刷入，不知道是不是上传的版本有误？后再次尝试：android_tv_cm211-1_s905l3.tar.xz，成功烧录！</p></blockquote></li><li><p>烧录Android底包<br>打开USB_Burning_Tool软件，选择 文件 -&gt; 导入烧录包，选择步骤3中<strong>解压出来</strong>的Android底包，取消勾选 <strong>擦除flash</strong> &amp; <strong>擦除bootloader</strong>，点击 开始 按钮；然后将电视盒子完全断电，将USB公对公数据线插入离网口座子距离较近的USB口，按住AV接口后方的按钮不松手，另一端接入电脑，听到电脑“嘀嘀”一声后松手，软件就会自动进行烧录，等待进度条走完，然后点击 停止 按钮，关闭软件并拔掉USB公对公数据线。<br><img src="/2025/06/01/3D%E6%89%93%E5%8D%B0/%E9%AD%94%E7%99%BE%E5%92%8C%E7%94%B5%E8%A7%86%E7%9B%92%E5%AD%90%E5%AE%89%E8%A3%85Klipper/usb_burning_tool.png" alt="USB_Burning_Tool主界面"></p></li><li><p>启动底包系统<br>给盒子插上网线，接入电源，观察MobaXterm软件TTL跑码信息，没有意外情况就顺利进入刷好的Android系统，且自动登录已获取root权限的adb界面，然后使用浏览器登录路由器后台查看电视盒子是否获取到IP地址（确认网口能否识别）。</p></li></ol><h2 id="烧录Linux"><a href="#烧录Linux" class="headerlink" title="烧录Linux"></a>烧录Linux</h2><p>针对晶晨的芯片，找到2个优秀的开源Linux项目：<a href="https://github.com/ophub/amlogic-s9xxx-armbian">amlogic-s9xxx-armbian</a>，<a href="https://github.com/devmfc/debian-on-amlogic">debian-on-amlogic</a>，前者拥有大量已成功案例，支持的电视盒子型号众多，系统版本维护快，请优先选择该项目进行尝试烧录；而后者首次启动不会破坏原有的底包系统，而是通过升级操作引导进入U盘里的系统，后续成功启动后使用相应的命令将U盘里的Linux系统烧录到eMMC芯片。</p><h3 id="amlogic-s9xxx-armbian"><a href="#amlogic-s9xxx-armbian" class="headerlink" title="amlogic-s9xxx-armbian"></a>amlogic-s9xxx-armbian</h3><p>amlogic-s9xxx-armbian项目的Release里每种电视盒子型号的镜像会提供2种版本：<br><img src="/2025/06/01/3D%E6%89%93%E5%8D%B0/%E9%AD%94%E7%99%BE%E5%92%8C%E7%94%B5%E8%A7%86%E7%9B%92%E5%AD%90%E5%AE%89%E8%A3%85Klipper/armbian_bookworm_cm211.png" alt="每种电视盒子会提供2种镜像文件"></p><p>版本区别：<br>6.12.31版本内置一个u-boot.ext文件（其实就是U盘BOOT根目录里其中一个u-boot-xxx.bin文件改名而来，可以手动修改其他的bin文件进行尝试），该文件会在启动时接管系统自带的u-boot引导程序，但是这种接管操作往往比较看运气，因为新的u-boot引导程序不一定适用于当前的dtb系统分区，也存在eMMC芯片无法识别等情况而出现引导失败，所以如果该系统无法正常启动，请尝试使用6.1.140版本，和debian-on-amlogic项目原理一样，只使用原有的u-boot引导程序进入U盘里的Linux系统，待成功启动后使用命令将系统烧录到eMMC芯片中。</p><p>操作步骤：</p><ol><li><p>制作Linux系统启动盘<br>准备一个U盘，格式化为<strong>FAT32</strong>格式，将下载好的镜像文件（.img,gz）通过<a href="https://www.raspberrypi.com/software/">Raspberry Pi Imager</a>软件写入即可。</p></li><li><p>启动底包系统<br>在MobaXterm软件使用<code>reboot update</code>命令重启进行升级，在断电重启的那一刻，插入写好Linux系统的U盘（切记不可提前插入U盘，否则Andorid系统会修改部分文件的权限，导致引导失败）<br><img src="/2025/06/01/3D%E6%89%93%E5%8D%B0/%E9%AD%94%E7%99%BE%E5%92%8C%E7%94%B5%E8%A7%86%E7%9B%92%E5%AD%90%E5%AE%89%E8%A3%85Klipper/adb_reboot_update.png" alt="adb升级命令"></p></li><li><p>查看网络信息<br>成功引导进入U盘的Linux系统后，有一个初始化流程需要操作：新建root账户密码 -&gt; 创建普通用户及密码 -&gt; 系统语言 -&gt; 地区 -&gt; 时区，按照自己喜好设置即可，执行完操作后，在命令行后使用<code>nmcli dev status</code>命令查询网络硬件设备状态，以下是我的情况，自带的网络硬件设备基本都无法正常使用，后续只能通过USB免驱的无线网卡进行网络连接了：<br><img src="/2025/06/01/3D%E6%89%93%E5%8D%B0/%E9%AD%94%E7%99%BE%E5%92%8C%E7%94%B5%E8%A7%86%E7%9B%92%E5%AD%90%E5%AE%89%E8%A3%85Klipper/nmcli_dev_status.png" alt="网络硬件设备状态"></p></li><li><p>烧录Linux系统<br>使用<code>armbian-install</code>命令进行烧录操作，需要输入对应DTB文件的ID，等待烧录完成后使用<code>poweroff</code>命令关机。<br>以下是我尝试过的DTB情况：</p><table><thead><tr><th align="center">ID</th><th align="center">SOC</th><th align="center">MODEL</th><th align="center">DTB</th><th align="center">Flash eMMC</th><th align="center">Normal Startup</th></tr></thead><tbody><tr><td align="center">115</td><td align="center">s905l</td><td align="center">UNT402A,M201-S,MiBox-4C,IP108H,B860AV2.1</td><td align="center">meson-gxl-s905l3b-m302a.dtb</td><td align="center">YES</td><td align="center">YES</td></tr><tr><td align="center">…</td><td align="center">…</td><td align="center">…</td><td align="center">…</td><td align="center">…</td><td align="center">…</td></tr><tr><td align="center">119</td><td align="center">s905l2</td><td align="center">MGV2000,MGV3000,M301A,CM201-1,IP108H</td><td align="center">meson-gxl-s905l2-x7-5g.dtb</td><td align="center">YES</td><td align="center">NO</td></tr><tr><td align="center">…</td><td align="center">…</td><td align="center">…</td><td align="center">…</td><td align="center">…</td><td align="center">…</td></tr><tr><td align="center">121</td><td align="center">s905l2</td><td align="center">Wojia-TV-IPBS9505</td><td align="center">meson-gxl-s905l2-ipbs9505.dtb</td><td align="center">YES</td><td align="center">NO</td></tr><tr><td align="center">122</td><td align="center">s905l3</td><td align="center">CM311-1,HG680-LC,M401A,UNT402A,CM201-1-6-YS</td><td align="center">meson-gxl-s905l2-x7-5g.dtb</td><td align="center">YES</td><td align="center">NO</td></tr><tr><td align="center">…</td><td align="center">…</td><td align="center">…</td><td align="center">…</td><td align="center">…</td><td align="center">…</td></tr><tr><td align="center">127</td><td align="center">s905l3b</td><td align="center">M302A,M304A,CM201-1,CM211-1,CM311-1</td><td align="center">meson-gxl-s905l3b-m302a.dtb</td><td align="center">YES</td><td align="center">YES</td></tr></tbody></table></li><li><p>启动eMMC系统<br>拔掉U盘，插入USB免驱无线网卡，重新上电，等待系统启动后，使用root用户登录，输入<code>nmcli dev status</code>命令再次查看网络硬件信息，可以看到有一个<strong>wlan0</strong>设备，使用<code>nmtui</code>命令连接WIFI即可，这样就能成功访问互联网。<br><img src="/2025/06/01/3D%E6%89%93%E5%8D%B0/%E9%AD%94%E7%99%BE%E5%92%8C%E7%94%B5%E8%A7%86%E7%9B%92%E5%AD%90%E5%AE%89%E8%A3%85Klipper/nmtui_connect_wifi.png" alt="成功连接WIFI"></p></li><li><p>更好系统源<br>默认源为官方源，国内访问不方便，所以以下替换为清华源（对于armbian系统，有多个源文件需要修改）：</p><ul><li>编辑<code>/etc/apt/sources.list.d/armbian.list</code>，将<code>http://apt.armbian.com</code>替换为以下链接</li></ul> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">https://mirrors.tuna.tsinghua.edu.cn/armbian<br></code></pre></td></tr></table></figure><ul><li>编辑<code>/etc/apt/sources.list.d/debian.sources</code>，将其中的内容替换为以下：</li></ul> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs bash">Types: deb<br>URIs: https://mirrors.tuna.tsinghua.edu.cn/debian<br>Suites: bookworm bookworm-updates bookworm-backports<br>Components: main contrib non-free non-free-firmware<br>Signed-By: /usr/share/keyrings/debian-archive-keyring.gpg<br><br><span class="hljs-comment"># 默认注释了源码镜像以提高 apt update 速度，如有需要可自行取消注释</span><br><span class="hljs-comment"># Types: deb-src</span><br><span class="hljs-comment"># URIs: https://mirrors.tuna.tsinghua.edu.cn/debian</span><br><span class="hljs-comment"># Suites: bookworm bookworm-updates bookworm-backports</span><br><span class="hljs-comment"># Components: main contrib non-free non-free-firmware</span><br><span class="hljs-comment"># Signed-By: /usr/share/keyrings/debian-archive-keyring.gpg</span><br><br><span class="hljs-comment"># 以下安全更新软件源包含了官方源与镜像站配置，如有需要可自行修改注释切换</span><br>Types: deb<br>URIs: https://security.debian.org/debian-security<br>Suites: bookworm-security<br>Components: main contrib non-free non-free-firmware<br>Signed-By: /usr/share/keyrings/debian-archive-keyring.gpg<br><br><span class="hljs-comment"># Types: deb-src</span><br><span class="hljs-comment"># URIs: https://security.debian.org/debian-security</span><br><span class="hljs-comment"># Suites: bookworm-security</span><br><span class="hljs-comment"># Components: main contrib non-free non-free-firmware</span><br><span class="hljs-comment"># Signed-By: /usr/share/keyrings/debian-archive-keyring.gpg</span><br></code></pre></td></tr></table></figure></li><li><p>更新软件<br>执行以下<code>apt-get update &amp;&amp; upgarde</code>命令即可。</p><blockquote><p>可能会存在<strong>NO_PUBKEY</strong>报错，附上解决方法：<a href="https://github.com/mainsail-crew/moonraker-timelapse/issues/176#issuecomment-2560710047">Fails to install (Neptune 4 Plus) due to no pubkey available</a></p></blockquote></li><li><p>将sudo授权给普通用户</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">usermod -aG <span class="hljs-built_in">sudo</span> newusername <span class="hljs-comment"># newusername 为步骤3中初始化流程创建的普通用户名</span><br></code></pre></td></tr></table></figure></li><li><p>切换用户</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">su newusername<br></code></pre></td></tr></table></figure></li><li><p>安装所需软件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> apt-get install git python3 python3-pip usbutils -y<br></code></pre></td></tr></table></figure></li><li><p>设置pip3以及系统代理</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">pip3 config <span class="hljs-built_in">set</span> global.index-url https://mirrors.aliyun.com/pypi/simple<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">pip3 config <span class="hljs-built_in">set</span> install.trusted-host mirrors.aliyun.com<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">export</span> http_proxy=http://ip:port<br><br><span class="hljs-built_in">export</span> https_proxy=http://ip:port<br></code></pre></td></tr></table></figure></li><li><p>安装kiauh</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cd</span> ~ &amp;&amp; git <span class="hljs-built_in">clone</span> https://github.com/dw-0/kiauh.git<br></code></pre></td></tr></table></figure></li></ol><p>最后附上一张成功进入系统的截图：<br><img src="/2025/06/01/3D%E6%89%93%E5%8D%B0/%E9%AD%94%E7%99%BE%E5%92%8C%E7%94%B5%E8%A7%86%E7%9B%92%E5%AD%90%E5%AE%89%E8%A3%85Klipper/armbian_system.png" alt="amlogic-s9xxx-armbian系统"></p><h3 id="debian-on-amlogic"><a href="#debian-on-amlogic" class="headerlink" title="debian-on-amlogic"></a>debian-on-amlogic</h3><p>操作步骤：</p><ol><li><p>制作Linux系统启动盘<br>准备一个U盘，格式化为<strong>FAT32</strong>格式，将下载好的镜像文件（.img,gz）通过<a href="https://www.raspberrypi.com/software/">Raspberry Pi Imager</a>软件写入即可。</p></li><li><p>启动底包系统<br>在MobaXterm软件使用<code>reboot update</code>命令重启进行升级，在断电重启的那一刻，插入写入好Linux系统的U盘（切记不可提前插入U盘，否则Andorid系统会修改部分文件的权限，导致引导失败）<br><img src="/2025/06/01/3D%E6%89%93%E5%8D%B0/%E9%AD%94%E7%99%BE%E5%92%8C%E7%94%B5%E8%A7%86%E7%9B%92%E5%AD%90%E5%AE%89%E8%A3%85Klipper/adb_reboot_update.png" alt="adb升级命令"></p></li><li><p>烧录Linux系统<br>成功引导进入U盘的Linux系统后，使用默认账户登录系统：用户名：<code>root</code>，密码：<code>tvbox</code>，进入命令行后使用<code>./aml-multiboot-setup.sh</code>命令修改系统引导为从U盘启动，否则断电重启后会优先启动原来的Android系统，而且U盘里的文件也会被Android系统篡改，U盘里的Linux系统基本就废了；由于我这款主板执行该命令时无法成功识别eMMC芯片，所以无法修改引导…但是可以执行后续步骤浅尝一下。</p></li><li><p>更换系统源<br>该系统为debian，可参考清华源修改方法即可。</p></li><li><p>安装sudo工具</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">apt-get install <span class="hljs-built_in">sudo</span> -y<br></code></pre></td></tr></table></figure></li><li><p>新建普通用户</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">adduser newusername<br></code></pre></td></tr></table></figure><p> 后续步骤请参考amlogic-s9xxx-armbian中的步骤8~12即可。</p></li></ol><p>最后附上一张成功进入系统的截图：<br><img src="/2025/06/01/3D%E6%89%93%E5%8D%B0/%E9%AD%94%E7%99%BE%E5%92%8C%E7%94%B5%E8%A7%86%E7%9B%92%E5%AD%90%E5%AE%89%E8%A3%85Klipper/debian_system.png" alt="debian-on-amlogic系统"></p><h2 id="WIFI测速"><a href="#WIFI测速" class="headerlink" title="WIFI测速"></a>WIFI测速</h2><p>手里刚好有2种USB无线网卡模块：MT7601（150Mbps），RTL8192CU（300Mbps），在amlogic-s9xxx-armbian系统里都是免驱动，即插即用，以下是对他们进行网速测试，仅供参考。</p><p><img src="/2025/06/01/3D%E6%89%93%E5%8D%B0/%E9%AD%94%E7%99%BE%E5%92%8C%E7%94%B5%E8%A7%86%E7%9B%92%E5%AD%90%E5%AE%89%E8%A3%85Klipper/usb_wifi_modules.png" alt="2种USB无线网卡模块实物对比"></p><p>安装<a href="https://www.speedtest.net/zh-Hans/apps/cli">Speedtest® CLI</a>网络测速工具（仅适用于Ubuntu&#x2F;Debian）：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment">## If migrating from prior bintray install instructions please first...</span><br><span class="hljs-comment"># sudo rm /etc/apt/sources.list.d/speedtest.list</span><br><span class="hljs-comment"># sudo apt-get update</span><br><span class="hljs-comment"># sudo apt-get remove speedtest</span><br><span class="hljs-comment">## Other non-official binaries will conflict with Speedtest CLI</span><br><span class="hljs-comment"># Example how to remove using apt-get</span><br><span class="hljs-comment"># sudo apt-get remove speedtest-cli</span><br><span class="hljs-built_in">sudo</span> apt-get install curl<br><br>curl -s https://packagecloud.io/install/repositories/ookla/speedtest-cli/script.deb.sh | <span class="hljs-built_in">sudo</span> bash<br><br><span class="hljs-built_in">sudo</span> apt-get install speedtest<br></code></pre></td></tr></table></figure><p><img src="/2025/06/01/3D%E6%89%93%E5%8D%B0/%E9%AD%94%E7%99%BE%E5%92%8C%E7%94%B5%E8%A7%86%E7%9B%92%E5%AD%90%E5%AE%89%E8%A3%85Klipper/mt7601_linux_wifi_speed_test.png" alt="MT7601在Linxu系统下的测速结果"></p><p><img src="/2025/06/01/3D%E6%89%93%E5%8D%B0/%E9%AD%94%E7%99%BE%E5%92%8C%E7%94%B5%E8%A7%86%E7%9B%92%E5%AD%90%E5%AE%89%E8%A3%85Klipper/rtl8192cu_linux_wifi_speed_test.png" alt="RTL8192CU在Linxu系统下的测速结果"></p><p>嗯…上述测速结果看不出来个所以然，所以我用Windows10又测试了一遍，结果就简单明了，仅供参考。</p><p><img src="/2025/06/01/3D%E6%89%93%E5%8D%B0/%E9%AD%94%E7%99%BE%E5%92%8C%E7%94%B5%E8%A7%86%E7%9B%92%E5%AD%90%E5%AE%89%E8%A3%85Klipper/mt7601_windows_wifi_speed_test.png" alt="MT7601在Windows系统下的测速结果"></p><p><img src="/2025/06/01/3D%E6%89%93%E5%8D%B0/%E9%AD%94%E7%99%BE%E5%92%8C%E7%94%B5%E8%A7%86%E7%9B%92%E5%AD%90%E5%AE%89%E8%A3%85Klipper/rtl8192cu_windows_wifi_speed_test.png" alt="RTL8192CU在Windows系统下的测速结果"></p><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>国内电视盒子由于三大运营商的存在，再加上第三方品牌，几乎是百花齐放，哪怕外观类似，型号一样，主板的硬件差异也是各种各样的，所以能不能成功烧录对应的Linux系统，还是有点运气的成分在里面，本人也是几经波折才勉强成功，而且板载的HDMI、网口和无线网卡均不能正常使用，还需通过USB免驱无线网卡接入互联网，并使用kiauh脚本安装了Klipper以及相关的网页Web服务，但是系统的稳定性还有待考验，不建议轻易尝试。</p><p>附上一张晶晨S905L（左）和全志H616（右）的使用<code>sysbench cpu --cpu-max-prime=20000 run</code>命令测试的单核性能对比图，仅供参考：<br><img src="/2025/06/01/3D%E6%89%93%E5%8D%B0/%E9%AD%94%E7%99%BE%E5%92%8C%E7%94%B5%E8%A7%86%E7%9B%92%E5%AD%90%E5%AE%89%E8%A3%85Klipper/sysbench_s905l_h616.png" alt="S905L与H616单核性能对比"></p><h2 id="特别鸣谢"><a href="#特别鸣谢" class="headerlink" title="特别鸣谢"></a>特别鸣谢</h2><p><a href="https://github.com/ophub/amlogic-s9xxx-armbian/issues/2209">CM201-1-YS刷入成功，有线无线都连接成功</a><br><a href="https://github.com/ophub/amlogic-s9xxx-armbian/issues/1318">CM211-1 使用6.1内核，DTB使用m302a成功写入EMMC，网络正常</a><br><a href="https://github.com/ophub/amlogic-s9xxx-armbian/issues/1378#issuecomment-1537691718">如何重新U盘安装armbian</a><br><a href="https://github.com/ophub/amlogic-s9xxx-armbian/issues/2499">天津联通机顶盒 中兴ZXV10 B860AV2.1 U 成功刷入</a><br><a href="http://github.com/ophub/amlogic-s9xxx-armbian/issues/2539">CM201-1-6 YS S905L3 EMMC成功刷入，成功获取有线网络IP</a><br><a href="https://www.cnblogs.com/imzlh/p/16756624.html">[s905l3]性价比神机mgv3000全网首拆，刷armbian实现更多价值！</a><br><a href="https://blog.csdn.net/qq_38189542/article/details/133758437">提取Android盒子（CM201-1 YS）dtb文件</a></p>]]></content>
    
    
    <categories>
      
      <category>3D打印</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Klipper</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>MKS SKIPR V1.0主板折腾记录</title>
    <link href="/2025/05/24/3D%E6%89%93%E5%8D%B0/MKS%20SKIPR%20V1.0%E4%B8%BB%E6%9D%BF%E6%8A%98%E8%85%BE%E8%AE%B0%E5%BD%95/"/>
    <url>/2025/05/24/3D%E6%89%93%E5%8D%B0/MKS%20SKIPR%20V1.0%E4%B8%BB%E6%9D%BF%E6%8A%98%E8%85%BE%E8%AE%B0%E5%BD%95/</url>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>本人遇到一块MKS SKIPR V1.0主板出现不加载TF卡系统的异常情况，查阅相关资料以及排查硬件电路后，终于找到问题：<strong>主板上的一根DDR信号线与GND发生了短路</strong>；问题算是找到了，但是这期间的折腾过程还是比较曲折的，于是就用这篇文章来记录吧，仅供参考👨🏻‍🔧</p><h2 id="相关知识"><a href="#相关知识" class="headerlink" title="相关知识"></a>相关知识</h2><p>该主板上位机采用瑞芯微RK3328芯片，首先了解一下该芯片启动流程及相关模式：<sup id="fnref:1" class="footnote-ref"><a href="#fn:1" rel="footnote"><span class="hint--top hint--rounded" aria-label="[启动模式说明](https://wiki.t-firefly.com/zh_CN/ROC-RK3328-PC/bootmode.html)">[1]</span></a></sup></p><p>加载模式：</p><ol><li><p>SPI模式</p></li><li><p>EMMC模式</p></li><li><p>SDMMC模式</p></li></ol><p>启动次序：</p><ol><li><p>主控上电初始化</p></li><li><p>BootRom代码在SRAM上运行，校验存储设备里的Bootloader</p></li><li><p>校验通过，加载并运行Bootloader引导代码</p></li><li><p>Bootloader引导代码负责初始化DDR内存，加载Bootloader完整代码到DDR内存中并运行</p></li><li><p>Bootloader加载存储设备上的Linux内核，并将执行权交给Linux内核</p></li></ol><p>启动模式：</p><ol><li><p>Normal模式<br>Normal模式就是正常的启动过程，各个组件依次加载，正常进入系统。</p></li><li><p>Loader模式<br>在Loader模式下，Bootloader会进入升级状态，等待主机命令，用于固件升级等。</p></li><li><p>MaskRom模式<br>MaskRom模式用于Bootloader损坏时的系统修复。</p></li></ol><h2 id="前期排查"><a href="#前期排查" class="headerlink" title="前期排查"></a>前期排查</h2><h3 id="所需工具"><a href="#所需工具" class="headerlink" title="所需工具"></a>所需工具</h3><!-- 让表格居中显示的风格 --><style>.center{  width: auto;  display: table;  margin-left: auto;  margin-right: auto;}</style><div class="center"><table><thead><tr><th align="center">相关工具</th><th align="center">相关软件</th></tr></thead><tbody><tr><td align="center">电脑</td><td align="center">瑞芯微驱动</td></tr><tr><td align="center">USB公对公数据线</td><td align="center">瑞芯微开发工具</td></tr><tr><td align="center">电烙铁</td><td align="center">⏳</td></tr><tr><td align="center">细导线若干</td><td align="center">🎵</td></tr></tbody></table></div><blockquote><p><a href="https://github.com/bigtreetech/CB2/blob/master/RKDevTool.zip">BIGTREETECH CB2</a>官方提供的整合工具包，已经包含相关驱动及软件，请解压后自行安装。</p></blockquote><h3 id="Loader模式"><a href="#Loader模式" class="headerlink" title="Loader模式"></a>Loader模式</h3><p>首先当然是进入Loader模式看看固件信息是不是能正常读取。</p><h4 id="焊接电路"><a href="#焊接电路" class="headerlink" title="焊接电路"></a>焊接电路</h4><p>根据<a href="https://github.com/makerbase-mks/MKS-SKIPR">MKS SKIPR V1.0开源资料</a>，再参考<a href="https://opensource.rock-chips.com/wiki_Main_Page">瑞芯微官方设计参考文档</a>以及<a href="https://wiki.t-firefly.com/zh_CN/ROC-RK3328-PC/bootmode.html#loader-mo-shi">ROC-RK3328-PC开发板WIKI</a>相关资料，发现该主板将RECOVERY按钮省略了…所以想要进入该模式，需要在<strong>主板底部</strong>的一个电阻上焊接一根导线出来，切记不要和其他电路搭在一起！！！</p><p><img src="/2025/05/24/3D%E6%89%93%E5%8D%B0/MKS%20SKIPR%20V1.0%E4%B8%BB%E6%9D%BF%E6%8A%98%E8%85%BE%E8%AE%B0%E5%BD%95/mks_skipr_v1.0_welding_wire_position.png" alt="主板底部箭头处的电阻焊盘上焊接一根导线"></p><p>进入Loader模式操作：</p><ol><li><p>拔掉主板电源，将主板完全断电</p></li><li><p>将<font color="#3f48cc"> <strong>RECOVERY</strong> </font>信号与GND相连</p></li><li><p>插上USB公对公数据线（切记插在电脑主机后面的接口，笔记本可忽略~）<br><img src="/2025/05/24/3D%E6%89%93%E5%8D%B0/MKS%20SKIPR%20V1.0%E4%B8%BB%E6%9D%BF%E6%8A%98%E8%85%BE%E8%AE%B0%E5%BD%95/mks_skipr_v1.0_soc_usb_otg.jpg" alt="核心USB OTG接口"></p></li><li><p>打开设备管理器界面，等待电脑出现“噔噔”一声后，断开焊接的飞线，此时可以看到出现一个新的设备<br><img src="/2025/05/24/3D%E6%89%93%E5%8D%B0/MKS%20SKIPR%20V1.0%E4%B8%BB%E6%9D%BF%E6%8A%98%E8%85%BE%E8%AE%B0%E5%BD%95/mks_skipr_v1.0_found_rockusb_device.png" alt="Rockusb Device"></p></li><li><p>打开瑞芯微开发工具，可以看到底部已经显示找到一个Loader设备<br><img src="/2025/05/24/3D%E6%89%93%E5%8D%B0/MKS%20SKIPR%20V1.0%E4%B8%BB%E6%9D%BF%E6%8A%98%E8%85%BE%E8%AE%B0%E5%BD%95/mks_skipr_v1.0_found_loader_device.png" alt="Loader Device"></p></li></ol><h4 id="排查结果1"><a href="#排查结果1" class="headerlink" title="排查结果1"></a>排查结果1</h4><p>该主板多次尝试后都无法进入Loader模式，看来此方法在这块主板上行不通。</p><h3 id="MaskRom模式"><a href="#MaskRom模式" class="headerlink" title="MaskRom模式"></a>MaskRom模式</h3><p>该主板想要进入MaskRom模式，需要焊接另外一根导线（也可以使用镊子或者跳线帽），查询资料可知<sup id="fnref:2" class="footnote-ref"><a href="#fn:2" rel="footnote"><span class="hint--top hint--rounded" aria-label="[fireflyROC-RK3328主板烧写eMMC简介](https://www.elecfans.com/d/1100130.html)">[2]</span></a></sup>，该芯片进入MaskRom模式需要将EMMC_CLK和GND短接：</p><p><img src="/2025/05/24/3D%E6%89%93%E5%8D%B0/MKS%20SKIPR%20V1.0%E4%B8%BB%E6%9D%BF%E6%8A%98%E8%85%BE%E8%AE%B0%E5%BD%95/mks_skipr_v1.0_emmc_clk_pin.png" alt="主板正面EMMC插座"></p><p>进入MaskRom模式操作：</p><ol><li><p>拔掉主板电源，将主板完全断电，取出TF卡</p></li><li><p>将<font color="#ed1c24"> <strong>EMMC_CLK</strong> </font>信号与GND相连</p></li><li><p>插上USB公对公数据线（切记插在电脑主机后面的接口，笔记本可忽略~）<br><img src="/2025/05/24/3D%E6%89%93%E5%8D%B0/MKS%20SKIPR%20V1.0%E4%B8%BB%E6%9D%BF%E6%8A%98%E8%85%BE%E8%AE%B0%E5%BD%95/mks_skipr_v1.0_soc_usb_otg.jpg" alt="核心USB OTG口"></p></li><li><p>打开设备管理器界面，等待电脑出现“噔噔”一声后，断开焊接的飞线，此时可以看到出现一个新的设备<br><img src="/2025/05/24/3D%E6%89%93%E5%8D%B0/MKS%20SKIPR%20V1.0%E4%B8%BB%E6%9D%BF%E6%8A%98%E8%85%BE%E8%AE%B0%E5%BD%95/mks_skipr_v1.0_found_rockusb_device.png" alt="Rockusb Device"></p></li><li><p>打开瑞芯微开发工具，可以看到底部已经显示找到一个MaskRom设备<br><img src="/2025/05/24/3D%E6%89%93%E5%8D%B0/MKS%20SKIPR%20V1.0%E4%B8%BB%E6%9D%BF%E6%8A%98%E8%85%BE%E8%AE%B0%E5%BD%95/mks_skipr_v1.0_found_maskrom_device.png" alt="MaskRom Device"></p></li></ol><h4 id="排查结果2"><a href="#排查结果2" class="headerlink" title="排查结果2"></a>排查结果2</h4><p>该主板虽然可以进入MaskRom模式，但是依然读取不到任何的固件信息。</p><h2 id="再次排查"><a href="#再次排查" class="headerlink" title="再次排查"></a>再次排查</h2><p>由于这块主板现在只能进入MaskRom模式，所以想着是不是原厂的Loader固件损坏了，想着尝试刷入新的Loader固件看能不能恢复，在网上找寻了一番，找到了适合的Loader固件：：<a href="https://xdaforums.com/t/rk-bl-rockchip-bootloader-collection.3739510/">[RK][BL] Rockchip Bootloader Collection MiniLoaderAll</a>，而且该主板还有一个HOST-USB接口可以用于查看固件烧录时的打印信息，在芯片执行相应操作时会通过该接口输出相关的Log信息，可用于判断异常情况。</p><h3 id="操作步骤"><a href="#操作步骤" class="headerlink" title="操作步骤"></a>操作步骤</h3><p>串口Log：首先将电脑通过Type-c线与主板HOST-USB接口进行连接，给主板接入12~24V电源，打开设备管理器查看COM端口号，然后打开MobaXtern软件，点击 Session –&gt; Serial，Serial Port选择设备管理器里对应的<strong>COM端口</strong>，Speed手动输入<strong>1500000</strong>，点击OK进行连接；</p><p>烧录新的Loader固件：打开瑞芯微开发工具，选择 高级功能 –&gt; Boot …，选择一个刚刚下载的MiniLoaderAll.bin文件，点击下载，此时MobaXtern软件就会抓取到Log信息；以下是我遇到的情况：</p><p><img src="/2025/05/24/3D%E6%89%93%E5%8D%B0/MKS%20SKIPR%20V1.0%E4%B8%BB%E6%9D%BF%E6%8A%98%E8%85%BE%E8%AE%B0%E5%BD%95/mks_skipr_v1.0_serial_log.png" alt="串口Log信息"></p><h3 id="问题分析"><a href="#问题分析" class="headerlink" title="问题分析"></a>问题分析</h3><p>Log信息只在最后显示了一个<strong>ERR</strong>，再没有其他任何信息，所以判断起来比较困难，好在网上有很多使用该芯片的网友发过Log帖<sup id="fnref:3" class="footnote-ref"><a href="#fn:3" rel="footnote"><span class="hint--top hint--rounded" aria-label="[rock64: “Wrong Ramdisk Image Format” after upgrade to 6.12.9](https://forum.armbian.com/topic/49358-rock64-wrong-ramdisk-image-format-after-upgrade-to-6129/)">[3]</span></a></sup> <sup id="fnref:4" class="footnote-ref"><a href="#fn:4" rel="footnote"><span class="hint--top hint--rounded" aria-label="[PXE boot on Rock64 - UDP wrong checksum #341](https://github.com/ayufan-rock64/linux-build/issues/341)">[4]</span></a></sup> <sup id="fnref:5" class="footnote-ref"><a href="#fn:5" rel="footnote"><span class="hint--top hint--rounded" aria-label="[【Linux】 Consult rk3328-roc-cc kernel problem](https://bbs.t-firefly.com/forum.php?mod=viewthread&tid=3140)">[5]</span></a></sup> <sup id="fnref:6" class="footnote-ref"><a href="#fn:6" rel="footnote"><span class="hint--top hint--rounded" aria-label="[Rock64 bricked after upgrade](https://forum.pine64.org/showthread.php?tid=9564)">[6]</span></a></sup>，其中就有一篇发布在官方Github仓库的Issue：<a href="https://github.com/makerbase-mks/MKS-SKIPR/issues/86">mks board wont boot anymore</a>，经过对比后发现，正常情况下会输出<strong>DDR3</strong>或者<strong>LPDDR3</strong>字样，但是我遇到的情况是直接输出<strong>ERR</strong>，说明是内存DDR部分出现问题，那么接下来就需要查找主板DDR电路部分了。</p><h3 id="查找问题"><a href="#查找问题" class="headerlink" title="查找问题"></a>查找问题</h3><p>由于MKS只提供了主板SCH原理图，并没有提供主板正面与背面器件的位号文档😅，所以查找起来会比较费劲了，经过一番苦苦查找后，终于发现了问题：VREF_DDR_DQ_1、VREF_DDR_CA_1、VREF_DDR_DQ_2三路参考电压其中有一路对地发生短路（具体是哪一路无法判断）；以下是我查找到的电压异常位置：</p><p><img src="/2025/05/24/3D%E6%89%93%E5%8D%B0/MKS%20SKIPR%20V1.0%E4%B8%BB%E6%9D%BF%E6%8A%98%E8%85%BE%E8%AE%B0%E5%BD%95/mks_skipr_v1.0_ddr_vref_voltage_short%20circuit.png" alt="箭头处参考电压接近0V"></p><p><img src="/2025/05/24/3D%E6%89%93%E5%8D%B0/MKS%20SKIPR%20V1.0%E4%B8%BB%E6%9D%BF%E6%8A%98%E8%85%BE%E8%AE%B0%E5%BD%95/mks_skipr_v1.0_ddr_vref_voltage_sch.png" alt="电压异常位置的原理图"></p><p>最开始我怀疑是分压电阻或者滤波电容损坏造成的，于是我将那一路参考电压的器件都拆下来之后发现还是对地短路，那么基本可以断定是DDR芯片异常导致的该问题，但具体是哪颗DDR芯片我无法确定（为什么不提供位号图！！！）；本着电路布局都是就近原则，而这路参考电压刚好在最下面这颗DDR芯片旁边，所以只能抱着赌一把的心态尝试，拆下这颗芯片后将主板焊盘处理干净再测量，对地短路的异常消失了😀，于是我将这颗拆下的DDR芯片焊盘也处理干净，测量对应的引脚与GND，但未发现短路的情况…后续只能买植锡网进行重新植锡焊接再测试了💫。</p><h3 id="焊接测试"><a href="#焊接测试" class="headerlink" title="焊接测试"></a>焊接测试</h3><p>某宝购买的植锡网收到后，给拆下来的DDR芯片重新植锡，焊接好后测试原来对地短路的地方，短路问题已经消失；给主板接入电源后发现还是不读取TF卡里的系统，也就是和之前的异常情况一样…后续在网上找到一款<a href="https://github.com/rockchip-toybrick/RKTools/blob/master/windows/Rockchip%E5%B9%B3%E5%8F%B0DDR%E6%B5%8B%E8%AF%95%E5%B7%A5%E5%85%B7_V1.38%E5%8F%91%E5%B8%83%E9%80%9A%E7%9F%A5.7z">瑞芯微DDR测试工具</a>，使用<strong>管理员权限</strong>运行该软件，测试文件选择：<strong>1GB DDR3(用1个CS且每个由2片256M×16bit组成)焊接检测.cfg</strong>，测试结果显示：<font color="#FF0000">DQ10有问题，可能是开路或者短路到地，测试结果: byte 1,有错</font>。</p><h3 id="定位问题"><a href="#定位问题" class="headerlink" title="定位问题"></a>定位问题</h3><p>根据原理图及相关的报错信息：<strong>DQ10信号线，byte 1 有错</strong> 咨询DeepSeek后，分析是U4 DDR芯片其中一根信号线，而这个U4芯片对应主板上哪颗DDR芯片并不清楚（为什么不提供位号图！！！）…后来在立创开源广场上找到一个项目：<a href="https://oshwhub.com/jianghaibo/rk3328-low-power-storage-server-">RK3328的低功耗存储服务器&#x2F;网心云盒子</a>，主核心布局和该主板比较相似，对比后发现U4就是之前拆下来重新焊上去的那颗芯片，以为是之前没焊好，拆下来后用万用表测量主板，还是对地短路，而这根信号线是直接与主核心RK3328相连的，所以只有把它拆了才知道到底是什么情况，拆下主核心后测量主板发现还是对地短路，那么基本可以断定是主板内部走线与GND发生短路，那么这块主板的上位机部分算是废了，只能当个下位机来使用了💦</p><p><img src="/2025/05/24/3D%E6%89%93%E5%8D%B0/MKS%20SKIPR%20V1.0%E4%B8%BB%E6%9D%BF%E6%8A%98%E8%85%BE%E8%AE%B0%E5%BD%95/mks_skipr_v1.0_ddr_position_no.png" alt="主板DDR芯片位号"></p><h2 id="特别鸣谢"><a href="#特别鸣谢" class="headerlink" title="特别鸣谢"></a>特别鸣谢</h2><section class="footnotes"><div class="footnote-list"><ol><li><span id="fn:1" class="footnote-text"><span><a href="https://wiki.t-firefly.com/zh_CN/ROC-RK3328-PC/bootmode.html">启动模式说明</a><a href="#fnref:1" rev="footnote" class="footnote-backref"> ↩</a></span></span></li><li><span id="fn:2" class="footnote-text"><span><a href="https://www.elecfans.com/d/1100130.html">fireflyROC-RK3328主板烧写eMMC简介</a><a href="#fnref:2" rev="footnote" class="footnote-backref"> ↩</a></span></span></li><li><span id="fn:3" class="footnote-text"><span><a href="https://forum.armbian.com/topic/49358-rock64-wrong-ramdisk-image-format-after-upgrade-to-6129/">rock64: “Wrong Ramdisk Image Format” after upgrade to 6.12.9</a><a href="#fnref:3" rev="footnote" class="footnote-backref"> ↩</a></span></span></li><li><span id="fn:4" class="footnote-text"><span><a href="https://github.com/ayufan-rock64/linux-build/issues/341">PXE boot on Rock64 - UDP wrong checksum #341</a><a href="#fnref:4" rev="footnote" class="footnote-backref"> ↩</a></span></span></li><li><span id="fn:5" class="footnote-text"><span><a href="https://bbs.t-firefly.com/forum.php?mod=viewthread&tid=3140">【Linux】 Consult rk3328-roc-cc kernel problem</a><a href="#fnref:5" rev="footnote" class="footnote-backref"> ↩</a></span></span></li><li><span id="fn:6" class="footnote-text"><span><a href="https://forum.pine64.org/showthread.php?tid=9564">Rock64 bricked after upgrade</a><a href="#fnref:6" rev="footnote" class="footnote-backref"> ↩</a></span></span></li></ol></div></section>]]></content>
    
    
    <categories>
      
      <category>3D打印</category>
      
    </categories>
    
    
    <tags>
      
      <tag>电路板</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>搭建InvenTree库存管理系统</title>
    <link href="/2025/05/05/%E4%BB%93%E5%82%A8/%E6%90%AD%E5%BB%BAInvenTree%E5%BA%93%E5%AD%98%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/"/>
    <url>/2025/05/05/%E4%BB%93%E5%82%A8/%E6%90%AD%E5%BB%BAInvenTree%E5%BA%93%E5%AD%98%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/</url>
    
    <content type="html"><![CDATA[<p>对于电子爱好者来说，随着购买的电子器件种类繁多，缺少整理会造成不必要的浪费，所以需要一款软件对各种器件进行记录与整理；市面上有面向企业的付费软件，但是对于个人使用而言，这无疑是负担不起的，在网上搜索了一些开源并且免费的软件，发现<a href="https://github.com/inventree/InvenTree">InvenTree</a>开源仓储管理系统符合本人使用场景，并且搭建方式多种，对使用环境要求不高，本篇文章将指导如何在OpenMediaVault系统中使用Docker搭建InvenTree。<sup id="fnref:1" class="footnote-ref"><a href="#fn:1" rel="footnote"><span class="hint--top hint--rounded" aria-label="[开源库存管理系统InvenTree的安装](https://blog.csdn.net/wbsu2004/article/details/134111695)">[1]</span></a></sup></p><h2 id="Docker"><a href="#Docker" class="headerlink" title="Docker"></a>Docker</h2><p>对于Docker的操作详情请查看这篇文章：<a href="xxx"></a>。</p><h2 id="安装所需软件"><a href="#安装所需软件" class="headerlink" title="安装所需软件"></a>安装所需软件</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> apt-get install \<br>    python3 python3-dev python3-pip python3-invoke python3-venv \<br>    git gcc g++ gettext gnupg \<br>    poppler-utils libpango-1.0-0 libpangoft2-1.0-0 \<br>    libjpeg-dev webp pipx<br></code></pre></td></tr></table></figure><h2 id="安装WeasyPrint"><a href="#安装WeasyPrint" class="headerlink" title="安装WeasyPrint"></a>安装WeasyPrint</h2><p>在某些系统上，需要安装此软件包及依赖，详细请查看官方说明：<a href="https://doc.courtbouillon.org/weasyprint/stable/first_steps.html">WeasyPrint Installation</a>。</p><p><strong>Debian ≥ 11</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> apt install weasyprint<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> apt install python3-pip libpango-1.0-0 libpangoft2-1.0-0 libharfbuzz-subset0 libjpeg-dev libopenjp2-7-dev libffi-dev<br></code></pre></td></tr></table></figure><h2 id="更换pip及pip3源"><a href="#更换pip及pip3源" class="headerlink" title="更换pip及pip3源"></a>更换pip及pip3源</h2><p>更换为阿里云的源。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> pip config <span class="hljs-built_in">set</span> global.index-url https://mirrors.aliyun.com/pypi/simple<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> pip config <span class="hljs-built_in">set</span> install.trusted-host mirrors.aliyun.com<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> pip3 config <span class="hljs-built_in">set</span> global.index-url https://mirrors.aliyun.com/pypi/simple<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> pip3 config <span class="hljs-built_in">set</span> install.trusted-host mirrors.aliyun.com<br></code></pre></td></tr></table></figure><h2 id="创建InvenTree文件夹"><a href="#创建InvenTree文件夹" class="headerlink" title="创建InvenTree文件夹"></a>创建InvenTree文件夹</h2><blockquote><p>安装InvenTree的步骤可能会有所变化，详情请查看官方文档：<a href="https://docs.inventree.org/en/stable/start/docker_install/#frequently-asked-questions">Docker Production Server</a>。</p></blockquote><p>此文件夹用于存放InvenTree Docker容器相关配置文件。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cd</span><br><br><span class="hljs-built_in">mkdir</span> docker<br><br><span class="hljs-built_in">cd</span> docker<br><br><span class="hljs-built_in">mkdir</span> inventree<br><br><span class="hljs-built_in">cd</span> inventree<br></code></pre></td></tr></table></figure><h2 id="下载InvenTree所需文件"><a href="#下载InvenTree所需文件" class="headerlink" title="下载InvenTree所需文件"></a>下载InvenTree所需文件</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">wget https://raw.githubusercontent.com/inventree/inventree/e2a092ea0436f9f9805e0633b0addef5f10e6f35/contrib/container/docker-compose.yml<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">wget https://raw.githubusercontent.com/inventree/inventree/e2a092ea0436f9f9805e0633b0addef5f10e6f35/contrib/container/.env<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">wget https://raw.githubusercontent.com/inventree/inventree/e2a092ea0436f9f9805e0633b0addef5f10e6f35/contrib/container/Caddyfile<br></code></pre></td></tr></table></figure><h2 id="编辑配置文件"><a href="#编辑配置文件" class="headerlink" title="编辑配置文件"></a>编辑配置文件</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> nano .<span class="hljs-built_in">env</span><br></code></pre></td></tr></table></figure><p>修改以下配置的值：</p><p><code>INVENTREE_SITE_URL=&quot;http://192.168.x.xxx&quot;</code>：InvenTree网页地址。</p><p><code>INVENTREE_EXT_VOLUME=/srv/dev-disk-by-uuid-b218f1c8-9bea-4c13-998d-ec63acd03af2/Appdata/inventree-data</code>：数据存放位置。</p><p><code>INVENTREE_ADMIN_USER=xxx</code>：管理员账户名称。</p><p><code>INVENTREE_ADMIN_PASSWORD=xxx</code>：管理员账户密码。</p><p><code>INVENTREE_ADMIN_EMAIL=1639945679@qq.com</code>：管理员账户邮箱。</p><p><code>INVENTREE_DB_USER=xxx</code>：数据库用户名称。</p><p><code>INVENTREE_DB_PASSWORD=xxx</code>：数据库用户密码。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> nano docker-compose.yml<br></code></pre></td></tr></table></figure><p>修改以下位置：</p><p><code>$&#123;INVENTREE_WEB_PORT:-80&#125;:80</code>：<code>-80</code>为网页端口号，默认值会和OpenMediaVault冲突，请修改为其他端口！</p><h2 id="初始化数据库"><a href="#初始化数据库" class="headerlink" title="初始化数据库"></a>初始化数据库</h2><blockquote><p>需在inventree文件夹中执行。</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> docker compose run -e http_proxy=http://ip:port -e https_proxy=http://ip:port --<span class="hljs-built_in">rm</span> inventree-server invoke update<br></code></pre></td></tr></table></figure><p>由于网络环境复杂，该命令使用了代理，防止出现不必要的情况，此过程比较漫长，而且会伴有失败的情况，请解决相关报错并多次尝试。</p><div class="note note-info">            <p>在某些系统上，可能存在PostgreSQL版本不兼容而出现报错，可以添加官方源进行版本切换，详细安装说明请查看 <a href="https://www.postgresql.org/download/linux/debian/">PostgreSQL: Linux downloads (Debian)</a>：</p><ol><li><p>安装PostgreSQL</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> apt install postgresql<br></code></pre></td></tr></table></figure></li><li><p>添加PostgreSQL官方源</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> apt install -y postgresql-common<br></code></pre></td></tr></table></figure> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> /usr/share/postgresql-common/pgdg/apt.postgresql.org.sh<br></code></pre></td></tr></table></figure> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> apt install -y postgresql-version<br></code></pre></td></tr></table></figure></li></ol>          </div><h2 id="启动容器"><a href="#启动容器" class="headerlink" title="启动容器"></a>启动容器</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">docker compose up -d<br></code></pre></td></tr></table></figure><h2 id="登录查看InvenTree网页界面"><a href="#登录查看InvenTree网页界面" class="headerlink" title="登录查看InvenTree网页界面"></a>登录查看InvenTree网页界面</h2><p>在浏览器中输入IP地址及设置的端口，即可打开InvenTree网页界面，使用管理员账户登录即可。</p><p><img src="/2025/05/05/%E4%BB%93%E5%82%A8/%E6%90%AD%E5%BB%BAInvenTree%E5%BA%93%E5%AD%98%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/hello_inventree.png" alt="InvenTree网页界面"></p><h2 id="特别鸣谢"><a href="#特别鸣谢" class="headerlink" title="特别鸣谢"></a>特别鸣谢</h2><section class="footnotes"><div class="footnote-list"><ol><li><span id="fn:1" class="footnote-text"><span><a href="https://blog.csdn.net/wbsu2004/article/details/134111695">开源库存管理系统InvenTree的安装</a><a href="#fnref:1" rev="footnote" class="footnote-backref"> ↩</a></span></span></li></ol></div></section>]]></content>
    
    
    <categories>
      
      <category>仓储</category>
      
    </categories>
    
    
    <tags>
      
      <tag>InvenTree</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Marlin For OpenPNP固件参数配置</title>
    <link href="/2025/04/11/%E8%B4%B4%E7%89%87%E6%9C%BA/Marlin%20For%20OpenPNP%E5%9B%BA%E4%BB%B6%E5%8F%82%E6%95%B0%E9%85%8D%E7%BD%AE/"/>
    <url>/2025/04/11/%E8%B4%B4%E7%89%87%E6%9C%BA/Marlin%20For%20OpenPNP%E5%9B%BA%E4%BB%B6%E5%8F%82%E6%95%B0%E9%85%8D%E7%BD%AE/</url>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p><a href="https://github.com/Smoothieware/Smoothieware">Smoothieboard固件项目</a>的README概述里说该项目适用于LPC17xx微控制器，但将固件烧录到BTT SKR V1.4（LPC1768）主板后，连最基础的移动都无法执行，串口会返回答复：<code>printe pause</code>，使用OpenPNP软件检测固件时也会打印已弃用的警告信息：<code>WARNING:deprecated_MCU</code>。</p><p>如果烧录到BTT SKR V1.4 Turbo（LPC1769）主板则是可以正常使用，暂不清楚导致该情况的具体原因，而且该项目已经多年未维护，很多功能也不支持；所以尝试使用Marlin固件配置编译OpenPNP固件烧录到BTT SKR V1.4（LPC1768）&#x2F; BTT SKR V1.4（LPC1768）主板中进行使用。</p><p>这2款主板均可搭配<a href="https://github.com/bigtreetech/BTT-Expansion-module/tree/master/BTT%20EXP-MOT">BTT EXP-MOT扩展板</a>使用，扩展之后相当于有8个电机驱动位，这样可以在OpenPNP里配置为2个吸嘴单元，4个吸嘴；本次使用Marlin-2.1.3-b测试版本进行OpenPNP配置（当前稳定版Marlin-2.0.9.7不能定义8个轴，编译时会有报错，尝试了各种方法也没解决😅），以下只列出部分参数，仅供参考；更多详细参数配置请查看 <a href="https://marlinfw.org/docs/configuration/configuration.html#configuring-marlin">Marlin官方参数配置文档</a>。</p><blockquote><p>如果主板的Bootloader为Smoothieware固件的DFU-Bootloader，只要将主板通过USB线连接上电脑后，就会将插入板载TF卡接口的TF卡模拟成一个U盘，这样Marlin每次重新编译生成firmware.bin文件时，可以将新固件复制到U盘中，然后弹出U盘并给主板断电重启，就能直接刷写新固件了。🎉<br>这两款主板出厂均自带DFU-Bootloader。😀</p></blockquote><h2 id="pins-BTT-SKR-V1-4-h"><a href="#pins-BTT-SKR-V1-4-h" class="headerlink" title="pins_BTT_SKR_V1_4.h"></a>pins_BTT_SKR_V1_4.h</h2><h3 id="定义I、J、K、U、V轴限位引脚"><a href="#定义I、J、K、U、V轴限位引脚" class="headerlink" title="定义I、J、K、U、V轴限位引脚"></a>定义I、J、K、U、V轴限位引脚</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">//#define E0_DIAG_PIN                        P1_26  // E0DET</span><br><span class="hljs-comment">//#define E1_DIAG_PIN                        P1_25  // E1DET</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> I_DIAG_PIN                         P1_26  <span class="hljs-comment">// I-STOP</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> J_DIAG_PIN                         P1_25  <span class="hljs-comment">// J-STOP</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> K_DIAG_PIN                         P1_21  <span class="hljs-comment">// K-STOP</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> U_DIAG_PIN                         P1_19  <span class="hljs-comment">// U-STOP</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> V_DIAG_PIN                         P0_28  <span class="hljs-comment">// V-STOP</span></span><br><br><span class="hljs-meta">#<span class="hljs-keyword">ifdef</span> I_STALL_SENSITIVITY</span><br>  <span class="hljs-meta">#<span class="hljs-keyword">define</span> I_STOP_PIN                  I_DIAG_PIN</span><br>  <span class="hljs-meta">#<span class="hljs-keyword">if</span> I_HOME_TO_MIN</span><br>    <span class="hljs-meta">#<span class="hljs-keyword">define</span> I_MAX_PIN                      P1_26</span><br>  <span class="hljs-meta">#<span class="hljs-keyword">else</span></span><br>    <span class="hljs-meta">#<span class="hljs-keyword">define</span> I_MIN_PIN                      P1_26</span><br>  <span class="hljs-meta">#<span class="hljs-keyword">endif</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">elif</span> ENABLED(I_DUAL_ENDSTOPS)</span><br>  <span class="hljs-meta">#<span class="hljs-keyword">ifndef</span> I_MIN_PIN</span><br>    <span class="hljs-meta">#<span class="hljs-keyword">define</span> I_MIN_PIN                      P1_26</span><br>  <span class="hljs-meta">#<span class="hljs-keyword">endif</span></span><br>  <span class="hljs-meta">#<span class="hljs-keyword">ifndef</span> I_MAX_PIN</span><br>    <span class="hljs-meta">#<span class="hljs-keyword">define</span> I_MAX_PIN                      P1_26</span><br>  <span class="hljs-meta">#<span class="hljs-keyword">endif</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">else</span></span><br>  <span class="hljs-meta">#<span class="hljs-keyword">define</span> I_STOP_PIN                       P1_26  <span class="hljs-comment">// I-STOP</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">endif</span></span><br><br><span class="hljs-meta">#<span class="hljs-keyword">ifdef</span> J_STALL_SENSITIVITY</span><br>  <span class="hljs-meta">#<span class="hljs-keyword">define</span> J_STOP_PIN                  J_DIAG_PIN</span><br>  <span class="hljs-meta">#<span class="hljs-keyword">if</span> J_HOME_TO_MIN</span><br>    <span class="hljs-meta">#<span class="hljs-keyword">define</span> J_MAX_PIN                      P1_25</span><br>  <span class="hljs-meta">#<span class="hljs-keyword">else</span></span><br>    <span class="hljs-meta">#<span class="hljs-keyword">define</span> J_MIN_PIN                      P1_25</span><br>  <span class="hljs-meta">#<span class="hljs-keyword">endif</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">elif</span> ENABLED(J_DUAL_ENDSTOPS)</span><br>  <span class="hljs-meta">#<span class="hljs-keyword">ifndef</span> J_MIN_PIN</span><br>    <span class="hljs-meta">#<span class="hljs-keyword">define</span> J_MIN_PIN                      P1_25</span><br>  <span class="hljs-meta">#<span class="hljs-keyword">endif</span></span><br>  <span class="hljs-meta">#<span class="hljs-keyword">ifndef</span> J_MAX_PIN</span><br>    <span class="hljs-meta">#<span class="hljs-keyword">define</span> J_MAX_PIN                      P1_25</span><br>  <span class="hljs-meta">#<span class="hljs-keyword">endif</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">else</span></span><br>  <span class="hljs-meta">#<span class="hljs-keyword">define</span> J_STOP_PIN                       P1_25  <span class="hljs-comment">// J-STOP</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">endif</span></span><br><br><span class="hljs-meta">#<span class="hljs-keyword">ifdef</span> K_STALL_SENSITIVITY</span><br>  <span class="hljs-meta">#<span class="hljs-keyword">define</span> K_STOP_PIN                  K_DIAG_PIN</span><br>  <span class="hljs-meta">#<span class="hljs-keyword">if</span> K_HOME_TO_MIN</span><br>    <span class="hljs-meta">#<span class="hljs-keyword">define</span> K_MAX_PIN                      P1_25</span><br>  <span class="hljs-meta">#<span class="hljs-keyword">else</span></span><br>    <span class="hljs-meta">#<span class="hljs-keyword">define</span> K_MIN_PIN                      P1_25</span><br>  <span class="hljs-meta">#<span class="hljs-keyword">endif</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">elif</span> ENABLED(K_DUAL_ENDSTOPS)</span><br>  <span class="hljs-meta">#<span class="hljs-keyword">ifndef</span> K_MIN_PIN</span><br>    <span class="hljs-meta">#<span class="hljs-keyword">define</span> K_MIN_PIN                      P1_25</span><br>  <span class="hljs-meta">#<span class="hljs-keyword">endif</span></span><br>  <span class="hljs-meta">#<span class="hljs-keyword">ifndef</span> K_MAX_PIN</span><br>    <span class="hljs-meta">#<span class="hljs-keyword">define</span> K_MAX_PIN                      P1_25</span><br>  <span class="hljs-meta">#<span class="hljs-keyword">endif</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">else</span></span><br>  <span class="hljs-meta">#<span class="hljs-keyword">define</span> K_STOP_PIN                       P1_00  <span class="hljs-comment">// K-STOP</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">endif</span></span><br><br><span class="hljs-meta">#<span class="hljs-keyword">ifdef</span> U_STALL_SENSITIVITY</span><br>  <span class="hljs-meta">#<span class="hljs-keyword">define</span> U_STOP_PIN                  U_DIAG_PIN</span><br>  <span class="hljs-meta">#<span class="hljs-keyword">if</span> U_HOME_TO_MIN</span><br>    <span class="hljs-meta">#<span class="hljs-keyword">define</span> U_MAX_PIN                      P1_00</span><br>  <span class="hljs-meta">#<span class="hljs-keyword">else</span></span><br>    <span class="hljs-meta">#<span class="hljs-keyword">define</span> U_MIN_PIN                      P1_00</span><br>  <span class="hljs-meta">#<span class="hljs-keyword">endif</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">else</span></span><br>  <span class="hljs-meta">#<span class="hljs-keyword">ifndef</span> U_STOP_PIN</span><br>    <span class="hljs-meta">#<span class="hljs-keyword">define</span> U_STOP_PIN                     P1_19  <span class="hljs-comment">// U-STOP</span></span><br>  <span class="hljs-meta">#<span class="hljs-keyword">endif</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">endif</span></span><br><br><span class="hljs-meta">#<span class="hljs-keyword">ifdef</span> V_STALL_SENSITIVITY</span><br>  <span class="hljs-meta">#<span class="hljs-keyword">define</span> V_STOP_PIN                  V_DIAG_PIN</span><br>  <span class="hljs-meta">#<span class="hljs-keyword">if</span> V_HOME_TO_MIN</span><br>    <span class="hljs-meta">#<span class="hljs-keyword">define</span> V_MAX_PIN                      P1_00</span><br>  <span class="hljs-meta">#<span class="hljs-keyword">else</span></span><br>    <span class="hljs-meta">#<span class="hljs-keyword">define</span> V_MIN_PIN                      P1_00</span><br>  <span class="hljs-meta">#<span class="hljs-keyword">endif</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">else</span></span><br>  <span class="hljs-meta">#<span class="hljs-keyword">ifndef</span> V_STOP_PIN</span><br>    <span class="hljs-meta">#<span class="hljs-keyword">define</span> V_STOP_PIN                     P0_28  <span class="hljs-comment">// V-STOP</span></span><br>  <span class="hljs-meta">#<span class="hljs-keyword">endif</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">endif</span></span><br></code></pre></td></tr></table></figure><p>新增I、J、K、U、V轴限位引脚定义；对于线性轴，必须有对应轴的限位引脚定义，实际归位时需要检测对应引脚逻辑信号，而对于旋转轴，实际使用时无需限位进行检测，但是不定义对应旋转轴的限位引脚时编译时会报错，所以这里给旋转轴也定义了引脚。</p><h3 id="配置I、J、K、U、V轴步进控制引脚"><a href="#配置I、J、K、U、V轴步进控制引脚" class="headerlink" title="配置I、J、K、U、V轴步进控制引脚"></a>配置I、J、K、U、V轴步进控制引脚</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> I_STEP_PIN                        P2_13</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> I_DIR_PIN                         P0_11</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> I_ENABLE_PIN                      P2_12</span><br><span class="hljs-meta">#<span class="hljs-keyword">ifndef</span> I_CS_PIN</span><br>  <span class="hljs-meta">#<span class="hljs-keyword">define</span> I_CS_PIN                        P1_04</span><br><span class="hljs-meta">#<span class="hljs-keyword">endif</span></span><br><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> J_STEP_PIN                        P1_15</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> J_DIR_PIN                         P1_14</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> J_ENABLE_PIN                      P1_16</span><br><span class="hljs-meta">#<span class="hljs-keyword">ifndef</span> J_CS_PIN</span><br>  <span class="hljs-meta">#<span class="hljs-keyword">define</span> J_CS_PIN                        P1_01</span><br><span class="hljs-meta">#<span class="hljs-keyword">endif</span></span><br><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> K_STEP_PIN                        P3_25</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> K_DIR_PIN                         P0_18</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> K_ENABLE_PIN                      P1_31</span><br><span class="hljs-meta">#<span class="hljs-keyword">ifndef</span> K_CS_PIN</span><br>  <span class="hljs-meta">#<span class="hljs-keyword">define</span> K_CS_PIN                        P1_20</span><br><span class="hljs-meta">#<span class="hljs-keyword">endif</span></span><br><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> U_STEP_PIN                        P0_16</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> U_DIR_PIN                         P3_26</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> U_ENABLE_PIN                      P1_22</span><br><span class="hljs-meta">#<span class="hljs-keyword">ifndef</span> U_CS_PIN</span><br>  <span class="hljs-meta">#<span class="hljs-keyword">define</span> U_CS_PIN                        P1_18</span><br><span class="hljs-meta">#<span class="hljs-keyword">endif</span></span><br><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> V_STEP_PIN                        P0_15</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> V_DIR_PIN                         P0_17</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> V_ENABLE_PIN                      P1_23</span><br><span class="hljs-meta">#<span class="hljs-keyword">ifndef</span> V_CS_PIN</span><br>  <span class="hljs-meta">#<span class="hljs-keyword">define</span> V_CS_PIN                        P1_30</span><br><span class="hljs-meta">#<span class="hljs-keyword">endif</span></span><br></code></pre></td></tr></table></figure><p>将E0、E1的步进控制引脚都注释掉，然后新增I、J、K、U、V轴的步进控制引脚定义；虽然不修改Marlin会自动配置，但是我测试时发现电机只能朝一个方向，无法换向，暂不清楚是不是Marlin的BUG。💦</p><h2 id="Configuration-h"><a href="#Configuration-h" class="headerlink" title="Configuration.h"></a>Configuration.h</h2><h3 id="配置信息"><a href="#配置信息" class="headerlink" title="配置信息"></a>配置信息</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> STRING_CONFIG_H_AUTHOR <span class="hljs-string">&quot;(dongxunz, openpnp config)&quot;</span></span><br></code></pre></td></tr></table></figure><p>固件配置作者名及当前配置的类型，可视情况进行修改。</p><h3 id="主板型号"><a href="#主板型号" class="headerlink" title="主板型号"></a>主板型号</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> MOTHERBOARD BOARD_BTT_SKR_V1_4            <span class="hljs-comment">//BTT SKR V1.4（LPC1768）</span></span><br><span class="hljs-comment">//#define MOTHERBOARD BOARD_BTT_SKR_V1_4_TURBO    //BTT SKR V1.4 Turbo（LPC1769）</span><br></code></pre></td></tr></table></figure><p>其他主板型号请查看Marlin固件根目录下的 Marlin&#x2F;src&#x2F;core&#x2F;boards.h，根据自己的主板型号进行修改成对应的即可。</p><h3 id="设置串口"><a href="#设置串口" class="headerlink" title="设置串口"></a>设置串口</h3><p>BTT SKR V1.4（LPC1768）和BTT SKR V1.4 Turbo（LPC1769）主板都有3个串口，除第一串口必须开启外，其他串口请按需启用。</p><h4 id="第一串口"><a href="#第一串口" class="headerlink" title="第一串口"></a>第一串口</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> SERIAL_PORT -1</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> BAUDRATE 115200</span><br></code></pre></td></tr></table></figure><h4 id="第二串口"><a href="#第二串口" class="headerlink" title="第二串口"></a>第二串口</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> SERIAL_PORT_2 0</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> BAUDRATE_2 115200</span><br></code></pre></td></tr></table></figure><h4 id="第三串口"><a href="#第三串口" class="headerlink" title="第三串口"></a>第三串口</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">//#define SERIAL_PORT_3 1</span><br><span class="hljs-comment">//#define BAUDRATE_3 250000</span><br></code></pre></td></tr></table></figure><p>第一串口为板载USB，需配置为-1，代表使用USB模拟串行端口。<br>第二串口为TX0&#x2F;RX0，需配置为0，官方分配给了TFT屏幕接口。<br>第三串口为TX3&#x2F;RX3，需配置为1，官方分配给了WIFI接口。</p><p>过高的波特率可能会增加通讯失败的概率（受到环境干扰）。</p><p>可选波特率：<br><code>2400, 9600, 19200, 38400, 57600, 115200, 250000, 500000, 1000000</code></p><h3 id="机器类型"><a href="#机器类型" class="headerlink" title="机器类型"></a>机器类型</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> CUSTOM_MACHINE_NAME <span class="hljs-string">&quot;Pick and Place Machine&quot;</span></span><br></code></pre></td></tr></table></figure><p>在OpenPNP检测固件时可以显示机器类型。</p><h3 id="UUID设置"><a href="#UUID设置" class="headerlink" title="UUID设置"></a>UUID设置</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> MACHINE_UUID <span class="hljs-string">&quot;6a9922cf-9c52-4f8e-ae01-a0cb7f963f31&quot;</span></span><br></code></pre></td></tr></table></figure><p>机器唯一ID，在某些应用程序中用于区分不同的机器。</p><h3 id="电机驱动芯片型号"><a href="#电机驱动芯片型号" class="headerlink" title="电机驱动芯片型号"></a>电机驱动芯片型号</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> X_DRIVER_TYPE  TMC2209</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> Y_DRIVER_TYPE  TMC2209</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> Z_DRIVER_TYPE  TMC2209</span><br><span class="hljs-comment">//#define X2_DRIVER_TYPE A4988</span><br><span class="hljs-comment">//#define Y2_DRIVER_TYPE A4988</span><br><span class="hljs-comment">//#define Z2_DRIVER_TYPE A4988</span><br><span class="hljs-comment">//#define Z3_DRIVER_TYPE A4988</span><br><span class="hljs-comment">//#define Z4_DRIVER_TYPE A4988</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> I_DRIVER_TYPE  TMC2209</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> J_DRIVER_TYPE  TMC2209</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> K_DRIVER_TYPE  TMC2209</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> U_DRIVER_TYPE  TMC2209</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> V_DRIVER_TYPE  TMC2209</span><br><span class="hljs-comment">//#define W_DRIVER_TYPE  A4988</span><br><span class="hljs-comment">//#define E0_DRIVER_TYPE A4988</span><br><span class="hljs-comment">//#define E1_DRIVER_TYPE A4988</span><br><span class="hljs-comment">//#define E2_DRIVER_TYPE A4988</span><br><span class="hljs-comment">//#define E3_DRIVER_TYPE A4988</span><br><span class="hljs-comment">//#define E4_DRIVER_TYPE A4988</span><br><span class="hljs-comment">//#define E5_DRIVER_TYPE A4988</span><br><span class="hljs-comment">//#define E6_DRIVER_TYPE A4988</span><br><span class="hljs-comment">//#define E7_DRIVER_TYPE A4988</span><br></code></pre></td></tr></table></figure><p>请按照实际使用到的轴数量进行相应启用，本次DIY的贴片机为2个吸嘴单元，4个吸嘴，所以需要8个轴；不同的芯片型号可以混合使用。<sup id="fnref:1" class="footnote-ref"><a href="#fn:1" rel="footnote"><span class="hint--top hint--rounded" aria-label="[Marlin2ForPipetBot firmware](https://github.com/DerAndere1/Marlin/wiki)">[1]</span></a></sup></p><p>可选电机驱动芯片型号：<br><code>&#39;A4988&#39;, &#39;A5984&#39;, &#39;DRV8825&#39;, &#39;LV8729&#39;, &#39;L6470&#39;, &#39;L6474&#39;, &#39;POWERSTEP01&#39;, &#39;TB6560&#39;, &#39;TB6600&#39;, &#39;TMC2100&#39;, &#39;TMC2130&#39;, &#39;TMC2130_STANDALONE&#39;, &#39;TMC2160&#39;, &#39;TMC2160_STANDALONE&#39;, &#39;TMC2208&#39;, &#39;TMC2208_STANDALONE&#39;, &#39;TMC2209&#39;, &#39;TMC2209_STANDALONE&#39;, &#39;TMC26X&#39;, &#39;TMC26X_STANDALONE&#39;, &#39;TMC2660&#39;, &#39;TMC2660_STANDALONE&#39;, &#39;TMC5130&#39;, &#39;TMC5130_STANDALONE&#39;, &#39;TMC5160&#39;, &#39;TMC5160_STANDALONE&#39;</code></p><p>注意：<br><code>_STANDALONE</code> 后缀表示不启用UART模式，使用STEP模式。</p><h3 id="轴配置"><a href="#轴配置" class="headerlink" title="轴配置"></a>轴配置</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">ifdef</span> I_DRIVER_TYPE</span><br>  <span class="hljs-meta">#<span class="hljs-keyword">define</span> AXIS4_NAME <span class="hljs-string">&#x27;A&#x27;</span> <span class="hljs-comment">// :[&#x27;A&#x27;, &#x27;B&#x27;, &#x27;C&#x27;, &#x27;U&#x27;, &#x27;V&#x27;, &#x27;W&#x27;]</span></span><br>  <span class="hljs-meta">#<span class="hljs-keyword">define</span> AXIS4_ROTATES</span><br><span class="hljs-meta">#<span class="hljs-keyword">endif</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">ifdef</span> J_DRIVER_TYPE</span><br>  <span class="hljs-meta">#<span class="hljs-keyword">define</span> AXIS5_NAME <span class="hljs-string">&#x27;B&#x27;</span> <span class="hljs-comment">// :[&#x27;B&#x27;, &#x27;C&#x27;, &#x27;U&#x27;, &#x27;V&#x27;, &#x27;W&#x27;]</span></span><br>  <span class="hljs-meta">#<span class="hljs-keyword">define</span> AXIS5_ROTATES</span><br><span class="hljs-meta">#<span class="hljs-keyword">endif</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">ifdef</span> K_DRIVER_TYPE</span><br>  <span class="hljs-meta">#<span class="hljs-keyword">define</span> AXIS6_NAME <span class="hljs-string">&#x27;C&#x27;</span> <span class="hljs-comment">// :[&#x27;C&#x27;, &#x27;U&#x27;, &#x27;V&#x27;, &#x27;W&#x27;]</span></span><br>  <span class="hljs-meta">#<span class="hljs-keyword">define</span> AXIS6_ROTATES</span><br><span class="hljs-meta">#<span class="hljs-keyword">endif</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">ifdef</span> U_DRIVER_TYPE</span><br>  <span class="hljs-meta">#<span class="hljs-keyword">define</span> AXIS7_NAME <span class="hljs-string">&#x27;U&#x27;</span> <span class="hljs-comment">// :[&#x27;U&#x27;, &#x27;V&#x27;, &#x27;W&#x27;]</span></span><br>  <span class="hljs-meta">#<span class="hljs-keyword">define</span> AXIS7_ROTATES</span><br><span class="hljs-meta">#<span class="hljs-keyword">endif</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">ifdef</span> V_DRIVER_TYPE</span><br>  <span class="hljs-meta">#<span class="hljs-keyword">define</span> AXIS8_NAME <span class="hljs-string">&#x27;V&#x27;</span> <span class="hljs-comment">// :[&#x27;V&#x27;, &#x27;W&#x27;]</span></span><br>  <span class="hljs-comment">//#define AXIS8_ROTATES</span><br><span class="hljs-meta">#<span class="hljs-keyword">endif</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">ifdef</span> W_DRIVER_TYPE</span><br>  <span class="hljs-meta">#<span class="hljs-keyword">define</span> AXIS9_NAME <span class="hljs-string">&#x27;W&#x27;</span> <span class="hljs-comment">// :[&#x27;W&#x27;]</span></span><br>  <span class="hljs-comment">//#define AXIS9_ROTATES</span><br><span class="hljs-meta">#<span class="hljs-keyword">endif</span></span><br></code></pre></td></tr></table></figure><p>对于额外的轴，需要配置对应的轴名称及是否为旋转轴，名称不能修改，保持默认即可，而是否为旋转轴请按实际情况配置。</p><h3 id="挤出机数量"><a href="#挤出机数量" class="headerlink" title="挤出机数量"></a>挤出机数量</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> EXTRUDERS 0</span><br></code></pre></td></tr></table></figure><p>贴片机无需使用挤出机。</p><h3 id="温度传感器"><a href="#温度传感器" class="headerlink" title="温度传感器"></a>温度传感器</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> TEMP_SENSOR_0 998</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> TEMP_SENSOR_1 998</span><br><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> TEMP_SENSOR_BED 998</span><br></code></pre></td></tr></table></figure><p>将板载的3个温度传感器接口都定义为<code>998</code>，即表示让温度恒定为25°C（不使用温度功能，可视情况修改）。</p><h3 id="关闭挤出机PID加热控制"><a href="#关闭挤出机PID加热控制" class="headerlink" title="关闭挤出机PID加热控制"></a>关闭挤出机PID加热控制</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">//#define PIDTEMP           // See the PID Tuning Guide at https://reprap.org/wiki/PID_Tuning</span><br></code></pre></td></tr></table></figure><p>关闭挤出机的PID加热控制功能。</p><h3 id="运动学"><a href="#运动学" class="headerlink" title="运动学"></a>运动学</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> COREXY</span><br><span class="hljs-comment">//#define COREXZ</span><br><span class="hljs-comment">//#define COREYZ</span><br><span class="hljs-comment">//#define COREYX</span><br><span class="hljs-comment">//#define COREZX</span><br><span class="hljs-comment">//#define COREZY</span><br></code></pre></td></tr></table></figure><p>不启用任何运动学即为默认的笛卡尔运动学，请根据实际机器启用对应的运动学。</p><h3 id="硬限位"><a href="#硬限位" class="headerlink" title="硬限位"></a>硬限位</h3><h4 id="启用上拉"><a href="#启用上拉" class="headerlink" title="启用上拉"></a>启用上拉</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> ENDSTOPPULLUPS</span><br><span class="hljs-meta">#<span class="hljs-keyword">if</span> DISABLED(ENDSTOPPULLUPS)</span><br>  <span class="hljs-comment">// Disable ENDSTOPPULLUPS to set pullups individually</span><br>  <span class="hljs-meta">#<span class="hljs-keyword">define</span> ENDSTOPPULLUP_XMIN</span><br>  <span class="hljs-meta">#<span class="hljs-keyword">define</span> ENDSTOPPULLUP_YMIN</span><br>  <span class="hljs-meta">#<span class="hljs-keyword">define</span> ENDSTOPPULLUP_ZMIN</span><br>  <span class="hljs-comment">//#define ENDSTOPPULLUP_IMIN</span><br>  <span class="hljs-comment">//#define ENDSTOPPULLUP_JMIN</span><br>  <span class="hljs-comment">//#define ENDSTOPPULLUP_KMIN</span><br>  <span class="hljs-comment">//#define ENDSTOPPULLUP_UMIN</span><br>  <span class="hljs-meta">#<span class="hljs-keyword">define</span> ENDSTOPPULLUP_VMIN</span><br>  <span class="hljs-comment">//#define ENDSTOPPULLUP_WMIN</span><br>  <span class="hljs-comment">//#define ENDSTOPPULLUP_XMAX</span><br>  <span class="hljs-comment">//#define ENDSTOPPULLUP_YMAX</span><br>  <span class="hljs-comment">//#define ENDSTOPPULLUP_ZMAX</span><br>  <span class="hljs-comment">//#define ENDSTOPPULLUP_IMAX</span><br>  <span class="hljs-comment">//#define ENDSTOPPULLUP_JMAX</span><br>  <span class="hljs-comment">//#define ENDSTOPPULLUP_KMAX</span><br>  <span class="hljs-comment">//#define ENDSTOPPULLUP_UMAX</span><br>  <span class="hljs-comment">//#define ENDSTOPPULLUP_VMAX</span><br>  <span class="hljs-comment">//#define ENDSTOPPULLUP_WMAX</span><br>  <span class="hljs-comment">//#define ENDSTOPPULLUP_ZMIN_PROBE</span><br><span class="hljs-meta">#<span class="hljs-keyword">endif</span></span><br></code></pre></td></tr></table></figure><p>启用对应轴的硬限位引脚上拉功能，防止引脚信号浮动造成的异常情况。</p><h4 id="判定逻辑"><a href="#判定逻辑" class="headerlink" title="判定逻辑"></a>判定逻辑</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> X_MIN_ENDSTOP_HIT_STATE HIGH</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> X_MAX_ENDSTOP_HIT_STATE HIGH</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> Y_MIN_ENDSTOP_HIT_STATE HIGH</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> Y_MAX_ENDSTOP_HIT_STATE HIGH</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> Z_MIN_ENDSTOP_HIT_STATE HIGH</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> Z_MAX_ENDSTOP_HIT_STATE HIGH</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> I_MIN_ENDSTOP_HIT_STATE LOW</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> I_MAX_ENDSTOP_HIT_STATE LOW</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> J_MIN_ENDSTOP_HIT_STATE LOW</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> J_MAX_ENDSTOP_HIT_STATE LOW</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> K_MIN_ENDSTOP_HIT_STATE LOW</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> K_MAX_ENDSTOP_HIT_STATE LOW</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> U_MIN_ENDSTOP_HIT_STATE LOW</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> U_MAX_ENDSTOP_HIT_STATE LOW</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> V_MIN_ENDSTOP_HIT_STATE HIGH</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> V_MAX_ENDSTOP_HIT_STATE HIGH</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> W_MIN_ENDSTOP_HIT_STATE HIGH</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> W_MAX_ENDSTOP_HIT_STATE HIGH</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> Z_MIN_PROBE_ENDSTOP_HIT_STATE HIGH</span><br></code></pre></td></tr></table></figure><p>各轴对应的硬限位逻辑电平判定，根据实际限位接线及触发信号进行修改。</p><h4 id="检查归位限位信号"><a href="#检查归位限位信号" class="headerlink" title="检查归位限位信号"></a>检查归位限位信号</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> DETECT_BROKEN_ENDSTOP</span><br></code></pre></td></tr></table></figure><p>检查归位移动时限位开关是否卡住或断开。</p><h3 id="每移动1mm所需脉冲数"><a href="#每移动1mm所需脉冲数" class="headerlink" title="每移动1mm所需脉冲数"></a>每移动1mm所需脉冲数</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> DEFAULT_AXIS_STEPS_PER_UNIT   &#123; 160, 160, 160, 407.43666, 407.43666, 407.43666, 407.43666, 160 &#125;</span><br></code></pre></td></tr></table></figure><p>分别代表X、Y、Z、I、J、K、U、V轴每移动1mm需要多少脉冲，计算公式：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs text">同步带传动（通常是X，Y轴）：<br>(360°/步距角*细分数)/(齿间距*齿数)=(360/1.8*32)/(2*20)=160<br><br>丝杆传动（通常是Z轴）：<br>(360°/步距角*细分数)/丝杆导程=(360/1.8*16)/8=400<br><br>齿轮传动（通常是E轴）：<br>(360°/步距角*细分数)/挤出轮周长=(360/1.8*16)/(7.2Π)=141.542817<br></code></pre></td></tr></table></figure><h3 id="启用M92功能"><a href="#启用M92功能" class="headerlink" title="启用M92功能"></a>启用M92功能</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> EDITABLE_STEPS_PER_UNIT</span><br></code></pre></td></tr></table></figure><p>M92可以设置对应轴每移动1mm所需脉冲数，调试时可启用，后续调试好后可以关闭该功能。</p><h3 id="默认最大进给率"><a href="#默认最大进给率" class="headerlink" title="默认最大进给率"></a>默认最大进给率</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> DEFAULT_MAX_FEEDRATE          &#123; 200, 200, 5, 50, 50, 50, 50, 5 &#125;</span><br></code></pre></td></tr></table></figure><p>分别代表X、Y、Z、I、J、K、U、V轴的默认最大进给率；对于皮带传动，单位为：linear&#x3D;mm&#x2F;s，对于旋转运动，单位为：rotational&#x3D;°&#x2F;s。</p><h3 id="默认最大加速度"><a href="#默认最大加速度" class="headerlink" title="默认最大加速度"></a>默认最大加速度</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> DEFAULT_MAX_ACCELERATION      &#123; 3000, 3000, 100, 10000, 10000, 10000, 10000, 100 &#125;</span><br></code></pre></td></tr></table></figure><p>分别代表X、Y、Z、I、J、K、U、V轴的默认最大加速度；对于皮带传动，单位为：linear&#x3D;mm&#x2F;(s^2)，对于旋转运动，单位为：rotational&#x3D;°&#x2F;(s^2)。</p><h3 id="默认加速度"><a href="#默认加速度" class="headerlink" title="默认加速度"></a>默认加速度</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> DEFAULT_ACCELERATION          3000    <span class="hljs-comment">// X, Y, Z and E acceleration for printing moves</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> DEFAULT_RETRACT_ACCELERATION  3000    <span class="hljs-comment">// E acceleration for retracts</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> DEFAULT_TRAVEL_ACCELERATION   5000    <span class="hljs-comment">// X, Y, Z acceleration for travel (non printing) moves</span></span><br></code></pre></td></tr></table></figure><p>分别代表打印时默认加速度，默认回抽加速度，默认空驶加速度（速度随时间变化）；对于皮带传动，单位为：linear&#x3D;mm&#x2F;(s^2)，对于旋转运动，单位为：rotational&#x3D;°&#x2F;(s^2)。</p><h3 id="S曲线加速度"><a href="#S曲线加速度" class="headerlink" title="S曲线加速度"></a>S曲线加速度</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> S_CURVE_ACCELERATION</span><br></code></pre></td></tr></table></figure><p>控制加速度曲线（S曲线），可以减少机器震动和共振，电机运动更安静平稳。<sup id="fnref:2" class="footnote-ref"><a href="#fn:2" rel="footnote"><span class="hint--top hint--rounded" aria-label="[Jerk Controlled Motion Explained](https://github.com/synthetos/TinyG/wiki/Jerk-Controlled-Motion-Explained)">[2]</span></a></sup></p><h3 id="Z探针"><a href="#Z探针" class="headerlink" title="Z探针"></a>Z探针</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">//#define Z_MIN_PROBE_USES_Z_MIN_ENDSTOP_PIN</span><br></code></pre></td></tr></table></figure><p>关闭Z探针功能。</p><h3 id="喷嘴偏移"><a href="#喷嘴偏移" class="headerlink" title="喷嘴偏移"></a>喷嘴偏移</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> NOZZLE_TO_PROBE_OFFSET &#123; 0, 0, 0 &#125;</span><br></code></pre></td></tr></table></figure><p>喷嘴偏移都改为0即可。</p><h3 id="电机使能"><a href="#电机使能" class="headerlink" title="电机使能"></a>电机使能</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> X_ENABLE_ON LOW</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> Y_ENABLE_ON LOW</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> Z_ENABLE_ON LOW</span><br><span class="hljs-comment">//#define E_ENABLE_ON LOW // For all extruders</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> I_ENABLE_ON LOW</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> J_ENABLE_ON LOW</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> K_ENABLE_ON LOW</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> U_ENABLE_ON LOW</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> V_ENABLE_ON LOW</span><br><span class="hljs-comment">//#define W_ENABLE_ON LOW</span><br></code></pre></td></tr></table></figure><p>各轴电机使能的逻辑电平，LOW：低电平，HIGH：高电平。</p><h3 id="电机方向"><a href="#电机方向" class="headerlink" title="电机方向"></a>电机方向</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> INVERT_X_DIR false</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> INVERT_Y_DIR false</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> INVERT_Z_DIR false</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> INVERT_I_DIR true</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> INVERT_J_DIR true</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> INVERT_K_DIR true</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> INVERT_U_DIR true</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> INVERT_V_DIR false</span><br><span class="hljs-comment">//#define INVERT_W_DIR false</span><br></code></pre></td></tr></table></figure><p>各轴电机旋转方向逻辑电平，当电机旋转方向不对时，反转对应的逻辑电平信号即可。</p><h3 id="归位方向"><a href="#归位方向" class="headerlink" title="归位方向"></a>归位方向</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> X_HOME_DIR -1</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> Y_HOME_DIR -1</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> Z_HOME_DIR -1</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> I_HOME_DIR -1</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> J_HOME_DIR -1</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> K_HOME_DIR -1</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> U_HOME_DIR -1</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> V_HOME_DIR -1</span><br><span class="hljs-comment">//#define W_HOME_DIR -1</span><br></code></pre></td></tr></table></figure><p>各轴归位时移动的方向，-1：MIN，1：MAX。</p><h3 id="机器尺寸"><a href="#机器尺寸" class="headerlink" title="机器尺寸"></a>机器尺寸</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> X_BED_SIZE 500</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> Y_BED_SIZE 500</span><br></code></pre></td></tr></table></figure><p>X、Y轴最大移动的距离，请按照实际情况修改。</p><h3 id="归位坐标位置"><a href="#归位坐标位置" class="headerlink" title="归位坐标位置"></a>归位坐标位置</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> X_MIN_POS 0</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> Y_MIN_POS 0</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> Z_MIN_POS 0</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> X_MAX_POS X_BED_SIZE</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> Y_MAX_POS Y_BED_SIZE</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> Z_MAX_POS 200</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> I_MIN_POS -9999999</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> I_MAX_POS 9999999</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> J_MIN_POS -9999999</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> J_MAX_POS 9999999</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> K_MIN_POS -9999999</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> K_MAX_POS 9999999</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> U_MIN_POS -9999999</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> U_MAX_POS 9999999</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> V_MIN_POS 0</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> V_MAX_POS 200</span><br><span class="hljs-comment">//#define W_MIN_POS 0</span><br><span class="hljs-comment">//#define W_MAX_POS 50</span><br></code></pre></td></tr></table></figure><p>各轴归位后的坐标点，对于线性轴，指机器实际限位开关的位置，对于旋转轴，最小设置为-9999999，最大设置为9999999。</p><h3 id="软限位"><a href="#软限位" class="headerlink" title="软限位"></a>软限位</h3><h4 id="最小软限位"><a href="#最小软限位" class="headerlink" title="最小软限位"></a>最小软限位</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> MIN_SOFTWARE_ENDSTOPS</span><br><span class="hljs-meta">#<span class="hljs-keyword">if</span> ENABLED(MIN_SOFTWARE_ENDSTOPS)</span><br>  <span class="hljs-meta">#<span class="hljs-keyword">define</span> MIN_SOFTWARE_ENDSTOP_X</span><br>  <span class="hljs-meta">#<span class="hljs-keyword">define</span> MIN_SOFTWARE_ENDSTOP_Y</span><br>  <span class="hljs-meta">#<span class="hljs-keyword">define</span> MIN_SOFTWARE_ENDSTOP_Z</span><br>  <span class="hljs-comment">//#define MIN_SOFTWARE_ENDSTOP_I</span><br>  <span class="hljs-comment">//#define MIN_SOFTWARE_ENDSTOP_J</span><br>  <span class="hljs-comment">//#define MIN_SOFTWARE_ENDSTOP_K</span><br>  <span class="hljs-comment">//#define MIN_SOFTWARE_ENDSTOP_U</span><br>  <span class="hljs-meta">#<span class="hljs-keyword">define</span> MIN_SOFTWARE_ENDSTOP_V</span><br>  <span class="hljs-meta">#<span class="hljs-keyword">define</span> MIN_SOFTWARE_ENDSTOP_W</span><br><span class="hljs-meta">#<span class="hljs-keyword">endif</span></span><br></code></pre></td></tr></table></figure><p>是否启用各轴最小软限位功能，对于线性轴，建议开启，对于旋转轴，建议关闭。</p><h4 id="最大软限位"><a href="#最大软限位" class="headerlink" title="最大软限位"></a>最大软限位</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> MAX_SOFTWARE_ENDSTOPS</span><br><span class="hljs-meta">#<span class="hljs-keyword">if</span> ENABLED(MAX_SOFTWARE_ENDSTOPS)</span><br>  <span class="hljs-meta">#<span class="hljs-keyword">define</span> MAX_SOFTWARE_ENDSTOP_X</span><br>  <span class="hljs-meta">#<span class="hljs-keyword">define</span> MAX_SOFTWARE_ENDSTOP_Y</span><br>  <span class="hljs-meta">#<span class="hljs-keyword">define</span> MAX_SOFTWARE_ENDSTOP_Z</span><br>  <span class="hljs-comment">//#define MAX_SOFTWARE_ENDSTOP_I</span><br>  <span class="hljs-comment">//#define MAX_SOFTWARE_ENDSTOP_J</span><br>  <span class="hljs-comment">//#define MAX_SOFTWARE_ENDSTOP_K</span><br>  <span class="hljs-comment">//#define MAX_SOFTWARE_ENDSTOP_U</span><br>  <span class="hljs-meta">#<span class="hljs-keyword">define</span> MAX_SOFTWARE_ENDSTOP_V</span><br>  <span class="hljs-meta">#<span class="hljs-keyword">define</span> MAX_SOFTWARE_ENDSTOP_W</span><br><span class="hljs-meta">#<span class="hljs-keyword">endif</span></span><br></code></pre></td></tr></table></figure><p>是否启用各轴最大软限位功能，对于线性轴，建议开启，对于旋转轴，建议关闭。</p><h3 id="启用详细记录"><a href="#启用详细记录" class="headerlink" title="启用详细记录"></a>启用详细记录</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> DEBUG_LEVELING_FEATURE</span><br></code></pre></td></tr></table></figure><p>启用执行G28、G29、M48代码的详细记录，需要占用较大的flash空间，请按需考虑是否开启。</p><h3 id="手动设置旋转轴起始位置"><a href="#手动设置旋转轴起始位置" class="headerlink" title="手动设置旋转轴起始位置"></a>手动设置旋转轴起始位置</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">//#define MANUAL_X_HOME_POS 0</span><br><span class="hljs-comment">//#define MANUAL_Y_HOME_POS 0</span><br><span class="hljs-comment">//#define MANUAL_Z_HOME_POS 0</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> MANUAL_I_HOME_POS 0</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> MANUAL_J_HOME_POS 0</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> MANUAL_K_HOME_POS 0</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> MANUAL_U_HOME_POS 0</span><br><span class="hljs-comment">//#define MANUAL_V_HOME_POS 0</span><br><span class="hljs-comment">//#define MANUAL_W_HOME_POS 0</span><br></code></pre></td></tr></table></figure><p>对于旋转轴，需要启用并设置为0。</p><h3 id="归位速度"><a href="#归位速度" class="headerlink" title="归位速度"></a>归位速度</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> HOMING_FEEDRATE_MM_M &#123; (50*60), (50*60), (4*60), (30*60), (30*60), (30*60), (30*60), (4*60) &#125;</span><br></code></pre></td></tr></table></figure><p>各轴归位时的速度，对于线性轴，单位为mm&#x2F;min，对于旋转轴，单位为：°&#x2F;min。</p><h3 id="验证归位"><a href="#验证归位" class="headerlink" title="验证归位"></a>验证归位</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> VALIDATE_HOMING_ENDSTOPS</span><br></code></pre></td></tr></table></figure><p>开启归位移动时是否有限位触发。</p><h3 id="EEPROM存储"><a href="#EEPROM存储" class="headerlink" title="EEPROM存储"></a>EEPROM存储</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">//#define EEPROM_SETTINGS     // Persistent storage with M500 and M501</span><br></code></pre></td></tr></table></figure><p>是否启用EEPROM存储功能，调试阶段建议关闭，等调试完成后开启即可。</p><h3 id="打印计数功能"><a href="#打印计数功能" class="headerlink" title="打印计数功能"></a>打印计数功能</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">//#define PRINTJOB_TIMER_AUTOSTART</span><br></code></pre></td></tr></table></figure><p>贴片机不需要打印计数功能。</p><h3 id="无LCD菜单功能"><a href="#无LCD菜单功能" class="headerlink" title="无LCD菜单功能"></a>无LCD菜单功能</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> NO_LCD_MENUS</span><br></code></pre></td></tr></table></figure><p>贴片机不需要LCD菜单功能。</p><h2 id="Configuration-adv-h"><a href="#Configuration-adv-h" class="headerlink" title="Configuration_adv.h"></a>Configuration_adv.h</h2><h3 id="配置驱动参数"><a href="#配置驱动参数" class="headerlink" title="配置驱动参数"></a>配置驱动参数</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">if</span> AXIS_IS_TMC_CONFIG(X)</span><br>    <span class="hljs-meta">#<span class="hljs-keyword">define</span> X_CURRENT       800        <span class="hljs-comment">// (mA) RMS current. Multiply by 1.414 for peak current.</span></span><br>    <span class="hljs-meta">#<span class="hljs-keyword">define</span> X_CURRENT_HOME  X_CURRENT  <span class="hljs-comment">// (mA) RMS current for homing. (Typically lower than *_CURRENT.)</span></span><br>    <span class="hljs-meta">#<span class="hljs-keyword">define</span> X_MICROSTEPS     32        <span class="hljs-comment">// 0..256</span></span><br>    <span class="hljs-meta">#<span class="hljs-keyword">define</span> X_RSENSE          0.11     <span class="hljs-comment">// Multiplied x1000 for TMC26X</span></span><br>    <span class="hljs-meta">#<span class="hljs-keyword">define</span> X_CHAIN_POS      -1        <span class="hljs-comment">// -1..0: Not chained. 1: MCU MOSI connected. 2: Next in chain, ...</span></span><br>    <span class="hljs-comment">//#define X_INTERPOLATE  true      // Enable to override &#x27;INTERPOLATE&#x27; for the X axis</span><br>    <span class="hljs-comment">//#define X_HOLD_MULTIPLIER 0.5    // Enable to override &#x27;HOLD_MULTIPLIER&#x27; for the X axis</span><br><span class="hljs-meta">#<span class="hljs-keyword">endif</span></span><br></code></pre></td></tr></table></figure><p>此设置只对TMC驱动才有效，上述配置只列举X轴，其他轴的驱动配置以此类推；</p><p><code>X_CURRENT</code>：电机驱动电流<br><code>X_CURRENT_HOME</code>：无限位归位时的电流<br><code>X_MICROSTEPS</code>：驱动细分数<br><code>X_RSENSE</code>：采样电阻阻值<br><code>X_CHAIN_POS</code>：SPI模式的CS<br><code>X_INTERPOLATE</code>：TMC驱动插值算法（可降低打印机移动时的噪音，但是会引入少量系统位置误差）<br><code>X_HOLD_MULTIPLIER</code>：保持电流</p><h3 id="TMC驱动stealthChop模式"><a href="#TMC驱动stealthChop模式" class="headerlink" title="TMC驱动stealthChop模式"></a>TMC驱动stealthChop模式</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">if</span> HAS_STEALTHCHOP</span><br>    <span class="hljs-meta">#<span class="hljs-keyword">define</span> STEALTHCHOP_XY</span><br>    <span class="hljs-meta">#<span class="hljs-keyword">define</span> STEALTHCHOP_Z</span><br>    <span class="hljs-meta">#<span class="hljs-keyword">define</span> STEALTHCHOP_I</span><br>    <span class="hljs-meta">#<span class="hljs-keyword">define</span> STEALTHCHOP_J</span><br>    <span class="hljs-meta">#<span class="hljs-keyword">define</span> STEALTHCHOP_K</span><br>    <span class="hljs-meta">#<span class="hljs-keyword">define</span> STEALTHCHOP_U</span><br>    <span class="hljs-meta">#<span class="hljs-keyword">define</span> STEALTHCHOP_V</span><br>    <span class="hljs-meta">#<span class="hljs-keyword">define</span> STEALTHCHOP_W</span><br>    <span class="hljs-meta">#<span class="hljs-keyword">define</span> STEALTHCHOP_E</span><br><span class="hljs-meta">#<span class="hljs-keyword">endif</span></span><br></code></pre></td></tr></table></figure><p>当Configuration.h -&gt; X_DRIVER_TYPE 驱动器型号配置为支持stealthChop模式的TMC驱动时，会默认启用stealthChop模式，如果不想使用可以注释掉对应的（实测Marlin使用spreadCycle模式时，电机运行时有细微的抖动，且噪音明显，不建议启用）。<br>stealthChop模式：噪音更小，但是会引入系统误差。<br>spreadCycle模式：提供更大的扭矩和更高的精度，但是会有明显噪音。</p><h3 id="优化斩波器参数"><a href="#优化斩波器参数" class="headerlink" title="优化斩波器参数"></a>优化斩波器参数</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> CHOPPER_TIMING CHOPPER_DEFAULT_24V</span><br></code></pre></td></tr></table></figure><p>使用预定义的参数集优化spreadCycle斩波器参数，请按照驱动供电电压来设置正确的斩波器参数。</p><p>可选参数：<br><code>CHOPPER_DEFAULT_12V</code><br><code>CHOPPER_DEFAULT_19V</code><br><code>CHOPPER_DEFAULT_24V</code><br><code>CHOPPER_DEFAULT_36V</code><br><code>CHOPPER_09STEP_24V   // 0.9 degree steppers (24V)</code><br><code>CHOPPER_PRUSAMK3_24V // Imported parameters from the official Průša firmware for MK3 (24V)</code><br><code>CHOPPER_MARLIN_119   // Old defaults from Marlin v1.1.9</code></p><h2 id="特别鸣谢"><a href="#特别鸣谢" class="headerlink" title="特别鸣谢"></a>特别鸣谢</h2><section class="footnotes"><div class="footnote-list"><ol><li><span id="fn:1" class="footnote-text"><span><a href="https://github.com/DerAndere1/Marlin/wiki">Marlin2ForPipetBot firmware</a><a href="#fnref:1" rev="footnote" class="footnote-backref"> ↩</a></span></span></li><li><span id="fn:2" class="footnote-text"><span><a href="https://github.com/synthetos/TinyG/wiki/Jerk-Controlled-Motion-Explained">Jerk Controlled Motion Explained</a><a href="#fnref:2" rev="footnote" class="footnote-backref"> ↩</a></span></span></li></ol></div></section>]]></content>
    
    
    <categories>
      
      <category>贴片机</category>
      
    </categories>
    
    
    <tags>
      
      <tag>OpenPNP</tag>
      
      <tag>Marlin</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>OpenPNP里程碑配置</title>
    <link href="/2025/04/09/%E8%B4%B4%E7%89%87%E6%9C%BA/OpenPNP%E9%87%8C%E7%A8%8B%E7%A2%91%E9%85%8D%E7%BD%AE/"/>
    <url>/2025/04/09/%E8%B4%B4%E7%89%87%E6%9C%BA/OpenPNP%E9%87%8C%E7%A8%8B%E7%A2%91%E9%85%8D%E7%BD%AE/</url>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>由于OpenPNP软件功能较为复杂，所以开发人员想到了一个好方法来解决上手困难的问题，那就是问题与解决方案（Issues and Solutions），俗称里程碑，软件会一步步指导你完成操作，走完里程碑，贴片机基本上就可以开始工作了。</p><h3 id="里程碑界面（Milestone）"><a href="#里程碑界面（Milestone）" class="headerlink" title="里程碑界面（Milestone）"></a>里程碑界面（Milestone）</h3><p><img src="/2025/04/09/%E8%B4%B4%E7%89%87%E6%9C%BA/OpenPNP%E9%87%8C%E7%A8%8B%E7%A2%91%E9%85%8D%E7%BD%AE/openpnp_milestones_wellcome.png" alt="里程碑欢迎界面"></p><p>转到<strong>问题与解决方案</strong>选项卡中，此页面就是软件的里程碑界面。</p><h3 id="吸嘴单元（ReferenceHead-H1）"><a href="#吸嘴单元（ReferenceHead-H1）" class="headerlink" title="吸嘴单元（ReferenceHead H1）"></a>吸嘴单元（ReferenceHead H1）</h3><p>本次DIY的贴片机使用2个吸嘴单元，由Z电机使用皮带传动控制2个吸嘴进行上下往复运动，所以按照如下图进行配置：</p><p><img src="/2025/04/09/%E8%B4%B4%E7%89%87%E6%9C%BA/OpenPNP%E9%87%8C%E7%A8%8B%E7%A2%91%E9%85%8D%E7%BD%AE/openpnp_reference_head_config.png" alt="吸嘴单元配置"></p><p>点击接受（Accept）后会有一个警告（Warming）弹窗，这是OpenPNP会根据你选择的吸嘴单元数量及传动方式在<strong>贴片机配置</strong>选项卡中生成相应的配置，一般情况选择“是（Y）”即可，可以看到ReferenceHead H1主题内容的当前状态由“Open”变为“Solved”，接下来按照下图步骤完成当前里程碑。</p><p><img src="/2025/04/09/%E8%B4%B4%E7%89%87%E6%9C%BA/OpenPNP%E9%87%8C%E7%A8%8B%E7%A2%91%E9%85%8D%E7%BD%AE/openpnp_completion_welcome_milestone.png" alt="完成当前里程碑"></p><h3 id="顶部相机（ImageCamera-Top）"><a href="#顶部相机（ImageCamera-Top）" class="headerlink" title="顶部相机（ImageCamera Top）"></a>顶部相机（ImageCamera Top）</h3><h3 id="底部相机（SimulateUpCamera-Bottom）"><a href="#底部相机（SimulateUpCamera-Bottom）" class="headerlink" title="底部相机（SimulateUpCamera Bottom）"></a>底部相机（SimulateUpCamera Bottom）</h3><h3 id="驱动器定义（NullDriver-NullDriver）"><a href="#驱动器定义（NullDriver-NullDriver）" class="headerlink" title="驱动器定义（NullDriver NullDriver）"></a>驱动器定义（NullDriver NullDriver）</h3><h4 id="新建驱动器"><a href="#新建驱动器" class="headerlink" title="新建驱动器"></a>新建驱动器</h4><p>对于Marlin固件，使用GcodeDriver即可。</p><p><img src="/2025/04/09/%E8%B4%B4%E7%89%87%E6%9C%BA/OpenPNP%E9%87%8C%E7%A8%8B%E7%A2%91%E9%85%8D%E7%BD%AE/openpnp_create_gcode_driver.png" alt="新建GcodeDriver"></p><p>点击接受（Accept）后，OpenPNP会自动在<strong>贴片机配置</strong>选项卡的<strong>驱动定义</strong>下生成一个GcodeDriver驱动器；以下简单说明一下OpenPNP中各驱动器类型的功能：</p><p>NullDriver<br>系统模拟的虚拟驱动器。</p><p>GcodeDriver<sup id="fnref:1" class="footnote-ref"><a href="#fn:1" rel="footnote"><span class="hint--top hint--rounded" aria-label="[GcodeDriver Github Wiki](https://github.com/openpnp/openpnp/wiki/GcodeDriver)">[1]</span></a></sup><br>同步驱动器，每次发送命令后会等待硬件返回<code>ok</code>才会发送下一条命令。</p><p>GcodeAsyncDriver<sup id="fnref:2" class="footnote-ref"><a href="#fn:2" rel="footnote"><span class="hint--top hint--rounded" aria-label="[GcodeAsyncDriver Github Wiki](https://github.com/openpnp/openpnp/wiki/GcodeAsyncDriver)">[2]</span></a></sup><br>异步驱动器，通过队列机制管理命令，无需等待硬件确认，可提高执行效率。</p><p>NeoDen4Driver</p><h4 id="配置GcodeDriver驱动器"><a href="#配置GcodeDriver驱动器" class="headerlink" title="配置GcodeDriver驱动器"></a>配置GcodeDriver驱动器</h4><p>主板接通电源，并用USB数据线连接上电脑，将GcodeDriver驱动器中的串口号设置成电脑识别出的主板COM口，波特率和Marlin固件里的<code>BAUDRATE</code>参数保持一致。</p><p><img src="/2025/04/09/%E8%B4%B4%E7%89%87%E6%9C%BA/OpenPNP%E9%87%8C%E7%A8%8B%E7%A2%91%E9%85%8D%E7%BD%AE/openpnp_gcode_driver_config.png" alt="配置GcodeDriver"></p><p>再转到<strong>驱动配置</strong>选项卡，点击<strong>检测固件</strong>查看是否能成功显示固件信息，否则在进入下一里程碑时，OpenPNP会提示未检测到固件的警告：</p><p><img src="/2025/04/09/%E8%B4%B4%E7%89%87%E6%9C%BA/OpenPNP%E9%87%8C%E7%A8%8B%E7%A2%91%E9%85%8D%E7%BD%AE/openpnp_firmware_not_detected.png" alt="未检测到固件"></p><p>再回到<strong>查找问题和解决方案</strong>选项卡，按照如下图操作，会出来一个错误事件，提示当前固件不支持ABC轴（旋转轴），这是由于我的Marlin固件除了基础的XYZ轴，另外2个轴分别为E0，E1，所以会提示不支持，在后续配置中会将E0、E1定义为相应的旋转轴，此处我们选择拒绝（Dismissed）即可。</p><p><img src="/2025/04/09/%E8%B4%B4%E7%89%87%E6%9C%BA/OpenPNP%E9%87%8C%E7%A8%8B%E7%A2%91%E9%85%8D%E7%BD%AE/openpnp_firmware_not_support_ab_axis.png" alt="固件不支持ABC轴"></p><h4 id="设置串口流控制"><a href="#设置串口流控制" class="headerlink" title="设置串口流控制"></a>设置串口流控制</h4><p><img src="/2025/04/09/%E8%B4%B4%E7%89%87%E6%9C%BA/OpenPNP%E9%87%8C%E7%A8%8B%E7%A2%91%E9%85%8D%E7%BD%AE/openpnp_set_serial_flow_control.png" alt="设置串口流控制"></p><p>点接受（Accept）击后，OpenPNP会将串口的流控制由<code>Off</code>改为<code>RtsCts</code>；接着完成当前里程碑即可。</p><h4 id="分配各轴字母"><a href="#分配各轴字母" class="headerlink" title="分配各轴字母"></a>分配各轴字母</h4><p><img src="/2025/04/09/%E8%B4%B4%E7%89%87%E6%9C%BA/OpenPNP%E9%87%8C%E7%A8%8B%E7%A2%91%E9%85%8D%E7%BD%AE/openpnp_x_axis_latter_missing.png" alt="X轴字母缺失"></p><p>OpenPNP软件自动为x轴分配了轴字母：<code>X</code>，所以直接点击接受（Accept），将会为<strong>贴片机配置</strong>选项卡中的<strong>轴</strong> -&gt; x轴字母分配为<code>X</code>，其他的y、Z1轴也以此类推即可。</p><p><img src="/2025/04/09/%E8%B4%B4%E7%89%87%E6%9C%BA/OpenPNP%E9%87%8C%E7%A8%8B%E7%A2%91%E9%85%8D%E7%BD%AE/openpnp_x_axis_latter.png" alt="为X轴分配轴字母"></p><p>对于C1、C2、C3、C4旋转轴，软件无法自动分配轴字母，所以我们手动改为<code>E</code>，然后点接受（Accept）即可：</p><p><img src="/2025/04/09/%E8%B4%B4%E7%89%87%E6%9C%BA/OpenPNP%E9%87%8C%E7%A8%8B%E7%A2%91%E9%85%8D%E7%BD%AE/openpnp_c_axis_latter.png" alt="C轴手动分配轴字母"></p><p>执行上述操作后再次点击 查找问题与解决方案 按钮，会看出来一些新的主题内容，其中有2条错误事件，显示C1、C2轴使用了相同的轴字母，我们都选择拒绝（Dismissed）即可。</p><p><img src="/2025/04/09/%E8%B4%B4%E7%89%87%E6%9C%BA/OpenPNP%E9%87%8C%E7%A8%8B%E7%A2%91%E9%85%8D%E7%BD%AE/openpnp_duplicate_axis_latter.png" alt="重复轴字母"></p><p>再次点击 查找问题与解决方案 按钮，还是存在2条关于C1、C2轴的警告主题，显示尽量避免使用<code>E</code>作为轴字母，我们都选择拒绝（Dismissed）即可。</p><p><img src="/2025/04/09/%E8%B4%B4%E7%89%87%E6%9C%BA/OpenPNP%E9%87%8C%E7%A8%8B%E7%A2%91%E9%85%8D%E7%BD%AE/openpnp_avoid_axis_latter.png" alt="避免E轴字母"></p><h3 id="配置驱动器的Gcode"><a href="#配置驱动器的Gcode" class="headerlink" title="配置驱动器的Gcode"></a>配置驱动器的Gcode</h3><p>点击 查找问题与解决方案 按钮，往下翻可以看到OpenPNP建议配置驱动器对应的Gcode，我们都选择接受（Accept）即可，OpenPNP会自动填写对应的Gcode。</p><h4 id="命令确认"><a href="#命令确认" class="headerlink" title="命令确认"></a>命令确认</h4><!-- 让表格居中显示的风格 --><style>.center{  width: auto;  display: table;  margin-left: auto;  margin-right: auto;}</style><div class="center"><table><thead><tr><th align="center">Gcode</th><th align="center">正则表达式</th></tr></thead><tbody><tr><td align="center">COMMAND_CONFIRM_REGEX</td><td align="center"><code>^ok.*</code></td></tr></tbody></table></div><p><img src="/2025/04/09/%E8%B4%B4%E7%89%87%E6%9C%BA/OpenPNP%E9%87%8C%E7%A8%8B%E7%A2%91%E9%85%8D%E7%BD%AE/openpnp_command_confirm_regex.png" alt="命令确认"></p><h4 id="报告位置"><a href="#报告位置" class="headerlink" title="报告位置"></a>报告位置</h4><!-- 让表格居中显示的风格 --><style>.center{  width: auto;  display: table;  margin-left: auto;  margin-right: auto;}</style><div class="center"><table><thead><tr><th align="center">Gcode</th><th align="center">正则表达式</th></tr></thead><tbody><tr><td align="center">POSITION_REPORT_REGEX</td><td align="center"><code>^.*X:(?&lt;X&gt;-?\d+\.\d+)\s*Y:(?&lt;Y&gt;-?\d+\.\d+)\s*Z:(?&lt;Z&gt;-?\d+\.\d+)\s*E:(?&lt;E&gt;-?\d+\.\d+)\s*E:(?&lt;E&gt;-?\d+\.\d+).*</code></td></tr></tbody></table></div><p><img src="/2025/04/09/%E8%B4%B4%E7%89%87%E6%9C%BA/OpenPNP%E9%87%8C%E7%A8%8B%E7%A2%91%E9%85%8D%E7%BD%AE/openpnp_position_report_regex.png" alt="报告位置"></p><h4 id="连接命令"><a href="#连接命令" class="headerlink" title="连接命令"></a>连接命令</h4><!-- 让表格居中显示的风格 --><style>.center{  width: auto;  display: table;  margin-left: auto;  margin-right: auto;}</style><div class="center">    <table>        <tbody align="center" valign="center">            <tr>                <td>Gcode</td>                <td>正则表达式</td>            </tr>            <tr>                <td rowspan="2">CONNECT_COMMAND</td>                <td>G21 ; Set millimeters mode</td>            </tr>            <tr>                <td>G90 ; Set absolute positioning mode</td>            </tr>        </tbody>    </table></div><p><img src="/2025/04/09/%E8%B4%B4%E7%89%87%E6%9C%BA/OpenPNP%E9%87%8C%E7%A8%8B%E7%A2%91%E9%85%8D%E7%BD%AE/openpnp_connect_command.png" alt="连接命令"></p><h4 id="归位命令"><a href="#归位命令" class="headerlink" title="归位命令"></a>归位命令</h4><!-- 让表格居中显示的风格 --><style>.center{  width: auto;  display: table;  margin-left: auto;  margin-right: auto;}</style><div class="center">    <table>        <tbody align="center" valign="center">            <tr>                <td>Gcode</td>                <td>正则表达式</td>            </tr>            <tr>                <td rowspan="2">HOME_COMMAND</td>                <td>{Acceleration:M204 S%.2f ; Initialize acceleration}</td>            </tr>            <tr>                <td>G28 ; Home all axes</td>            </tr>        </tbody>    </table></div><p><img src="/2025/04/09/%E8%B4%B4%E7%89%87%E6%9C%BA/OpenPNP%E9%87%8C%E7%A8%8B%E7%A2%91%E9%85%8D%E7%BD%AE/openpnp_home_command.png" alt="归位命令"></p><h4 id="全局偏移量命令"><a href="#全局偏移量命令" class="headerlink" title="全局偏移量命令"></a>全局偏移量命令</h4><!-- 让表格居中显示的风格 --><style>.center{  width: auto;  display: table;  margin-left: auto;  margin-right: auto;}</style><div class="center"><table><thead><tr><th align="center">Gcode</th><th align="center">正则表达式</th></tr></thead><tbody><tr><td align="center">SET_GLOBAL_OFFSETS_COMMAND</td><td align="center"><code>G92 &#123;X:X%.4f&#125; &#123;Y:Y%.4f&#125; &#123;Z:Z%.4f&#125; &#123;E:E%.4f&#125; &#123;E:E%.4f&#125; ; reset coordinates</code></td></tr></tbody></table></div><p><img src="/2025/04/09/%E8%B4%B4%E7%89%87%E6%9C%BA/OpenPNP%E9%87%8C%E7%A8%8B%E7%A2%91%E9%85%8D%E7%BD%AE/openpnp_set_global_offsets_command_accept.png" alt="全局偏移量命令"></p><h4 id="获取位置命令"><a href="#获取位置命令" class="headerlink" title="获取位置命令"></a>获取位置命令</h4><!-- 让表格居中显示的风格 --><style>.center{  width: auto;  display: table;  margin-left: auto;  margin-right: auto;}</style><div class="center"><table><thead><tr><th align="center">Gcode</th><th align="center">正则表达式</th></tr></thead><tbody><tr><td align="center">GET_POSITION_COMMAND</td><td align="center"><code>M114 ; get position</code></td></tr></tbody></table></div><p><img src="/2025/04/09/%E8%B4%B4%E7%89%87%E6%9C%BA/OpenPNP%E9%87%8C%E7%A8%8B%E7%A2%91%E9%85%8D%E7%BD%AE/openpnp_get_position_command.png" alt="获取位置命令"></p><h4 id="移动命令"><a href="#移动命令" class="headerlink" title="移动命令"></a>移动命令</h4><!-- 让表格居中显示的风格 --><style>.center{  width: auto;  display: table;  margin-left: auto;  margin-right: auto;}</style><div class="center">    <table>        <tbody align="center" valign="center">            <tr>                <td>Gcode</td>                <td>正则表达式</td>            </tr>            <tr>                <td rowspan="2">MOVE_TO_COMMAND</td>                <td>{Acceleration:M204 S%.0f }</td>            </tr>            <tr>                <td>G1 {X:X%.4f} {Y:Y%.4f} {Z:Z%.4f} {E:E%.4f} {E:E%.4f} {FeedRate:F%.0f} ; move to target</td>            </tr>        </tbody>    </table></div><p><img src="/2025/04/09/%E8%B4%B4%E7%89%87%E6%9C%BA/OpenPNP%E9%87%8C%E7%A8%8B%E7%A2%91%E9%85%8D%E7%BD%AE/openpnp_move_to_command.png" alt="移动命令"></p><h4 id="移动完成命令"><a href="#移动完成命令" class="headerlink" title="移动完成命令"></a>移动完成命令</h4><!-- 让表格居中显示的风格 --><style>.center{  width: auto;  display: table;  margin-left: auto;  margin-right: auto;}</style><div class="center"><table><thead><tr><th align="center">Gcode</th><th align="center">正则表达式</th></tr></thead><tbody><tr><td align="center">MOVE_TO_COMPLETE_COMMAND</td><td align="center"><code>M400 ; Wait for moves to complete before returning</code></td></tr></tbody></table></div><p><img src="/2025/04/09/%E8%B4%B4%E7%89%87%E6%9C%BA/OpenPNP%E9%87%8C%E7%A8%8B%E7%A2%91%E9%85%8D%E7%BD%AE/openpnp_move_to_complete_command.png" alt="移动完成命令"></p><section class="footnotes"><div class="footnote-list"><ol><li><span id="fn:1" class="footnote-text"><span><a href="https://github.com/openpnp/openpnp/wiki/GcodeDriver">GcodeDriver Github Wiki</a><a href="#fnref:1" rev="footnote" class="footnote-backref"> ↩</a></span></span></li><li><span id="fn:2" class="footnote-text"><span><a href="https://github.com/openpnp/openpnp/wiki/GcodeAsyncDriver">GcodeAsyncDriver Github Wiki</a><a href="#fnref:2" rev="footnote" class="footnote-backref"> ↩</a></span></span></li></ol></div></section>]]></content>
    
    
    <categories>
      
      <category>贴片机</category>
      
    </categories>
    
    
    <tags>
      
      <tag>OpenPNP</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Smoothieware固件配置文件详解</title>
    <link href="/2025/04/09/%E8%B4%B4%E7%89%87%E6%9C%BA/Smoothieware%E5%9B%BA%E4%BB%B6%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%AF%A6%E8%A7%A3/"/>
    <url>/2025/04/09/%E8%B4%B4%E7%89%87%E6%9C%BA/Smoothieware%E5%9B%BA%E4%BB%B6%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%AF%A6%E8%A7%A3/</url>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>本文章主要针对Smoothieware for OpenPnP固件的配置进行记录，不包含所有参数说明，详细说明请查看官方网站：<a href="https://smoothieware.github.io/smoothieware-website-v1/configuration-options.html">Smoothieware-Website-V1 Configuration Options</a>。</p><!-- 让表格居中显示的风格 --><style>.center{  width: auto;  display: table;  margin-left: auto;  margin-right: auto;}</style><p align="center"><font face="黑体" size="2.">Smoothieboard固件引脚配置<sup id="fnref:1" class="footnote-ref"><a href="#fn:1" rel="footnote"><span class="hint--top hint--rounded" aria-label="[smoothieware-website-v1 Pin Configuration](http://smoothieware.org/configuring-smoothie)">[1]</span></a></sup></font></p><div class="center"><table><thead><tr><th align="center">修饰符</th><th align="center">符号</th><th align="center">描述</th><th align="center">示例</th></tr></thead><tbody><tr><td align="center">反转引脚</td><td align="center">!</td><td align="center">英文感叹号</td><td align="center">2.6!</td></tr><tr><td align="center">开漏输出</td><td align="center">o</td><td align="center">小写字母o</td><td align="center">2.6o</td></tr><tr><td align="center">上拉</td><td align="center">^</td><td align="center">Shift+6</td><td align="center">2.6^</td></tr><tr><td align="center">下拉</td><td align="center">v</td><td align="center">小写字母v</td><td align="center">2.6v</td></tr><tr><td align="center">无上拉</td><td align="center">-</td><td align="center">减号</td><td align="center">2.6-</td></tr><tr><td align="center">中断器模式</td><td align="center">@</td><td align="center">Shift+2</td><td align="center">2.6@</td></tr><tr><td align="center">无修饰符</td><td align="center"></td><td align="center">默认上拉</td><td align="center">2.6</td></tr></tbody></table></div><h2 id="运动控制"><a href="#运动控制" class="headerlink" title="运动控制"></a>运动控制</h2><h3 id="机器运动学"><a href="#机器运动学" class="headerlink" title="机器运动学"></a>机器运动学</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-string">arm_solution</span>                                <span class="hljs-string">corexy</span>            <span class="hljs-comment"># 默认配置参数：cartesian</span><br></code></pre></td></tr></table></figure><p>机器运动学，可选参数：cartesian, corexy, linear_delta, rotatable_cartesian, morgan。</p><h2 id="步进电机"><a href="#步进电机" class="headerlink" title="步进电机"></a>步进电机</h2><h3 id="每毫米脉冲数"><a href="#每毫米脉冲数" class="headerlink" title="每毫米脉冲数"></a>每毫米脉冲数</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-string">alpha_steps_per_mm</span>                           <span class="hljs-number">80</span>               <span class="hljs-comment"># alpha/X轴移动1mm所需脉冲数</span><br><span class="hljs-string">beta_steps_per_mm</span>                            <span class="hljs-number">333.3333</span>         <span class="hljs-comment"># beta/Y轴移动1mm所需脉冲数</span><br><span class="hljs-string">gamma_steps_per_mm</span>                           <span class="hljs-number">1600</span>             <span class="hljs-comment"># gamma/Z轴移动1mm所需脉冲数</span><br></code></pre></td></tr></table></figure><p>步进电机每移动1mm所需的脉冲数。</p><h3 id="电机引脚配置"><a href="#电机引脚配置" class="headerlink" title="电机引脚配置"></a>电机引脚配置</h3><h4 id="常用轴电机引脚配置"><a href="#常用轴电机引脚配置" class="headerlink" title="常用轴电机引脚配置"></a>常用轴电机引脚配置</h4><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-string">alpha_step_pin</span>                               <span class="hljs-number">2.2</span>              <span class="hljs-comment"># STEP引脚</span><br><span class="hljs-string">alpha_dir_pin</span>                                <span class="hljs-number">2.6</span>              <span class="hljs-comment"># DIR引脚，可以在引脚号后面加 ! 来改变旋转方向</span><br><span class="hljs-string">alpha_en_pin</span>                                 <span class="hljs-number">2.1</span>              <span class="hljs-comment"># EN引脚</span><br><span class="hljs-string">alpha_current</span>                                <span class="hljs-number">0.8</span>              <span class="hljs-comment"># 电机运行电流，单位：A</span><br><span class="hljs-string">alpha_max_rate</span>                               <span class="hljs-number">12000.0</span>          <span class="hljs-comment"># 最大速率，单位：mm/min</span><br></code></pre></td></tr></table></figure><p>只列出alpha&#x2F;X轴电机引脚配置，其他轴可参考。</p><h4 id="A-B旋转轴电机引脚配置"><a href="#A-B旋转轴电机引脚配置" class="headerlink" title="A&#x2F;B旋转轴电机引脚配置"></a>A&#x2F;B旋转轴电机引脚配置</h4><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-string">delta_steps_per_mm</span>                           <span class="hljs-number">160</span>              <span class="hljs-comment"># delta/A轴移动1mm所需脉冲数</span><br><span class="hljs-string">epsilon_steps_per_mm</span>                         <span class="hljs-number">160</span>              <span class="hljs-comment"># epsilon/B轴移动1mm所需脉冲数</span><br><br><span class="hljs-comment"># A axis</span><br><span class="hljs-string">delta_step_pin</span>                               <span class="hljs-number">2.13</span>             <span class="hljs-comment"># STEP引脚</span><br><span class="hljs-string">delta_dir_pin</span>                                <span class="hljs-number">0.11</span>             <span class="hljs-comment"># DIR引脚，可以在引脚号后面加 ! 来改变旋转方向direction</span><br><span class="hljs-string">delta_en_pin</span>                                 <span class="hljs-number">2.12</span>             <span class="hljs-comment"># EN引脚</span><br><span class="hljs-comment">#delta_current                               0.8              # 电机运行电流，单位：A</span><br><span class="hljs-string">delta_max_rate</span>                               <span class="hljs-number">12000.0</span>          <span class="hljs-comment"># 最大速率，单位：mm/min</span><br><br><span class="hljs-comment"># B axis</span><br><span class="hljs-string">epsilon_step_pin</span>                             <span class="hljs-number">1.15</span>             <span class="hljs-comment"># STEP引脚</span><br><span class="hljs-string">epsilon_dir_pin</span>                              <span class="hljs-number">1.14</span>             <span class="hljs-comment"># DIR引脚，可以在引脚号后面加 ! 来改变旋转方向direction</span><br><span class="hljs-string">epsilon_en_pin</span>                               <span class="hljs-number">1.16</span>             <span class="hljs-comment"># EN引脚</span><br><span class="hljs-comment">#epsilon_current                             0.8              # 电机运行电流，单位：A</span><br><span class="hljs-string">epsilon_max_rate</span>                             <span class="hljs-number">12000.0</span>          <span class="hljs-comment"># 最大速率，单位：mm/min</span><br></code></pre></td></tr></table></figure><p>本次DIY贴片机拥有1个吸嘴单元、2个旋转轴：C1、C2轴；在Smoothieware固件中，当轴定义超过普通的3轴（X、Y、Z）时，开发者对额外的轴分别定义为A（delta）、B（epsilon）、C（zeta）轴，所以需要在配置文件中手动添加A、B轴的电机引脚配置。<sup id="fnref:2" class="footnote-ref"><a href="#fn:2" rel="footnote"><span class="hint--top hint--rounded" aria-label="[smoothieware-website-v1 6 axis](http://smoothieware.org/6axis#compiling-6-axis)">[2]</span></a></sup></p><h3 id="配置步进电机电流"><a href="#配置步进电机电流" class="headerlink" title="配置步进电机电流"></a>配置步进电机电流</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-string">currentcontrol_module_enable</span>                 <span class="hljs-literal">true</span>             <span class="hljs-comment"># 通过配置文件控制步进电机电流</span><br></code></pre></td></tr></table></figure><p>该配置只针对原版smoothieboard主板上的电机驱动（a4982）才有效，各种变种版本如果使用的不是该型号的电机驱动，可以更改为<code>false</code>。</p><h2 id="LED"><a href="#LED" class="headerlink" title="LED"></a>LED</h2><h3 id="板载LED"><a href="#板载LED" class="headerlink" title="板载LED"></a>板载LED</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-string">leds_disable</span>                                 <span class="hljs-literal">true</span>             <span class="hljs-comment"># 加载配置后禁用板载LED</span><br></code></pre></td></tr></table></figure><p>原版smoothieboard主板板载了4个LED指示灯，占用的引脚分别为：P1.18（LED1）、P1.19（LED2）、P1.20（LED3）、P1.21（LED4），如果使用原版可以启用，各种变种版本视情况可更改为<code>false</code>。</p><h3 id="播放LED"><a href="#播放LED" class="headerlink" title="播放LED"></a>播放LED</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-string">play_led_disable</span>                             <span class="hljs-literal">true</span>             <span class="hljs-comment"># 禁用播放LED状态</span><br></code></pre></td></tr></table></figure><p>原版smoothieboard主板才有的功能，其他变种版本视情况可更改为<code>false</code>。</p><h2 id="挤出机"><a href="#挤出机" class="headerlink" title="挤出机"></a>挤出机</h2><p>贴片机不需要使用挤出机，所以请注释掉所有和挤出机（extruder）相关的参数。</p><h2 id="激光"><a href="#激光" class="headerlink" title="激光"></a>激光</h2><p>贴片机不需要使用激光，所以请注释掉所有和激光（laser）相关的参数。</p><h2 id="热端"><a href="#热端" class="headerlink" title="热端"></a>热端</h2><p>贴片机不需要使用热端，所以请注释掉所有和热端（hotend）相关的参数。</p><h2 id="热床"><a href="#热床" class="headerlink" title="热床"></a>热床</h2><p>贴片机不需要使用热床，所以请注释掉所有和热端（bed）相关的参数。</p><h2 id="风扇"><a href="#风扇" class="headerlink" title="风扇"></a>风扇</h2><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-string">switch.fan.enable</span>                            <span class="hljs-literal">true</span>             <span class="hljs-comment"># 是否启用风扇控制功能</span><br><span class="hljs-string">switch.fan.input_on_command</span>                  <span class="hljs-string">M106</span>             <span class="hljs-comment"># 打开输出执行的M代码</span><br><span class="hljs-string">switch.fan.input_off_command</span>                 <span class="hljs-string">M107</span>             <span class="hljs-comment"># 关闭输出执行的M代码</span><br><span class="hljs-string">switch.fan.output_pin</span>                        <span class="hljs-number">2.3</span>              <span class="hljs-comment"># 风扇控制引脚</span><br><span class="hljs-string">switch.fan.output_type</span>                       <span class="hljs-string">pwm</span>              <span class="hljs-comment"># PWM控制</span><br><span class="hljs-comment">#switch.fan.max_pwm                          255              # 最大PWM值，默认：255</span><br></code></pre></td></tr></table></figure><p>担心主板核心部件过热可以启用散热风扇功能；如果不使用风扇，可以关闭该功能。</p><h2 id="限位"><a href="#限位" class="headerlink" title="限位"></a>限位</h2><h3 id="硬限位"><a href="#硬限位" class="headerlink" title="硬限位"></a>硬限位</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-string">endstops_enable</span>                              <span class="hljs-literal">true</span>             <span class="hljs-comment"># 是否启用限位功能</span><br><span class="hljs-comment">#corexy_homing                               false            # 如果机器运动学为 hbot 或者 corexy，请设置为 true</span><br><span class="hljs-string">alpha_min_endstop</span>                            <span class="hljs-number">1.24</span><span class="hljs-string">^</span>            <span class="hljs-comment"># alpha/X轴最小限位开关引脚，可以在引脚号后面加 ! 来反转逻辑</span><br><span class="hljs-comment">#alpha_max_endstop                           1.25^            # alpha/X轴最大限位开关引脚，可以在引脚号后面加 ! 来反转逻辑</span><br><span class="hljs-string">alpha_homing_direction</span>                       <span class="hljs-string">home_to_min</span>      <span class="hljs-comment"># 归位时alpha/X轴往最小限位（home_to_min）或最大限位（home_to_max）方向移动。</span><br><span class="hljs-string">alpha_min</span>                                    <span class="hljs-number">0</span>                <span class="hljs-comment"># 如果归位时alpha/X轴往最小限位方向移动，那么触发最小限位后，当前位置为0</span><br><span class="hljs-string">alpha_max</span>                                    <span class="hljs-number">200</span>              <span class="hljs-comment"># 如果归位时alpha/X轴往最大限位方向移动，那么触发最大限位后，当前位置为200，请修改实际机器移动的最大距离</span><br></code></pre></td></tr></table></figure><p>硬限位的相关配置，只列出alpha&#x2F;X轴的配置详解，其他轴可参考。</p><h3 id="软限位"><a href="#软限位" class="headerlink" title="软限位"></a>软限位</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-string">alpha_max_travel</span>                             <span class="hljs-number">500</span>              <span class="hljs-comment"># 归位时alpha/X轴最大行程，单位：mm</span><br><span class="hljs-string">beta_max_travel</span>                              <span class="hljs-number">500</span>              <span class="hljs-comment"># 归位时beta/Y轴最大行程，单位：mm</span><br><span class="hljs-string">gamma_max_travel</span>                             <span class="hljs-number">500</span>              <span class="hljs-comment"># 归位时gamma/Z轴最大行程，单位：mm</span><br></code></pre></td></tr></table></figure><p>软限位最大移动距离限制，防止限位发生异常情况时，执行归位后主板一直没有收到限位触发信号而造成机器发生撞机，请按实际机器大小配置。</p><h3 id="归位速度"><a href="#归位速度" class="headerlink" title="归位速度"></a>归位速度</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-string">alpha_fast_homing_rate_mm_s</span>                  <span class="hljs-number">50</span>               <span class="hljs-comment"># alpha/X轴归位时最快速度</span><br><span class="hljs-string">alpha_slow_homing_rate_mm_s</span>                  <span class="hljs-number">25</span>               <span class="hljs-comment"># alpha/X轴归位时最慢速度</span><br></code></pre></td></tr></table></figure><p>alpha&#x2F;X轴归位先以较快的速度进行移动，触发限位后再以较慢速度二次触发限位，以保证归位时的精度，其他轴可参考。</p><h3 id="触发限位后移动距离"><a href="#触发限位后移动距离" class="headerlink" title="触发限位后移动距离"></a>触发限位后移动距离</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-string">alpha_homing_retract_mm</span>                      <span class="hljs-number">5</span>                <span class="hljs-comment"># alpha/X轴限位触发后，轴向前移动的距离</span><br><span class="hljs-string">beta_homing_retract_mm</span>                       <span class="hljs-number">5</span>                <span class="hljs-comment"># beta/Y轴限位触发后，轴向前移动的距离</span><br><span class="hljs-string">gamma_homing_retract_mm</span>                      <span class="hljs-number">1</span>                <span class="hljs-comment"># gamma/Z轴限位触发后，轴向上移动的距离</span><br></code></pre></td></tr></table></figure><p>尽量不要设置为0，防止归位时一直挤压限位开关，影响使用寿命。</p><h2 id="Z-Probe探针"><a href="#Z-Probe探针" class="headerlink" title="Z-Probe探针"></a>Z-Probe探针</h2><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-string">zprobe.enable</span>                                <span class="hljs-literal">false</span>           <span class="hljs-comment"># 是否启用Z-Probe功能</span><br><span class="hljs-string">zprobe.probe_pin</span>                             <span class="hljs-number">0.10</span><span class="hljs-string">!^</span>          <span class="hljs-comment"># Z-Probe连接的引脚，如果为NC（常闭），请移除 !</span><br><span class="hljs-string">zprobe.slow_feedrate</span>                         <span class="hljs-number">5</span>               <span class="hljs-comment"># 探针进给率，单位：mm/s</span><br><span class="hljs-comment">#zprobe.debounce_ms                          1               # 如果触发不灵敏，可适当设置</span><br><span class="hljs-string">zprobe.fast_feedrate</span>                         <span class="hljs-number">100</span>             <span class="hljs-comment"># 移动进给率，单位：mm/s</span><br><span class="hljs-string">zprobe.probe_height</span>                          <span class="hljs-number">5</span>               <span class="hljs-comment"># Z-Probe在距离Bed多高的位置开始探测</span><br><span class="hljs-comment">#gamma_min_endstop                           nc              # Z轴最小限位距离？</span><br></code></pre></td></tr></table></figure><p>贴片机不需要使用探针，所以可以关闭该功能。</p><h2 id="屏幕"><a href="#屏幕" class="headerlink" title="屏幕"></a>屏幕</h2><h3 id="屏幕显示"><a href="#屏幕显示" class="headerlink" title="屏幕显示"></a>屏幕显示</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-string">panel.enable</span>                                 <span class="hljs-literal">false</span>             <span class="hljs-comment"># 是否启用屏幕显示功能</span><br><br><span class="hljs-comment">#panel.lcd                                   reprap_discount_glcd</span><br><span class="hljs-comment"># 屏幕型号，可选型号：reprap_discount_glcd, st7565_glcd, ssd1306_oled, viki2, mini_viki2 and universal_adapter</span><br><br><span class="hljs-comment">#panel.spi_channel                           0                 # 要使用的SPI通道</span><br><span class="hljs-comment">#panel.spi_cs_pin                            0.16              # SPI片选引脚</span><br><span class="hljs-comment">#panel.encoder_a_pin                         3.25!^            # 旋转编码器A引脚</span><br><span class="hljs-comment">#panel.encoder_b_pin                         3.26!^            # 旋转编码器B引脚</span><br><span class="hljs-comment">#panel.click_button_pin                      1.30!^            # 确认按钮引脚</span><br><span class="hljs-comment">#panel.buzz_pin                              1.31              # 蜂鸣器引脚</span><br><span class="hljs-comment">#panel.back_button_pin                       2.11!^            # 返回按钮引脚</span><br><br><span class="hljs-string">panel.menu_offset</span>                            <span class="hljs-number">0</span>                 <span class="hljs-comment"># 在某些面板上，此值必须设置为 1；这是在屏幕上偏移菜单行的行数</span><br><br><span class="hljs-string">panel.alpha_jog_feedrate</span>                     <span class="hljs-number">6000</span>              <span class="hljs-comment"># X轴慢进给速率，单位为mm/min；此参数用于通过屏幕进行慢进给</span><br><span class="hljs-string">panel.beta_jog_feedrate</span>                      <span class="hljs-number">6000</span>              <span class="hljs-comment"># Y轴慢进给速率，单位为mm/min；此参数用于通过屏幕进行慢进给</span><br><span class="hljs-string">panel.gamma_jog_feedrate</span>                     <span class="hljs-number">200</span>               <span class="hljs-comment"># Z轴慢进给速率，单位为mm/min；此参数用于通过屏幕进行慢进给</span><br><br><span class="hljs-string">panel.hotend_temperature</span>                     <span class="hljs-number">185</span>               <span class="hljs-comment"># 选择预热时设置的热端温度</span><br><span class="hljs-string">panel.bed_temperature</span>                        <span class="hljs-number">60</span>                <span class="hljs-comment"># 选择预热时设置的热床温度</span><br></code></pre></td></tr></table></figure><p>贴片机基本上使用电脑进行控制，无需额外的屏幕进行控制，可以关闭该功能。</p><h3 id="屏幕菜单"><a href="#屏幕菜单" class="headerlink" title="屏幕菜单"></a>屏幕菜单</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-string">custom_menu.power_on.enable</span>                <span class="hljs-literal">true</span>              <span class="hljs-comment"># 是否启用屏幕菜单控制功能</span><br><span class="hljs-string">custom_menu.power_on.name</span>                  <span class="hljs-string">Power_on</span>          <span class="hljs-comment"># 在屏幕菜单中显示的名称</span><br><span class="hljs-string">custom_menu.power_on.command</span>               <span class="hljs-string">M80</span>               <span class="hljs-comment"># 执行该操作的G代码</span><br><br><span class="hljs-string">custom_menu.power_off.enable</span>               <span class="hljs-literal">true</span>              <span class="hljs-comment"># 是否启用屏幕菜单控制功能</span><br><span class="hljs-string">custom_menu.power_off.name</span>                 <span class="hljs-string">Power_off</span>         <span class="hljs-comment"># 在屏幕菜单中显示的名称</span><br><span class="hljs-string">custom_menu.power_off.command</span>              <span class="hljs-string">M81</span>               <span class="hljs-comment"># 执行该操作的G代码</span><br></code></pre></td></tr></table></figure><p>屏幕菜单只在启用了屏幕控制功能才有用，没有则可以关闭该功能。</p><h2 id="网络"><a href="#网络" class="headerlink" title="网络"></a>网络</h2><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-string">network.enable</span>                               <span class="hljs-literal">false</span>            <span class="hljs-comment"># 是否启用网络功能</span><br><span class="hljs-string">network.webserver.enable</span>                     <span class="hljs-literal">true</span>             <span class="hljs-comment"># 是否启用网页WEB服务</span><br><span class="hljs-string">network.telnet.enable</span>                        <span class="hljs-literal">true</span>             <span class="hljs-comment"># 是否启用telnet服务器</span><br><span class="hljs-string">network.ip_address</span>                           <span class="hljs-string">auto</span>             <span class="hljs-comment"># 使用DHCP获取IP地址</span><br></code></pre></td></tr></table></figure><p>原版smoothieboard主板板载了网口，可以通过网口与OpenPNP软件通讯；其他变种版本视情况选择是否启用。</p><h2 id="系统"><a href="#系统" class="headerlink" title="系统"></a>系统</h2><h3 id="波特率"><a href="#波特率" class="headerlink" title="波特率"></a>波特率</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-string">uart0.baud_rate</span>                              <span class="hljs-number">115200</span>           <span class="hljs-comment"># 默认硬件UART串行端口的波特率</span><br></code></pre></td></tr></table></figure><h3 id="第二个USB"><a href="#第二个USB" class="headerlink" title="第二个USB"></a>第二个USB</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-string">second_usb_serial_enable</span>                     <span class="hljs-literal">false</span>            <span class="hljs-comment"># 是否启用第二个USB串行端口</span><br></code></pre></td></tr></table></figure><h3 id="急停按钮"><a href="#急停按钮" class="headerlink" title="急停按钮"></a>急停按钮</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-string">kill_button_enable</span>                           <span class="hljs-literal">true</span>             <span class="hljs-comment"># 是否启用急停按钮功能</span><br><span class="hljs-string">kill_button_pin</span>                              <span class="hljs-number">2.12</span>             <span class="hljs-comment"># 急停按钮的引脚</span><br></code></pre></td></tr></table></figure><h2 id="特别鸣谢"><a href="#特别鸣谢" class="headerlink" title="特别鸣谢"></a>特别鸣谢</h2><section class="footnotes"><div class="footnote-list"><ol><li><span id="fn:1" class="footnote-text"><span><a href="http://smoothieware.org/configuring-smoothie">smoothieware-website-v1 Pin Configuration</a><a href="#fnref:1" rev="footnote" class="footnote-backref"> ↩</a></span></span></li><li><span id="fn:2" class="footnote-text"><span><a href="http://smoothieware.org/6axis#compiling-6-axis">smoothieware-website-v1 6 axis</a><a href="#fnref:2" rev="footnote" class="footnote-backref"> ↩</a></span></span></li></ol></div></section>]]></content>
    
    
    <categories>
      
      <category>贴片机</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Smoothieware</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>BTT SKR V1.4T主板烧录Smoothieware固件</title>
    <link href="/2025/04/09/%E8%B4%B4%E7%89%87%E6%9C%BA/BTT%20SKR%20V1.4T%E4%B8%BB%E6%9D%BF%E7%83%A7%E5%BD%95Smoothieware%E5%9B%BA%E4%BB%B6/"/>
    <url>/2025/04/09/%E8%B4%B4%E7%89%87%E6%9C%BA/BTT%20SKR%20V1.4T%E4%B8%BB%E6%9D%BF%E7%83%A7%E5%BD%95Smoothieware%E5%9B%BA%E4%BB%B6/</url>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>由于某鱼原版Smoothieware主板价格离谱，不推荐刚入门时就购买尝试；所以本文章使用BigTreeTech公司出品的<a href="https://item.taobao.com/item.htm?id=625671241167&pisk=gkLik20jOhSswXHdve_sqGD8nImLCN_fwKUAHZBqY9WIGCLOHizDeQ-9WEdVgZveHf69gA9Do9Jj1rh6WKj269faurWaL251Gl5wgEC2oNTpXrBtCZA2eZD-e43J1C_CuYH-WWAXNN10_s5aH2yFiZfwlhoboC_fuxVLu03k1LPJojqNg6lhMsCV3KWNLyWCiryw3OSUL_f5uZJVbyzFa1q4QZrN8XflMlr47GSFTsC00RJVuXAFds7V_K7qZghN3E-w8v_VUKWfK_ThsGXyt0a4o_zRbTS5Lrky-1D5UCW3urW1BWfetCHgPBQ6PLfJB2zMEQTBK6JrovbXdnJVipu7HNtJCUsHB0zeTw6C498zQl5lSOjy7MN0SBs2xeb97xZW9BXNqwKKAAIASdx5FGoIdKAhBK8GYRDdH3dp7Mvrpyvfm3OAid0g7LSP0krzXqzfTjLUcosNO6XRwoA_7Thnx6lntRjfb61ceXc3cosNO6X-tX2M1G5CiTC..&spm=a21xtw.29978516.product_shelf.9.28853a14RdbwRf&skuId=4853954461859">SKR V1.4 Turbo主板</a>，这款主板资料开源，且有完整的售后，使用的MCU芯片和原版Smoothieware主板一致，将尝试给该主板烧录Smoothieware for OpenPnP固件。</p><h2 id="烧录固件"><a href="#烧录固件" class="headerlink" title="烧录固件"></a>烧录固件</h2><ol><li><p>烧录Bootloader<br> 该主板自带Smoothieware固件的<a href="./DFU-Bootloader.hex">DFU-Bootloader</a><sup id="fnref:1" class="footnote-ref"><a href="#fn:1" rel="footnote"><span class="hint--top hint--rounded" aria-label="[Smoothieware bootloader Github](https://github.com/Smoothieware/Smoothieware/tree/edge/bootloader)">[1]</span></a></sup>，所以一般无需再执行该操作，但如果不小心把Bootloader刷掉的话，可以参考这篇文章进行重新烧录：<a href="https://dongxunz.github.io/2025/03/13/3D%E6%89%93%E5%8D%B0/BTT%20SKR%20V1.4%E4%B8%BB%E6%9D%BF%E5%88%B7%E5%85%A5Klipper%E5%9B%BA%E4%BB%B6/#%E4%BD%BF%E7%94%A8J-Link%E5%B7%A5%E5%85%B7%E7%83%A7%E5%BD%95Klipper%E5%9B%BA%E4%BB%B6">BTT SKR V1.4主板烧录Klipper固件</a>。</p></li><li><p>下载Smoothieware固件及示例<br> <a href="./firmware-2022-12-30.bin">Smoothieware for 3D Printer固件</a><sup id="fnref:2" class="footnote-ref"><a href="#fn:2" rel="footnote"><span class="hint--top hint--rounded" aria-label="[Smoothieware Github FirmwareBin](https://github.com/Smoothieware/Smoothieware/tree/edge/FirmwareBin)">[2]</span></a></sup><br> <a href="./firmware-2021-02-15-PAXIS-5.bin">Smoothieware for OpenPnP 5轴固件</a><sup id="fnref:3" class="footnote-ref"><a href="#fn:3" rel="footnote"><span class="hint--top hint--rounded" aria-label="[Smoothieware: New Firmware for PnP](https://makr.zone/smoothieware-new-firmware-for-pnp/500/)">[3]</span></a></sup><br> <a href="./firmware-2021-02-15-PAXIS-6.bin">Smoothieware for OpenPnP 6轴固件</a><sup id="fnref:3" class="footnote-ref"><a href="#fn:3" rel="footnote"><span class="hint--top hint--rounded" aria-label="[Smoothieware: New Firmware for PnP](https://makr.zone/smoothieware-new-firmware-for-pnp/500/)">[3]</span></a></sup><br> <a href="./config.txt">Smoothieware示例配置文件</a><sup id="fnref:4" class="footnote-ref"><a href="#fn:4" rel="footnote"><span class="hint--top hint--rounded" aria-label="[Smoothieware Github ConfigSamples](https://github.com/Smoothieware/Smoothieware/tree/edge/ConfigSamples)">[4]</span></a></sup></p></li><li><p>检查固件是否烧录成功<br> 将<code>Smoothieware for OpenPnP 5轴固件</code>和<code>Smoothieware示例配置文件</code>都复制到TF卡中（<strong>固件名称必需更改为：firmware.bin</strong>），插入主板对应TF卡槽中，连接好电源及USB数据线，通电后等待片刻，电脑设备管理器中会出现一个USB串行设备，且文件管理器中也出现一个U盘，里面有2个文件：<code>config.txt</code>, <code>FIRMWARE.CUR</code>；有该文件<code>FIRMWARE.CUR</code>代表固件烧录成功，否则请检查之前的操作，并多次尝试（烧录DFU-Bootloader、更换TF卡…）。</p></li><li><p>查看Smoothieware固件版本<br> 打开OpenPNP软件，按照如下步骤操作：<br> <img src="/2025/04/09/%E8%B4%B4%E7%89%87%E6%9C%BA/BTT%20SKR%20V1.4T%E4%B8%BB%E6%9D%BF%E7%83%A7%E5%BD%95Smoothieware%E5%9B%BA%E4%BB%B6/openpnp_new_gcodedriver.png" alt="新建一个GcodeDriver"><br> <img src="/2025/04/09/%E8%B4%B4%E7%89%87%E6%9C%BA/BTT%20SKR%20V1.4T%E4%B8%BB%E6%9D%BF%E7%83%A7%E5%BD%95Smoothieware%E5%9B%BA%E4%BB%B6/check_smoothieware_firmware_version.png" alt="查看Smoothieware版本"></p></li></ol><h2 id="特别鸣谢"><a href="#特别鸣谢" class="headerlink" title="特别鸣谢"></a>特别鸣谢</h2><section class="footnotes"><div class="footnote-list"><ol><li><span id="fn:1" class="footnote-text"><span><a href="https://github.com/Smoothieware/Smoothieware/tree/edge/bootloader">Smoothieware bootloader Github</a><a href="#fnref:1" rev="footnote" class="footnote-backref"> ↩</a></span></span></li><li><span id="fn:2" class="footnote-text"><span><a href="https://github.com/Smoothieware/Smoothieware/tree/edge/FirmwareBin">Smoothieware Github FirmwareBin</a><a href="#fnref:2" rev="footnote" class="footnote-backref"> ↩</a></span></span></li><li><span id="fn:3" class="footnote-text"><span><a href="https://makr.zone/smoothieware-new-firmware-for-pnp/500/">Smoothieware: New Firmware for PnP</a><a href="#fnref:3" rev="footnote" class="footnote-backref"> ↩</a></span></span></li><li><span id="fn:4" class="footnote-text"><span><a href="https://github.com/Smoothieware/Smoothieware/tree/edge/ConfigSamples">Smoothieware Github ConfigSamples</a><a href="#fnref:4" rev="footnote" class="footnote-backref"> ↩</a></span></span></li></ol></div></section>]]></content>
    
    
    <categories>
      
      <category>贴片机</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Smoothieware</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>BTT Manta M8P V2.0主板烧录Klipper固件</title>
    <link href="/2025/03/13/3D%E6%89%93%E5%8D%B0/BTT%20Manta%20M8P%20V2.0%E4%B8%BB%E6%9D%BF%E5%88%B7%E5%85%A5Klipper%E5%9B%BA%E4%BB%B6/"/>
    <url>/2025/03/13/3D%E6%89%93%E5%8D%B0/BTT%20Manta%20M8P%20V2.0%E4%B8%BB%E6%9D%BF%E5%88%B7%E5%85%A5Klipper%E5%9B%BA%E4%BB%B6/</url>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>本文章将指导给BigTreeTech出品的Manta-M8P V2.0进行烧录Klipper固件。<sup id="fnref:1" class="footnote-ref"><a href="#fn:1" rel="footnote"><span class="hint--top hint--rounded" aria-label="[Manta M8P & BTT EBB SB22XX setup](https://forum.vorondesign.com/threads/manta-m8p-btt-ebb-sb22xx-setup.1697/)">[1]</span></a></sup></p><h2 id="USB通讯"><a href="#USB通讯" class="headerlink" title="USB通讯"></a>USB通讯</h2><ol><li><p>配置Klipper<br><img src="/2025/03/13/3D%E6%89%93%E5%8D%B0/BTT%20Manta%20M8P%20V2.0%E4%B8%BB%E6%9D%BF%E5%88%B7%E5%85%A5Klipper%E5%9B%BA%E4%BB%B6/manta_m8p_v2.0_klipper_usb_config.png" alt="Manta-M8P V2.0 使用USB通讯如图进行配置"></p></li><li><p>编译并烧录固件</p><ul><li>DFU模式（首推）<br>  先按住BOOT按钮，接着再按一下RESET按钮后同时松开，上位机执行以下命令：  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">lsusb<br></code></pre></td></tr></table></figure>  其中会有一条类似的信息，记住ID后面的值：<font color="#FF0000">0483:df11（请根据实际情况来）</font>：<br>  <code>Bus 001 Device 011: ID 0483:df11 STMicroelectronics STM Device in DFU Mode</code><br>  输入以下命令进行烧录：  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> dfu-util -a 0 -d 0483:df11 --dfuse-address 0x08002000 -D ~/klipper/out/klipper.bin<br></code></pre></td></tr></table></figure>  <font color="#FF0000">-d 后面填入刚刚ID后面的值</font></li><li>SD卡<br>  将编译好的<code>klipper.bin</code>文件复制到TF中，并重命名为<code>firmware.bin</code>，插入主板 MCU-CARD卡槽中，上电后等待烧录完成。</li></ul></li></ol><h2 id="CAN桥接通讯"><a href="#CAN桥接通讯" class="headerlink" title="CAN桥接通讯"></a>CAN桥接通讯</h2><blockquote><p>现在基本上不需要先烧录Katapult(CanBoot)，所以本文省略了此步骤。</p></blockquote><ol><li><p>配置Klipper<br><img src="/2025/03/13/3D%E6%89%93%E5%8D%B0/BTT%20Manta%20M8P%20V2.0%E4%B8%BB%E6%9D%BF%E5%88%B7%E5%85%A5Klipper%E5%9B%BA%E4%BB%B6/manta_m8p_v2.0_klipper_can_config.png" alt="Manta-M8P V2.0 使用CAN桥接如图进行配置"></p></li><li><p>编译并烧录固件<br>参照<strong>USB通讯</strong>里的烧录方法即可。</p></li><li><p>创建can0网络<sup id="fnref:2" class="footnote-ref"><a href="#fn:2" rel="footnote"><span class="hint--top hint--rounded" aria-label="[CANBUS](https://www.klipper3d.org/CANBUS.html)">[2]</span></a></sup><br> 输入以下命令：</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> nano /etc/network/interfaces.d/can0<br></code></pre></td></tr></table></figure><p> 复制以下信息粘贴：</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">allow-hotplug can0<br>iface can0 can static<br>    bitrate 1000000<br>    up ifconfig <span class="hljs-variable">$IFACE</span> txqueuelen 128<br></code></pre></td></tr></table></figure><p> 按<code>Ctrl+O</code>保存，按<code>Ctrl+X</code>退出</p><ul><li><strong>bitrate</strong>：CAN bus通讯速率；请和Klipper固件编译时保持一致。</li><li><strong>txqueuelen</strong>：缓冲区大小；Klpper官方推荐值为128，如果遇到缓冲区太小报错的情况，可以改到1024。</li></ul></li><li><p>重启系统</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> reboot<br></code></pre></td></tr></table></figure></li><li><p>查看can0网络</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> ifconfig<br></code></pre></td></tr></table></figure><ul><li><font color="#FF0000">注意：建立can0网络需要上位机至少连接一个已经成功刷入CAN固件的下位机，并且没有连接其他的USB固件下位机时才会有显示，否则无法建立网络。</font></li></ul></li><li><p>查询canbus_uuid</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">~/klippy-env/bin/python ~/klipper/scripts/canbus_query.py can0<br></code></pre></td></tr></table></figure></li></ol><h2 id="升级Klipper固件"><a href="#升级Klipper固件" class="headerlink" title="升级Klipper固件"></a>升级Klipper固件</h2><p>可查看这篇文章进行操作：<a href="https://dongxunz.github.io/2025/03/13/3D%E6%89%93%E5%8D%B0/BTT%20SKR%20V1.4%E4%B8%BB%E6%9D%BF%E5%88%B7%E5%85%A5Klipper%E5%9B%BA%E4%BB%B6/#%E5%8D%87%E7%BA%A7Klipper%E5%9B%BA%E4%BB%B6">BTT SKR V1.4主板烧录Klipper固件</a>。</p><h2 id="特别鸣谢"><a href="#特别鸣谢" class="headerlink" title="特别鸣谢"></a>特别鸣谢</h2><section class="footnotes"><div class="footnote-list"><ol><li><span id="fn:1" class="footnote-text"><span><a href="https://forum.vorondesign.com/threads/manta-m8p-btt-ebb-sb22xx-setup.1697/">Manta M8P &amp; BTT EBB SB22XX setup</a><a href="#fnref:1" rev="footnote" class="footnote-backref"> ↩</a></span></span></li><li><span id="fn:2" class="footnote-text"><span><a href="https://www.klipper3d.org/CANBUS.html">CANBUS</a><a href="#fnref:2" rev="footnote" class="footnote-backref"> ↩</a></span></span></li></ol></div></section>]]></content>
    
    
    <categories>
      
      <category>3D打印</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Klipper</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>BTT SKR V1.4主板烧录Klipper固件</title>
    <link href="/2025/03/13/3D%E6%89%93%E5%8D%B0/BTT%20SKR%20V1.4%E4%B8%BB%E6%9D%BF%E5%88%B7%E5%85%A5Klipper%E5%9B%BA%E4%BB%B6/"/>
    <url>/2025/03/13/3D%E6%89%93%E5%8D%B0/BTT%20SKR%20V1.4%E4%B8%BB%E6%9D%BF%E5%88%B7%E5%85%A5Klipper%E5%9B%BA%E4%BB%B6/</url>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>本文章将指导如何给BigTreeTech出品的3D打印机主板：SKR V1.4<code>(LPC1768 100MHZ)</code> &amp; SKR V1.4 Turbo<code>(LPC1769 120MHZ)</code>烧录Klipper固件。</p><h2 id="使用板载Bootloader烧录Klipper固件"><a href="#使用板载Bootloader烧录Klipper固件" class="headerlink" title="使用板载Bootloader烧录Klipper固件"></a>使用板载Bootloader烧录Klipper固件</h2><p>这2款主板出厂均自带Smoothieware板的<a href="./DFU-Bootloader.hex">DFU-Bootloader</a><sup id="fnref:1" class="footnote-ref"><a href="#fn:1" rel="footnote"><span class="hint--top hint--rounded" aria-label="[Smoothieware bootloader Github](https://github.com/Smoothieware/Smoothieware/tree/edge/bootloader)">[1]</span></a></sup>，可以使用TF卡烧录固件。<sup id="fnref:2" class="footnote-ref"><a href="#fn:2" rel="footnote"><span class="hint--top hint--rounded" aria-label="[SKR 1.3/1.4 Klipper Firmware](https://docs.vorondesign.com/build/software/skr13_klipper.html)">[2]</span></a></sup></p><ol><li><p>在上位机中配置Klipper并编译<br><img src="/2025/03/13/3D%E6%89%93%E5%8D%B0/BTT%20SKR%20V1.4%E4%B8%BB%E6%9D%BF%E5%88%B7%E5%85%A5Klipper%E5%9B%BA%E4%BB%B6/btt_skr_v1.4_klipper_config.png" alt="BTT SKR V1.4"><br><img src="/2025/03/13/3D%E6%89%93%E5%8D%B0/BTT%20SKR%20V1.4%E4%B8%BB%E6%9D%BF%E5%88%B7%E5%85%A5Klipper%E5%9B%BA%E4%BB%B6/btt_skr_v1.4_turbo_klipper_config.png" alt="BTT SKR V1.4 turbo"></p></li><li><p>准备一张TF卡，插入读卡器并连接电脑，打开<a href="https://winscp.net/eng/download.php">WinScp软件</a>连接到上位机，将<code>klipper/out/klipper.bin</code>文件复制到TF卡中，并重命名为<code>firmware.bin</code>。</p></li><li><p>将TF卡插入主板，接入电源，等待大约1分钟，关掉电源后并取出TF卡，再次插入电脑可以看到文件名变为<code>FIRMWARE.CUR</code>，代表烧录成功。</p></li></ol><h2 id="使用J-Link工具烧录Klipper固件"><a href="#使用J-Link工具烧录Klipper固件" class="headerlink" title="使用J-Link工具烧录Klipper固件"></a>使用J-Link工具烧录Klipper固件</h2><p>此方法适用于不小心刷掉自带的DFU-Bootloader而导致TF卡无法刷入Klipper固件的情况。</p><ol><li><p>下载<a href="https://www.segger.com/downloads/jlink/">SEGGER J-Links软件</a></p></li><li><p>将J-Link工具与主板SWD接口相连接：</p></li></ol><!-- 让表格居中显示的风格 --><style>.center{  width: auto;  display: table;  margin-left: auto;  margin-right: auto;}</style><p align="center"><font face="黑体" size="2.">硬件连接示意表</font></p><div class="center"><table><thead><tr><th align="center">J-Link</th><th align="center">SKR V1.4</th></tr></thead><tbody><tr><td align="center">GND</td><td align="center">GND</td></tr><tr><td align="center">SWCLK</td><td align="center">SWDCLK</td></tr><tr><td align="center">SWDIO</td><td align="center">SWDIO</td></tr><tr><td align="center">nTRST</td><td align="center">TRST</td></tr></tbody></table></div><ol start="3"><li><p>使用J-Flash Lite软件烧录DFU-Bootloader</p><p> <img src="/2025/03/13/3D%E6%89%93%E5%8D%B0/BTT%20SKR%20V1.4%E4%B8%BB%E6%9D%BF%E5%88%B7%E5%85%A5Klipper%E5%9B%BA%E4%BB%B6/j-flash_lite_device_interface.png" alt="根据主板芯片型号选择"><br> <img src="/2025/03/13/3D%E6%89%93%E5%8D%B0/BTT%20SKR%20V1.4%E4%B8%BB%E6%9D%BF%E5%88%B7%E5%85%A5Klipper%E5%9B%BA%E4%BB%B6/j-flash_lite_erase_chip.png" alt="先擦除芯片"><br> <img src="/2025/03/13/3D%E6%89%93%E5%8D%B0/BTT%20SKR%20V1.4%E4%B8%BB%E6%9D%BF%E5%88%B7%E5%85%A5Klipper%E5%9B%BA%E4%BB%B6/j-flash_lite_flash_bootloader_hex.png" alt="选择DFU-Bootloader.hex文件，点击烧录"></p></li><li><p>烧录klipper.bin固件，地址改为：<strong>0x00004000</strong>：</p><p> <img src="/2025/03/13/3D%E6%89%93%E5%8D%B0/BTT%20SKR%20V1.4%E4%B8%BB%E6%9D%BF%E5%88%B7%E5%85%A5Klipper%E5%9B%BA%E4%BB%B6/j-flash_lite_flash_klipper_bin.png" alt="烧录Klipper.bin"></p></li></ol><h2 id="升级Klipper固件"><a href="#升级Klipper固件" class="headerlink" title="升级Klipper固件"></a>升级Klipper固件</h2><p>如果后续想升级Klipper固件，有一种快速烧录新固件的方法，前提是主板之前已经成功烧录过Klipper固件，并且是使用USB通讯方式，在上位机中执行<code>ls /dev/serial/by-id/</code>也可以查到Serial ID才可以。</p><blockquote><p><code>by-id/</code>后面修改成对应主板的Serial ID即可。</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">make flash FLASH_DEVICE=/dev/serial/by-id/usb-Klipper_lpc176x_xxxxx<br></code></pre></td></tr></table></figure><p>对于使用树莓派RP2040的主板，使用该方法可能会提示烧录失败，并且执行<code>lsusb</code>命令后，可以看到MCU进入了DFU模式，所以我们可以按照DFU ID的烧录方法：<code>make flash FLASH_DEVICE=xxxx:xxxx</code>完成最终的烧录，也算一种便捷方式吧~（不用手动按BOOT、RST✌️）。</p><p><img src="/2025/03/13/3D%E6%89%93%E5%8D%B0/BTT%20SKR%20V1.4%E4%B8%BB%E6%9D%BF%E5%88%B7%E5%85%A5Klipper%E5%9B%BA%E4%BB%B6/update_rp2040_klipper_firmware.png" alt="RP2040升级Klipper固件操作"></p><h2 id="特别鸣谢"><a href="#特别鸣谢" class="headerlink" title="特别鸣谢"></a>特别鸣谢</h2><section class="footnotes"><div class="footnote-list"><ol><li><span id="fn:1" class="footnote-text"><span><a href="https://github.com/Smoothieware/Smoothieware/tree/edge/bootloader">Smoothieware bootloader Github</a><a href="#fnref:1" rev="footnote" class="footnote-backref"> ↩</a></span></span></li><li><span id="fn:2" class="footnote-text"><span><a href="https://docs.vorondesign.com/build/software/skr13_klipper.html">SKR 1.3&#x2F;1.4 Klipper Firmware</a><a href="#fnref:2" rev="footnote" class="footnote-backref"> ↩</a></span></span></li></ol></div></section>]]></content>
    
    
    <categories>
      
      <category>3D打印</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Klipper</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>OrangePi Zero 3安装Klipper</title>
    <link href="/2024/10/24/3D%E6%89%93%E5%8D%B0/OrangePi%20Zero%203%E5%AE%89%E8%A3%85Klipper/"/>
    <url>/2024/10/24/3D%E6%89%93%E5%8D%B0/OrangePi%20Zero%203%E5%AE%89%E8%A3%85Klipper/</url>
    
    <content type="html"><![CDATA[<h2 id="刷入官方Debian系统"><a href="#刷入官方Debian系统" class="headerlink" title="刷入官方Debian系统"></a>刷入官方Debian系统</h2><p>优选<font color="#11AA22">Linux6.1内核版本</font>的镜像，<strong>支持CAN网络</strong>，<font color="#AA1122">Linux5.4内核版本</font><strong>不支持CAN网络</strong>！</p><p>可以使用以下命令检查系统内核是否支持CAN网络：<sup id="fnref:1" class="footnote-ref"><a href="#fn:1" rel="footnote"><span class="hint--top hint--rounded" aria-label="[CAN问题合集](https://mellow.klipper.cn/docs/DebugDoc/faq/klipper_can/?persistLocale=true)">[1]</span></a></sup></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> modprobe can &amp;&amp; <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;您的内核支持CAN&quot;</span> || <span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;您的内核不支持CAN&quot;</span><br></code></pre></td></tr></table></figure><p>使用<a href="https://github.com/balena-io/etcher/releases">balenaEtcher</a>软件刷入<a href="http://www.orangepi.cn/html/hardWare/computerAndMicrocontrollers/service-and-support/Orange-Pi-Zero-3.html">Debian官方镜像</a>。</p><h2 id="连接WIFI"><a href="#连接WIFI" class="headerlink" title="连接WIFI"></a>连接WIFI</h2><ol><li><p>图形模式</p><p> 打开nmtui界面：</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> nmtui<br></code></pre></td></tr></table></figure><p> 使用键盘⌨方向键选择<code>Activate a connection</code>，然后选择需要连接的WIFI名，输入WIFI密码后等待连接成功即可。</p></li><li><p>命令行模式</p><p> 扫描WIFI：</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">nmcli dev wifi<br></code></pre></td></tr></table></figure><p> 连接WIFI：</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> nmcli dev wifi connect wifi_name password wifi_passwd<br></code></pre></td></tr></table></figure><p> <strong>wifi_name:</strong> WIFI名称<br> <strong>wifi_passwd:</strong> WIFI密码</p><p> 连接成功后，查看WIFI的IP地址：</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">ip addr show wlan0<br></code></pre></td></tr></table></figure></li></ol><h2 id="安装所需软件"><a href="#安装所需软件" class="headerlink" title="安装所需软件"></a>安装所需软件</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> apt install git python3 python3-pip -y<br></code></pre></td></tr></table></figure><h2 id="更换软件源"><a href="#更换软件源" class="headerlink" title="更换软件源"></a>更换软件源</h2><ol><li><p>apt源：<br> 橘子🍊官方已将apt源换成华为的镜像源，所以无需再操作。</p></li><li><p>pip3源：</p><p> 本文章示例更换pip3为阿里云的源：</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">pip3 config <span class="hljs-built_in">set</span> global.index-url https://mirrors.aliyun.com/pypi/simple<br></code></pre></td></tr></table></figure> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">pip3 config <span class="hljs-built_in">set</span> install.trusted-host mirrors.aliyun.com<br></code></pre></td></tr></table></figure><p> 查看pip源的配置信息：</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">pip3 config list<br></code></pre></td></tr></table></figure><p> 以下列出国内pip3源地址，可按需替换：<br> 阿里云：<a href="http://mirrors.aliyun.com/pypi/simple/">http://mirrors.aliyun.com/pypi/simple/</a><br> 清华大学：<a href="https://pypi.tuna.tsinghua.edu.cn/simple/">https://pypi.tuna.tsinghua.edu.cn/simple/</a><br> 中国科技大学：<a href="https://pypi.mirrors.ustc.edu.cn/simple/">https://pypi.mirrors.ustc.edu.cn/simple/</a></p></li></ol><h2 id="设置网络代理"><a href="#设置网络代理" class="headerlink" title="设置网络代理"></a>设置网络代理</h2><p>由于国内网络环境复杂，为了防止后续操作出现异常情况，可以进行网络代理，避免下载失败导致安装不成功或者环境配置异常。</p><p>在与OrangePi Zero 3同一局域网下，使用一台Windows电脑运行<a href="https://github.com/clash-verge-rev/clash-verge-rev">Clash Verge</a>，并配置好代理，在设置中开启<strong>局域网连接</strong>功能，并查看当前电脑的IP和端口（需替换命令中的ip和port部分）：</p><ol><li><p>临时网络代理</p><blockquote><p>临时代理只在本次会话中有效，如果系统重启就会失效。</p></blockquote> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">export</span> http_proxy=http://ip:port<br></code></pre></td></tr></table></figure> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">export</span> https_proxy=http://ip:port<br></code></pre></td></tr></table></figure></li><li><p>永久网络代理</p><blockquote><p>为所有用户启用网络代理，并且不会因系统重启而失效。</p></blockquote> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> nano /etc/environment<br></code></pre></td></tr></table></figure> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">export</span> http_proxy=<span class="hljs-string">&quot;ip:port&quot;</span><br><span class="hljs-built_in">export</span> https_proxy=<span class="hljs-string">&quot;ip:port&quot;</span><br><span class="hljs-built_in">export</span> no_proxy=<span class="hljs-string">&quot;localhost,127.0.0.1,::1&quot;</span><br></code></pre></td></tr></table></figure> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> reboot<br></code></pre></td></tr></table></figure></li></ol><h2 id="使用KIAUH脚本安装Klipper"><a href="#使用KIAUH脚本安装Klipper" class="headerlink" title="使用KIAUH脚本安装Klipper"></a>使用KIAUH脚本安装Klipper</h2><p>克隆KIAUH官方仓库：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">git <span class="hljs-built_in">clone</span> https://github.com/dw-0/kiauh.git<br></code></pre></td></tr></table></figure><p>运行KIAUH脚本：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">./kiauh/kiauh.sh<br></code></pre></td></tr></table></figure><h3 id="安装组件：Klipper、Moonraker、Web"><a href="#安装组件：Klipper、Moonraker、Web" class="headerlink" title="安装组件：Klipper、Moonraker、Web"></a>安装组件：Klipper、Moonraker、Web</h3><div class="note note-info">            <p>运行脚本可能会出现以下界面，询问是否体验KIAUH v6测试版，测试版包含了一些新功能；我们使用稳定版操作，输入<font color="#FF0000"><strong>2</strong></font>回车。<br><img src="/2024/10/24/3D%E6%89%93%E5%8D%B0/OrangePi%20Zero%203%E5%AE%89%E8%A3%85Klipper/kiauh_1.png"></p>          </div><div class="note note-info">            <p>KIAUH脚本主界面：<br><img src="/2024/10/24/3D%E6%89%93%E5%8D%B0/OrangePi%20Zero%203%E5%AE%89%E8%A3%85Klipper/kiauh_2.png"></p>          </div><div class="note note-info">            <p>安装核心必备组件：Klipper、Moonraker，而网页界面：Mainsail &#x2F; Fluidd，任选其一安装即可：<br><img src="/2024/10/24/3D%E6%89%93%E5%8D%B0/OrangePi%20Zero%203%E5%AE%89%E8%A3%85Klipper/kiauh_3.png"></p>          </div><h2 id="给OrangePi-Zero-3刷入Klipper固件"><a href="#给OrangePi-Zero-3刷入Klipper固件" class="headerlink" title="给OrangePi Zero 3刷入Klipper固件"></a>给OrangePi Zero 3刷入Klipper固件</h2><p>依次执行以下命令：<sup id="fnref:2" class="footnote-ref"><a href="#fn:2" rel="footnote"><span class="hint--top hint--rounded" aria-label="[RPi microcontroller](https://www.klipper3d.org/RPi_microcontroller.html)">[2]</span></a></sup></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cd</span> ~/klipper/<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> <span class="hljs-built_in">cp</span> ./scripts/klipper-mcu.service /etc/systemd/system/<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> systemctl <span class="hljs-built_in">enable</span> klipper-mcu.service<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">make menuconfig<br></code></pre></td></tr></table></figure><p><img src="/2024/10/24/3D%E6%89%93%E5%8D%B0/OrangePi%20Zero%203%E5%AE%89%E8%A3%85Klipper/klipper_linux_config.png" alt="按照图片中进行配置"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> service klipper stop<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">make flash<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> service klipper start<br></code></pre></td></tr></table></figure><p>执行完以上操作后，重启上位机，登录SSH，查看是否有本地串口：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">ls</span> /tmp<br></code></pre></td></tr></table></figure><p>此时可能会没有本地串口：<code>klipper_host_mcu</code>，如下图：</p><p><img src="/2024/10/24/3D%E6%89%93%E5%8D%B0/OrangePi%20Zero%203%E5%AE%89%E8%A3%85Klipper/no_linxu_mcu_local_serial_port.png" alt="查看是否有本地串口"></p><p>接下来查看klipper-mcu的运行状态：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">systemctl status klipper-mcu.service<br></code></pre></td></tr></table></figure><p><img src="/2024/10/24/3D%E6%89%93%E5%8D%B0/OrangePi%20Zero%203%E5%AE%89%E8%A3%85Klipper/check_klipper_mcu_status.png" alt="查看Klipper MCU状态，显示有报错！"></p><p>我遇到的情况是使用以下命令进行修复的，仅供参考：<sup id="fnref:3" class="footnote-ref"><a href="#fn:3" rel="footnote"><span class="hint--top hint--rounded" aria-label="[Can’t start a Linux host mcu on Orangepi zero 3](https://klipper.discourse.group/t/cant-start-a-linux-host-mcu-on-orangepi-zero-3/9822/11)">[3]</span></a></sup> <sup id="fnref:4" class="footnote-ref"><a href="#fn:4" rel="footnote"><span class="hint--top hint--rounded" aria-label="[Armbian kernel & Klipper host mcu: “Got error -1 in sched_setschedule”](https://klipper.discourse.group/t/armbian-kernel-klipper-host-mcu-got-error-1-in-sched-setschedule/1193)">[4]</span></a></sup></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> sysctl -w kernel.sched_rt_runtime_us=-1<br><span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;kernel.sched_rt_runtime_us = -1&quot;</span> | <span class="hljs-built_in">sudo</span> <span class="hljs-built_in">tee</span> /etc/sysctl.d/10-disable-rt-group-limit.conf<br></code></pre></td></tr></table></figure><p><img src="/2024/10/24/3D%E6%89%93%E5%8D%B0/OrangePi%20Zero%203%E5%AE%89%E8%A3%85Klipper/resolving_linux_kernel_erro.png" alt="修改内核后执行重启"></p><p>执行上述命令后，再次执行<code>ls /tmp</code>命令可以看到已经有本地串口：</p><p><img src="/2024/10/24/3D%E6%89%93%E5%8D%B0/OrangePi%20Zero%203%E5%AE%89%E8%A3%85Klipper/klipper_local_host_mcu.png" alt="已成功启动Linux MCU本地串口，可以到网页端进行配置引脚进行使用"></p><div class="note note-warning">            <p>橘子官方提供了2个不同Linux内核（5.4 &#x2F; 6.1）的系统，分配的gpio管线不一致，可以按照如下操作查看当前系统的管线配置：</p><p>先安装工具：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> apt-get install gpiod<br></code></pre></td></tr></table></figure><p>检查GPIO管线分配情况：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> gpiodetect<br></code></pre></td></tr></table></figure><p>以下附上5.4与6.1内核的管线分配截图，对比会发现他们的gpiochip号互为相反：</p><p><img src="/2024/10/24/3D%E6%89%93%E5%8D%B0/OrangePi%20Zero%203%E5%AE%89%E8%A3%85Klipper/orange_pi_zero3_linux_kernel_5.4_gpiodetect.png" alt="5.4内核的GPIO管线分配情况"></p><p><img src="/2024/10/24/3D%E6%89%93%E5%8D%B0/OrangePi%20Zero%203%E5%AE%89%E8%A3%85Klipper/orange_pi_zero3_linux_kernel_6.1_gpiodetect.png" alt="6.1内核的GPIO管线分配情况"></p><p>检查引脚号以及可用性：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> gpioinfo<br></code></pre></td></tr></table></figure><p>以下分别附上香橙派Zero3的13 PIN &amp; 26 PIN 接口的引脚功能分配图（也可以使用<code>gpio readall</code>命令查询）：</p><p><img src="/2024/10/24/3D%E6%89%93%E5%8D%B0/OrangePi%20Zero%203%E5%AE%89%E8%A3%85Klipper/orange_pi_zero3_13_pin.png" alt="13 PIN引脚功能分配图"></p><p><img src="/2024/10/24/3D%E6%89%93%E5%8D%B0/OrangePi%20Zero%203%E5%AE%89%E8%A3%85Klipper/orange_pi_zero3_26_pin.png" alt="26 PIN引脚功能分配图"></p><p><img src="/2024/10/24/3D%E6%89%93%E5%8D%B0/OrangePi%20Zero%203%E5%AE%89%E8%A3%85Klipper/orange_pi_zero3_26_pin_gpio_readall.png" alt="所有PIN引脚功能分配图"></p>          </div><h2 id="编写OrangePi配置文件"><a href="#编写OrangePi配置文件" class="headerlink" title="编写OrangePi配置文件"></a>编写OrangePi配置文件</h2><p>此配置文件可搭配我给OrangePi Zero3画的Hub板进行使用，其中pin脚的<strong>gpiochip号</strong>需要配置为上述内核中实际查询的，否则会报错：<code>MCU &#39;host&#39; error during config: Unable to open out GPIO chip line</code>，仅供参考：</p><div class="note note-info">            <p>如果需要使用硬件接口：<a href="http://www.orangepi.cn/orangepiwiki/index.php/Orange_Pi_Zero_3#26pin.E7.9A.84UART.E6.B5.8B.E8.AF.95">UART接口</a>、<a href="http://www.orangepi.cn/orangepiwiki/index.php/Orange_Pi_Zero_3#26pin_I2C.E6.B5.8B.E8.AF.95">IIC接口</a>、<a href="http://www.orangepi.cn/orangepiwiki/index.php/Orange_Pi_Zero_3#26pin_SPI.E6.B5.8B.E8.AF.95">SPI接口</a>，需要在<code>sudo orangepi-config</code>中开启相应接口并重启系统后才可实现对应功能，点击对应接口查看官方文档操作即可。</p>          </div><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-comment"># This file contains an example configuration with RPi as secondary mcu</span><br><br><span class="hljs-comment"># See docs/Config_Reference.md for a description of parameters.</span><br><br><span class="hljs-comment"># The rpi microcontroller is used as secondary.</span><br><span class="hljs-comment"># Typically, both the X and Y axes</span><br><span class="hljs-comment"># are connected to the main micro-controller. The rpi microcontroller is used</span><br><span class="hljs-comment"># on non time-critical functions such as enclosure sensors, additional fan or</span><br><span class="hljs-comment"># light sources</span><br><br><span class="hljs-comment"># See More :</span><br><span class="hljs-comment"># https://www.klipper3d.org/RPi_microcontroller.html</span><br><span class="hljs-comment"># http://www.orangepi.cn/orangepiwiki/index.php/Orange_Pi_Zero_3</span><br><br>[<span class="hljs-string">mcu</span> <span class="hljs-string">host</span>]<br><span class="hljs-attr">serial:</span> <span class="hljs-string">/tmp/klipper_host_mcu</span><br><br><span class="hljs-comment">#[temperature_sensor SOC_Temp]</span><br><span class="hljs-comment">#sensor_type: temperature_host</span><br><span class="hljs-comment">#min_temp: 0</span><br><span class="hljs-comment">#max_temp: 80</span><br><br>[<span class="hljs-string">virtual_sdcard</span>]<br><span class="hljs-attr">path:</span> <span class="hljs-string">/home/orangepi/printer_data/gcodes</span><br><span class="hljs-attr">on_error_gcode:</span> <span class="hljs-string">CANCEL_PRINT</span><br><br><span class="hljs-comment">#####################################################################</span><br><span class="hljs-comment">#   Orange Pi Cooling Fan</span><br><span class="hljs-comment">#####################################################################</span><br><br>[<span class="hljs-string">temperature_fan</span> <span class="hljs-string">orange_pi_soc_fan</span>]<br><span class="hljs-attr">pin:</span> <span class="hljs-string">host:gpiochip1/gpio75</span><br><span class="hljs-comment">#max_power:</span><br><span class="hljs-comment">#shutdown_speed: 1.0</span><br><span class="hljs-comment">#cycle_time:</span><br><span class="hljs-comment">#hardware_pwm:</span><br><span class="hljs-comment">#kick_start_time:</span><br><span class="hljs-comment">#off_below:</span><br><span class="hljs-comment">#tachometer_pin:</span><br><span class="hljs-comment">#tachometer_ppr:</span><br><span class="hljs-comment">#tachometer_poll_interval:</span><br><span class="hljs-comment">#enable_pin:</span><br><span class="hljs-comment">#   See the &quot;fan&quot; section for a description of the above parameters.</span><br><span class="hljs-attr">sensor_type:</span> <span class="hljs-string">temperature_host</span><br><span class="hljs-comment">#sensor_pin:</span><br><span class="hljs-attr">control:</span> <span class="hljs-string">watermark</span><br><span class="hljs-comment">#max_delta:</span><br><span class="hljs-attr">min_temp:</span> <span class="hljs-number">0</span><br><span class="hljs-attr">max_temp:</span> <span class="hljs-number">80</span><br><span class="hljs-comment">#   See the &quot;extruder&quot; section for a description of the above parameters.</span><br><span class="hljs-comment">#pid_Kp:</span><br><span class="hljs-comment">#pid_Ki:</span><br><span class="hljs-comment">#pid_Kd:</span><br><span class="hljs-comment">#   The proportional (pid_Kp), integral (pid_Ki), and derivative</span><br><span class="hljs-comment">#   (pid_Kd) settings for the PID feedback control system. Klipper</span><br><span class="hljs-comment">#   evaluates the PID settings with the following general formula:</span><br><span class="hljs-comment">#     fan_pwm = max_power - (Kp*e + Ki*integral(e) - Kd*derivative(e)) / 255</span><br><span class="hljs-comment">#   Where &quot;e&quot; is &quot;target_temperature - measured_temperature&quot; and</span><br><span class="hljs-comment">#   &quot;fan_pwm&quot; is the requested fan rate with 0.0 being full off and</span><br><span class="hljs-comment">#   1.0 being full on. The pid_Kp, pid_Ki, and pid_Kd parameters must</span><br><span class="hljs-comment">#   be provided when the PID control algorithm is enabled.</span><br><span class="hljs-comment">#pid_deriv_time: 2.0</span><br><span class="hljs-comment">#   A time value (in seconds) over which temperature measurements will</span><br><span class="hljs-comment">#   be smoothed when using the PID control algorithm. This may reduce</span><br><span class="hljs-comment">#   the impact of measurement noise. The default is 2 seconds.</span><br><span class="hljs-attr">target_temp:</span> <span class="hljs-number">40</span><br><span class="hljs-comment">#   A temperature (in Celsius) that will be the target temperature.</span><br><span class="hljs-comment">#   The default is 40 degrees.</span><br><span class="hljs-comment">#max_speed: 1.0</span><br><span class="hljs-comment">#   The fan speed (expressed as a value from 0.0 to 1.0) that the fan</span><br><span class="hljs-comment">#   will be set to when the sensor temperature exceeds the set value.</span><br><span class="hljs-comment">#   The default is 1.0.</span><br><span class="hljs-comment">#min_speed: 0.3</span><br><span class="hljs-comment">#   The minimum fan speed (expressed as a value from 0.0 to 1.0) that</span><br><span class="hljs-comment">#   the fan will be set to for PID temperature fans.</span><br><span class="hljs-comment">#   The default is 0.3.</span><br><span class="hljs-comment">#gcode_id:</span><br><span class="hljs-comment">#   If set, the temperature will be reported in M105 queries using the</span><br><span class="hljs-comment">#   given id. The default is to not report the temperature via M105.</span><br><br><span class="hljs-comment">#####################################################################</span><br><span class="hljs-comment"># Electrical Warehouse Cooling Fan</span><br><span class="hljs-comment">#####################################################################</span><br><br>[<span class="hljs-string">temperature_fan</span> <span class="hljs-string">left_cooling_fan</span>]<br><span class="hljs-attr">pin:</span> <span class="hljs-string">host:gpiochip1/gpio70</span><br><span class="hljs-comment">#max_power:</span><br><span class="hljs-comment">#shutdown_speed:</span><br><span class="hljs-comment">#cycle_time:</span><br><span class="hljs-comment">#hardware_pwm:</span><br><span class="hljs-comment">#kick_start_time:</span><br><span class="hljs-comment">#off_below:</span><br><span class="hljs-comment">#tachometer_pin:</span><br><span class="hljs-comment">#tachometer_ppr:</span><br><span class="hljs-comment">#tachometer_poll_interval:</span><br><span class="hljs-comment">#enable_pin:</span><br><span class="hljs-comment">#   See the &quot;fan&quot; section for a description of the above parameters.</span><br><span class="hljs-attr">sensor_type:</span> <span class="hljs-string">temperature_host</span><br><span class="hljs-comment">#sensor_pin:</span><br><span class="hljs-attr">control:</span> <span class="hljs-string">watermark</span><br><span class="hljs-comment">#max_delta:</span><br><span class="hljs-attr">min_temp:</span> <span class="hljs-number">0</span><br><span class="hljs-attr">max_temp:</span> <span class="hljs-number">80</span><br><span class="hljs-comment">#   See the &quot;extruder&quot; section for a description of the above parameters.</span><br><span class="hljs-comment">#pid_Kp:</span><br><span class="hljs-comment">#pid_Ki:</span><br><span class="hljs-comment">#pid_Kd:</span><br><span class="hljs-comment">#   The proportional (pid_Kp), integral (pid_Ki), and derivative</span><br><span class="hljs-comment">#   (pid_Kd) settings for the PID feedback control system. Klipper</span><br><span class="hljs-comment">#   evaluates the PID settings with the following general formula:</span><br><span class="hljs-comment">#     fan_pwm = max_power - (Kp*e + Ki*integral(e) - Kd*derivative(e)) / 255</span><br><span class="hljs-comment">#   Where &quot;e&quot; is &quot;target_temperature - measured_temperature&quot; and</span><br><span class="hljs-comment">#   &quot;fan_pwm&quot; is the requested fan rate with 0.0 being full off and</span><br><span class="hljs-comment">#   1.0 being full on. The pid_Kp, pid_Ki, and pid_Kd parameters must</span><br><span class="hljs-comment">#   be provided when the PID control algorithm is enabled.</span><br><span class="hljs-comment">#pid_deriv_time: 2.0</span><br><span class="hljs-comment">#   A time value (in seconds) over which temperature measurements will</span><br><span class="hljs-comment">#   be smoothed when using the PID control algorithm. This may reduce</span><br><span class="hljs-comment">#   the impact of measurement noise. The default is 2 seconds.</span><br><span class="hljs-attr">target_temp:</span> <span class="hljs-number">40</span><br><span class="hljs-comment">#   A temperature (in Celsius) that will be the target temperature.</span><br><span class="hljs-comment">#   The default is 40 degrees.</span><br><span class="hljs-comment">#max_speed: 1.0</span><br><span class="hljs-comment">#   The fan speed (expressed as a value from 0.0 to 1.0) that the fan</span><br><span class="hljs-comment">#   will be set to when the sensor temperature exceeds the set value.</span><br><span class="hljs-comment">#   The default is 1.0.</span><br><span class="hljs-comment">#min_speed: 0.3</span><br><span class="hljs-comment">#   The minimum fan speed (expressed as a value from 0.0 to 1.0) that</span><br><span class="hljs-comment">#   the fan will be set to for PID temperature fans.</span><br><span class="hljs-comment">#   The default is 0.3.</span><br><span class="hljs-comment">#gcode_id:</span><br><span class="hljs-comment">#   If set, the temperature will be reported in M105 queries using the</span><br><span class="hljs-comment">#   given id. The default is to not report the temperature via M105.</span><br><br><span class="hljs-comment">#[controller_fan cooling_fan_left]</span><br><span class="hljs-comment">#pin: host:gpiochip1/gpio70</span><br><span class="hljs-comment">#max_power:</span><br><span class="hljs-comment">#shutdown_speed:</span><br><span class="hljs-comment">#cycle_time:</span><br><span class="hljs-comment">#hardware_pwm:</span><br><span class="hljs-comment">#kick_start_time:</span><br><span class="hljs-comment">#off_below:</span><br><span class="hljs-comment">#tachometer_pin:</span><br><span class="hljs-comment">#tachometer_ppr:</span><br><span class="hljs-comment">#tachometer_poll_interval:</span><br><span class="hljs-comment">#enable_pin:</span><br><span class="hljs-comment">#   See the &quot;fan&quot; section for a description of the above parameters.</span><br><span class="hljs-comment">#fan_speed: 1.0</span><br><span class="hljs-comment">#   The fan speed (expressed as a value from 0.0 to 1.0) that the fan</span><br><span class="hljs-comment">#   will be set to when a heater or stepper driver is active.</span><br><span class="hljs-comment">#   The default is 1.0</span><br><span class="hljs-comment">#idle_timeout:</span><br><span class="hljs-comment">#   The amount of time (in seconds) after a stepper driver or heater</span><br><span class="hljs-comment">#   was active and the fan should be kept running. The default</span><br><span class="hljs-comment">#   is 30 seconds.</span><br><span class="hljs-comment">#idle_speed:</span><br><span class="hljs-comment">#   The fan speed (expressed as a value from 0.0 to 1.0) that the fan</span><br><span class="hljs-comment">#   will be set to when a heater or stepper driver was active and</span><br><span class="hljs-comment">#   before the idle_timeout is reached. The default is fan_speed.</span><br><span class="hljs-comment">#heater: heater_bed</span><br><span class="hljs-comment">#stepper:</span><br><span class="hljs-comment">#   Name of the config section defining the heater/stepper that this fan</span><br><span class="hljs-comment">#   is associated with. If a comma separated list of heater/stepper names</span><br><span class="hljs-comment">#   is provided here, then the fan will be enabled when any of the given</span><br><span class="hljs-comment">#   heaters/steppers are enabled. The default heater is &quot;extruder&quot;, the</span><br><span class="hljs-comment">#   default stepper is all of them.</span><br><br>[<span class="hljs-string">temperature_fan</span> <span class="hljs-string">right_cooling_fan</span>]<br><span class="hljs-attr">pin:</span> <span class="hljs-string">host:gpiochip1/gpio73</span><br><span class="hljs-comment">#max_power:</span><br><span class="hljs-comment">#shutdown_speed:</span><br><span class="hljs-comment">#cycle_time:</span><br><span class="hljs-comment">#hardware_pwm:</span><br><span class="hljs-comment">#kick_start_time:</span><br><span class="hljs-comment">#off_below:</span><br><span class="hljs-comment">#tachometer_pin:</span><br><span class="hljs-comment">#tachometer_ppr:</span><br><span class="hljs-comment">#tachometer_poll_interval:</span><br><span class="hljs-comment">#enable_pin:</span><br><span class="hljs-comment">#   See the &quot;fan&quot; section for a description of the above parameters.</span><br><span class="hljs-attr">sensor_type:</span> <span class="hljs-string">temperature_host</span><br><span class="hljs-comment">#sensor_pin:</span><br><span class="hljs-attr">control:</span> <span class="hljs-string">watermark</span><br><span class="hljs-comment">#max_delta:</span><br><span class="hljs-attr">min_temp:</span> <span class="hljs-number">0</span><br><span class="hljs-attr">max_temp:</span> <span class="hljs-number">80</span><br><span class="hljs-comment">#   See the &quot;extruder&quot; section for a description of the above parameters.</span><br><span class="hljs-comment">#pid_Kp:</span><br><span class="hljs-comment">#pid_Ki:</span><br><span class="hljs-comment">#pid_Kd:</span><br><span class="hljs-comment">#   The proportional (pid_Kp), integral (pid_Ki), and derivative</span><br><span class="hljs-comment">#   (pid_Kd) settings for the PID feedback control system. Klipper</span><br><span class="hljs-comment">#   evaluates the PID settings with the following general formula:</span><br><span class="hljs-comment">#     fan_pwm = max_power - (Kp*e + Ki*integral(e) - Kd*derivative(e)) / 255</span><br><span class="hljs-comment">#   Where &quot;e&quot; is &quot;target_temperature - measured_temperature&quot; and</span><br><span class="hljs-comment">#   &quot;fan_pwm&quot; is the requested fan rate with 0.0 being full off and</span><br><span class="hljs-comment">#   1.0 being full on. The pid_Kp, pid_Ki, and pid_Kd parameters must</span><br><span class="hljs-comment">#   be provided when the PID control algorithm is enabled.</span><br><span class="hljs-comment">#pid_deriv_time: 2.0</span><br><span class="hljs-comment">#   A time value (in seconds) over which temperature measurements will</span><br><span class="hljs-comment">#   be smoothed when using the PID control algorithm. This may reduce</span><br><span class="hljs-comment">#   the impact of measurement noise. The default is 2 seconds.</span><br><span class="hljs-attr">target_temp:</span> <span class="hljs-number">40</span><br><span class="hljs-comment">#   A temperature (in Celsius) that will be the target temperature.</span><br><span class="hljs-comment">#   The default is 40 degrees.</span><br><span class="hljs-comment">#max_speed: 1.0</span><br><span class="hljs-comment">#   The fan speed (expressed as a value from 0.0 to 1.0) that the fan</span><br><span class="hljs-comment">#   will be set to when the sensor temperature exceeds the set value.</span><br><span class="hljs-comment">#   The default is 1.0.</span><br><span class="hljs-comment">#min_speed: 0.3</span><br><span class="hljs-comment">#   The minimum fan speed (expressed as a value from 0.0 to 1.0) that</span><br><span class="hljs-comment">#   the fan will be set to for PID temperature fans.</span><br><span class="hljs-comment">#   The default is 0.3.</span><br><span class="hljs-comment">#gcode_id:</span><br><span class="hljs-comment">#   If set, the temperature will be reported in M105 queries using the</span><br><span class="hljs-comment">#   given id. The default is to not report the temperature via M105.</span><br><br><span class="hljs-comment">#[controller_fan cooling_fan_right]</span><br><span class="hljs-comment">#pin: host:gpiochip1/gpio73</span><br><span class="hljs-comment">#max_power:</span><br><span class="hljs-comment">#shutdown_speed:</span><br><span class="hljs-comment">#cycle_time:</span><br><span class="hljs-comment">#hardware_pwm:</span><br><span class="hljs-comment">#kick_start_time:</span><br><span class="hljs-comment">#off_below:</span><br><span class="hljs-comment">#tachometer_pin:</span><br><span class="hljs-comment">#tachometer_ppr:</span><br><span class="hljs-comment">#tachometer_poll_interval:</span><br><span class="hljs-comment">#enable_pin:</span><br><span class="hljs-comment">#   See the &quot;fan&quot; section for a description of the above parameters.</span><br><span class="hljs-comment">#fan_speed: 1.0</span><br><span class="hljs-comment">#   The fan speed (expressed as a value from 0.0 to 1.0) that the fan</span><br><span class="hljs-comment">#   will be set to when a heater or stepper driver is active.</span><br><span class="hljs-comment">#   The default is 1.0</span><br><span class="hljs-comment">#idle_timeout:</span><br><span class="hljs-comment">#   The amount of time (in seconds) after a stepper driver or heater</span><br><span class="hljs-comment">#   was active and the fan should be kept running. The default</span><br><span class="hljs-comment">#   is 30 seconds.</span><br><span class="hljs-comment">#idle_speed:</span><br><span class="hljs-comment">#   The fan speed (expressed as a value from 0.0 to 1.0) that the fan</span><br><span class="hljs-comment">#   will be set to when a heater or stepper driver was active and</span><br><span class="hljs-comment">#   before the idle_timeout is reached. The default is fan_speed.</span><br><span class="hljs-comment">#heater: heater_bed</span><br><span class="hljs-comment">#stepper:</span><br><span class="hljs-comment">#   Name of the config section defining the heater/stepper that this fan</span><br><span class="hljs-comment">#   is associated with. If a comma separated list of heater/stepper names</span><br><span class="hljs-comment">#   is provided here, then the fan will be enabled when any of the given</span><br><span class="hljs-comment">#   heaters/steppers are enabled. The default heater is &quot;extruder&quot;, the</span><br><span class="hljs-comment">#   default stepper is all of them.</span><br><br><span class="hljs-comment">#####################################################################</span><br><span class="hljs-comment">#   HTU21D sensor</span><br><span class="hljs-comment">#####################################################################</span><br><br><span class="hljs-comment"># See more :</span><br><span class="hljs-comment"># http://www.orangepi.cn/orangepiwiki/index.php/Orange_Pi_Zero_3#26pin_I2C.E6.B5.8B.E8.AF.95</span><br><span class="hljs-comment"># https://www.klipper3d.org/Config_Reference.html?h=htu#htu21d-sensor</span><br><span class="hljs-comment"># https://github.com/Klipper3d/klipper/blob/master/config/sample-macros.cfg</span><br>[<span class="hljs-string">temperature_sensor</span> <span class="hljs-string">electrical_warehouse</span>]<br><span class="hljs-attr">sensor_type:</span> <span class="hljs-string">HTU21D</span><br><span class="hljs-comment">#   Must be &quot;HTU21D&quot; , &quot;SI7013&quot;, &quot;SI7020&quot;, &quot;SI7021&quot; or &quot;SHT21&quot;</span><br><span class="hljs-comment">#i2c_address:</span><br><span class="hljs-comment">#   Default is 64 (0x40).</span><br><span class="hljs-attr">i2c_mcu:</span> <span class="hljs-string">host</span><br><span class="hljs-attr">i2c_bus:</span> <span class="hljs-string">i2c.3</span><br><span class="hljs-comment">#i2c_software_scl_pin: host:i2c1/gpio228</span><br><span class="hljs-comment">#i2c_software_sda_pin: host:i2c1/gpio229</span><br><span class="hljs-comment">#i2c_speed:</span><br><span class="hljs-comment">#   See the &quot;common I2C settings&quot; section for a description of the</span><br><span class="hljs-comment">#   above parameters.</span><br><span class="hljs-comment">#htu21d_hold_master: True</span><br><span class="hljs-comment">#   If the sensor can hold the I2C buf while reading. If True no other</span><br><span class="hljs-comment">#   bus communication can be performed while reading is in progress.</span><br><span class="hljs-comment">#   Default is False.</span><br><span class="hljs-comment">#htu21d_resolution:</span><br><span class="hljs-comment">#   The resolution of temperature and humidity reading.</span><br><span class="hljs-comment">#   Valid values are:</span><br><span class="hljs-comment">#    &#x27;TEMP14_HUM12&#x27; -&gt; 14bit for Temp and 12bit for humidity</span><br><span class="hljs-comment">#    &#x27;TEMP13_HUM10&#x27; -&gt; 13bit for Temp and 10bit for humidity</span><br><span class="hljs-comment">#    &#x27;TEMP12_HUM08&#x27; -&gt; 12bit for Temp and 08bit for humidity</span><br><span class="hljs-comment">#    &#x27;TEMP11_HUM11&#x27; -&gt; 11bit for Temp and 11bit for humidity</span><br><span class="hljs-comment">#   Default is: &quot;TEMP11_HUM11&quot;</span><br><span class="hljs-attr">htu21d_report_time:</span> <span class="hljs-number">60</span><br><span class="hljs-comment">#   Interval in seconds between readings. Default is 30</span><br><br>[<span class="hljs-string">gcode_macro</span> <span class="hljs-string">Electrical_Warehouse_State</span>]<br><span class="hljs-attr">gcode:</span><br>    &#123;<span class="hljs-string">%</span> <span class="hljs-string">set</span> <span class="hljs-string">sensor</span> <span class="hljs-string">=</span> <span class="hljs-string">printer</span>[<span class="hljs-string">&quot;htu21d electrical_warehouse&quot;</span>] <span class="hljs-string">%</span>&#125;<br>    &#123;<span class="hljs-string">action_respond_info(</span><br>        <span class="hljs-string">&quot;Temperature: %.2f°C\n&quot;</span><br>        <span class="hljs-string">&quot;Humidity: %.2f%%&quot;</span> <span class="hljs-string">%</span> <span class="hljs-string">(</span><br>            <span class="hljs-string">sensor.temperature</span>,<br>            <span class="hljs-string">sensor.humidity))</span>&#125;<br><br><span class="hljs-comment">#####################################################################</span><br><span class="hljs-comment">#   Case Lights</span><br><span class="hljs-comment">#####################################################################</span><br><span class="hljs-comment">#[output_pin Case_Lights]</span><br><span class="hljs-comment">#pin: host:gpiochip1/gpio73</span><br><span class="hljs-comment">#value: 0</span><br><span class="hljs-comment">#shutdown_value: 0</span><br><br><span class="hljs-comment">#[gcode_macro lights_on]</span><br><span class="hljs-comment">#gcode:</span><br><span class="hljs-comment">#    SET_PIN PIN=Case_Lights VALUE=1.0</span><br><br><span class="hljs-comment">#[gcode_macro lights_off]</span><br><span class="hljs-comment">#gcode:</span><br><span class="hljs-comment">#    SET_PIN PIN=Case_Lights VALUE=0.0</span><br><br></code></pre></td></tr></table></figure><h3 id="修改系统时区"><a href="#修改系统时区" class="headerlink" title="修改系统时区"></a>修改系统时区</h3><p>默认时区是UTC，可以修改时区为亚洲：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">date</span><br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> timedatectl set-timezone Asia/Shanghai<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">date</span><br></code></pre></td></tr></table></figure><p><img src="/2024/10/24/3D%E6%89%93%E5%8D%B0/OrangePi%20Zero%203%E5%AE%89%E8%A3%85Klipper/change_time_zone.png" alt="执行上述命令后，时区已经改为亚洲时区"></p><h2 id="特别鸣谢"><a href="#特别鸣谢" class="headerlink" title="特别鸣谢"></a>特别鸣谢</h2><section class="footnotes"><div class="footnote-list"><ol><li><span id="fn:1" class="footnote-text"><span><a href="https://mellow.klipper.cn/docs/DebugDoc/faq/klipper_can/?persistLocale=true">CAN问题合集</a><a href="#fnref:1" rev="footnote" class="footnote-backref"> ↩</a></span></span></li><li><span id="fn:2" class="footnote-text"><span><a href="https://www.klipper3d.org/RPi_microcontroller.html">RPi microcontroller</a><a href="#fnref:2" rev="footnote" class="footnote-backref"> ↩</a></span></span></li><li><span id="fn:3" class="footnote-text"><span><a href="https://klipper.discourse.group/t/cant-start-a-linux-host-mcu-on-orangepi-zero-3/9822/11">Can’t start a Linux host mcu on Orangepi zero 3</a><a href="#fnref:3" rev="footnote" class="footnote-backref"> ↩</a></span></span></li><li><span id="fn:4" class="footnote-text"><span><a href="https://klipper.discourse.group/t/armbian-kernel-klipper-host-mcu-got-error-1-in-sched-setschedule/1193">Armbian kernel &amp; Klipper host mcu: “Got error -1 in sched_setschedule”</a><a href="#fnref:4" rev="footnote" class="footnote-backref"> ↩</a></span></span></li></ol></div></section>]]></content>
    
    
    <categories>
      
      <category>3D打印</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Klipper</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>校准3D打印机</title>
    <link href="/2023/08/20/3D%E6%89%93%E5%8D%B0/%E6%A0%A1%E5%87%863D%E6%89%93%E5%8D%B0%E6%9C%BA/"/>
    <url>/2023/08/20/3D%E6%89%93%E5%8D%B0/%E6%A0%A1%E5%87%863D%E6%89%93%E5%8D%B0%E6%9C%BA/</url>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>以下几种情况需要对3D打印机进行校准，以保证打印模型的质量：</p><ol><li>3D打印机组装完毕。</li><li>部分结构件有改动。</li><li>更换不同的耗材。</li></ol><h2 id="热床统一调平-UBL"><a href="#热床统一调平-UBL" class="headerlink" title="热床统一调平(UBL)"></a>热床统一调平(UBL)</h2><div class="note note-info">            <p>热床统一调平主要适用于热床表面凹凸不平的情况，可以大大提高首层打印的质量，提升打印成功几率。</p>          </div><h3 id="Marlin"><a href="#Marlin" class="headerlink" title="Marlin"></a>Marlin</h3><p>在固件中开启 热床统一调平 功能时，在LCD的菜单中就会出现相应的校准菜单，根据步骤一步步执行即可完成热床网格补偿，校准完别忘记保存参数！！！</p><h3 id="Klipper"><a href="#Klipper" class="headerlink" title="Klipper"></a>Klipper</h3><h2 id="温度塔"><a href="#温度塔" class="headerlink" title="温度塔"></a>温度塔</h2><div class="note note-info">            <p>对于不同的耗材，虽然耗材包装上标注了打印温度范围，但是实际情况还是要进行打印测试才知道当前最合适的打印温度是多少，所以进行温度塔的测试是很有必要的。</p>          </div><ol><li>在Orca Slicer中，可以很方便的进行温度范围测试：</li></ol><p><img src="/2023/08/20/3D%E6%89%93%E5%8D%B0/%E6%A0%A1%E5%87%863D%E6%89%93%E5%8D%B0%E6%9C%BA/Temperature_tower_1.jpg" alt="温度校准"></p><ol start="2"><li>选择对应耗材，并设定好温度范围（温度从大到小设置）：</li></ol><p><img src="/2023/08/20/3D%E6%89%93%E5%8D%B0/%E6%A0%A1%E5%87%863D%E6%89%93%E5%8D%B0%E6%9C%BA/Temperature_tower_2.jpg" alt="耗材与温度设置"></p><ol start="3"><li>切片进行打印：</li></ol><p><img src="/2023/08/20/3D%E6%89%93%E5%8D%B0/%E6%A0%A1%E5%87%863D%E6%89%93%E5%8D%B0%E6%9C%BA/Temperature_tower_3.jpg" alt="模型切片"></p><ol start="4"><li>观察模型打印质量，找出模型层纹和无支撑搭桥表现最好处的温度，既是当前耗材最适宜的打印温度：</li></ol><p><img src="/2023/08/20/3D%E6%89%93%E5%8D%B0/%E6%A0%A1%E5%87%863D%E6%89%93%E5%8D%B0%E6%9C%BA/Temperature_tower_4.jpg" alt="观察打印模型质量"></p><h2 id="流量"><a href="#流量" class="headerlink" title="流量"></a>流量</h2><div class="note note-info">            <p>流量校准可以改善模型顶层的质量，使其表面平整光滑。</p>          </div><ol><li><p>在Orca Slicer中，可以很方便的进行流量测试：<br><img src="/2023/08/20/3D%E6%89%93%E5%8D%B0/%E6%A0%A1%E5%87%863D%E6%89%93%E5%8D%B0%E6%9C%BA/Flow_measurement_1.jpg" alt="流量测试"></p></li><li><p>优先进行粗调测试，软件会自动生成9个不同流量的图块，点击切片进行打印：<br><img src="/2023/08/20/3D%E6%89%93%E5%8D%B0/%E6%A0%A1%E5%87%863D%E6%89%93%E5%8D%B0%E6%9C%BA/Flow_measurement_2.jpg" alt="流量粗调测试"></p></li><li><p>打印完成后观察各个图块表面质量，筛选出表面最光滑的图块，记录此图块的数字。<br><img src="/2023/08/20/3D%E6%89%93%E5%8D%B0/%E6%A0%A1%E5%87%863D%E6%89%93%E5%8D%B0%E6%9C%BA/Flow_measurement_3.jpg" alt="粗调打印模型质量"></p></li><li><p>根据以下公式计算新的流量比例：<code>当前流量比例 * (100 + 表面最为光滑的图块对应的数字) / 100 。</code></p></li><li><p>将上述计算得到的流量比例填入耗材参数中。保存后进行细调测试。<br><img src="/2023/08/20/3D%E6%89%93%E5%8D%B0/%E6%A0%A1%E5%87%863D%E6%89%93%E5%8D%B0%E6%9C%BA/Flow_measurement_4.jpg" alt="保存流量比例"></p></li><li><p>在细调测试中，软件会生成10个不同流量的图块，点击切片进行打印：<br><img src="/2023/08/20/3D%E6%89%93%E5%8D%B0/%E6%A0%A1%E5%87%863D%E6%89%93%E5%8D%B0%E6%9C%BA/Flow_measurement_5.jpg" alt="细条打印模型质量"></p></li><li><p>打印完成后观察各个图块表面质量，筛选出表面最光滑的图块，记录此图块的数字。<br><img src="/2023/08/20/3D%E6%89%93%E5%8D%B0/%E6%A0%A1%E5%87%863D%E6%89%93%E5%8D%B0%E6%9C%BA/Flow_measurement_6.jpg" alt="细调打印模型质量"></p></li><li><p>使用步骤4中的公式，计算新的流量比例，填入耗材参数中，保存即可；一般进行一轮粗细调后，打印的模型表面已经有明显提升，光滑而平整，如果还是不满意，可以多次进行细调，直到满意为止💟。</p></li></ol><h2 id="压力提前"><a href="#压力提前" class="headerlink" title="压力提前"></a>压力提前</h2><div class="note note-info">            <p>压力提前测试可以改善模型直角不直（≠90°）问题。</p>          </div><h2 id="回抽测试"><a href="#回抽测试" class="headerlink" title="回抽测试"></a>回抽测试</h2><div class="note note-info">            <p>回抽测试可以改善在打印中产生细微拉丝的情况。</p>          </div><h2 id="误差测试"><a href="#误差测试" class="headerlink" title="误差测试"></a>误差测试</h2><div class="note note-info">            <p>误差测试校准可以保证打印模型的尺寸，对于需要装配的模型非常有用。</p>          </div><h3 id="耗材收缩率"><a href="#耗材收缩率" class="headerlink" title="耗材收缩率"></a>耗材收缩率</h3><ol><li><p>打印一个正方形或圆柱体（本次测试时使用的是24 * 24 * 24mm 立方体模型）。<br><img src="/2023/08/20/3D%E6%89%93%E5%8D%B0/%E6%A0%A1%E5%87%863D%E6%89%93%E5%8D%B0%E6%9C%BA/Shrinkage_rate_of_consumables_1.jpg" alt="打印模型参数"></p></li><li><p>打印完成后，等待模型<strong>完全冷却</strong>。</p></li><li><p>使用游标卡尺测量打印模型前后、左右的宽度，并取平均值。<br><img src="/2023/08/20/3D%E6%89%93%E5%8D%B0/%E6%A0%A1%E5%87%863D%E6%89%93%E5%8D%B0%E6%9C%BA/Shrinkage_rate_of_consumables_2.jpg" alt="测量实际模型尺寸"></p></li><li><p>计算耗材收缩率&#x3D;打印模型实际尺寸平均值 &#x2F; 切片软件中模型尺寸 * 100%。</p></li><li><p>对于我当前使用的耗材，计算得到的耗材收缩率为：(23.93+23.91) &#x2F; 2 &#x2F; 24 * 100% &#x3D; 99.6666%。</p></li><li><p>在软件中修改耗材收缩率后保存，重新打印测试模型（本次复测模型尺寸为20 * 20 * 20mm 立方体模型），打印完成等待冷却后重新测量前后、左右尺寸，可以看到尺寸误差有了明显改善：<br><img src="/2023/08/20/3D%E6%89%93%E5%8D%B0/%E6%A0%A1%E5%87%863D%E6%89%93%E5%8D%B0%E6%9C%BA/Shrinkage_rate_of_consumables_3.jpg" alt="修改耗材收缩率"><br><img src="/2023/08/20/3D%E6%89%93%E5%8D%B0/%E6%A0%A1%E5%87%863D%E6%89%93%E5%8D%B0%E6%9C%BA/Shrinkage_rate_of_consumables_4.jpg" alt="复测模型尺寸"></p></li></ol><h3 id="XY孔洞尺寸补偿"><a href="#XY孔洞尺寸补偿" class="headerlink" title="XY孔洞尺寸补偿"></a>XY孔洞尺寸补偿</h3><ol><li><p>在Orca Slicer中，可以很方便的进行孔洞尺寸补偿测试：<br><img src="/2023/08/20/3D%E6%89%93%E5%8D%B0/%E6%A0%A1%E5%87%863D%E6%89%93%E5%8D%B0%E6%9C%BA/Hole_compensation_1.jpg" alt="孔洞误差测试"></p></li><li><p>切片打印模型，打印完成后等待模型冷却。</p></li><li><p>使用一个M6的内六角扳手，从模型第一个孔（标注为0）开始逐个插入测试，直到扳手可以顺畅插入其中某一个孔，记住当前孔位标注的数字，将该数字保存到 XY孔洞尺寸补偿 中，保存参数重新切片再打印该模型。<br><img src="/2023/08/20/3D%E6%89%93%E5%8D%B0/%E6%A0%A1%E5%87%863D%E6%89%93%E5%8D%B0%E6%9C%BA/Hole_compensation_2.jpg" alt="使用M6扳手测试模型孔洞"></p></li><li><p>等待第二次模型打印完成时，再次使用M6扳手插入孔位标注为0的孔中，如果能顺畅插入，那么恭喜你，误差测试顺利通过🥇；如果还是不能顺畅插入，那么需要把参数（耗材收缩率、XY孔洞尺寸补偿）清空，重新进行耗材收缩率与XY孔洞尺寸补偿测试💔。</p></li></ol><h2 id="最大体积流量"><a href="#最大体积流量" class="headerlink" title="最大体积流量"></a>最大体积流量</h2><div class="note note-info">            <p>最大体积流量可以改善打印速度，大大缩减打印时间。</p>          </div>]]></content>
    
    
    <categories>
      
      <category>3D打印</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Ocra Slicer</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>DIY阴极射线管显示器</title>
    <link href="/2023/07/16/DIY/DIY%E9%98%B4%E6%9E%81%E5%B0%84%E7%BA%BF%E7%AE%A1%E6%98%BE%E7%A4%BA%E5%99%A8/"/>
    <url>/2023/07/16/DIY/DIY%E9%98%B4%E6%9E%81%E5%B0%84%E7%BA%BF%E7%AE%A1%E6%98%BE%E7%A4%BA%E5%99%A8/</url>
    
    <content type="html"><![CDATA[<h2 id="阴极射线管的简介"><a href="#阴极射线管的简介" class="headerlink" title="阴极射线管的简介"></a>阴极射线管的简介</h2><p><strong>阴极射线管</strong>（英语：Cathode ray tube，缩写 CRT）<sup id="fnref:1" class="footnote-ref"><a href="#fn:1" rel="footnote"><span class="hint--top hint--rounded" aria-label="[Cathode-ray tube - Wiki](https://en.wikipedia.org/wiki/Cathode-ray_tube)">[1]</span></a></sup>，又称显像管、布劳恩管，是一种用于显示系统的物理仪器，曾广泛应用于示波器、电视机和显示器上。它是利用阴极电子枪发射电子，在阳极高压的作用下，射向荧光屏，使荧光粉发光，同时电子束在偏转磁场的作用下，作上下左右的移动来达到扫描的目的。早期的阴极射线管仅能显示光线的强弱，展现黑白画面。而彩色阴极射线管具有红色、绿色和蓝色三支电子枪，三支电子枪同时发射电子打在荧幕玻璃上磷化物上来显示颜色。</p><p>由于它笨重、耗电且较占空间，不适合用于便携设备，而且使用材料多，已很难压低生产成本，2000年代起几乎被轻巧、省电且省空间的液晶显示器(LCD)取代。阴极射线管的市场剩下极重视色彩表现、需要极高反应速度及低温环境下等特殊用途。</p><h2 id="阴极射线管的种类"><a href="#阴极射线管的种类" class="headerlink" title="阴极射线管的种类"></a>阴极射线管的种类</h2><ol><li>磁场偏向型：以磁场令电子束产生偏向，产生磁场的偏向线圈附加在阴极射线管颈部外侧。电视机和电脑显示器使用此种方式的显像管。</li><li>电场偏向型：以电场令电子束产生偏向，产生电场的偏向极板内建在阴极射线管内部。示波器使用此种方式的显像管，以利应付不同的扫描频率，但此方式需要较长的管身，主要用于电子仪器。</li><li>威廉士管：具有记忆保持功能的特殊阴极射线管。</li></ol><h2 id="阴极射线管结构示意图"><a href="#阴极射线管结构示意图" class="headerlink" title="阴极射线管结构示意图"></a>阴极射线管结构示意图</h2><table style="width:100%">  <tr>    <td> <div align="center"> 示意图 </div> </td>    <td> <div align="center"> 名称 </div> </td>  </tr>  <tr>    <th width="60%"> <img src="/2023/07/16/DIY/DIY%E9%98%B4%E6%9E%81%E5%B0%84%E7%BA%BF%E7%AE%A1%E6%98%BE%E7%A4%BA%E5%99%A8/cathode_ray_tube_diagram-en.png">  </th>    <td> <div align="center">     Control Grid(控制网络) <br>    Anode(阳极) <br>    Deflecting coils(偏转线圈) <br>    Heater(加热器) <br>    Cathode(阴极) <br>    Electron beam(电子束) <br>    Focusing coil(聚焦线圈) <br>    Fluorescent screen(荧光屏)    </div> </td>  </tr></table><h2 id="阴极射线管核心部件"><a href="#阴极射线管核心部件" class="headerlink" title="阴极射线管核心部件"></a>阴极射线管核心部件</h2><h3 id="电子枪-Electron-gun"><a href="#电子枪-Electron-gun" class="headerlink" title="电子枪(Electron gun)"></a>电子枪(Electron gun)</h3><p>电子枪由：阴极、加热端、控制网络、第一阳极、聚焦电极、最终阳极组成。<sup id="fnref:4" class="footnote-ref"><a href="#fn:4" rel="footnote"><span class="hint--top hint--rounded" aria-label="[Electrons in Shadow-mask Colour Tubes](http://www.r-type.org/articles/art-004f.htm)">[4]</span></a></sup></p><p><img src="/2023/07/16/DIY/DIY%E9%98%B4%E6%9E%81%E5%B0%84%E7%BA%BF%E7%AE%A1%E6%98%BE%E7%A4%BA%E5%99%A8/an_actual_triple_gun_assembly.jpg" alt="三色电子枪组件"></p><h3 id="偏转线圈"><a href="#偏转线圈" class="headerlink" title="偏转线圈"></a>偏转线圈</h3><h3 id="高压阳极"><a href="#高压阳极" class="headerlink" title="高压阳极"></a>高压阳极</h3><h2 id="阴极射线管显示器的驱动部件"><a href="#阴极射线管显示器的驱动部件" class="headerlink" title="阴极射线管显示器的驱动部件"></a>阴极射线管显示器的驱动部件</h2><h3 id="行输出变压器-Flyback-transformer"><a href="#行输出变压器-Flyback-transformer" class="headerlink" title="行输出变压器(Flyback transformer)"></a>行输出变压器(Flyback transformer)</h3><h3 id="驱动电路"><a href="#驱动电路" class="headerlink" title="驱动电路"></a>驱动电路</h3><h2 id="阴极射线管的引脚定义"><a href="#阴极射线管的引脚定义" class="headerlink" title="阴极射线管的引脚定义"></a>阴极射线管的引脚定义</h2><blockquote><p>阴极射线管根据不同的类型，引脚定义也有所区别；该文档<a href="https://www.bustedgear.com/res_Tube_pinouts.pdf">res_Tube_pinouts</a>并不包含所有类型的引脚定义，只作为参考。</p></blockquote><p>本次DIY使用的HP-545系列 、安捷伦-546系列、力科-93系列示波器上使用的阴极射线管，均为7脚阴极射线管，引脚定义如下<sup id="fnref:2" class="footnote-ref"><a href="#fn:2" rel="footnote">&lt;span class&#x3D;”hint–top hint–rounded” aria-label&#x3D;”<a href="https://www.eevblog.com/forum/repair/crt-monitor-going-full-brightness/">Topic: CRT monitor going “full brightness”</a>“&gt;[2]</a></sup>：</p><p><img src="/2023/07/16/DIY/DIY%E9%98%B4%E6%9E%81%E5%B0%84%E7%BA%BF%E7%AE%A1%E6%98%BE%E7%A4%BA%E5%99%A8/7-pin_crt_pin_diagram.png" alt="7脚阴极射线管引脚示意图"></p><ol><li>Grid (G1):“控制网格”；通常为 0 至约 –20V。</li><li>Cathode (K):通常为+50V至+80V。</li><li>Heater (H):0V</li><li>Heater (H):+11V</li><li>Grid (G1):内部连接到 CRT 的引脚 1。</li><li>First Anode (G2):“屏幕网格”（也称为“截止”）；通常为 +90V。</li><li>Focus Anode (G4):控制像散光束，散光是一种屈光误差，其产生的效果类似于散光失焦显示；通常为 0 V 至 + 90 V，根据“焦点”预设（如果安装）而变化！</li></ol><h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><section class="footnotes"><div class="footnote-list"><ol><li><span id="fn:1" class="footnote-text"><span><a href="https://en.wikipedia.org/wiki/Cathode-ray_tube">Cathode-ray tube - Wiki</a><a href="#fnref:1" rev="footnote" class="footnote-backref"> ↩</a></span></span></li><li><span id="fn:2" class="footnote-text"><span><a href="https://www.eevblog.com/forum/repair/crt-monitor-going-full-brightness/">Topic: CRT monitor going “full brightness”</a><a href="#fnref:2" rev="footnote" class="footnote-backref"> ↩</a></span></span></li><li><span id="fn:3" class="footnote-text"><span><a href="https://lateblt.tripod.com/bit71.txt">Principles Of A CRT (Cathode Ray Tube)</a><a href="#fnref:3" rev="footnote" class="footnote-backref"> ↩</a></span></span></li><li><span id="fn:4" class="footnote-text"><span><a href="http://www.r-type.org/articles/art-004f.htm">Electrons in Shadow-mask Colour Tubes</a><a href="#fnref:4" rev="footnote" class="footnote-backref"> ↩</a></span></span></li><li><span id="fn:5" class="footnote-text"><span><a href="https://digilent.com/reference/programmable-logic/basys-3/reference-manual">Basys 3 Reference Manual</a><a href="#fnref:5" rev="footnote" class="footnote-backref"> ↩</a></span></span></li><li><span id="fn:6" class="footnote-text"><span><a href="https://en.wikipedia.org/wiki/Flyback_transformer">Flyback transformer - Wiki</a><a href="#fnref:6" rev="footnote" class="footnote-backref"> ↩</a></span></span></li></ol></div></section>]]></content>
    
    
    <categories>
      
      <category>DIY</category>
      
    </categories>
    
    
    <tags>
      
      <tag>CRT</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>组装一台多色打印模块-MMU2S</title>
    <link href="/2023/01/20/3D%E6%89%93%E5%8D%B0/%E7%BB%84%E8%A3%85%E4%B8%80%E5%8F%B0%E5%A4%9A%E8%89%B2%E6%89%93%E5%8D%B0%E6%A8%A1%E5%9D%97-MMU2S/"/>
    <url>/2023/01/20/3D%E6%89%93%E5%8D%B0/%E7%BB%84%E8%A3%85%E4%B8%80%E5%8F%B0%E5%A4%9A%E8%89%B2%E6%89%93%E5%8D%B0%E6%A8%A1%E5%9D%97-MMU2S/</url>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>由于之前做的3D打印机每次打印时只能打印一种颜色，打印出来的物品色彩略显得单调，所以才有了想做一个多色打印模块，来满足更多色彩的打印需求；目前市面上比较成熟的3D打印多色模块有2个：EnragedRabbitProjec<sup id="fnref:1" class="footnote-ref"><a href="#fn:1" rel="footnote"><span class="hint--top hint--rounded" aria-label="[EnragedRabbitProjec Github](https://github.com/EtteGit/EnragedRabbitProject)">[1]</span></a></sup>、MULTI MATERIAL UPGRADE 2S<sup id="fnref:2" class="footnote-ref"><a href="#fn:2" rel="footnote"><span class="hint--top hint--rounded" aria-label="[MULTI MATERIAL UPGRADE 2S官方介绍](https://www.prusa3d.com/product/original-prusa-i3-mmu2s-upgrade-kit-for-mk2-5s-mk3s-org/)">[2]</span></a></sup>，前者有点复杂，而且必须配合Klipper<sup id="fnref:3" class="footnote-ref"><a href="#fn:3" rel="footnote"><span class="hint--top hint--rounded" aria-label="[Klipper固件官网](https://www.klipper3d.org/zh/)">[3]</span></a></sup>固件使用，而我那台3D打印机目前使用的固件是Marlin，所以想先做个MMU2S，等测试通过后，如果有时间就做一台VORON<sup id="fnref:4" class="footnote-ref"><a href="#fn:4" rel="footnote"><span class="hint--top hint--rounded" aria-label="[VORON官网](https://vorondesign.com/)">[4]</span></a></sup> + EnragedRabbitProject，搭配Klipper固件。（挖坑…）</p><h2 id="所需材料"><a href="#所需材料" class="headerlink" title="所需材料"></a>所需材料</h2><h2 id="组装"><a href="#组装" class="headerlink" title="组装"></a>组装</h2><h2 id="调试"><a href="#调试" class="headerlink" title="调试"></a>调试</h2><h2 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h2><h2 id><a href="#" class="headerlink" title></a></h2><section class="footnotes"><div class="footnote-list"><ol><li><span id="fn:1" class="footnote-text"><span><a href="https://github.com/EtteGit/EnragedRabbitProject">EnragedRabbitProjec Github</a><a href="#fnref:1" rev="footnote" class="footnote-backref"> ↩</a></span></span></li><li><span id="fn:2" class="footnote-text"><span><a href="https://www.prusa3d.com/product/original-prusa-i3-mmu2s-upgrade-kit-for-mk2-5s-mk3s-org/">MULTI MATERIAL UPGRADE 2S官方介绍</a><a href="#fnref:2" rev="footnote" class="footnote-backref"> ↩</a></span></span></li><li><span id="fn:3" class="footnote-text"><span><a href="https://www.klipper3d.org/zh/">Klipper固件官网</a><a href="#fnref:3" rev="footnote" class="footnote-backref"> ↩</a></span></span></li><li><span id="fn:4" class="footnote-text"><span><a href="https://vorondesign.com/">VORON官网</a><a href="#fnref:4" rev="footnote" class="footnote-backref"> ↩</a></span></span></li></ol></div></section>]]></content>
    
    
    <categories>
      
      <category>3D打印</category>
      
    </categories>
    
    
    <tags>
      
      <tag>MMU2S</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>ATmega32U4下载Bootloader</title>
    <link href="/2023/01/13/Arduino/ATmega32U4%E4%B8%8B%E8%BD%BDBootloader/"/>
    <url>/2023/01/13/Arduino/ATmega32U4%E4%B8%8B%E8%BD%BDBootloader/</url>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><blockquote><p>由于购买的<a href="https://so.szlcsc.com/global.html?k=ATmega32U4&hot-key=">ATmega32U4散片</a>均没有Bootloader，导致自己DIY的主板使用该芯片连接电脑时，电脑无法将芯片识别为COM设备，也就无法给芯片烧写程序；所以需要使用编程器先给芯片烧录Bootloader，才能被电脑识别为COM设备，进行后续程序的烧写。</p></blockquote><h2 id="所需工具"><a href="#所需工具" class="headerlink" title="所需工具"></a>所需工具</h2><ul><li>Arduino UNO开发板（A板）</li><li>杜邦线若干</li><li>自己DIY的主板（B板）</li></ul><h2 id="烧写步骤"><a href="#烧写步骤" class="headerlink" title="烧写步骤"></a>烧写步骤</h2><h3 id="给A板烧写ISP程序"><a href="#给A板烧写ISP程序" class="headerlink" title="给A板烧写ISP程序"></a>给A板烧写ISP程序</h3><ol><li>A板使用数据线连接电脑。</li><li>打开 Arduino 软件。</li><li>文件 -&gt; 示例 -&gt; 11.ArduinoISP -&gt; ArduinoISP。</li><li>工具 -&gt; 开发板:”Arduino UNO”，端口选择主板对应的COM号。</li><li>编译上传，等待烧写成功，A板就会变成一个USBISP编程器。</li></ol><h3 id="使用杜邦线将A板和B板连接起来"><a href="#使用杜邦线将A板和B板连接起来" class="headerlink" title="使用杜邦线将A板和B板连接起来"></a>使用杜邦线将A板和B板连接起来</h3><table align="center"><tr>    <th colspan="3">AB板接线方式</th></tr><tr>    <td>A板</td>    <td>B板</td>    <td>备注</td>  </tr><tr>    <td>D10</td>    <td>RESET</td>    <td rowspan="6">ICSP接口</td></tr><tr>    <td>D11</td>      <td>MOSI</td></tr><tr>    <td>D12</td>      <td>MISO</td></tr><tr>    <td>D13</td>    <td>SCK</td></tr><tr>       <td>5V</td>    <td>5V</td></tr><tr>    <td>GND</td>    <td>GND</td></tr></table><h3 id="给B板烧写Bootloader"><a href="#给B板烧写Bootloader" class="headerlink" title="给B板烧写Bootloader"></a>给B板烧写Bootloader</h3><ol><li>请再次确认AB板接线方式是否正确！</li><li>A板使用数据线连接电脑。</li><li><strong>以管理员身份运行</strong> Arduino 软件。</li><li>文件 -&gt; 首选项 -&gt; 显示详细输出 ✔编译 ✔上传，然后点击 好 保存。</li><li>工具 -&gt; 开发板:”Arduino Leonardo”，端口选择<strong>A板</strong>对应的COM号。</li></ol><div class="note note-info">            <p>开发板:”Arduino Leonardo”：<br>开发板型号根据B板设计进行选择，由于我设计的主板功能和Arduino Leonardo开发板类似，所以选择这个型号进行烧录；如果不是按照 Arduino Leonardo开发板 设计，请选择对应的开发板型号。</p>          </div><ol start="6"><li>工具 -&gt; 编程器:”Arduino as ISP”。</li><li>工具 -&gt; 烧录引导程序。</li><li>烧录过程可能需要几分钟，请耐心等待，当 Arduino 软件左下角显示 <strong>烧录引导程序完成</strong> 时，就代表B板已经成功烧录 Arduino Leonardo开发板的Bootloader了。</li></ol><h3 id="测试B板Bootloader是否烧写成功"><a href="#测试B板Bootloader是否烧写成功" class="headerlink" title="测试B板Bootloader是否烧写成功"></a>测试B板Bootloader是否烧写成功</h3><p>将B板使用数据线连接电脑，进入 <em>设备管理器 -&gt; 端口(COM和LPT)</em> 查看是否显示出主板的COM号。</p><p><img src="/2023/01/13/Arduino/ATmega32U4%E4%B8%8B%E8%BD%BDBootloader/view_com_id.png" alt="查看主板COM号"></p><h2 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h2><p>B板成功刷写Bootloader后，使用数据线连接电脑时，通过 <em>设备管理器 -&gt; 端口(COM和LPT)</em> 会看到先显示为：<strong>Arduino Leonardo Bootloader(COM?)</strong> ，过了几秒钟之后，会显示为：<strong>Arduino Lenardo(COM?)</strong> ；如果要给芯片烧写程序，就需要在 Arduino Leonardo Bootloader(COM?) 阶段时进行烧录，否则当显示为 Arduino Leonardo(COM?) 时是无法烧写程序的。</p><h2 id="特别鸣谢"><a href="#特别鸣谢" class="headerlink" title="特别鸣谢"></a>特别鸣谢</h2><section class="footnotes"><div class="footnote-list"><ol><li><span id="fn:1" class="footnote-text"><span><a href="https://www.bilibili.com/video/BV1154y1i7oF/?vd_source=86afd42930abc3b873490c6820b27f6c">用Arduino给atmega328(类Arduino)烧录bootloader</a><a href="#fnref:1" rev="footnote" class="footnote-backref"> ↩</a></span></span></li><li><span id="fn:2" class="footnote-text"><span><a href="https://docs.arduino.cc/built-in-examples/arduino-isp/ArduinoISP?_gl=1*diynw4*_ga*OTg3ODQwNzU1LjE2NzA0MjYwNzE.*_ga_NEXN8H46L5*MTY3MzcyMjE2My4xMi4xLjE2NzM3MjIxODkuMC4wLjA.">Arduino as ISP and Arduino Bootloaders</a><a href="#fnref:2" rev="footnote" class="footnote-backref"> ↩</a></span></span></li></ol></div></section>]]></content>
    
    
    <categories>
      
      <category>Arduino</category>
      
    </categories>
    
    
    <tags>
      
      <tag>ATmega32U4</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>DIY力回馈方向盘</title>
    <link href="/2022/12/25/DIY/DIY%E5%8A%9B%E5%9B%9E%E9%A6%88%E6%96%B9%E5%90%91%E7%9B%98/"/>
    <url>/2022/12/25/DIY/DIY%E5%8A%9B%E5%9B%9E%E9%A6%88%E6%96%B9%E5%90%91%E7%9B%98/</url>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>以前用键盘玩<a href="https://store.steampowered.com/app/227300/Euro_Truck_Simulator_2/">欧卡2</a>的时候，就一直想着能有个方向盘那该多美滋滋 :)</p><p>有一天在B站刷视频时，无意中看到了UP主：<a href="https://space.bilibili.com/359721186/video">夏叶-XiaYe</a>关于DIY力回馈方向盘的视频，顿时来了兴趣，才有了下文看到的<strong>力回馈方向盘 V2.1</strong>。</p><h2 id="设计图纸"><a href="#设计图纸" class="headerlink" title="设计图纸"></a>设计图纸</h2><h3 id="结构设计"><a href="#结构设计" class="headerlink" title="结构设计"></a>结构设计</h3><table style="width:100%">  <tr>      <td colspan="2"> <font size="5"> <div align="center"> <b> 力回馈方向盘 V1.0 </b> </div> </font></td>  </tr>  <tr>    <th colspan="2"> <img src="/2022/12/25/DIY/DIY%E5%8A%9B%E5%9B%9E%E9%A6%88%E6%96%B9%E5%90%91%E7%9B%98/force_feedback_steering_wheel_v1.0.png">  </th>  </tr>  <tr>    <td nowrap="nowrap"> <div align="center"> 设计思路 </div> </td>    <td>底板为5mm厚的环氧板；主轴使用轴承座固定于环氧板中间位置，左侧为开关电源（220V AC to 12V DC），右侧为旋转编码器、主控板、电机；旋转编码器和电机固定孔预留了左右移动空间，可用于拉紧同步带。</td>  </tr>        <td> <div align="center"> 缺点 </div> </td>      <td>由于底板为环氧板，材料强度一般，导致拧上螺丝后，板子会发生弯曲变形，放置于桌面也会根据方向盘转向而左右晃动；尺寸也显得 “肥胖” ，占用太多桌面空间。</td>  </table><table style="width:100%">  <tr>      <td colspan="2"> <font size="5"> <div align="center"> <b> 力回馈方向盘 V2.0 </b> </div> </font></td>  </tr>  <tr>    <th colspan="2"> <img src="/2022/12/25/DIY/DIY%E5%8A%9B%E5%9B%9E%E9%A6%88%E6%96%B9%E5%90%91%E7%9B%98/force_feedback_steering_wheel_v2.0.png"> </th>  </tr>  <tr>    <td nowrap="nowrap"> <div align="center"> 设计思路 </div> </td>    <td>底板由环氧板更换为2040铝型材，强度可靠；电机固定于左侧，右侧为主轴与同步轮、旋转编码器；主控板固定于右侧型材靠上的表面，便于使用数据线与电脑进行连接；电源依然为开关电源，但固定方式选择外置，使用DC头连接到主控板上的电机控制板，缩小尺寸。</td>  </tr>        <td> <div align="center"> 缺点 </div> </td>      <td>主轴为光轴，由于表面光滑，导致同步轮使用顶丝固定后会出现打滑情况；同步带宽度偏窄，方向盘转向手感较差；脚踏板与主控板使用XH2.54接口连接，多次拔插时容易松动。</td>  </table><table style="width:100%">  <tr>      <td colspan="2"> <font size="5"> <div align="center"> <b> 力回馈方向盘 V2.1 </b> </div> </font></td>  </tr>  <tr>    <th colspan="2"> <img src="/2022/12/25/DIY/DIY%E5%8A%9B%E5%9B%9E%E9%A6%88%E6%96%B9%E5%90%91%E7%9B%98/force_feedback_steering_wheel_v2.1.png">  </th>  </tr>  <tr>    <td nowrap="nowrap"> <div align="center"> 设计思路 </div> </td>    <td>由 V2.0 升级优化而来，对尺寸小幅优化；将主控板进行了重新设计，解决 V2.0 “叠汉堡” 式的固定方式；电源未使用开关电源，因为即使外置也略显不优雅，所以选择使用12V 5A笔记本电源，体积小了很多，还可以放在型材之间固定起来。</td>  </tr>        <td> <div align="center"> 缺点 </div> </td>      <td>暂未发现。</td>  </table><table style="width:100%">  <tr>      <td colspan="2"> <font size="5"> <div align="center"> <b> 胀紧套转接板 V1.1 </b> </div> </font></td>  </tr>  <tr>    <th colspan="2"> <img src="/2022/12/25/DIY/DIY%E5%8A%9B%E5%9B%9E%E9%A6%88%E6%96%B9%E5%90%91%E7%9B%98/expansion_sleeve_adapter_plate_v1.1.png">  </th>  </tr>  <tr>    <td nowrap="nowrap"> <div align="center"> 设计思路 </div> </td>    <td>该转接板为铝基板，用于将方向盘与胀紧套紧固在一起。</td>  </tr></table><h3 id="硬件设计"><a href="#硬件设计" class="headerlink" title="硬件设计"></a>硬件设计</h3><table style="width:100%">  <tr>      <td colspan="2"> <font size="5"> <div align="center"> <b> 电机控制板 V2.0 </b> </div> </font></td>  </tr>  <tr>    <th colspan="2"> <img src="/2022/12/25/DIY/DIY%E5%8A%9B%E5%9B%9E%E9%A6%88%E6%96%B9%E5%90%91%E7%9B%98/motor_control_panel_v2.0.png">  </th>  </tr>  <tr>    <td nowrap="nowrap"> <div align="center"> 设计思路 </div> </td>    <td>主控板为Arduino Leonardo开发板；电机控制板使用排针上下对插的方式与主控板连接。</td>  </tr></table><table style="width:100%">  <tr>      <td colspan="2"> <font size="5"> <div align="center"> <b> 力回馈方向盘主控板 V2.1 </b> </div> </font></td>  </tr>  <tr>    <th colspan="2"><img src="/2022/12/25/DIY/DIY%E5%8A%9B%E5%9B%9E%E9%A6%88%E6%96%B9%E5%90%91%E7%9B%98/force_feedback_steering_wheel_control_board_v2.1.png"></th>  </tr>  <tr>    <td nowrap="nowrap"> <div align="center"> 设计思路 </div> </td>    <td>主芯片与电机控制电路全部在一块PCB上，集成度进一步提高；同时优化了主控板与电脑、脚踏板连接方式，解决因反复插拔导致接口松动，提升连接稳定性。</td>  </tr></table><table style="width:100%">  <tr>      <td colspan="2"> <font size="5"> <div align="center"> <b> 光轴加工图纸 V1.1 </b> </div> </font></td>  </tr>  <tr>    <th colspan="2"><img src="/2022/12/25/DIY/DIY%E5%8A%9B%E5%9B%9E%E9%A6%88%E6%96%B9%E5%90%91%E7%9B%98/optical_axis_machining_drawings.png"></th>  </tr>  <tr>    <td nowrap="nowrap"> <div align="center"> 设计思路 </div> </td>    <td>加入凹槽设计，解决同步轮使用顶丝固定后出现的打滑问题。</td>  </tr></table><table style="width:100%">  <tr>      <td colspan="2"> <font size="5"> <div align="center"> <b> 脚踏固定板钻孔尺寸图 V1.1 </b> </div> </font></td>  </tr>  <tr>    <th colspan="2"><img src="/2022/12/25/DIY/DIY%E5%8A%9B%E5%9B%9E%E9%A6%88%E6%96%B9%E5%90%91%E7%9B%98/pedal_fixed_mount.png"></th>  </tr>  <tr>    <td nowrap="nowrap"> <div align="center"> 设计思路 </div> </td>    <td>该尺寸图为木板钻孔尺寸图，用于固定脚踏板，使用自攻螺丝进行固定。</td>  </tr></table><h2 id="材料清单"><a href="#材料清单" class="headerlink" title="材料清单"></a>材料清单</h2><h3 id="力回馈方向盘-V2-1-BOM"><a href="#力回馈方向盘-V2-1-BOM" class="headerlink" title="力回馈方向盘 V2.1-BOM"></a>力回馈方向盘 V2.1-BOM</h3><table><thead><tr><th align="center">商品名称与链接</th><th align="center">数量</th><th align="center">备注</th></tr></thead><tbody><tr><td align="center">力回馈方向盘主控板 V2.1</td><td align="center">1</td><td align="center">暂未开源，如需工程文件，请联系我👨🏻‍🔧</td></tr><tr><td align="center"><a href="https://detail.tmall.com/item.htm?_u=724e6vdj6354&id=582975294023&spm=a1z09.2.0.0.219e2e8dFLhxN5">2040V型材</a></td><td align="center">4+2</td><td align="center">264mm *4 211mm *2</td></tr><tr><td align="center"><a href="https://item.taobao.com/item.htm?spm=a1z09.2.0.0.520f2e8dIBtSJh&id=17619853393&_u=824e6vdjc21b">MY1016电机</a></td><td align="center">1</td><td align="center">24V 300W</td></tr><tr><td align="center"><a href="https://item.taobao.com/item.htm?spm=a1z09.2.0.0.9f722e8dWw8wIa&id=620356673590&_u=p24e6vdj6425">旋转编码器</a></td><td align="center">1</td><td align="center">脉冲：1000 输出方式：NPN 供电：5V</td></tr><tr><td align="center"><a href="https://item.taobao.com/item.htm?spm=a1z09.2.0.0.9f722e8dWw8wIa&id=623473045760&_u=p24e6vdj7e4b">旋转编码器支架</a></td><td align="center">1</td><td align="center">直板</td></tr><tr><td align="center"><a href="https://item.taobao.com/item.htm?spm=a1z0d.6639537/tb.1997196601.20.54ea7484gwsFSv&id=578821901264">同步轮 3M120齿 BF型</a></td><td align="center">1</td><td align="center">光轴使用，槽宽16mm，内孔直径12mm</td></tr><tr><td align="center"><a href="https://item.taobao.com/item.htm?spm=a1z09.2.0.0.9f722e8dWw8wIa&id=574671696720&_u=p24e6vdj728c">同步轮 3M20齿 K型</a></td><td align="center">1</td><td align="center">电机使用，槽宽16mm，内孔直径8mm</td></tr><tr><td align="center"><a href="https://item.taobao.com/item.htm?spm=a1z09.2.0.0.9f722e8dWw8wIa&id=574671696720&_u=p24e6vdj728c">同步轮 3M20齿 K型</a></td><td align="center">1</td><td align="center">光轴使用，槽宽11mm，内孔直径12mm</td></tr><tr><td align="center"><a href="https://item.taobao.com/item.htm?spm=a1z09.2.0.0.9f722e8dWw8wIa&id=574671696720&_u=p24e6vdj728c">同步轮 3M20齿 BF型</a></td><td align="center">1</td><td align="center">旋转编码器使用，槽宽11mm，内孔直径6mm</td></tr><tr><td align="center"><a href="https://item.taobao.com/item.htm?spm=a1z09.2.0.0.9f722e8dWw8wIa&id=600361540850&_u=p24e6vdj54c7">3M白色聚氨酯PU带钢丝环形接驳同步带</a></td><td align="center">1</td><td align="center">电机 &lt;—&gt; 光轴使用，带宽15mm，长度462mm</td></tr><tr><td align="center"><a href="https://item.taobao.com/item.htm?spm=a1z09.2.0.0.9f722e8dWw8wIa&id=22415655050&_u=p24e6vdjd141">橡胶同步带</a></td><td align="center">1</td><td align="center">旋转编码器 &lt;—&gt; 光轴使用，带宽10mm，长度180mm</td></tr><tr><td align="center"><a href="https://item.taobao.com/item.htm?spm=a1z09.2.0.0.9f722e8dWw8wIa&id=568313029075&_u=p24e6vdj95d2">直线光轴</a></td><td align="center">1</td><td align="center">按照<strong>光轴加工图</strong>进行加工</td></tr><tr><td align="center"><a href="https://item.taobao.com/item.htm?spm=a1z09.2.0.0.9f722e8dWw8wIa&id=592124362935&_u=p24e6vdjb65f">立式带座外球面轴承座</a></td><td align="center">2</td><td align="center">内径12mm</td></tr><tr><td align="center"><a href="https://detail.tmall.com/item.htm?_u=p24e6vdj6c5f&id=609906070631&spm=a1z09.2.0.0.9f722e8dWw8wIa">涨紧套</a></td><td align="center">1</td><td align="center">Z11-12X18，将光轴与方向盘连接固定起来</td></tr><tr><td align="center"><a href="https://item.taobao.com/item.htm?spm=a1z09.2.0.0.9f722e8dWw8wIa&id=613506952367&_u=p24e6vdjb513">14寸方向盘</a></td><td align="center">1</td><td align="center">颜色自选</td></tr><tr><td align="center"><a href="https://item.taobao.com/item.htm?spm=a1z09.2.0.0.9f722e8dWw8wIa&id=575103704187&_u=p24e6vdj13ad">脚踏板</a></td><td align="center">3</td><td align="center">插头类型无要求；如果不需要 离合，可以只买2个</td></tr><tr><td align="center"><a href="https://item.taobao.com/item.htm?spm=a1z10.1-c.w4023-24442391615.2.40c33574lEVeCT&id=681303866126">电源适配器</a></td><td align="center">1</td><td align="center">12V 5A，输出接口：DC 5.5*2.5mm</td></tr><tr><td align="center"><a href="https://item.taobao.com/item.htm?spm=a1z09.2.0.0.2f2c2e8dbH8ZGT&id=656923245143&_u=f24e6vdjca32">脚踏固定木板</a></td><td align="center">1</td><td align="center">长：40CM，宽：25CM，厚度：2CM；用于固定脚踏板</td></tr><tr><td align="center"><a href="https://detail.tmall.com/item.htm?id=690189342885&spm=a1z09.2.0.0.2f2c2e8dbH8ZGT&_u=f24e6vdj1165">防滑垫</a></td><td align="center">1</td><td align="center">长：40CM，宽：25CM，厚度：3MM，用于粘贴在脚踏固定板底部，增加摩擦力</td></tr><tr><td align="center"><a href="https://detail.tmall.com/item.htm?_u=f24e6vdjb2ae&id=530300194946&spm=a1z09.2.0.0.2f2c2e8dbH8ZGT">自攻螺丝</a></td><td align="center">10</td><td align="center">M6*12</td></tr><tr><td align="center"><a href="https://item.taobao.com/item.htm?spm=a1z09.2.0.0.2f2c2e8dbH8ZGT&id=623227467524&_u=f24e6vdjb05c">C型夹</a></td><td align="center">2</td><td align="center">紫罗兰[梅花开口67(侧孔M10)]，将方向盘固定在桌面上</td></tr></tbody></table><h2 id="成品示意图"><a href="#成品示意图" class="headerlink" title="成品示意图"></a>成品示意图</h2><h3 id="力回馈方向盘-V2-1"><a href="#力回馈方向盘-V2-1" class="headerlink" title="力回馈方向盘 V2.1"></a>力回馈方向盘 V2.1</h3><p><img src="/2022/12/25/DIY/DIY%E5%8A%9B%E5%9B%9E%E9%A6%88%E6%96%B9%E5%90%91%E7%9B%98/force_feedback_steering_wheel_machine_v2.1.jpg" alt="方向盘组装成品"></p><p><img src="/2022/12/25/DIY/DIY%E5%8A%9B%E5%9B%9E%E9%A6%88%E6%96%B9%E5%90%91%E7%9B%98/main_control_panel_v2.1.jpg" alt="力回馈方向盘主控板 V2.1"></p><p><img src="/2022/12/25/DIY/DIY%E5%8A%9B%E5%9B%9E%E9%A6%88%E6%96%B9%E5%90%91%E7%9B%98/" alt="脚踏板"></p><h2 id="下载程序"><a href="#下载程序" class="headerlink" title="下载程序"></a>下载程序</h2><p>(待补充…)</p><h2 id="配置参数"><a href="#配置参数" class="headerlink" title="配置参数"></a>配置参数</h2><h3 id="软件设置"><a href="#软件设置" class="headerlink" title="软件设置"></a>软件设置</h3><ol><li>将主控板 V2.1 使用数据线连接电脑，等待主控板上的 TX 灯亮起。</li><li>打开 EMC Utility Lite 软件。</li><li>点击右上角 齿轮 图标。</li><li>Encoder — Cpr ：<strong>旋转编码器脉冲 * 4</strong>。</li><li>Hbridge — <strong>2PWM + 1DIR</strong>。</li><li>点击 Save。</li></ol><h2 id="功能测试"><a href="#功能测试" class="headerlink" title="功能测试"></a>功能测试</h2><h3 id="转向测试"><a href="#转向测试" class="headerlink" title="转向测试"></a>转向测试</h3><ol><li>将主控板 V2.1 使用数据线连接上电脑，等待主控板上的 TX 灯亮起。</li><li>打开 EMC Utility Lite 软件。</li><li>将 Angle 使用鼠标拖到 <strong>900°</strong>。</li><li>将方向盘转到适当位置，鼠标点击 <strong>Center</strong>。</li><li>左转方向盘时，为负度数，右转方向盘时，为正度数。</li></ol><div class="note note-info">            <p>第5步如果往左转方向盘为正度数，往右为负度数，需要将旋转编码器的 A&#x2F;B 信号线互换。</p>          </div><h3 id="力回馈测试"><a href="#力回馈测试" class="headerlink" title="力回馈测试"></a>力回馈测试</h3><font color="#ff0000"><b>⚠此测试存在风险，请确保做好一切应急措施（保持安全距离，不要用手紧握方向盘，电机电源可立即关断，或者让其他人协助测试等等），此测试导致的任何后果本人概不负责，请小心谨慎！！！</b></font><ol><li>将主控板 V2.1 使用数据线连接上电脑，等待主控板上的 TX 灯亮起。</li><li>将 220V 转 12V 5A 电源适配器插入主板DC母座，波动钮子开关(SW_12V)，当主板上的 DC_12V 灯亮起即可。</li><li>打开 EMC Utility Lite 软件。</li><li>将 Angle 使用鼠标拖到 <strong>900°</strong>。</li><li>将方向盘转到适当位置，鼠标点击 <strong>Center</strong>。</li><li>一直往左打方向盘，直到度数为 <strong>-450°</strong> 时，此时电机会给一个反方向的力，阻止度数继续减小；然后一直往右打方向盘，直到度数为 <strong>450°</strong> 时，此时电机也会给一个反方向的力，阻止度数继续增大，即代表力回馈正常。</li></ol><div class="note note-warning">            <ul><li>步骤1，3不能反着来，否则力回馈测试会没有反应（软件打开时会读取主控板参数，反着来会读不到参数，导致力回馈功能失效）。</li><li>当方向盘转到 <strong>-450°</strong> 或者 <strong>450°</strong> 时，电机突然转个不停或者转一下卡一下，需要立即断掉电源适配器的供电，并将数据线与电脑拔掉，将主板上 <strong>转向控制</strong> 的短接帽进行调换，然后重复上述步骤进行测试，直到力回馈正常。</li></ul>          </div><h3 id="脚踏板测试"><a href="#脚踏板测试" class="headerlink" title="脚踏板测试"></a>脚踏板测试</h3><ol><li>将 脚踏板 通过Type-C线插在主板 <strong>脚踏板接口</strong> 上。</li><li>将主控板 V2.1 使用数据线连接上电脑，等待主控板上的 TX 灯亮起。</li><li>打开 EMC Utility Lite 软件。</li><li>点击 Pedal。</li><li>取消勾选 HandBrake ；如果不需要离合功能，需取消勾选 Clutch。</li><li>用脚踩踏 <strong>油门踏板</strong> ，当 <strong>Accel</strong> 进度条随着脚越用力踩，进度条越高时，说明 <strong>油门踏板</strong> 配置正确。</li><li>用脚踩踏 <strong>刹车踏板</strong> ，当 <strong>Brake</strong> 进度条随着脚越用力踩，进度条越高时，说明 <strong>刹车踏板</strong> 配置正确。</li></ol><div class="note note-info">            <p>如果步骤6，7测试情况与之结果相反，需要点击对应功能的 Min 或者 Max，然后重复测试，直到结果一致，代表脚踏板功能正常。</p>          </div><h2 id="特别鸣谢"><a href="#特别鸣谢" class="headerlink" title="特别鸣谢"></a>特别鸣谢</h2><section class="footnotes"><div class="footnote-list"><ol><li><span id="fn:1" class="footnote-text"><span><a href="https://space.bilibili.com/359721186/video">夏叶-XiaYe</a><a href="#fnref:1" rev="footnote" class="footnote-backref"> ↩</a></span></span></li><li><span id="fn:2" class="footnote-text"><span><a href="https://www.facebook.com/EMCDeveloper/posts/update-emclitedownload-httpsdrivegooglecomdrivefolders1ozyxyb4qvjnjuk3sml5wxakt4/838745573148286/">EMC Development</a><a href="#fnref:2" rev="footnote" class="footnote-backref"> ↩</a></span></span></li><li><span id="fn:3" class="footnote-text"><span><a href="https://www.jlc.com/">嘉立创PCB</a><a href="#fnref:3" rev="footnote" class="footnote-backref"> ↩</a></span></span></li><li><span id="fn:4" class="footnote-text"><span><a href="https://pro.lceda.cn/editor">嘉立创EDA</a><a href="#fnref:4" rev="footnote" class="footnote-backref"> ↩</a></span></span></li></ol></div></section>]]></content>
    
    
    <categories>
      
      <category>DIY</category>
      
    </categories>
    
    
    <tags>
      
      <tag>力回馈方向盘</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Marlin固件常用G-code命令</title>
    <link href="/2022/06/14/3D%E6%89%93%E5%8D%B0/Marlin%E5%9B%BA%E4%BB%B6%E5%B8%B8%E7%94%A8G-code%E5%91%BD%E4%BB%A4/"/>
    <url>/2022/06/14/3D%E6%89%93%E5%8D%B0/Marlin%E5%9B%BA%E4%BB%B6%E5%B8%B8%E7%94%A8G-code%E5%91%BD%E4%BB%A4/</url>
    
    <content type="html"><![CDATA[<h2 id="G-code命令"><a href="#G-code命令" class="headerlink" title="G-code命令"></a>G-code命令</h2><p>Marlin包含丰富的G-code命令，可以很方便的使用电脑通过串口连接3D打印机时进行调试与配置，以下只列出常用G-code命令，详细的G-code命令介绍，请查看<a href="https://marlinfw.org/meta/gcode/">Marlin G-code官方帮助文档</a>。</p><h3 id="G0-G1-直线运动"><a href="#G0-G1-直线运动" class="headerlink" title="G0 &#x2F; G1 - 直线运动"></a>G0 &#x2F; G1 - 直线运动</h3><h4 id="描述"><a href="#描述" class="headerlink" title="描述"></a>描述</h4><p><code>G0</code> : X、Y、Z轴（不包含E轴）的线性运动。<br><code>G1</code> : X、Y、Z、E轴的线性运动。</p><h4 id="笔记"><a href="#笔记" class="headerlink" title="笔记"></a>笔记</h4><h4 id="用法"><a href="#用法" class="headerlink" title="用法"></a>用法</h4><p><code>G0 [E&lt;pos&gt;] [F&lt;rate&gt;] [X&lt;pos&gt;] [Y&lt;pos&gt;] [Z&lt;pos&gt;]</code><br><code>G1 [E&lt;pos&gt;] [F&lt;rate&gt;] [X&lt;pos&gt;] [Y&lt;pos&gt;] [Z&lt;pos&gt;]</code></p><p><code>[E&lt;pos&gt;]</code> : E（挤出机）轴上的绝对或相对位置（以当前单位表示），E轴描述了挤出机进料器输入耗材长度。<br><code>[F&lt;rate&gt;]</code> : 起点到终点之间移动的最大移动速度，单位mm&#x2F;min；此处设置的速度适用于省略此参数的后续移动。<br><code>[X&lt;pos&gt;]</code> : X轴上的绝对或相对坐标（以当前单位表示）。<br><code>[Y&lt;pos&gt;]</code> : Y轴上的绝对或相对坐标（以当前单位表示）。<br><code>[Z&lt;pos&gt;]</code> : Z轴上的绝对或相对坐标（以当前单位表示）。</p><h4 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h4><figure class="highlight tp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs tp">默认情况下，坐标以毫米为单位，也可以通过 G<span class="hljs-number">20</span> 设置为英寸。<br><br>G<span class="hljs-number">0</span> <span class="hljs-keyword">X</span><span class="hljs-number">10</span>  # <span class="hljs-keyword">X</span>轴相对于原点移动<span class="hljs-number">10mm</span><br>G<span class="hljs-number">0</span> <span class="hljs-keyword">X</span><span class="hljs-number">50</span> <span class="hljs-keyword">Y</span><span class="hljs-number">50</span> <span class="hljs-keyword">Z</span><span class="hljs-number">50</span>  # <span class="hljs-keyword">X</span>、<span class="hljs-keyword">Y</span>、<span class="hljs-keyword">Z</span>轴相当于原点分别移动<span class="hljs-number">50mm</span><br><br>G<span class="hljs-number">0</span> F<span class="hljs-number">1500</span>  # 设置移动进给速度为<span class="hljs-number">1500mm</span>/min<br><br>G<span class="hljs-number">1</span> <span class="hljs-keyword">X</span><span class="hljs-number">50</span> <span class="hljs-keyword">Y</span><span class="hljs-number">25</span><span class="hljs-number">.3</span> E<span class="hljs-number">22</span><span class="hljs-number">.4</span>  # <span class="hljs-keyword">X</span>轴向正方向移动<span class="hljs-number">50mm</span>、<span class="hljs-keyword">Y</span>轴正方向移动<span class="hljs-number">25</span><span class="hljs-number">.3</span>mm，同时E轴挤出机挤出<span class="hljs-number">22</span><span class="hljs-number">.4</span>mm的耗材长度<br></code></pre></td></tr></table></figure><h3 id="G2-G3-圆弧或圆运动"><a href="#G2-G3-圆弧或圆运动" class="headerlink" title="G2 &#x2F; G3 - 圆弧或圆运动"></a>G2 &#x2F; G3 - 圆弧或圆运动</h3><h4 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h4><p>G2 : 顺时针圆弧<br>G3 : 逆时针圆弧</p><h4 id="用法-1"><a href="#用法-1" class="headerlink" title="用法"></a>用法</h4><h4 id="示例-1"><a href="#示例-1" class="headerlink" title="示例"></a>示例</h4><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs"><br></code></pre></td></tr></table></figure><h3 id="M114-获取当前位置"><a href="#M114-获取当前位置" class="headerlink" title="M114 - 获取当前位置"></a>M114 - 获取当前位置</h3><h4 id="说明-1"><a href="#说明-1" class="headerlink" title="说明"></a>说明</h4><p>获取当前X、Y、Z、E轴电机位置，包含步进值；步进值为打印空间大小，不允许超过设定值，也不允许为负数。</p><h4 id="用法-2"><a href="#用法-2" class="headerlink" title="用法"></a>用法</h4><p><code>M114 [D] [E] [R]</code></p><p><code>[D]</code> : 详细资料（必填M114_DETAIL）<br><code>[E]</code> : 报告 E 步进器位置（需要M114_DETAIL）<br><code>[R]</code> : 真实位置信息（需要M114_REALTIME）</p><h4 id="示例-2"><a href="#示例-2" class="headerlink" title="示例"></a>示例</h4><figure class="highlight tp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs tp">&gt; M<span class="hljs-number">114</span><br><span class="hljs-keyword">X</span>:<span class="hljs-number">0</span><span class="hljs-number">.00</span> <span class="hljs-keyword">Y</span>:<span class="hljs-number">127</span><span class="hljs-number">.00</span> <span class="hljs-keyword">Z</span>:<span class="hljs-number">145</span><span class="hljs-number">.00</span> E:<span class="hljs-number">0</span><span class="hljs-number">.00</span> Count <span class="hljs-keyword">X</span>: <span class="hljs-number">0</span> <span class="hljs-keyword">Y</span>:<span class="hljs-number">10160</span> <span class="hljs-keyword">Z</span>:<span class="hljs-number">116000</span><br>ok<br></code></pre></td></tr></table></figure><h3 id="M105-查看各温度探头温度"><a href="#M105-查看各温度探头温度" class="headerlink" title="M105 - 查看各温度探头温度"></a>M105 - 查看各温度探头温度</h3><h4 id="说明-2"><a href="#说明-2" class="headerlink" title="说明"></a>说明</h4><p>将各探头温度返回给主机。</p><h4 id="参数"><a href="#参数" class="headerlink" title="参数"></a>参数</h4><p><code>M105 [R] [T&lt;index&gt;]</code></p><p><code>[R]</code>: 包括冗余温度传感器（如果有）<br><code>[T&lt;index&gt;]</code> : 热端指数</p><h4 id="示例-3"><a href="#示例-3" class="headerlink" title="示例"></a>示例</h4><figure class="highlight node-repl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs node-repl"><span class="hljs-meta prompt_">&gt;</span> <span class="language-javascript"><span class="hljs-variable constant_">M105</span></span><br><span class="hljs-meta prompt_">&gt;</span> <span class="language-javascript">ok <span class="hljs-attr">T</span>:<span class="hljs-number">30.44</span> /<span class="hljs-number">0.00</span> <span class="hljs-attr">B</span>:<span class="hljs-number">30.08</span> /<span class="hljs-number">0.00</span> @:<span class="hljs-number">0</span> B@:<span class="hljs-number">0</span></span><br></code></pre></td></tr></table></figure><h3 id="M428-原点偏移量"><a href="#M428-原点偏移量" class="headerlink" title="M428 - 原点偏移量"></a>M428 - 原点偏移量</h3><h4 id="说明-3"><a href="#说明-3" class="headerlink" title="说明"></a>说明</h4><p>将当前位置设定为本地起始位置和坐标空间的持久偏移；<br>当前位置必须在原0点偏移2CM以内才能使用该指令，<br>当前位置设置为原始起始位置，<br>任何先前的位置偏移G92都会被清除，<br>原点偏移是持久的—添加当前位置直到改变。</p><h4 id="参数-1"><a href="#参数-1" class="headerlink" title="参数"></a>参数</h4><h4 id="示例-4"><a href="#示例-4" class="headerlink" title="示例"></a>示例</h4><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs"><br></code></pre></td></tr></table></figure><h3 id="M119-各限位开关状态"><a href="#M119-各限位开关状态" class="headerlink" title="M119 - 各限位开关状态"></a>M119 - 各限位开关状态</h3><h4 id="说明-4"><a href="#说明-4" class="headerlink" title="说明"></a>说明</h4><p>使用此命令可以获得所有限位开关状态，包括Z探针和耗材传感器。</p><h4 id="参数-2"><a href="#参数-2" class="headerlink" title="参数"></a>参数</h4><p>限位开关未触发时返回值应该为：open；触发时返回值为：TRIGGERED；如果限位开关未被触发时返回值为：TRIGGERED，表示限位开关判定逻辑设置有问题，需要在Configuration.h中反转限位开关逻辑。</p><h4 id="示例-5"><a href="#示例-5" class="headerlink" title="示例"></a>示例</h4><figure class="highlight nestedtext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs nestedtext"><span class="hljs-punctuation">&gt;</span> <span class="hljs-string">M119</span><br><span class="hljs-attribute">Reporting endstop status</span><br><span class="hljs-attribute">x_min</span><span class="hljs-punctuation">:</span> <span class="hljs-string">open</span><br><span class="hljs-attribute">y_min</span><span class="hljs-punctuation">:</span> <span class="hljs-string">open</span><br><span class="hljs-attribute">z_min</span><span class="hljs-punctuation">:</span> <span class="hljs-string">TRIGGERED</span><br><span class="hljs-attribute">z_probe</span><span class="hljs-punctuation">:</span> <span class="hljs-string">open</span><br><span class="hljs-attribute">filament</span><span class="hljs-punctuation">:</span> <span class="hljs-string">open</span><br></code></pre></td></tr></table></figure><h3 id="M114-圆弧或圆运动"><a href="#M114-圆弧或圆运动" class="headerlink" title="M114 - 圆弧或圆运动"></a>M114 - 圆弧或圆运动</h3><h4 id="说明-5"><a href="#说明-5" class="headerlink" title="说明"></a>说明</h4><h4 id="参数-3"><a href="#参数-3" class="headerlink" title="参数"></a>参数</h4><h4 id="示例-6"><a href="#示例-6" class="headerlink" title="示例"></a>示例</h4><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs"><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>3D打印</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Marlin固件</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Marlin固件参数配置</title>
    <link href="/2022/06/14/3D%E6%89%93%E5%8D%B0/Marlin%E5%9B%BA%E4%BB%B6%E5%8F%82%E6%95%B0%E9%85%8D%E7%BD%AE/"/>
    <url>/2022/06/14/3D%E6%89%93%E5%8D%B0/Marlin%E5%9B%BA%E4%BB%B6%E5%8F%82%E6%95%B0%E9%85%8D%E7%BD%AE/</url>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>在Marlin固件中，主要使用以下2个配置文件 (Configuration.h、Configuration_adv.h) 进行参数配置，其中<strong>Configuration.h</strong>包含了常用的基础参数，而<strong>Configuration_adv.h</strong>中包含了更多高级参数，请谨慎设置参数！由于参数众多，以下只是列出部分参数，更多详细参数配置请查看 <a href="https://marlinfw.org/docs/configuration/configuration.html">Marlin官方参数配置文档</a>。</p><h2 id="Configuration-h"><a href="#Configuration-h" class="headerlink" title="Configuration.h"></a>Configuration.h</h2><h3 id="主板"><a href="#主板" class="headerlink" title="主板"></a>主板</h3><h4 id="主板型号"><a href="#主板型号" class="headerlink" title="主板型号"></a>主板型号</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> MOTHERBOARD BOARD_RAMPS_14_EFB</span><br></code></pre></td></tr></table></figure><p>更多主板型号请查看Marlin固件根目录下的 Marlin&#x2F;src&#x2F;core&#x2F;boards.h，根据自己的主板型号进行修改成对应的即可。</p><h4 id="设置串口"><a href="#设置串口" class="headerlink" title="设置串口"></a>设置串口</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> SERIAL_PORT 0</span><br></code></pre></td></tr></table></figure><p>当主板上有多个串口时，需要指定连接主机的串口号；如果是Arduino Bootloader，默认是0 或者 -1。</p><p>可选参数：<br><code>-1, 0, 1, 2, 3, 4, 5, 6, 7</code></p><h4 id="波特率设置"><a href="#波特率设置" class="headerlink" title="波特率设置"></a>波特率设置</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> BAUDRATE 115200</span><br></code></pre></td></tr></table></figure><p>过高的波特率可能会增加通讯失败的概率（受到环境干扰）。</p><p>可选波特率：<br><code>2400, 9600, 19200, 38400, 57600, 115200, 250000, 500000, 1000000</code></p><h4 id="辅助串口"><a href="#辅助串口" class="headerlink" title="辅助串口"></a>辅助串口</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> SERIAL_PORT_2 -1</span><br></code></pre></td></tr></table></figure><p>选择一个辅助串口用于与主机通信。</p><p>可选参数：<br><code>-2, -1, 0, 1, 2, 3, 4, 5, 6, 7</code><br>目前 Ethernet[-2] 仅在Teensy 4.1主板上支持。</p><h4 id="辅助串口波特率设置"><a href="#辅助串口波特率设置" class="headerlink" title="辅助串口波特率设置"></a>辅助串口波特率设置</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> BAUDRATE_2 250000</span><br></code></pre></td></tr></table></figure><p>过高的波特率可能会增加通讯失败的概率（受到环境干扰）。</p><p>可选波特率：<br><code>2400, 9600, 19200, 38400, 57600, 115200, 250000, 500000, 1000000</code></p><h4 id="UUID设置"><a href="#UUID设置" class="headerlink" title="UUID设置"></a>UUID设置</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> MACHINE_UUID <span class="hljs-string">&quot;3682152d-530b-4428-944a-d0ab87819724&quot;</span></span><br></code></pre></td></tr></table></figure><p>打印机唯一ID，在某些应用程序中用于区分不同的机器。</p><h3 id="步进电机"><a href="#步进电机" class="headerlink" title="步进电机"></a>步进电机</h3><h4 id="电机驱动芯片型号"><a href="#电机驱动芯片型号" class="headerlink" title="电机驱动芯片型号"></a>电机驱动芯片型号</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> X_DRIVER_TYPE  TMC2209</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> Y_DRIVER_TYPE  TMC2209</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> Z_DRIVER_TYPE  TMC2209</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> E0_DRIVER_TYPE TMC2209</span><br></code></pre></td></tr></table></figure><p>分别对应X、Y、Z、E轴的步进电机驱动芯片型号，不同的芯片型号可以混合使用。</p><p>可选电机驱动芯片型号：<br><code>&#39;A4988&#39;, &#39;A5984&#39;, &#39;DRV8825&#39;, &#39;LV8729&#39;, &#39;L6470&#39;, &#39;L6474&#39;, &#39;POWERSTEP01&#39;, &#39;TB6560&#39;, &#39;TB6600&#39;, &#39;TMC2100&#39;, &#39;TMC2130&#39;, &#39;TMC2130_STANDALONE&#39;, &#39;TMC2160&#39;, &#39;TMC2160_STANDALONE&#39;, &#39;TMC2208&#39;, &#39;TMC2208_STANDALONE&#39;, &#39;TMC2209&#39;, &#39;TMC2209_STANDALONE&#39;, &#39;TMC26X&#39;, &#39;TMC26X_STANDALONE&#39;, &#39;TMC2660&#39;, &#39;TMC2660_STANDALONE&#39;, &#39;TMC5130&#39;, &#39;TMC5130_STANDALONE&#39;, &#39;TMC5160&#39;, &#39;TMC5160_STANDALONE&#39;</code></p><p>注意：<br><code>_STANDALONE</code> 后缀表示不启用UART模式，使用STEP模式。</p><h4 id="旋转方向控制"><a href="#旋转方向控制" class="headerlink" title="旋转方向控制"></a>旋转方向控制</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> INVERT_X_DIR true</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> INVERT_Y_DIR false</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> INVERT_Z_DIR true</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> INVERT_E0_DIR false</span><br></code></pre></td></tr></table></figure><p>分别代表X、Y、Z、E轴电机旋转方向的逻辑信号；如果复位时，发现某个轴的电机旋转方向不对，可将对应的信号逻辑进行反转。</p><h4 id="使能信号控制"><a href="#使能信号控制" class="headerlink" title="使能信号控制"></a>使能信号控制</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> X_ENABLE_ON 0</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> Y_ENABLE_ON 0</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> Z_ENABLE_ON 0</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> E_ENABLE_ON 0</span><br></code></pre></td></tr></table></figure><p>分别代表X、Y、Z、E轴电机使能逻辑信号(0&#x3D;Low, 1&#x3D;High)。</p><h4 id="每移动1mm所需脉冲数"><a href="#每移动1mm所需脉冲数" class="headerlink" title="每移动1mm所需脉冲数"></a>每移动1mm所需脉冲数</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> DEFAULT_AXIS_STEPS_PER_UNIT   &#123; 100, 100, 400, 141.542817 &#125;</span><br></code></pre></td></tr></table></figure><p>分别代表X、Y、Z、E轴每移动1mm需要多少脉冲，计算公式：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs text">同步带传动（通常是X，Y轴）：<br>(360°/步距角*细分数)/(齿间距*齿数)=(360/1.8*16)/(2*16)=100<br><br>丝杆传动（通常是Z轴）：<br>(360°/步距角*细分数)/丝杆导程=(360/1.8*16)/8=400<br><br>齿轮传动（通常是E轴）：<br>(360°/步距角*细分数)/挤出轮周长=(360/1.8*16)/(7.2Π)=141.542817<br></code></pre></td></tr></table></figure><h3 id="挤出机"><a href="#挤出机" class="headerlink" title="挤出机"></a>挤出机</h3><h4 id="挤出机数量"><a href="#挤出机数量" class="headerlink" title="挤出机数量"></a>挤出机数量</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> EXTRUDERS 1</span><br></code></pre></td></tr></table></figure><p>可选挤出机数量：<br><code>0, 1, 2, 3, 4, 5, 6, 7, 8</code></p><h3 id="热床"><a href="#热床" class="headerlink" title="热床"></a>热床</h3><h4 id="设置可打印空间大小"><a href="#设置可打印空间大小" class="headerlink" title="设置可打印空间大小"></a>设置可打印空间大小</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> X_BED_SIZE 240</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> Y_BED_SIZE 210</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> Z_MAX_POS 200</span><br></code></pre></td></tr></table></figure><p>分别代表X、Y、Z轴相对于原点(0,0,0)可移动的最大距离，即打印空间大小，单位:mm。</p><h3 id="坐标"><a href="#坐标" class="headerlink" title="坐标"></a>坐标</h3><h4 id="原点坐标"><a href="#原点坐标" class="headerlink" title="原点坐标"></a>原点坐标</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> X_MIN_POS 0</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> Y_MIN_POS 0</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> Z_MIN_POS 0</span><br></code></pre></td></tr></table></figure><p>设置X、Y、Z轴复位时的坐标点，一般默认为(0,0,0)。</p><h3 id="限位"><a href="#限位" class="headerlink" title="限位"></a>限位</h3><h4 id="软限位"><a href="#软限位" class="headerlink" title="软限位"></a>软限位</h4><h5 id="最小软限位设置"><a href="#最小软限位设置" class="headerlink" title="最小软限位设置"></a>最小软限位设置</h5><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> MIN_SOFTWARE_ENDSTOPS</span><br>    <span class="hljs-meta">#<span class="hljs-keyword">define</span> MIN_SOFTWARE_ENDSTOP_X</span><br>    <span class="hljs-meta">#<span class="hljs-keyword">define</span> MIN_SOFTWARE_ENDSTOP_Y</span><br>    <span class="hljs-meta">#<span class="hljs-keyword">define</span> MIN_SOFTWARE_ENDSTOP_Z</span><br></code></pre></td></tr></table></figure><p><code>#define MIN_SOFTWARE_ENDSTOPS</code>：最小软件限位总开关，防止X、Y、Z轴移动时超出X_MIN_POS、Y_MIN_POS、Z_MIN_POS（原点坐标）。</p><p>可单独设置哪些轴启用最小软件限位：<br><code>#define MIN_SOFTWARE_ENDSTOP_X</code>：启用X轴最小软限位<br><code>#define MIN_SOFTWARE_ENDSTOP_Y</code>：启用Y轴最小软限位<br><code>#define MIN_SOFTWARE_ENDSTOP_Z</code>：启用Z轴最小软限位</p><h5 id="最大软限位设置"><a href="#最大软限位设置" class="headerlink" title="最大软限位设置"></a>最大软限位设置</h5><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> MAX_SOFTWARE_ENDSTOPS</span><br>    <span class="hljs-meta">#<span class="hljs-keyword">define</span> MAX_SOFTWARE_ENDSTOP_X</span><br>    <span class="hljs-meta">#<span class="hljs-keyword">define</span> MAX_SOFTWARE_ENDSTOP_Y</span><br>    <span class="hljs-meta">#<span class="hljs-keyword">define</span> MAX_SOFTWARE_ENDSTOP_Z</span><br></code></pre></td></tr></table></figure><p><code>#define MAX_SOFTWARE_ENDSTOPS</code>：最大软件限位总开关，防止X、Y、Z轴移动时超出X_BED_SIZE、Y_BED_SIZE、Z_MAX_POS（最大可打印空间）。</p><p>可单独设置哪些轴启用最大软件限位：<br><code>#define MAX_SOFTWARE_ENDSTOP_X</code>：启用X轴最大软限位<br><code>#define MAX_SOFTWARE_ENDSTOP_Y</code>：启用Y轴最大软限位<br><code>#define MAX_SOFTWARE_ENDSTOP_Z</code>：启用Z轴最大软限位</p><h4 id="硬限位"><a href="#硬限位" class="headerlink" title="硬限位"></a>硬限位</h4><h5 id="最小硬限位设置"><a href="#最小硬限位设置" class="headerlink" title="最小硬限位设置"></a>最小硬限位设置</h5><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> USE_XMIN_PLUG</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> USE_YMIN_PLUG</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> USE_ZMIN_PLUG</span><br></code></pre></td></tr></table></figure><p>分别代表X、Y、Z轴复位时的最小行程限位开关，最小行程限位开关需接线到控制板的X-、Y-、Z-接口。</p><h5 id="最大硬限位设置"><a href="#最大硬限位设置" class="headerlink" title="最大硬限位设置"></a>最大硬限位设置</h5><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> USE_XMAX_PLUG</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> USE_YMAX_PLUG</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> USE_ZMAX_PLUG</span><br></code></pre></td></tr></table></figure><p>分别代表X、Y、Z轴复位时的最大行程限位开关，最大行程限位开关需接线到控制板的X+、Y+、Z+接口。</p><h5 id="硬限位方向设置"><a href="#硬限位方向设置" class="headerlink" title="硬限位方向设置"></a>硬限位方向设置</h5><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> X_HOME_DIR -1</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> Y_HOME_DIR -1</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> Z_HOME_DIR -1</span><br></code></pre></td></tr></table></figure><p>分别代表复位时X、Y、Z轴硬限位的终点方向。(-1&#x3D;MIN, 1&#x3D;MAX)。</p><h5 id="硬限位开关信号设置"><a href="#硬限位开关信号设置" class="headerlink" title="硬限位开关信号设置"></a>硬限位开关信号设置</h5><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> X_MIN_ENDSTOP_INVERTING false</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> Y_MIN_ENDSTOP_INVERTING false</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> Z_MIN_ENDSTOP_INVERTING false</span><br></code></pre></td></tr></table></figure><p>设置X、Y、Z轴限位开关是常闭或者常开的信号判断逻辑，如限位开关触发状态不对，可按实际情况修正对应的限位开关信号判断逻辑。</p><h3 id="传感器"><a href="#传感器" class="headerlink" title="传感器"></a>传感器</h3><h4 id="热端温度传感器"><a href="#热端温度传感器" class="headerlink" title="热端温度传感器"></a>热端温度传感器</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> TEMP_SENSOR_0 1</span><br></code></pre></td></tr></table></figure><p>0：代表禁用<br>1：代表启用</p><h4 id="热床温度传感器"><a href="#热床温度传感器" class="headerlink" title="热床温度传感器"></a>热床温度传感器</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> TEMP_SENSOR_BED 1</span><br></code></pre></td></tr></table></figure><p>0：代表禁用<br>1：代表启用</p><h3 id="温度"><a href="#温度" class="headerlink" title="温度"></a>温度</h3><h4 id="热端最高工作温度"><a href="#热端最高工作温度" class="headerlink" title="热端最高工作温度"></a>热端最高工作温度</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> HEATER_0_MAXTEMP 275</span><br></code></pre></td></tr></table></figure><p>设置热端最高加热温度，超过会停止加热；请根据打印耗材设置最高温度！</p><h4 id="热床最高工作温度"><a href="#热床最高工作温度" class="headerlink" title="热床最高工作温度"></a>热床最高工作温度</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> BED_MAXTEMP      150</span><br></code></pre></td></tr></table></figure><p>设置热床最高加热温度，超过会停止加热；请根据耗材设置最高热床温度！</p><h4 id="热端最低工作温度"><a href="#热端最低工作温度" class="headerlink" title="热端最低工作温度"></a>热端最低工作温度</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> HEATER_0_MINTEMP   5</span><br></code></pre></td></tr></table></figure><p>设置热端最低工作温度，低于该设定温度时会停止加热；出现这种状况可能是热敏电阻断线，避免造成安全隐患。</p><h4 id="热床最低工作温度"><a href="#热床最低工作温度" class="headerlink" title="热床最低工作温度"></a>热床最低工作温度</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> BED_MINTEMP        5</span><br></code></pre></td></tr></table></figure><p>设置热床最低工作温度，低于该设定温度时会停止加热；出现这种状况可能是热敏电阻断线，避免造成安全隐患。</p><h4 id="挤出机最低挤出温度"><a href="#挤出机最低挤出温度" class="headerlink" title="挤出机最低挤出温度"></a>挤出机最低挤出温度</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> EXTRUDE_MINTEMP 200</span><br></code></pre></td></tr></table></figure><p>设置挤出机挤出耗材时的最低温度，防止耗材还没达到热熔温度就开始挤出，造成挤出机损坏。</p><h3 id="热保护"><a href="#热保护" class="headerlink" title="热保护"></a>热保护</h3><h4 id="开启所有挤出机的热保护"><a href="#开启所有挤出机的热保护" class="headerlink" title="开启所有挤出机的热保护"></a>开启所有挤出机的热保护</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> THERMAL_PROTECTION_HOTENDS</span><br></code></pre></td></tr></table></figure><p>详细配置参数请到 Configuration_adv.h –&gt; #if ENABLED(THERMAL_PROTECTION_HOTENDS) 修改。</p><h4 id="开启热床的热保护"><a href="#开启热床的热保护" class="headerlink" title="开启热床的热保护"></a>开启热床的热保护</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> THERMAL_PROTECTION_BED</span><br></code></pre></td></tr></table></figure><p>详细配置参数请到 Configuration_adv.h –&gt; #if ENABLED(THERMAL_PROTECTION_BED) 修改。</p><h4 id="开启加热室的热保护"><a href="#开启加热室的热保护" class="headerlink" title="开启加热室的热保护"></a>开启加热室的热保护</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> THERMAL_PROTECTION_CHAMBER</span><br></code></pre></td></tr></table></figure><p>详细配置参数请到 Configuration_adv.h –&gt; #if ENABLED(THERMAL_PROTECTION_CHAMBER) 修改。</p><h4 id="开启激光冷却的热保护"><a href="#开启激光冷却的热保护" class="headerlink" title="开启激光冷却的热保护"></a>开启激光冷却的热保护</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> THERMAL_PROTECTION_COOLER</span><br></code></pre></td></tr></table></figure><p>详细配置参数请到 Configuration_adv.h –&gt; #if ENABLED(THERMAL_PROTECTION_COOLER) 修改。</p><h3 id="PID控制"><a href="#PID控制" class="headerlink" title="PID控制"></a>PID控制</h3><h4 id="热端PID温度控制"><a href="#热端PID温度控制" class="headerlink" title="热端PID温度控制"></a>热端PID温度控制</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> PIDTEMP</span><br></code></pre></td></tr></table></figure><p>开启热端PID控制，能更精确的控制热端温度。</p><p>可以通过串口发送如下指令进行热端PID自适应测试：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">M303 E0 S215 C10<br></code></pre></td></tr></table></figure><p>该指令将在215℃下对热端运行自适应测试10次，并返回测试结果；<br>请手动将测试结果填入Configuration.h中如下代码 DEFAULT_Kp、DEFAULT_Ki、DEFAULT_Kd之后，保存并重新编译刷入固件。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">if</span> ENABLED(PIDTEMP)</span><br>...<br>  <span class="hljs-meta">#<span class="hljs-keyword">else</span></span><br>    <span class="hljs-meta">#<span class="hljs-keyword">define</span> DEFAULT_Kp  18.83</span><br>    <span class="hljs-meta">#<span class="hljs-keyword">define</span> DEFAULT_Ki   1.82</span><br>    <span class="hljs-meta">#<span class="hljs-keyword">define</span> DEFAULT_Kd  48.59</span><br>  <span class="hljs-meta">#<span class="hljs-keyword">endif</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">endif</span></span><br></code></pre></td></tr></table></figure><h4 id="热床PID温度控制"><a href="#热床PID温度控制" class="headerlink" title="热床PID温度控制"></a>热床PID温度控制</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> PIDTEMPBED</span><br></code></pre></td></tr></table></figure><p>开启热床PID控制，能更精确的控制热床温度。</p><p>可以通过上位机发送如下指令进行热端PID自适应测试：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">M303 E-1 S60 C10<br></code></pre></td></tr></table></figure><p>该指令将在60°下对热床运行自适应测试10次，并返回测试结果；<br>请手动将测试结果填入Configuration.h中如下代码 DEFAULT_bedKp、DEFAULT_bedKi、DEFAULT_bedKd之后，保存并重新编译刷入固件。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">if</span> ENABLED(PIDTEMPBED)</span><br>...<br>  <span class="hljs-meta">#<span class="hljs-keyword">define</span> DEFAULT_bedKp 53.04</span><br>  <span class="hljs-meta">#<span class="hljs-keyword">define</span> DEFAULT_bedKi 2.93</span><br>  <span class="hljs-meta">#<span class="hljs-keyword">define</span> DEFAULT_bedKd 640.13</span><br><span class="hljs-meta">#<span class="hljs-keyword">endif</span></span><br></code></pre></td></tr></table></figure><h3 id="耗材"><a href="#耗材" class="headerlink" title="耗材"></a>耗材</h3><h4 id="耗材直径"><a href="#耗材直径" class="headerlink" title="耗材直径"></a>耗材直径</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> DEFAULT_NOMINAL_FILAMENT_DIA 1.75</span><br></code></pre></td></tr></table></figure><p>请按实际耗材直径设置，在体积挤出模式下，E轴挤出量单位是mm^3，而不是mm，固件会根据耗材直径自动计算出指定体积下的挤出长度。</p><p>可选耗材直径：<br><code>1.75, 2.85, 3.0, ...</code></p><h4 id="单次挤出的耗材长度"><a href="#单次挤出的耗材长度" class="headerlink" title="单次挤出的耗材长度"></a>单次挤出的耗材长度</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> EXTRUDE_MAXLENGTH 200</span><br></code></pre></td></tr></table></figure><p>设置挤出机自动装载耗材时单次挤出的耗材长度；如果只使用一种耗材进行打印，按默认值设置就行；在进行多色打印换料时，需要正确设置该值，防止挤出过量耗材，避免造成材料的浪费。</p><h3 id="速度"><a href="#速度" class="headerlink" title="速度"></a>速度</h3><h4 id="默认最大进给率"><a href="#默认最大进给率" class="headerlink" title="默认最大进给率"></a>默认最大进给率</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> DEFAULT_MAX_FEEDRATE          &#123; 300, 300, 5, 25 &#125;</span><br></code></pre></td></tr></table></figure><p>分别代表X，Y，Z，E轴的默认最大进给率；对于皮带传动，单位为：linear&#x3D;mm&#x2F;s，对于角度传动，单位为：rotational&#x3D;°&#x2F;s。</p><h4 id="默认最大加速度"><a href="#默认最大加速度" class="headerlink" title="默认最大加速度"></a>默认最大加速度</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> DEFAULT_MAX_ACCELERATION      &#123; 3000, 3000, 100, 10000 &#125;</span><br></code></pre></td></tr></table></figure><p>分别代表X，Y，Z，E轴的默认最大加速度；对于皮带传动，单位为：linear&#x3D;mm&#x2F;(s^2)，对于角度传动，单位为：rotational&#x3D;°&#x2F;(s^2)。</p><h4 id="默认加速度"><a href="#默认加速度" class="headerlink" title="默认加速度"></a>默认加速度</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> DEFAULT_ACCELERATION          3000</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> DEFAULT_RETRACT_ACCELERATION  3000</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> DEFAULT_TRAVEL_ACCELERATION   3000</span><br></code></pre></td></tr></table></figure><p>分别代表打印时默认加速度，默认回抽加速度，默认空驶加速度；对于皮带传动，单位为：linear&#x3D;mm&#x2F;(s^2)，对于角度传动，单位为：rotational&#x3D;°&#x2F;(s^2)。</p><h4 id="归位速度"><a href="#归位速度" class="headerlink" title="归位速度"></a>归位速度</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> HOMING_FEEDRATE_MM_M &#123; (50*60), (50*60), (4*60) &#125;</span><br></code></pre></td></tr></table></figure><p>分别代表X，Y，Z，E轴的归位速度；对于皮带传动，单位为：linear&#x3D;mm&#x2F;s，对于角度传动，单位为：rotational&#x3D;°&#x2F;s。</p><h3 id="探针"><a href="#探针" class="headerlink" title="探针"></a>探针</h3><h4 id="启用探针"><a href="#启用探针" class="headerlink" title="启用探针"></a>启用探针</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> Z_MIN_PROBE_USES_Z_MIN_ENDSTOP_PIN</span><br></code></pre></td></tr></table></figure><p>启用连接到Z-MIN引脚的探针，用于Z轴归位。</p><h4 id="探针类型"><a href="#探针类型" class="headerlink" title="探针类型"></a>探针类型</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><br></code></pre></td></tr></table></figure><h4 id="多次探测功能"><a href="#多次探测功能" class="headerlink" title="多次探测功能"></a>多次探测功能</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> MULTIPLE_PROBING 2</span><br></code></pre></td></tr></table></figure><p>进行2次探测可能会获得更好的结果。</p><h3 id="存储"><a href="#存储" class="headerlink" title="存储"></a>存储</h3><h4 id="启用EEPROM"><a href="#启用EEPROM" class="headerlink" title="启用EEPROM"></a>启用EEPROM</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> EEPROM_SETTINGS</span><br></code></pre></td></tr></table></figure><p>启用EEPROM存储功能，可以保存配置参数，并且断电不丢失；固件调试阶段建议关闭，防止将错误参数存放到EEPROM中，对后续调试造成不必要的麻烦。</p><h4 id="统计打印数据"><a href="#统计打印数据" class="headerlink" title="统计打印数据"></a>统计打印数据</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> PRINTCOUNTER</span><br></code></pre></td></tr></table></figure><p>开启该功能，会统计以下数据，并保存到EEPROM中：</p><ul><li>总打印次数</li><li>成功打印次数</li><li>失败打印次数</li><li>总打印时间</li></ul><h3 id="LCD显示"><a href="#LCD显示" class="headerlink" title="LCD显示"></a>LCD显示</h3><h4 id="启用LCD-2004显示"><a href="#启用LCD-2004显示" class="headerlink" title="启用LCD 2004显示"></a>启用LCD 2004显示</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> REPRAP_DISCOUNT_SMART_CONTROLLER</span><br></code></pre></td></tr></table></figure><p>启用LCD 2004显示。</p><h4 id="启用LCD-12864显示"><a href="#启用LCD-12864显示" class="headerlink" title="启用LCD 12864显示"></a>启用LCD 12864显示</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> REPRAP_DISCOUNT_FULL_GRAPHIC_SMART_CONTROLLER</span><br></code></pre></td></tr></table></figure><p>启用LCD 12864显示时，需要<a href="https://github.com/olikraus/U8glib_Arduino">U8glib库</a>，否则会报错。</p><h4 id="设置LCD显示语言"><a href="#设置LCD显示语言" class="headerlink" title="设置LCD显示语言"></a>设置LCD显示语言</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> LCD_LANGUAGE en</span><br></code></pre></td></tr></table></figure><p><code>en</code>：设置显示语言为英文。<br><code>zh_CN</code>：设置显示语言为中文。</p><blockquote><p><a href="https://reprap.org/wiki/RepRapDiscount_Full_Graphic_Smart_Controller">中文语言仅支持128 x 64 点阵液晶显示器</a></p></blockquote><h4 id="旋转编码器方向选择"><a href="#旋转编码器方向选择" class="headerlink" title="旋转编码器方向选择"></a>旋转编码器方向选择</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> REVERSE_ENCODER_DIRECTION</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> REVERSE_MENU_DIRECTION</span><br></code></pre></td></tr></table></figure><p>只启用<code>#define REVERSE_ENCODER_DIRECTION</code>，反转菜单上下方向和编辑操作方向。<br>只启用<code>#define REVERSE_MENU_DIRECTION</code>，只反转菜单上下方向，不反转编辑操作方向。<br>以上二项都开启时，只反转编辑操作方向。</p><h4 id="启用独立轴复位菜单"><a href="#启用独立轴复位菜单" class="headerlink" title="启用独立轴复位菜单"></a>启用独立轴复位菜单</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> INDIVIDUAL_AXIS_HOMING_MENU</span><br></code></pre></td></tr></table></figure><p>可在LCD上增加单独复位X、Y、Z轴的菜单操作。</p><h3 id="启用SD卡"><a href="#启用SD卡" class="headerlink" title="启用SD卡"></a>启用SD卡</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> SDSUPPORT</span><br></code></pre></td></tr></table></figure><p>开启SD卡功能；可以将切片软件生成的.gcode文件复制到SD卡中进行打印。</p><h3 id="蜂鸣器"><a href="#蜂鸣器" class="headerlink" title="蜂鸣器"></a>蜂鸣器</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> SPEAKER</span><br></code></pre></td></tr></table></figure><p>启用蜂鸣器；用于警报。</p><h3 id="启用MMU多色换料模块"><a href="#启用MMU多色换料模块" class="headerlink" title="启用MMU多色换料模块"></a>启用MMU多色换料模块</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> MMU_MODEL PRUSA_MMU2</span><br></code></pre></td></tr></table></figure><p>Marlin支持Prusa官方多色换料模块，更详细的配置操作请查看高级功能。</p><p>可选型号：<br><code>PRUSA_MMU1, PRUSA_MMU2, PRUSA_MMU2S, EXTENDABLE_EMU_MMU2, EXTENDABLE_EMU_MMU2S</code></p><h2 id="Configuration-adv-h"><a href="#Configuration-adv-h" class="headerlink" title="Configuration_adv.h"></a>Configuration_adv.h</h2><h3 id="设置挤出机热保护参数"><a href="#设置挤出机热保护参数" class="headerlink" title="设置挤出机热保护参数"></a>设置挤出机热保护参数</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">if</span> ENABLED(THERMAL_PROTECTION_HOTENDS)</span><br>  <span class="hljs-meta">#<span class="hljs-keyword">define</span> THERMAL_PROTECTION_PERIOD 40        <span class="hljs-comment">// (seconds)</span></span><br>  <span class="hljs-meta">#<span class="hljs-keyword">define</span> THERMAL_PROTECTION_HYSTERESIS 4     <span class="hljs-comment">// (°C)</span></span><br></code></pre></td></tr></table></figure><p><code>THERMAL_PROTECTION_PERIOD</code>：加热超时时间，单位是秒(S)。<br><code>THERMAL_PROTECTION_HYSTERESIS</code>：温度值。</p><p>当挤出机设定温度与实际温度差值超过<code>THERMAL_PROTECTION_PERIOD</code>且等待加热时间超过<code>THERMAL_PROTECTION_HYSTERESIS</code>时，Marlin固件会给出警告(<strong>E0 Heating failed</strong>)。</p><h3 id="设置热床热保护参数"><a href="#设置热床热保护参数" class="headerlink" title="设置热床热保护参数"></a>设置热床热保护参数</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">if</span> ENABLED(THERMAL_PROTECTION_BED)</span><br>  <span class="hljs-meta">#<span class="hljs-keyword">define</span> THERMAL_PROTECTION_BED_PERIOD        20 <span class="hljs-comment">// (seconds)</span></span><br>  <span class="hljs-meta">#<span class="hljs-keyword">define</span> THERMAL_PROTECTION_BED_HYSTERESIS     2 <span class="hljs-comment">// (°C)</span></span><br></code></pre></td></tr></table></figure><p><code>THERMAL_PROTECTION_BED_PERIOD</code>：加热超时时间，单位是秒(S)。<br><code>THERMAL_PROTECTION_BED_HYSTERESIS</code>：温度值。</p><p>当热床设定温度与实际温度差值超过<code>THERMAL_PROTECTION_BED_PERIOD</code>且等待加热时间超过<code>THERMAL_PROTECTION_BED_HYSTERESIS</code>时，Marlin固件会给出警告(<strong>Bed Heating failed</strong>)。</p><h3 id="设置加热室热保护参数"><a href="#设置加热室热保护参数" class="headerlink" title="设置加热室热保护参数"></a>设置加热室热保护参数</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">if</span> ENABLED(THERMAL_PROTECTION_CHAMBER)</span><br>  <span class="hljs-meta">#<span class="hljs-keyword">define</span> THERMAL_PROTECTION_CHAMBER_PERIOD    20 <span class="hljs-comment">// (seconds)</span></span><br>  <span class="hljs-meta">#<span class="hljs-keyword">define</span> THERMAL_PROTECTION_CHAMBER_HYSTERESIS 2 <span class="hljs-comment">// (°C)</span></span><br></code></pre></td></tr></table></figure><p><code>THERMAL_PROTECTION_CHAMBER_PERIOD</code>: 加热超时时间，单位是秒(S)。<br><code>THERMAL_PROTECTION_CHAMBER_HYSTERESIS</code>: 温度值。</p><p>当加热室设定温度与实际温度差值超过<code>THERMAL_PROTECTION_CHAMBER_PERIOD</code>且等待加热时间超过<code>THERMAL_PROTECTION_CHAMBER_HYSTERESIS</code>时，Marlin固件会给出警告(<strong>Chamber Heating failed</strong>)并复位。</p><h3 id="设置激光冷却热保护参数"><a href="#设置激光冷却热保护参数" class="headerlink" title="设置激光冷却热保护参数"></a>设置激光冷却热保护参数</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">if</span> ENABLED(THERMAL_PROTECTION_COOLER)</span><br>  <span class="hljs-meta">#<span class="hljs-keyword">define</span> THERMAL_PROTECTION_COOLER_PERIOD     10 <span class="hljs-comment">// (seconds)</span></span><br>  <span class="hljs-meta">#<span class="hljs-keyword">define</span> THERMAL_PROTECTION_COOLER_HYSTERESIS  3 <span class="hljs-comment">// (°C)</span></span><br></code></pre></td></tr></table></figure><p><code>THERMAL_PROTECTION_COOLER_PERIOD</code>：加热超时时间，单位是秒(S)。<br><code>THERMAL_PROTECTION_COOLER_HYSTERESIS</code>：温度值。</p><p>当 激光冷却 设定温度与实际温度差值超过<code>THERMAL_PROTECTION_COOLER_PERIOD</code>且等待加热时间超过 <code>THERMAL_PROTECTION_COOLER_HYSTERESIS</code>时，Marlin固件会给出警告(<strong>Cooler Heating failed</strong>)并复位。</p><h3 id="Z探针探测区域"><a href="#Z探针探测区域" class="headerlink" title="Z探针探测区域"></a>Z探针探测区域</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">if</span> PROBE_SELECTED &amp;&amp; !IS_KINEMATIC</span><br>    <span class="hljs-meta">#<span class="hljs-keyword">define</span> PROBING_MARGIN_LEFT 25</span><br>    <span class="hljs-meta">#<span class="hljs-keyword">define</span> PROBING_MARGIN_RIGHT 10</span><br>    <span class="hljs-meta">#<span class="hljs-keyword">define</span> PROBING_MARGIN_FRONT 5</span><br>    <span class="hljs-meta">#<span class="hljs-keyword">define</span> PROBING_MARGIN_BACK 0</span><br><span class="hljs-meta">#<span class="hljs-keyword">endif</span></span><br></code></pre></td></tr></table></figure><p>设置Z探针可探测的热床区域，防止Z探针探测区域超出热床范围，导致喷嘴撞在热床上损坏。</p><h3 id="电机驱动"><a href="#电机驱动" class="headerlink" title="电机驱动"></a>电机驱动</h3><h4 id="配置驱动参数"><a href="#配置驱动参数" class="headerlink" title="配置驱动参数"></a>配置驱动参数</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">if</span> AXIS_IS_TMC_CONFIG(X)</span><br>    <span class="hljs-meta">#<span class="hljs-keyword">define</span> X_CURRENT       800        <span class="hljs-comment">// (mA) RMS current. Multiply by 1.414 for peak current.</span></span><br>    <span class="hljs-meta">#<span class="hljs-keyword">define</span> X_CURRENT_HOME  X_CURRENT  <span class="hljs-comment">// (mA) RMS current for homing. (Typically lower than *_CURRENT.)</span></span><br>    <span class="hljs-meta">#<span class="hljs-keyword">define</span> X_MICROSTEPS     16        <span class="hljs-comment">// 0..256</span></span><br>    <span class="hljs-meta">#<span class="hljs-keyword">define</span> X_RSENSE          0.11     <span class="hljs-comment">// Multiplied x1000 for TMC26X</span></span><br>    <span class="hljs-meta">#<span class="hljs-keyword">define</span> X_CHAIN_POS      -1        <span class="hljs-comment">// -1..0: Not chained. 1: MCU MOSI connected. 2: Next in chain, ...</span></span><br>    <span class="hljs-comment">//#define X_INTERPOLATE  true      // Enable to override &#x27;INTERPOLATE&#x27; for the X axis</span><br>    <span class="hljs-comment">//#define X_HOLD_MULTIPLIER 0.5    // Enable to override &#x27;HOLD_MULTIPLIER&#x27; for the X axis</span><br><span class="hljs-meta">#<span class="hljs-keyword">endif</span></span><br></code></pre></td></tr></table></figure><p>此设置只对TMC驱动才有效，上述配置只列举X轴，其他轴的驱动配置以此类推；</p><p><code>X_CURRENT</code>：电机驱动电流<br><code>X_CURRENT_HOME</code>：无限位归位时的电流<br><code>X_MICROSTEPS</code>：驱动细分数<br><code>X_RSENSE</code>：采样电阻阻值<br><code>X_CHAIN_POS</code>：SPI模式的CS<br><code>X_INTERPOLATE</code>：TMC驱动插值算法（可降低打印机移动时的噪音，但是会引入少量系统位置误差）<br><code>X_HOLD_MULTIPLIER</code>：保持电流</p><h4 id="TMC驱动stealthChop模式"><a href="#TMC驱动stealthChop模式" class="headerlink" title="TMC驱动stealthChop模式"></a>TMC驱动stealthChop模式</h4><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">if</span> HAS_STEALTHCHOP</span><br>    <span class="hljs-meta">#<span class="hljs-keyword">define</span> STEALTHCHOP_XY</span><br>    <span class="hljs-meta">#<span class="hljs-keyword">define</span> STEALTHCHOP_Z</span><br>    <span class="hljs-meta">#<span class="hljs-keyword">define</span> STEALTHCHOP_I</span><br>    <span class="hljs-meta">#<span class="hljs-keyword">define</span> STEALTHCHOP_J</span><br>    <span class="hljs-meta">#<span class="hljs-keyword">define</span> STEALTHCHOP_K</span><br>    <span class="hljs-meta">#<span class="hljs-keyword">define</span> STEALTHCHOP_U</span><br>    <span class="hljs-meta">#<span class="hljs-keyword">define</span> STEALTHCHOP_V</span><br>    <span class="hljs-meta">#<span class="hljs-keyword">define</span> STEALTHCHOP_W</span><br>    <span class="hljs-meta">#<span class="hljs-keyword">define</span> STEALTHCHOP_E</span><br><span class="hljs-meta">#<span class="hljs-keyword">endif</span></span><br></code></pre></td></tr></table></figure><p>当Configuration.h -&gt; X_DRIVER_TYPE 驱动器型号配置为支持stealthChop模式的TMC驱动时，会默认启用stealthChop模式，如果不想使用可以注释掉对应的。<br>stealthChop模式：噪音更小，但是会引入系统误差。<br>spreadCycle模式：提供更大的扭矩和更高的精度，但是会有明显噪音。</p><h3 id="优化斩波器参数"><a href="#优化斩波器参数" class="headerlink" title="优化斩波器参数"></a>优化斩波器参数</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> CHOPPER_TIMING CHOPPER_DEFAULT_12V</span><br></code></pre></td></tr></table></figure><p>使用预定义的参数集优化spreadCycle斩波器参数，请按照供电电压来设置正确的斩波器参数。</p><p>可选参数：<br><code>CHOPPER_DEFAULT_12V</code><br><code>CHOPPER_DEFAULT_19V</code><br><code>CHOPPER_DEFAULT_24V</code><br><code>CHOPPER_DEFAULT_36V</code><br><code>CHOPPER_09STEP_24V   // 0.9 degree steppers (24V)</code><br><code>CHOPPER_PRUSAMK3_24V // Imported parameters from the official Průša firmware for MK3 (24V)</code><br><code>CHOPPER_MARLIN_119   // Old defaults from Marlin v1.1.9</code></p><h3 id="双Z自动平衡"><a href="#双Z自动平衡" class="headerlink" title="双Z自动平衡"></a>双Z自动平衡</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> Z_STEPPER_AUTO_ALIGN</span><br></code></pre></td></tr></table></figure><p>当3D打印机使用双Z轴且两个Z轴丝杆电机使用同一个驱动器驱动时，有时会导致两个丝杆步进电机出现不同步现象而导致一边高一边低，致使打印件在Z轴方向上产生层纹；开启此功能可以在打印前进行双Z轴自动平衡，来保证打印质量，但需要占用主板上额外的一个电机驱动接口。</p><p>如果热床有自动调平功能，可以不使用该功能。</p><h3 id="设置打印进度"><a href="#设置打印进度" class="headerlink" title="设置打印进度"></a>设置打印进度</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> SET_PROGRESS_MANUALLY</span><br>    <span class="hljs-meta">#<span class="hljs-keyword">define</span> SET_PROGRESS_PERCENT</span><br>    <span class="hljs-meta">#<span class="hljs-keyword">define</span> SET_REMAINING_TIME</span><br>    <span class="hljs-meta">#<span class="hljs-keyword">define</span> SET_INTERACTION_TIME</span><br>    <span class="hljs-meta">#<span class="hljs-keyword">define</span> M73_REPORT</span><br></code></pre></td></tr></table></figure><p><code>#define SET_PROGRESS_MANUALLY</code>：开启打印进度功能<br><code>#define SET_PROGRESS_PERCENT</code>：添加 ‘P’ 参数设置完成百分比<br><code>#define SET_REMAINING_TIME</code>：添加 ‘R’ 参数设置剩余时间<br><code>#define SET_INTERACTION_TIME</code>：添加 ‘C’ 参数设置下次更换耗材时间，一般用于多色打印<br><code>#define M73_REPORT</code>：向主机报告打印进度</p><h3 id="显示打印进度"><a href="#显示打印进度" class="headerlink" title="显示打印进度"></a>显示打印进度</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> SHOW_PROGRESS_PERCENT</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> SHOW_ELAPSED_TIME</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> SHOW_REMAINING_TIME</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> PRINT_PROGRESS_SHOW_DECIMALS</span><br></code></pre></td></tr></table></figure><p><code>#define SHOW_PROGRESS_PERCENT</code>：显示打印进度百分比（P表示）<br><code>#define SHOW_ELAPSED_TIME</code>：显示打印时间（E表示）<br><code>#define SHOW_REMAINING_TIME</code>：显示预计完成时间（R表示）<br><code>#define PRINT_PROGRESS_SHOW_DECIMALS</code>：用十进制显示进度</p><h2 id="常用功能"><a href="#常用功能" class="headerlink" title="常用功能"></a>常用功能</h2><h3 id="热床自动调平-ABL"><a href="#热床自动调平-ABL" class="headerlink" title="热床自动调平(ABL)"></a>热床自动调平(ABL)</h3><blockquote><p>详细请查看官方文档说明：<a href="https://marlinfw.org/docs/features/auto_bed_leveling.html">Automatic Bed Leveling</a></p></blockquote><ol><li><p>将Z探针连接到主板Z-MIN位置后，在Configuration.h中需开启此选项</p> <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> Z_MIN_PROBE_USES_Z_MIN_ENDSTOP_PIN</span><br></code></pre></td></tr></table></figure><p> 对于RAMPS控制板，Z-MIN连接到主板的D32 PIN；对于其他控制板，可以在 Marlin&#x2F;src&#x2F;pins&#x2F;ramps&#x2F;pin_RAMPS.h 中修改 Z-MIN引脚 (<code>#define Z_MIN_PROBE_PIN 32</code>)为对应的PIN即可。</p></li><li><p>选择Z探针传感器类型</p><p> Marlin支持的 Z探针 类型 如下，详细请查看<a href="https://marlinfw.org/docs/configuration/probes.html">Marlin官方探针配置说明</a>：</p><ul><li>Simple switch (<code>FIX_MOUNTED_PROBE</code>)</li><li>Switch on a servo arm (<code>Z_ENDSTOP_SERVO_NR</code>)</li><li>Switch on a solenoid (<code>SOLENOID_PROBE</code>)</li><li>Inductive probes (<code>FIX_MOUNTED_PROBE</code>)</li><li>BLTouch - and clones (<code>BLTOUCH</code>)</li><li>Sled-mounted probe (<code>Z_PROBE_SLED</code>)</li><li>Allen-key delta probe (<code>Z_PROBE_ALLEN_KEY</code>)</li><li>No probe (<code>PROBE_MANUALLY</code>)</li></ul><blockquote><p>如探针接触到热床平面后的 逻辑信号不对，可修改此参数反转信号逻辑：<code>#define Z_MIN_PROBE_ENDSTOP_INVERTING false</code>。</p></blockquote></li><li><p>设置Z探针相对于喷嘴位置偏移量</p> <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> NOZZLE_TO_PROBE_OFFSET &#123; 23, 5, -0.82 &#125;</span><br></code></pre></td></tr></table></figure><p> 可以按照以下步骤确定上述参数中的X,Y,Z偏移量：</p><ul><li>将喷嘴安装在3D打印机挤出机上，用双手旋转Z轴，让喷嘴位置往下降，当喷嘴刚好触碰到热床平面时停住，这时调整Z探针位置，将Z探针的探头也触碰到热床平面；该操作使得 喷嘴和Z探针的探头底部平齐。</li><li>准备一张白纸 ，用手轻微旋转Z轴，让白纸刚好能从热床平面与Z探针之间的缝隙穿过，这时用胶带将白纸四周固定在热床平面上；用手慢慢旋转降下Z轴 ，让Z探针的探头刚好接触白纸（注意不要顶住白纸），用笔在纸上标记出当前探头位置。</li><li>启动3D打印机（不要执行回原点操作），用LCD控制旋钮控制步进电机移动X、Y轴，将喷嘴移动到标记点，记录移动前后的距离差，便能得出Z探针相对于喷嘴的X、Y位置了。</li><li>X,Y偏移量的 <strong>±</strong> 由以下位置方向确定：</li></ul> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs bash">*            后<br>*       +-- BACK ---+<br>*       |    [+]    |<br>*     L |        1  | R    &lt;-- Example <span class="hljs-string">&quot;1&quot;</span> (right+,  back+) Z探针位于位置1区域时X为 + ,Y 为 +<br>*     E |  2        | I    &lt;-- Example <span class="hljs-string">&quot;2&quot;</span> ( left-,  back+) Z探针位于位置2区域时X为 - ,Y 为 +<br>*  左 F |[-]  N  [+]| G 右 &lt;-- Nozzle 喷嘴<br>*     T |       3   | H    &lt;-- Example <span class="hljs-string">&quot;3&quot;</span> (right+, front-) Z探针位于位置3区域时X为 + ,Y 为 -<br>*       | 4         | T    &lt;-- Example <span class="hljs-string">&quot;4&quot;</span> ( left-, front-) Z探针位于位置4区域时X为 - ,Y 为 -<br>*       |    [-]    |<br>*       O-- FRONT --+<br>*            前<br></code></pre></td></tr></table></figure><ul><li>Z偏移量计算方法如下：<ul><li>在<strong>Configuration.h</strong>中，将该参数进行注释:<code>#define MIN_SOFTWARE_ENDSTOP_Z</code>，使Z轴能移动到负值，便于测算Z偏移量，等测得Z偏移量后，建议开启此参数，防止误操作导致Z轴移动到负值撞击热床!!!</li><li>关闭3D打印机电源，在热床上铺一张白纸，用双手同步慢慢旋转双Z轴，使喷嘴刚好接触到纸面后停止旋转Z轴；注意不要将喷嘴压紧纸张，纸张在喷嘴与热床之间可以来回抽动即可。</li><li>准备一根扎带，松开固定Z探针的螺丝，用手将Z探针往远离热床平面方向稍微抬起一段距离，将扎带放在Z探针与热床平面之间的缝隙里，用手将Z探针往下推，直至抵住扎带，此时固定Z探针螺丝。</li><li>用双手同步旋转双Z轴，使喷嘴远离热床平面；打开3D打印机电源，用LCD旋钮选择 回原点（G28），等待3D打印机回原点后，使用LCD旋钮控制Z轴电机，一边让Z轴慢慢下降，不断接近纸张，一边用手来回拖动纸张，使之在热床平面上来回移动，当喷嘴降到刚好接触纸张，且拖到纸张时有轻微阻尼感，这时在LCD上显示的Z轴数值就是Z偏移量，按照此方法测得的Z偏移量为负值。</li></ul></li></ul></li><li><p>设置Z探针距离边缘的距离</p> <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> PROBING_MARGIN 10</span><br></code></pre></td></tr></table></figure></li><li><p>设置Z探针在X、Y轴方向上的移动速度（mm&#x2F;min）</p> <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> XY_PROBE_FEEDRATE (133*60)</span><br></code></pre></td></tr></table></figure></li><li><p>设置Z探针探测次数</p> <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> MULTIPLE_PROBING 3</span><br></code></pre></td></tr></table></figure></li><li><p>启用M48重复性测试Z探针的准确性</p> <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> Z_MIN_PROBE_REPEATABILITY_TEST</span><br></code></pre></td></tr></table></figure></li><li><p>选择调平方式，以下方式只可选其一进行启用</p> <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">//#define AUTO_BED_LEVELING_3POINT</span><br><span class="hljs-comment">//#define AUTO_BED_LEVELING_LINEAR</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> AUTO_BED_LEVELING_BILINEAR</span><br><span class="hljs-comment">//#define AUTO_BED_LEVELING_UBL</span><br><span class="hljs-comment">//#define MESH_BED_LEVELING</span><br></code></pre></td></tr></table></figure></li><li><p>设置探测网格点数</p> <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> GRID_MAX_POINTS_X 5</span><br></code></pre></td></tr></table></figure></li><li><p>启用EEPROM，保存热床调平计算的数据</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> EEPROM_SETTINGS</span><br></code></pre></td></tr></table></figure></li><li><p>启用Z安全复位</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> Z_SAFE_HOMING</span><br></code></pre></td></tr></table></figure></li><li><p>回原点前Z轴的抬升高度</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> Z_HOMING_HEIGHT  20</span><br></code></pre></td></tr></table></figure></li><li><p>下载固件，测试热床自动调平</p><p>使用上位机连接3D打印机，使用 <strong><code>G28</code></strong> 复位X,Y,Z轴，使用 <strong><code>G29</code></strong> 开始热床自动调平测试，测试完成后，使用 <strong><code>M500</code></strong> 将热床调平数据保存到EEPROM中，可以输入 <strong><code>M420 V</code></strong> 查看热床调平数据，格式为：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs bash">     0      1      2      3<br>0  -1.089 -1.048 -1.113 -1.503<br>1  -0.147 +0.049 +0.231 +0.268<br>2  +0.668 +0.874 +1.033 +1.117<br>3  +1.350 +1.524 +1.693 +1.927<br><br><span class="hljs-comment"># (0,0)对应的是坐标轴原点位置，横向是X轴，纵向是Y轴。</span><br></code></pre></td></tr></table></figure></li></ol><hr><h3 id="热床统一调平-UBL"><a href="#热床统一调平-UBL" class="headerlink" title="热床统一调平(UBL)"></a>热床统一调平(UBL)</h3><blockquote><p>详细请查看官方文档说明：<a href="https://marlinfw.org/docs/features/unified_bed_leveling.html">Unified Bed Leveling</a></p></blockquote><ol><li><p>设置 Z探针 相对于 喷嘴位置偏移量</p><p> 详情请查看 热床自动调平(ABL) -&gt; 步骤3</p></li><li><p>开启热床统一调平功能</p> <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> AUTO_BED_LEVELING_UBL</span><br></code></pre></td></tr></table></figure></li><li><p>启用G28后恢复床调平功能</p> <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> RESTORE_LEVELING_AFTER_G28</span><br></code></pre></td></tr></table></figure></li><li><p>启用 G26 网格验证模式工具</p> <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> G26_MESH_VALIDATION</span><br>    <span class="hljs-meta">#<span class="hljs-keyword">if</span> ENABLED(G26_MESH_VALIDATION)</span><br>        <span class="hljs-meta">#<span class="hljs-keyword">define</span> MESH_TEST_NOZZLE_SIZE    0.4  <span class="hljs-comment">// (mm) 喷嘴大小.</span></span><br>        <span class="hljs-meta">#<span class="hljs-keyword">define</span> MESH_TEST_LAYER_HEIGHT   0.2  <span class="hljs-comment">// (mm) G26打印测试时的层高.</span></span><br>        <span class="hljs-meta">#<span class="hljs-keyword">define</span> MESH_TEST_HOTEND_TEMP  215    <span class="hljs-comment">// (°C) G26打印测试时的喷嘴温度.</span></span><br>        <span class="hljs-meta">#<span class="hljs-keyword">define</span> MESH_TEST_BED_TEMP      60    <span class="hljs-comment">// (°C) G26打印测试时的热床温度.</span></span><br>        <span class="hljs-meta">#<span class="hljs-keyword">define</span> G26_XY_FEEDRATE         20    <span class="hljs-comment">// (mm/s) G26打印测试时X、Y轴运动的进给率.</span></span><br>        <span class="hljs-meta">#<span class="hljs-keyword">define</span> G26_XY_FEEDRATE_TRAVEL 100    <span class="hljs-comment">// (mm/s) G26打印测试时X、Y轴移动的进给率.</span></span><br>        <span class="hljs-meta">#<span class="hljs-keyword">define</span> G26_RETRACT_MULTIPLIER   1.0  <span class="hljs-comment">// G26 Q（回缩）默认用于网格测试元素之间.</span></span><br>    <span class="hljs-meta">#<span class="hljs-keyword">endif</span></span><br></code></pre></td></tr></table></figure></li><li><p>热床统一调平参数设置</p> <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> MESH_INSET 10                          <span class="hljs-comment">// 设置探测网格与热床边缘距离.</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> GRID_MAX_POINTS_X 10                   <span class="hljs-comment">// 探测网格沿X轴方向探测数量，注意不要超过15.</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> GRID_MAX_POINTS_Y GRID_MAX_POINTS_X    <span class="hljs-comment">//探测网格沿Y轴方向探测数量.</span></span><br></code></pre></td></tr></table></figure></li><li><p>启用EEPROM</p> <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> EEPROM_SETTINGS</span><br></code></pre></td></tr></table></figure></li><li><p>编译固件上传</p></li><li><p>热床统一调平初始化</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs bash">M502          //复位参数<br>M500          //保存参数<br>M501          //加载参数<br><br>M190 S60      //设置床温为60°<br>M104 S215     //设置喷嘴温度为215°<br><br>G28           //复位<br>G29 P1        //开始网格1的热床统一调平测试<br><br>G29 T         //显示热床统一调平网络数据<br>G29 S1        //将热床统一调平网格数据保存到EEPROM<br>G29 F 10.0    //<br>G29 A         //激活热床统一调平功能<br>M500          //保存数据<br></code></pre></td></tr></table></figure></li><li><p>执行热床统一调平测试</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">G28<br>G26 C<br></code></pre></td></tr></table></figure></li><li><p>测量打印模型</p><p>使用游标卡尺测量模型各个坐标点的厚度是否为0.2mm，如果测量结果有偏差，记下该坐标点与偏差值，便于在步骤11中进行微调。</p></li><li><p>微调热床统一调平网格数据</p><p>请在LCD控制器上进行操作：</p><ul><li>按下旋钮 -&gt; Motion -&gt; Unified Bed Leveling -&gt; Mesh Edit</li><li>等待X、Y、Z轴自动复位后，喷嘴自动移动到(0,0)坐标点且屏幕上显示网格数据；使用旋钮移动到需要修改的坐标点，按下旋钮后根据偏差值来设置Z Value，修改完成后按下旋钮确认，此时喷头会移动到该坐标点相邻点进行进一步调整，如果不需要调整，请再次按下旋钮，直到修改完附近的点，喷头会再次移动到(0,0)坐标点；如还需调整其他坐标点，重复上述操作即可，直到全部调整完成后，长按旋钮保存网格数据，再次执行G26 C测试；重复步骤10 -&gt; 11，直到测试模型高度符合要求，保存即可。</li></ul></li></ol><h3 id="耗材断料检测"><a href="#耗材断料检测" class="headerlink" title="耗材断料检测"></a>耗材断料检测</h3><p>使用断料检测传感器检测耗材是否装载，防止耗材异常断开或用尽后3D打印机还在继续工作；也为后续升级多色打印换料提供保障。</p><ol><li><p>启用耗材断料检测</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> FILAMENT_RUNOUT_SENSOR</span><br></code></pre></td></tr></table></figure><blockquote><p>耗材插入挤出机后，用上位机连上3D打印机，使用 <strong><code>M119</code></strong> 查看各传感器的状态，如果filament返回的值为open，则需要反转耗材检测传感器的逻辑判断信号：<code>#define FIL_RUNOUT_STATE     HIGH</code></p></blockquote></li><li><p>启用高级暂停</p><p> 该参数在 Configuration_adv.h中进行启用：</p> <figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> ADVANCED_PAUSE_FEATURE</span><br></code></pre></td></tr></table></figure></li><li><p>编译固件，即可开启耗材检测</p></li></ol><hr><h2 id="高级功能"><a href="#高级功能" class="headerlink" title="高级功能"></a>高级功能</h2><h3 id="多色打印"><a href="#多色打印" class="headerlink" title="多色打印"></a>多色打印</h3><p>（暂未升级 0.0）</p>]]></content>
    
    
    <categories>
      
      <category>3D打印</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Marlin固件</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>常见通讯电路</title>
    <link href="/2022/06/03/%E7%94%B5%E8%B7%AF/%E5%B8%B8%E8%A7%81%E9%80%9A%E8%AE%AF%E7%94%B5%E8%B7%AF/"/>
    <url>/2022/06/03/%E7%94%B5%E8%B7%AF/%E5%B8%B8%E8%A7%81%E9%80%9A%E8%AE%AF%E7%94%B5%E8%B7%AF/</url>
    
    <content type="html"><![CDATA[<h2 id="网口通讯"><a href="#网口通讯" class="headerlink" title="网口通讯"></a>网口通讯</h2><h2 id="串口通讯"><a href="#串口通讯" class="headerlink" title="串口通讯"></a>串口通讯</h2><h2 id="SPI通讯"><a href="#SPI通讯" class="headerlink" title="SPI通讯"></a>SPI通讯</h2><h2 id="232通讯"><a href="#232通讯" class="headerlink" title="232通讯"></a>232通讯</h2><h2 id="485通讯"><a href="#485通讯" class="headerlink" title="485通讯"></a>485通讯</h2><h2 id="CAN总线通讯"><a href="#CAN总线通讯" class="headerlink" title="CAN总线通讯"></a>CAN总线通讯</h2>]]></content>
    
    
    <categories>
      
      <category>电路</category>
      
    </categories>
    
    
    <tags>
      
      <tag>通讯电路</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>认识相关电子元器件</title>
    <link href="/2022/05/22/%E7%94%B5%E8%B7%AF/%E8%AE%A4%E8%AF%86%E7%9B%B8%E5%85%B3%E7%94%B5%E5%AD%90%E5%85%83%E5%99%A8%E4%BB%B6/"/>
    <url>/2022/05/22/%E7%94%B5%E8%B7%AF/%E8%AE%A4%E8%AF%86%E7%9B%B8%E5%85%B3%E7%94%B5%E5%AD%90%E5%85%83%E5%99%A8%E4%BB%B6/</url>
    
    <content type="html"><![CDATA[<p>集成电路（Integrated Circuit）都是由这些基础电子元器件组合而成，所以对于这些器件的使用，需要了解其特性，才能更方便灵活的使用他们；由于本文章收集的内容大多来自网络，所以可能存在错误或者遗漏，还请大家纠正补充，非常感谢。</p><h2 id="电阻-Resistor"><a href="#电阻-Resistor" class="headerlink" title="电阻(Resistor)"></a>电阻(Resistor)</h2><div class="note note-info">            <p>在电磁学里，电阻是一个物体对于<strong>电流通过的阻碍能力</strong>，单位为：Ω（欧姆）。</p>          </div><table style="width:100%">  <tr>    <td> <div align="center"> 器件符号 </div> </td>    <td> <div align="center"> 电路标识 </div> </td>    <td> <div align="center"> 关注参数 </div> </td>  </tr>  <tr>    <th width="15%"> <img src="/2022/05/22/%E7%94%B5%E8%B7%AF/%E8%AE%A4%E8%AF%86%E7%9B%B8%E5%85%B3%E7%94%B5%E5%AD%90%E5%85%83%E5%99%A8%E4%BB%B6/Resistor.png">  </th>    <td> <div align="center"> R </div> </td>    <td> <div align="center">     阻值 <br>    功率 </div> </td>  </tr></table><h2 id="电容-Capacitance"><a href="#电容-Capacitance" class="headerlink" title="电容(Capacitance)"></a>电容(Capacitance)</h2><div class="note note-info">            <p>在电路学里，给定电压，<strong>电容器储存电荷的能力</strong>，单位为：F（法拉）。</p>          </div><table style="width:100%">  <tr>    <td> <div align="center"> 器件符号 </div> </td>    <td> <div align="center"> 电路标识 </div> </td>    <td> <div align="center"> 关注参数 </div> </td>  </tr>  <tr>    <th width="15%"> <img src="/2022/05/22/%E7%94%B5%E8%B7%AF/%E8%AE%A4%E8%AF%86%E7%9B%B8%E5%85%B3%E7%94%B5%E5%AD%90%E5%85%83%E5%99%A8%E4%BB%B6/Capacitance.png">  </th>    <td> <div align="center"> C </div> </td>    <td> <div align="center">     容值 <br>    耐压 </div> </td>  </tr></table><h2 id="电感-Inductance"><a href="#电感-Inductance" class="headerlink" title="电感(Inductance)"></a>电感(Inductance)</h2><div class="note note-info">            <p>电感是闭合回路的一种属性，即当通过闭合回路的电流改变时，会出现电动势来<strong>抵抗电流的改变</strong>，单位为：H（亨利）。</p>          </div><table style="width:100%">  <tr>    <td> <div align="center"> 器件符号 </div> </td>    <td> <div align="center"> 电路标识 </div> </td>    <td> <div align="center"> 关注参数 </div> </td>  </tr>  <tr>    <th width="15%"> <img src="/2022/05/22/%E7%94%B5%E8%B7%AF/%E8%AE%A4%E8%AF%86%E7%9B%B8%E5%85%B3%E7%94%B5%E5%AD%90%E5%85%83%E5%99%A8%E4%BB%B6/Inductance.png">  </th>    <td> <div align="center"> L </div> </td>    <td> <div align="center"> ??? </div> </td>  </tr></table><h2 id="二极管"><a href="#二极管" class="headerlink" title="二极管()"></a>二极管()</h2><div class="note note-info">            <p>二极管。</p>          </div><h2 id="光耦-Optical-Coupler"><a href="#光耦-Optical-Coupler" class="headerlink" title="光耦(Optical Coupler)"></a>光耦(Optical Coupler)</h2><div class="note note-info">            <p><strong>光电耦合元件</strong>是以光（含可见光、红外线等）作为媒介来传输电信号的一组装置，其功能是平时让输入电路及输出电路之间隔离，在需要时可以使电信号通过隔离层的传送方式。光电耦合元件（英语：optical coupler，或英语：photo coupler），亦称<strong>光耦合器</strong>、<strong>光隔离器</strong>以及<strong>光电隔离器</strong>，简称<strong>光耦</strong>。</p><p>光电耦合元件可分为模拟与数字两种，都是由光发射器和光侦测器组成。光发射器和光侦测器通常会整合到同一个封装，但它们之间除了光束之外不会有任何电气或实体连接。</p><p>常见的光电耦合元件是将发光二极体（LED）及光电晶体（LED）放在一个不透明的封装中。其他的组合有LED-光电二极管、LED-LASCR及灯泡-光敏电阻。光电耦合元件一般会传递数字信号，但配合一些技术，也可以用光电耦合元件传送模拟信号。</p><p>光电耦合元件广泛用于电气隔离、电平转换、驱动电路及工业通讯中，但因为寄生输入输出电容问题，其共模瞬变抑制（Common-Mode Transient Immunity）能力较弱，此外，其速度受限、光电耦合元件的功耗较高，以及元件容易老化都是其问题。</p>          </div><table style="width:100%">  <tr>    <td> <div align="center"> 器件符号 </div> </td>    <td> <div align="center"> 电路标识 </div> </td>    <td> <div align="center"> 关注参数 </div> </td>  </tr>  <tr>    <th width="15%"> <img src="/2022/05/22/%E7%94%B5%E8%B7%AF/%E8%AE%A4%E8%AF%86%E7%9B%B8%E5%85%B3%E7%94%B5%E5%AD%90%E5%85%83%E5%99%A8%E4%BB%B6/Optical_Coupler.png">  </th>    <td> <div align="center"> O </div> </td>    <td> <div align="center"> ??? </div> </td>  </tr></table><h2 id="压敏电阻"><a href="#压敏电阻" class="headerlink" title="压敏电阻()"></a>压敏电阻()</h2><div class="note note-info">            <p>压敏电阻。</p>          </div><h2 id="瞬态抑制二极管"><a href="#瞬态抑制二极管" class="headerlink" title="瞬态抑制二极管()"></a>瞬态抑制二极管()</h2><div class="note note-info">            <p>瞬态抑制二极管。</p>          </div><h2 id="三极管-BJT"><a href="#三极管-BJT" class="headerlink" title="三极管(BJT)"></a>三极管(BJT)</h2><div class="note note-info">            <p>三极管是一种<strong>控制电流</strong>的半导体器件。<br>三极管的作用是把微弱信号放大成幅度值较大的电信号，也可以用作无触点开关。<br>三极管有截止、放大、饱和三种工作状态。<br>在模拟电路中，一般使用放大状态，用于将电流进行放大；而在数字电路中，主要用于三极管的开关特性，只用到了截止和饱和状态。<br>三极管有2种类型，分为NPN和PNP，区分口诀：箭头朝内PNP，箭头朝外PNP。<br>两种类型的三极管导通区分方法可以看箭头：箭头的始端比末端电压高0.7V就导通。</p>          </div><h3 id="NPN型三极管"><a href="#NPN型三极管" class="headerlink" title="NPN型三极管"></a>NPN型三极管</h3><table style="width:100%">  <tr>    <td> <div align="center"> 器件符号 </div> </td>    <td> <div align="center"> 电路标识 </div> </td>    <td> <div align="center"> 引脚定义 </div> </td>    <td> <div align="center"> 导通条件 </div> </td>    <td> <div align="center"> 关注参数 </div> </td>    <td> <div align="center"> 控制逻辑 </div> </td>  </tr>  <tr>    <th width="15%"> <img src="/2022/05/22/%E7%94%B5%E8%B7%AF/%E8%AE%A4%E8%AF%86%E7%9B%B8%E5%85%B3%E7%94%B5%E5%AD%90%E5%85%83%E5%99%A8%E4%BB%B6/NPN.png">  </th>    <td> <div align="center"> N </div> </td>    <td nowrap="nowrap"> <div align="center">     B:基极(Base) <br>    E:发射极(Emitter) <br>    C:集电极(Collector) </div> </td>    <td nowrap="nowrap"> <div align="center"> V(B) - V(E) > 0.7V </div> </td>    <td> <div align="center"> ??? </div> </td>    <td> <div align="center"> B作为控制端时，高电平时导通，低电平关断 </div> </td>  </tr></table><h3 id="PNP型三极管"><a href="#PNP型三极管" class="headerlink" title="PNP型三极管"></a>PNP型三极管</h3><table style="width:100%">  <tr>    <td> <div align="center"> 器件符号 </div> </td>    <td> <div align="center"> 电路标识 </div> </td>    <td> <div align="center"> 引脚定义 </div> </td>    <td> <div align="center"> 导通条件 </div> </td>    <td> <div align="center"> 关注参数 </div> </td>    <td> <div align="center"> 控制逻辑 </div> </td>  </tr>  <tr>    <th width="15%"> <img src="/2022/05/22/%E7%94%B5%E8%B7%AF/%E8%AE%A4%E8%AF%86%E7%9B%B8%E5%85%B3%E7%94%B5%E5%AD%90%E5%85%83%E5%99%A8%E4%BB%B6/PNP.png">  </th>    <td> <div align="center"> N </div> </td>    <td nowrap="nowrap"> <div align="center">     B:基极(Base) <br>    E:发射极(Emitter) <br>    C:集电极(Collector) </div> </td>    <td nowrap="nowrap"> <div align="center"> V(E) - V(B) > 0.7V </div> </td>    <td> <div align="center"> ??? </div> </td>    <td> <div align="center"> B作为控制端时，高电平时关断，低电平导通 </div> </td>  </tr></table><h2 id="场效应管"><a href="#场效应管" class="headerlink" title="场效应管"></a>场效应管</h2><div class="note note-info">            <p>场效应管是一种<strong>控制电压</strong>的半导体器件。</p>          </div><h3 id="NMOS-N型金属氧化物半导体"><a href="#NMOS-N型金属氧化物半导体" class="headerlink" title="NMOS - N型金属氧化物半导体"></a>NMOS - N型金属氧化物半导体</h3><table style="width:100%">  <tr>    <td> <div align="center"> 器件符号 </div> </td>    <td> <div align="center"> 电路标识 </div> </td>    <td> <div align="center"> 引脚定义 </div> </td>    <td> <div align="center"> 导通条件 </div> </td>    <td> <div align="center"> 关注参数 </div> </td>    <td> <div align="center"> 使用场景 </div> </td>  </tr>  <tr>    <th width="15%"> <img src="/2022/05/22/%E7%94%B5%E8%B7%AF/%E8%AE%A4%E8%AF%86%E7%9B%B8%E5%85%B3%E7%94%B5%E5%AD%90%E5%85%83%E5%99%A8%E4%BB%B6/NMOS.png">  </th>    <td> <div align="center"> Q </div> </td>    <td> <div align="center">     G:栅极(Gate) <br>    S:源极(Source) <br>    D:漏极(Drain) </div> </td>    <td> <div align="center"> V(G) - V(S) > V GS(th) </div> </td>    <td> <div align="center">     V DS <br>    V GS <br>    I D <br>    R DS(on) <br>    V GS(th) </div> </td>    <td> <div align="center"> NMOS一般用在信号控制上 </div> </td>  </tr></table><p>选型时，我们需要关注以下参数：</p><ol><li>电流方向：<strong>漏极(Drain) —&gt; 源极(Source)</strong></li><li><strong>V GS(th)</strong>: 控制MOS导通时所需的栅极(Gate)，一般为<strong>正电压</strong>。</li><li><strong>R DS(on)</strong>: 漏极(Drain)与源极(Source)之间的电阻，电阻越小，MOS导通时压降越小，电流越大，反之亦然。</li><li><strong>C GS</strong>:     栅极(Gate)与源极(Source)之间的电容，电容越小，充电时间越短，控制MOS管的时间也相应越短，反之亦然。</li></ol><p>注意事项：</p><blockquote><p><strong>R DS(on)</strong> 与 <strong>C GS</strong> 成反比，这是由于制造工艺导致的，所以在选型时，需要权衡他们的参数。<br>NMOS在实际应用电路中，多作为<strong>下管</strong>使用，<strong>源极(Source)<strong>直接</strong>接地</strong>。<br>对于无源器件，一般使用NMOS作为<strong>下管</strong>使用。</p></blockquote><p>示例电路：</p><p><img src="/2022/05/22/%E7%94%B5%E8%B7%AF/%E8%AE%A4%E8%AF%86%E7%9B%B8%E5%85%B3%E7%94%B5%E5%AD%90%E5%85%83%E5%99%A8%E4%BB%B6/NMOS-EG.png" alt="NMOS示例电路"></p><h3 id="PMOS-P型金属氧化物半导体"><a href="#PMOS-P型金属氧化物半导体" class="headerlink" title="PMOS - P型金属氧化物半导体"></a>PMOS - P型金属氧化物半导体</h3><table style="width:100%">  <tr>    <td> <div align="center"> 器件符号 </div> </td>    <td> <div align="center"> 电路标识 </div> </td>    <td> <div align="center"> 引脚定义 </div> </td>    <td> <div align="center"> 导通条件 </div> </td>    <td> <div align="center"> 关注参数 </div> </td>    <td> <div align="center"> 使用场景 </div> </td>  </tr>  <tr>    <th width="15%"> <img src="/2022/05/22/%E7%94%B5%E8%B7%AF/%E8%AE%A4%E8%AF%86%E7%9B%B8%E5%85%B3%E7%94%B5%E5%AD%90%E5%85%83%E5%99%A8%E4%BB%B6/PMOS.png">  </th>    <td> <div align="center"> Q </div> </td>    <td> <div align="center">     G:栅极(Gate) <br>    S:源极(Source) <br>    D:漏极(Drain) </div> </td>    <td> <div align="center"> V(G) - V(S) > V GS(th) </div> </td>    <td> <div align="center">     V DS <br>    V GS <br>    I D <br>    R DS(on) <br>    V GS(th) </div> </td>    <td> <div align="center"> PMOS一般使用在电源开关上 </div> </td>  </tr></table><p>选型时，我们需要关注以下参数：</p><ol><li>电流方向：<strong>源极(Source) —&gt; 漏极(Drain)</strong></li><li><strong>V GS(th)</strong>: 控制MOS导通时所需的栅极(Gate)，一般为<strong>负电压</strong>。</li><li><strong>R DS(on)</strong>: 漏极(Drain)与源极(Source)之间的电阻，电阻越小，MOS导通时压降越小，电流越大，反之亦然。</li><li><strong>C GS</strong>:     栅极(Gate)与源极(Source)之间的电容，电容越小，充电时间越短，控制MOS管的时间也相应越短，反之亦然。</li></ol><p>注意事项：</p><blockquote><p><strong>R DS(on)</strong> 与 <strong>C GS</strong> 成反比，这是由于制造工艺导致的，所以在选型时，需要权衡他们的参数。<br>PMOS在实际应用电路中，多作为<strong>上管</strong>使用，<strong>源极(Source)<strong>接</strong>电源（VCC）</strong>。<br>对于有源器件，一般使用PMOS作为<strong>上管</strong>使用。</p></blockquote><p>电路示例</p><p><img src="/2022/05/22/%E7%94%B5%E8%B7%AF/%E8%AE%A4%E8%AF%86%E7%9B%B8%E5%85%B3%E7%94%B5%E5%AD%90%E5%85%83%E5%99%A8%E4%BB%B6/PMOS-EG.png" alt="PMOS示例电路"></p><h3 id="CMOS-NOMS-PMOS组合"><a href="#CMOS-NOMS-PMOS组合" class="headerlink" title="CMOS - NOMS+PMOS组合()"></a>CMOS - NOMS+PMOS组合()</h3><div class="note note-info">            <p>NOMS+PMOS组合。</p>          </div><h2 id="运算放大器"><a href="#运算放大器" class="headerlink" title="运算放大器()"></a>运算放大器()</h2><div class="note note-info">            <p>运算放大器。</p>          </div>]]></content>
    
    
    <categories>
      
      <category>电路</category>
      
    </categories>
    
    
    <tags>
      
      <tag>电子元器件</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>DIY加热焊台</title>
    <link href="/2022/04/17/%E5%B5%8C%E5%85%A5%E5%BC%8F/C51/DIY%E5%8A%A0%E7%83%AD%E7%84%8A%E5%8F%B0/"/>
    <url>/2022/04/17/%E5%B5%8C%E5%85%A5%E5%BC%8F/C51/DIY%E5%8A%A0%E7%83%AD%E7%84%8A%E5%8F%B0/</url>
    
    <content type="html"><![CDATA[<h2 id="硬件"><a href="#硬件" class="headerlink" title="硬件"></a>硬件</h2><h3 id="主控1：STC12C5A60S2"><a href="#主控1：STC12C5A60S2" class="headerlink" title="主控1：STC12C5A60S2"></a>主控1：<a href="http://www.stcmcudata.com/datasheet/stc/STC-AD-PDF/STC12C5A60S2.pdf">STC12C5A60S2</a></h3><p>工作电压：<code>4.0~5.5V</code><br>Flash：<code>60K</code><br>EEPROM：<code>1K</code><br>封装：LQFP44<br>价格：￥5.5</p><h3 id="主控2：STC89C52"><a href="#主控2：STC89C52" class="headerlink" title="主控2：STC89C52"></a>主控2：<a href="http://www.stcmcudata.com/datasheet/STC89C52.pdf">STC89C52</a></h3><blockquote><p>由于<strong>STC89C52 Flash只有8K</strong>，所以程序需要进行修改和精简后才能使用。</p></blockquote><p>工作电压：<code>3.8~5.5V</code><br>Flash：<code>8K</code><br>EEPROM：<code>5K</code><br>封装：LQFP44<br>价格：￥4.2</p><p><font color="#FF0000">TIPS:主控1和主控2任选其一即可。</font></p><hr><h3 id="热电偶转换器：K型热点偶数字转换器MAX6675"><a href="#热电偶转换器：K型热点偶数字转换器MAX6675" class="headerlink" title="热电偶转换器：K型热点偶数字转换器MAX6675"></a>热电偶转换器：<a href="https://item.szlcsc.com/16712.html">K型热点偶数字转换器MAX6675</a></h3><blockquote><p>该芯片需搭配<a href="https://detail.tmall.com/item.htm?id=594391548203&spm=a1z09.2.0.0.72122e8dVje1rK&_u=q24e6vdje53d">K型热电偶</a>使用。</p></blockquote><p>工作电压：<code>-0.3~6.0V</code><br>工作温度：<code>-20~85℃</code><br>测量温度：<code>0~1024℃</code><br>通讯方式：<code>SPI</code><br>封装：8-SOIC<br>价格：￥7.1</p><hr><h3 id="热敏电阻："><a href="#热敏电阻：" class="headerlink" title="热敏电阻："></a>热敏电阻：</h3><hr><h3 id="显示屏：LCD1602"><a href="#显示屏：LCD1602" class="headerlink" title="显示屏：LCD1602"></a>显示屏：<a href="https://item.taobao.com/item.htm?spm=a230r.1.14.18.405f62efH74Ga5&id=561889130386&ns=1&abbucket=7#detail">LCD1602</a></h3><p>工作电压：<code>3.0~5.0V</code><br>数据传输：<code>8位并行数据传输</code><br>控制方式：<code>3个控制引脚（RS，RW，E）</code><br>封装：1*16P 2.54mm排针<br>价格：￥8.5</p><hr><h3 id="NMOS：TPCA8028-H"><a href="#NMOS：TPCA8028-H" class="headerlink" title="NMOS：TPCA8028-H"></a>NMOS：<a href="https://toshiba.semicon-storage.com/ap-en/semiconductor/product/mosfets/12v-300v-mosfets/detail.TPCA8028-H.html">TPCA8028-H</a></h3><p>V GS(th)：<code>1.3~2.3V</code><br>R DS(on)：<code>2.0~2.8mΩ</code><br>C GS：<code>6000~7800pF</code></p><hr><h3 id="独立按键"><a href="#独立按键" class="headerlink" title="独立按键"></a>独立按键</h3><hr><h2 id="软件"><a href="#软件" class="headerlink" title="软件"></a>软件</h2><p>(构建中…)</p>]]></content>
    
    
    <categories>
      
      <category>C51</category>
      
    </categories>
    
    
    <tags>
      
      <tag>DIY</tag>
      
      <tag>加热焊台</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>组装一台Prusa i3 MK3S+ &amp; Bear Frame Upgrade 2.1</title>
    <link href="/2022/03/08/3D%E6%89%93%E5%8D%B0/%E7%BB%84%E8%A3%85%E4%B8%80%E5%8F%B0Prusa%20i3%20MK3S+/"/>
    <url>/2022/03/08/3D%E6%89%93%E5%8D%B0/%E7%BB%84%E8%A3%85%E4%B8%80%E5%8F%B0Prusa%20i3%20MK3S+/</url>
    
    <content type="html"><![CDATA[<h2 id="框架部分"><a href="#框架部分" class="headerlink" title="框架部分"></a>框架部分</h2><p>框架没有使用原版 Prusa i3 MK3S+ 的固定支架，而是使用 Bear Frame Upgrade 型材支架，后者比前者更稳定，而且后续还支持多种扩展，但组装难度会有所提升。</p><h2 id="型材"><a href="#型材" class="headerlink" title="型材"></a>型材</h2><table style="width:100%">    <tr>        <td>            <div align="center"> 欧标2040V型材 </div>        </td>        <td>            <div align="center"> 尺寸信息 </div>        </td>    </tr>    <tr>        <th width="30%">            <img src="/2022/03/08/3D%E6%89%93%E5%8D%B0/%E7%BB%84%E8%A3%85%E4%B8%80%E5%8F%B0Prusa%20i3%20MK3S+/profiles.jpg">         </th>        <td>            <div align="center">            <font color="#ff8f28"> <b> 290mm * 1 </b> </font> <br>            <font color="#16db80"> <b> 331mm * 2 </b> </font> <br>            <font color="#2143e8"> <b> 359mm * 2 </b> </font> <br>            <font color="#dc53bb"> <b> 370mm * 2 </b> </font> <br>            </div>        </td>    </tr></table><h2 id="光轴"><a href="#光轴" class="headerlink" title="光轴"></a>光轴</h2><table style="width:100%">  <tr>    <td>        <div align="center"> 光轴 </div>    </td>    <td>        <div align="center"> 尺寸信息 </div>    </td>  </tr>  <tr>    <th width="30%"> <img src="/2022/03/08/3D%E6%89%93%E5%8D%B0/%E7%BB%84%E8%A3%85%E4%B8%80%E5%8F%B0Prusa%20i3%20MK3S+/linear_optical_axis.png">  </th>    <td>        <div align="center">        <font color="#a349a4"> X轴光轴尺寸：<b>Φ8 370mm * 2</b> </font> <br>        <font color="#2143e8"> Y轴光轴尺寸：<b>Φ8 330mm * 2</b> </font> <br>        <font color="#16db80"> Z轴光轴尺寸：<b>Φ8 320mm * 2</b> </font> <br>        </div>    </td>  </tr></table><div class="note note-warning">            <p>注意：<br>由于国内大部分成品直线丝杆电机的丝杆只有<strong>300mm</strong>，所以可以将Z轴光轴改为<font color="#16db80"> <b>Φ8 300mm * 2</b> </font>；以免后续组装光轴过长，而丝杆电机长度又不够导致打印时模型Z轴会产生振纹。</p>          </div><hr><h2 id="3D打印部件"><a href="#3D打印部件" class="headerlink" title="3D打印部件"></a>3D打印部件</h2><h3 id="X轴"><a href="#X轴" class="headerlink" title="X轴"></a>X轴</h3><table style="width:100%">  <tr>    <td> <div align="center"> X轴总成 </div> </td>    <td> <div align="center"> 打印部件 </div> </td>    <td> <div align="center"> 推荐材料 </div> </td>  </tr>  <tr>    <th width="30%"> <img src="/2022/03/08/3D%E6%89%93%E5%8D%B0/%E7%BB%84%E8%A3%85%E4%B8%80%E5%8F%B0Prusa%20i3%20MK3S+/prusa_i3_mk3s+_x-axis_assembly.jpg">  </th>    <td>        <div align="center">        <a href="https://media.prusaprinters.org/media/prints/57217/stls/567909_76ce3256-1d9d-4b45-9d7f-0067d518b1d3/x-end-motor.stl#_ga=2.8802934.213837010.1646667293-425094109.1646143956"> x-end-motor.stl * 1 </a> <br>        <a href="https://media.prusaprinters.org/media/prints/57217/stls/567908_061a6c4a-ec0e-4f13-876f-a1a8ea914516/x-end-idler.stl#_ga=2.8802934.213837010.1646667293-425094109.1646143956"> x-end-idler.stl * 1 </a> <br>        </div>    </td>    <td> <div align="center"> PETG </div></td>   </tr></table><h3 id="Y轴"><a href="#Y轴" class="headerlink" title="Y轴"></a>Y轴</h3><table style="width:100%">  <tr>    <td> <div align="center"> Y轴总成 </div> </td>    <td> <div align="center"> 打印部件 </div> </td>    <td> <div align="center"> 推荐材料 </div> </td>  </tr>  <tr>    <th width="30%"> <img src="/2022/03/08/3D%E6%89%93%E5%8D%B0/%E7%BB%84%E8%A3%85%E4%B8%80%E5%8F%B0Prusa%20i3%20MK3S+/prusa_i3_bear_upgrade_y_axis_assembly.jpg">  </th>    <td>        <div align="center">        <a href="https://github.com/gregsaun/prusa_i3_bear_upgrade/blob/master/printed_parts/mk3_mk3s/stl/y_bearing_holder.stl"> y_bearing_holder.stl * 3 </a> <br>        <a href="https://github.com/gregsaun/prusa_i3_bear_upgrade/blob/master/printed_parts/mk3_mk3s/stl/y_belt_holder.stl"> y_belt_holder.stl * 1 </a> <br>        <a href="https://github.com/gregsaun/prusa_i3_bear_upgrade/blob/master/printed_parts/common_to_all_versions/stl/y_end_caps.stl"> y_end_caps.stl * 2 </a> <br>        <a href="https://github.com/gregsaun/prusa_i3_bear_upgrade/blob/master/printed_parts/common_to_all_versions/stl/y_idler_mount.stl"> y_idler_mount.stl * 1 </a> <br>        <a href="https://github.com/gregsaun/prusa_i3_bear_upgrade/blob/master/printed_parts/common_to_all_versions/stl/y_idler_tensioner.stl"> y_idler_tensioner.stl * 1 </a> <br>        <a href="https://github.com/gregsaun/prusa_i3_bear_upgrade/blob/master/printed_parts/mk3_mk3s/stl/y_motor_mount.stl"> y_motor_mount.stl * 1 </a> <br>        <a href="https://github.com/gregsaun/prusa_i3_bear_upgrade/blob/master/printed_parts/common_to_all_versions/stl/y_rod_holder.stl"> y_rod_holder.stl * 4 </a> <br>        <a href="https://github.com/gregsaun/prusa_i3_bear_upgrade/blob/master/printed_parts/common_to_all_versions/stl/build_helper_y.stl"> build_helper_y.stl * 1 </a> <br>        </div>    </td>    <td> <div align="center"> PETG </div></td>   </tr></table><h3 id="Z轴"><a href="#Z轴" class="headerlink" title="Z轴"></a>Z轴</h3><table style="width:100%">  <tr>    <td> <div align="center"> Z轴总成 </div> </td>    <td> <div align="center"> 打印部件 </div> </td>    <td> <div align="center"> 推荐材料 </div> </td>  </tr>  <tr>    <th width="30%"> <img src="/2022/03/08/3D%E6%89%93%E5%8D%B0/%E7%BB%84%E8%A3%85%E4%B8%80%E5%8F%B0Prusa%20i3%20MK3S+/prusa_i3_bear_upgrade_z_axis_assembly.jpg">  </th>    <td> <div align="center">    <a href="https://github.com/gregsaun/prusa_i3_bear_upgrade/blob/master/printed_parts/common_to_all_versions/stl/z_end_caps.stl"> z_end_caps.stl * 1 </a> <br>    <a href="https://github.com/gregsaun/prusa_i3_bear_upgrade/blob/master/printed_parts/common_to_all_versions/stl/z_leadscrew_cap.stl"> z_leadscrew_cap.stl * 2 </a> <br>    <a href="https://github.com/gregsaun/prusa_i3_bear_upgrade/blob/master/printed_parts/common_to_all_versions/stl/z_motor_mounts.stl"> z_motor_mounts.stl * 1 </a> <br>    <a href="https://github.com/gregsaun/prusa_i3_bear_upgrade/blob/master/printed_parts/mk3_mk3s/stl/z_tops.stl"> z_tops.stl * 1 </a> <br>    <a href="https://github.com/gregsaun/prusa_i3_bear_upgrade/blob/master/printed_parts/common_to_all_versions/stl/build_helper_z.stl"> build_helper_z.stl * 1 <font color="#ff0000"> <b> ---> 长度为106mm ± 0.5mm <b> </b></b></font> </a> <br>        </div>    </td>    <td> <div align="center"> PETG </div></td>   </tr></table><h3 id="E轴"><a href="#E轴" class="headerlink" title="E轴"></a>E轴</h3><table style="width:100%">  <tr>    <td> <div align="center"> E轴总成 </div> </td>    <td> <div align="center"> 打印部件 </div> </td>    <td> <div align="center"> 推荐材料 </div> </td>  </tr>  <tr>    <th width="30%"> <img src="/2022/03/08/3D%E6%89%93%E5%8D%B0/%E7%BB%84%E8%A3%85%E4%B8%80%E5%8F%B0Prusa%20i3%20MK3S+/prusa_i3_mk3s+_e-axis_assembly.jpg">  </th>    <td> <div align="center">    <a href="https://media.prusaprinters.org/media/prints/57217/stls/567897_39181fe1-f21a-497d-932b-3ffdaa10f12d/extruder-body.stl#_ga=2.12959092.213837010.1646667293-425094109.1646143956"> extruder-body.stl * 1 </a> <br>    <a href="https://media.prusaprinters.org/media/prints/57217/stls/567896_23528d05-2742-48bc-843f-af3365256fdd/adapter-printer.stl#_ga=2.12959092.213837010.1646667293-425094109.1646143956"> adapter-printer.stl * 1 </a> <br>    <a href="https://media.prusaprinters.org/media/prints/57217/stls/567895_ec3088f3-d1d8-406c-90d9-ba55e308d980/fs-lever.stl#_ga=2.12959092.213837010.1646667293-425094109.1646143956"> fs-lever.stl * 1 </a> <br>    <a href="https://media.prusaprinters.org/media/prints/57217/stls/567894_f790322a-c664-4b68-b2e0-a928c507258c/extruder-motor-plate.stl#_ga=2.152411386.213837010.1646667293-425094109.1646143956"> extruder-motor-plate.stl * 1 </a> <br>    <a href="https://media.prusaprinters.org/media/prints/57217/stls/567898_4824aaeb-5ada-4ec2-b166-e31f6ba7398f/extruder-cover.stl#_ga=2.152411386.213837010.1646667293-425094109.1646143956"> extruder-cover.stl * 1 </a> <br>    <a href="https://media.prusaprinters.org/media/prints/57217/stls/567900_08f0474f-105a-471d-a054-712ec968dd9a/extruder-idler.stl#_ga=2.152411386.213837010.1646667293-425094109.1646143956"> extruder-idler.stl * 1 </a> <br>    <a href="https://media.prusaprinters.org/media/prints/57217/stls/752046_1f2c64ca-0a53-4dcc-a712-564c74c8b8d6/x-carriage.stl#_ga=2.152411386.213837010.1646667293-425094109.1646143956"> x-carriage.stl * 1 </a> <br>    <a href="https://media.prusaprinters.org/media/prints/57217/stls/567901_2630115a-f92f-4efc-914d-a5443eedcd77/fs-cover.stl#_ga=2.152411386.213837010.1646667293-425094109.1646143956"> fs-cover.stl * 1 </a> <br>    <a href="https://media.prusaprinters.org/media/prints/57217/stls/567902_189de1d6-c89d-48d2-837d-e598af502205/print-fan-support.stl#_ga=2.152411386.213837010.1646667293-425094109.1646143956"> print-fan-support.stl * 1 </a> <br>    <a href="https://media.prusaprinters.org/media/prints/57217/stls/567903_46ebf83d-21be-433f-af9f-315ebdc1d8a0/fan-shroud.stl#_ga=2.152411386.213837010.1646667293-425094109.1646143956"> fan-shroud.stl * 1 ⚠ </a> <br>    <a href="https://media.prusaprinters.org/media/prints/57217/stls/567905_8901a08c-4f1e-492e-8c6f-369c74f592b3/cable-holder.stl#_ga=2.152411386.213837010.1646667293-425094109.1646143956"> cable-holder.stl * 1 </a> <br>    <a href="https://media.prusaprinters.org/media/prints/57217/stls/752045_bebd3938-ebb9-49f4-82d4-fd8bc8010c8c/x-carriage-back.stl#_ga=2.152411386.213837010.1646667293-425094109.1646143956"> x-carriage-back.stl * 1 </a> <br>    </div> </td>    <td> <div align="center"> PETG </div> </td>  </tr></table><div class="note note-warning">            <p>注意：<br>标注⚠的部件需要使用耐高温耗材，推荐使用ASA或者PC-Blend。</p>          </div><h3 id="脚垫"><a href="#脚垫" class="headerlink" title="脚垫"></a>脚垫</h3><table style="width:100%">  <tr>    <td> <div align="center"> 框架脚垫 </div> </td>    <td> <div align="center"> 打印部件 </div> </td>    <td> <div align="center"> 推荐材料 </div> </td>  </tr>  <tr>    <th width="30%"> <img src="/2022/03/08/3D%E6%89%93%E5%8D%B0/%E7%BB%84%E8%A3%85%E4%B8%80%E5%8F%B0Prusa%20i3%20MK3S+/foot.jpg">  </th>    <td> <div align="center">    <a href="https://github.com/gregsaun/prusa_i3_bear_upgrade/blob/master/printed_parts/common_to_all_versions/stl/foot.stl"> foot.stl * 4 </a> <br>        </div>    </td>    <td> <div align="center"> PETG </div></td>   </tr></table><div class="note note-info">            <p>框架脚垫可以使用橡胶脚垫，具有抗震作用，推荐购买规格：20 <em>16</em> 20。</p>          </div><hr><h2 id="硬件部分"><a href="#硬件部分" class="headerlink" title="硬件部分"></a>硬件部分</h2><table style="width:100%">  <tr>    <td> <div align="center"> 硬件 </div> </td>    <td> <div align="center"> 功能 </div> </td>    <td> <div align="center"> 资料 </div> </td>  </tr>  <tr>    <th width="30%"> <img src="/2022/03/08/3D%E6%89%93%E5%8D%B0/%E7%BB%84%E8%A3%85%E4%B8%80%E5%8F%B0Prusa%20i3%20MK3S+/arduino_mega_2560_rev3.png">  </th>    <td> <div align="center"> Arduino Mega 2560 Rev3 主控板 </div> </td>    <td> <div align="center">    <a href="https://docs.arduino.cc/hardware/mega-2560"> Arduino Mega 2560 Rev3 官方硬件参数 </a> <br> </div> </td>  </tr>  <tr>    <th width="30%"> <img src="/2022/03/08/3D%E6%89%93%E5%8D%B0/%E7%BB%84%E8%A3%85%E4%B8%80%E5%8F%B0Prusa%20i3%20MK3S+/ramps_1.4.jpg">  </th>    <td> <div align="center"> 3D打印机扩展板 </div> </td>    <td> <div align="center">    <a href="https://reprap.org/wiki/RAMPS_1.4"> RAMPS_1.4 官方Wiki </a> <br> </div> </td>  </tr></table><h2 id="步进电机驱动板"><a href="#步进电机驱动板" class="headerlink" title="步进电机驱动板"></a>步进电机驱动板</h2><table style="width:100%">  <tr>    <td> <div align="center"> A4988驱动板 </div> </td>    <td> <div align="center"> 步进模式 </div> </td>    <td> <div align="center"> 参数 </div> </td>    <td> <div align="center"> 备注 </div> </td>  </tr>  <tr>    <th width="30%"> <img src="/2022/03/08/3D%E6%89%93%E5%8D%B0/%E7%BB%84%E8%A3%85%E4%B8%80%E5%8F%B0Prusa%20i3%20MK3S+/A4988.jpg">  </th>    <td> <div align="center">    <nobr>    full    ,    <sup>1</sup>&frasl;<sub>2</sub>    ,    <sup>1</sup>&frasl;<sub>4</sub>    ,    <sup>1</sup>&frasl;<sub>8</sub>    ,    <sup>1</sup>&frasl;<sub>16</sub>    </nobr> </div> </td>    <td> <div align="center">    VDD:3.0~5.5V <br>    VMOT:8~35V <br>    Iout:±2A <br>    </div> </td>    <td> <div align="center"> A4988 需要配置 <b>RSENSE</b> 和 <b>VREF</b> ，来决定最大输出电流，请按照所用步进电机参数和芯片文档来配置实际输出最大电流，否则可能造成步进电机损坏！！！ </div> </td>  </tr>  <tr>    <td> <div align="center"> TMC2208驱动板 </div> </td>    <td> <div align="center"> 步进模式 </div> </td>    <td> <div align="center"> 参数 </div> </td>    <td> <div align="center"> 备注 </div> </td>  </tr>  <tr>    <th width="30%"> <img src="/2022/03/08/3D%E6%89%93%E5%8D%B0/%E7%BB%84%E8%A3%85%E4%B8%80%E5%8F%B0Prusa%20i3%20MK3S+/TMC2208-V3.0.png">  </th>    <td> <div align="center">    <sup>1</sup>&frasl;<sub>2</sub>    ,    <sup>1</sup>&frasl;<sub>4</sub>    ,    <sup>1</sup>&frasl;<sub>8</sub>    ,    <sup>1</sup>&frasl;<sub>16</sub>     </div> </td>    <td> <div align="center">    VDD:3.3~5.0V <br>    VMOT:4.75~36V <br>    Iout:2A(peak) <br>    </div> </td>    <td> 22</td>  </tr>  <tr>    <td> <div align="center"> TMC2209驱动板 </div> </td>    <td> <div align="center"> 步进模式 </div> </td>    <td> <div align="center"> 参数 </div> </td>    <td> <div align="center"> 备注 </div> </td>  </tr>  <tr>    <th width="30%"> <img src="/2022/03/08/3D%E6%89%93%E5%8D%B0/%E7%BB%84%E8%A3%85%E4%B8%80%E5%8F%B0Prusa%20i3%20MK3S+/TMC2209-V4.0.png">  </th>    <td> <div align="center">    <nobr>    full    ,    <sup>1</sup>&frasl;<sub>2</sub>    ,    <sup>1</sup>&frasl;<sub>4</sub>    ,    <sup>1</sup>&frasl;<sub>8</sub>    ,    <sup>1</sup>&frasl;<sub>16</sub>    ,    <sup>1</sup>&frasl;<sub>32</sub>    </nobr> </div> </td>    <td> <div align="center">    <a href="https://reprap.org/wiki/RAMPS_1.4"> RAMPS_1.4 官方Wiki </a> <br> </div> </td>    <td> </td>  </tr>  <tr>    <td> <div align="center"> TMC2130驱动板 </div> </td>    <td> <div align="center"> 步进模式 </div> </td>    <td> <div align="center"> 参数 </div> </td>    <td> <div align="center"> 备注 </div> </td>  </tr>  <tr>    <th width="30%"> <img src="/2022/03/08/3D%E6%89%93%E5%8D%B0/%E7%BB%84%E8%A3%85%E4%B8%80%E5%8F%B0Prusa%20i3%20MK3S+/TMC2209-V4.0.png">  </th>    <td> <div align="center">    <nobr>    full    ,    <sup>1</sup>&frasl;<sub>2</sub>    ,    <sup>1</sup>&frasl;<sub>4</sub>    ,    <sup>1</sup>&frasl;<sub>8</sub>    ,    <sup>1</sup>&frasl;<sub>16</sub>    ,    <sup>1</sup>&frasl;<sub>32</sub>    </nobr> </div> </td>    <td> <div align="center">    <a href="https://reprap.org/wiki/RAMPS_1.4"> RAMPS_1.4 官方Wiki </a> <br> </div> </td>    <td> </td>  </tr>  <tr>    <td> <div align="center"> TMC5160驱动板 </div> </td>    <td> <div align="center"> 步进模式 </div> </td>    <td> <div align="center"> 参数 </div> </td>    <td> <div align="center"> 备注 </div> </td>  </tr>  <tr>    <th width="30%"> <img src="/2022/03/08/3D%E6%89%93%E5%8D%B0/%E7%BB%84%E8%A3%85%E4%B8%80%E5%8F%B0Prusa%20i3%20MK3S+/TMC5160-V1.2.png">  </th>    <td> <div align="center">    <nobr>    full    ,    <sup>1</sup>&frasl;<sub>2</sub>    ,    <sup>1</sup>&frasl;<sub>4</sub>    ,    <sup>1</sup>&frasl;<sub>8</sub>    ,    <sup>1</sup>&frasl;<sub>16</sub>    ,    <sup>1</sup>&frasl;<sub>32</sub>    </nobr> </div> </td>    <td> <div align="center">    <a href="https://reprap.org/wiki/RAMPS_1.4"> RAMPS_1.4 官方Wiki </a> <br> </div> </td>    <td> </td>  </tr></table><hr><h2 id="其他部件"><a href="#其他部件" class="headerlink" title="其他部件"></a>其他部件</h2><h2 id="驱动件"><a href="#驱动件" class="headerlink" title="驱动件"></a>驱动件</h2><h3 id="42系列两相步进电机"><a href="#42系列两相步进电机" class="headerlink" title="42系列两相步进电机"></a>42系列两相步进电机</h3><table style="width:100%">  <tr>    <th rowspan="5"><img src="/2022/03/08/3D%E6%89%93%E5%8D%B0/%E7%BB%84%E8%A3%85%E4%B8%80%E5%8F%B0Prusa%20i3%20MK3S+/42_series_two_phase_stepper_motor.jpg"></th>    <th colspan="2" style="width:61%">电气特性</th>  </tr>  <tr>    <td>相数</td>    <td>2</td>  </tr>  <tr>    <td>步距角</td>    <td>1.8°</td>  </tr>    <tr>    <td>额定电流</td>    <td>1.5A</td>  </tr>        <tr>    <td>保持力矩</td>    <td>40N·m</td>  </tr></table><h3 id="42直线T8丝杆步进电机"><a href="#42直线T8丝杆步进电机" class="headerlink" title="42直线T8丝杆步进电机"></a>42直线T8丝杆步进电机</h3><table style="width:100%">  <tr>    <th rowspan="9"><img src="/2022/03/08/3D%E6%89%93%E5%8D%B0/%E7%BB%84%E8%A3%85%E4%B8%80%E5%8F%B0Prusa%20i3%20MK3S+/42_linear_t8_screw_stepper_motor.jpg"></th>    <th colspan="2" style="width:61%">电气特性</th>  </tr>  <tr>    <td>相数</td>    <td>2</td>  </tr>  <tr>    <td>步距角</td>    <td>1.8°</td>  </tr>  <tr>    <td>步距角精度</td>    <td>±5%</td>  </tr>    <tr>    <td>转子惯量</td>    <td>57gf·cm<sup>2</sup></td>  </tr>  <tr>    <td>额定电流</td>    <td>1.5A</td>  </tr>        <tr>    <td>保持力矩</td>    <td>40N·m</td>  </tr>      <tr>    <td>丝杆导程</td>    <td>8mm</td>  </tr>      <tr>    <td>丝杆长度</td>    <td>300mm</td>  </tr></table><h2 id="加热件"><a href="#加热件" class="headerlink" title="加热件"></a>加热件</h2><h3 id="热床"><a href="#热床" class="headerlink" title="热床"></a>热床</h3><p><img src="/2022/03/08/3D%E6%89%93%E5%8D%B0/%E7%BB%84%E8%A3%85%E4%B8%80%E5%8F%B0Prusa%20i3%20MK3S+/magnetic_heatbed_MK52_24V.png" alt="Magnetic heatbed MK52 24V"></p><h3 id="打印热端"><a href="#打印热端" class="headerlink" title="打印热端"></a>打印热端</h3><p><img src="/2022/03/08/3D%E6%89%93%E5%8D%B0/%E7%BB%84%E8%A3%85%E4%B8%80%E5%8F%B0Prusa%20i3%20MK3S+/prusa_v6_hotend.jpg" alt="Prusa V6 HotEnd (MK2 &amp; MK3 variants)"></p><h4 id="紧固件"><a href="#紧固件" class="headerlink" title="紧固件"></a>紧固件</h4><h5 id="M2"><a href="#M2" class="headerlink" title="M2"></a>M2</h5><h5 id="M3"><a href="#M3" class="headerlink" title="M3"></a>M3</h5><h5 id="M4"><a href="#M4" class="headerlink" title="M4"></a>M4</h5><h5 id="M5"><a href="#M5" class="headerlink" title="M5"></a>M5</h5><h5 id="M6"><a href="#M6" class="headerlink" title="M6"></a>M6</h5><hr><h2 id="组装教程"><a href="#组装教程" class="headerlink" title="组装教程"></a>组装教程</h2><p>请参考以下教程进行组装：<br><a href="https://help.prusa3d.com/en/category/original-prusa-i3-mk3s-kit-assembly_1128">Prusa i3 MK3S+ 组装指南</a></p><p><a href="https://guides.bear-lab.com/c/BearFrame_Assembly_Guide">Prusa i3 MK3S+ 升级版（prusa_i3_bear_upgrade）组装指南</a></p><h2 id="接线示意图"><a href="#接线示意图" class="headerlink" title="接线示意图"></a>接线示意图</h2><p><a href="https://reprap.org/wiki/RAMPS_1.4">RAMPS_1.4 官方Wiki</a></p><h2 id="3D打印机固件"><a href="#3D打印机固件" class="headerlink" title="3D打印机固件"></a>3D打印机固件</h2><p><a href="https://marlinfw.org/">Marlin固件</a>是一款开源3D打印机的固件，集合了众多支持3D打印机的主控芯片，可以很方便进行3D打印机的固件编译与配置。</p><p><a href="https://dongxunz.github.io/2022/06/14/3D%E6%89%93%E5%8D%B0/Marlin%E5%9B%BA%E4%BB%B6%E5%8F%82%E6%95%B0%E9%85%8D%E7%BD%AE/">详细固件参数配置，请查看此文章</a></p>]]></content>
    
    
    <categories>
      
      <category>3D打印</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Prusa i3</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Altium Designer快捷操作</title>
    <link href="/2022/02/24/Altium%20Designer/Altium%20Designer%20%E5%BF%AB%E6%8D%B7%E6%93%8D%E4%BD%9C/"/>
    <url>/2022/02/24/Altium%20Designer/Altium%20Designer%20%E5%BF%AB%E6%8D%B7%E6%93%8D%E4%BD%9C/</url>
    
    <content type="html"><![CDATA[<h2 id="原理图"><a href="#原理图" class="headerlink" title="原理图"></a>原理图</h2><h3 id="快速复制原理图中的元件-Ctrl-R"><a href="#快速复制原理图中的元件-Ctrl-R" class="headerlink" title="快速复制原理图中的元件 - Ctrl+R"></a>快速复制原理图中的元件 - Ctrl+R</h3><p>在原理图中，选中需要复制的元件，按 Ctrl+R 可以进入快速复制选中元件。</p><h3 id="切换网络捕捉栅格-G-Shift-G"><a href="#切换网络捕捉栅格-G-Shift-G" class="headerlink" title="切换网络捕捉栅格 - G &#x2F; Shift+G"></a>切换网络捕捉栅格 - G &#x2F; Shift+G</h3><p>在原理图中，切换当前原理图的捕捉栅格大小。</p><p><img src="/2022/02/24/Altium%20Designer/Altium%20Designer%20%E5%BF%AB%E6%8D%B7%E6%93%8D%E4%BD%9C/layout_grid.png" alt="当前栅格大小"></p><hr><h2 id="PCB"><a href="#PCB" class="headerlink" title="PCB"></a>PCB</h2><h3 id="2D-3D显示视图切换"><a href="#2D-3D显示视图切换" class="headerlink" title="2D &#x2F; 3D显示视图切换"></a>2D &#x2F; 3D显示视图切换</h3><p>按键盘上的 “2&#x2F;@键” 显示2D视图。<br>按键盘上的 “3&#x2F;#键” 显示3D视图，在3D视图中，还可以按 “0&#x2F;)键” 或 “9&#x2F;(键” 在3D视图 下旋转PCB，进行0° 或 90° 旋转。</p><h3 id="顶层与底层切换-Shift"><a href="#顶层与底层切换-Shift" class="headerlink" title="顶层与底层切换 - * &#x2F; Shift+*"></a>顶层与底层切换 - * &#x2F; Shift+*</h3><p>按 <strong>*</strong> 或者 <strong>Shift+*</strong> 可以在顶层与底层之间进行切换。</p><p><font color="#ff0000">注意：此处的 “*” 为数字小键盘上的 “*键”，不是键盘上的 “8&#x2F;*键”。</font></p><h3 id="在不同层之间切换"><a href="#在不同层之间切换" class="headerlink" title="在不同层之间切换 - + &#x2F; -"></a>在不同层之间切换 - + &#x2F; -</h3><p>在 <strong>+</strong> 键从左往右进行层切换，按 <strong>-</strong> 键从右往左进行层切换。</p><p><img src="/2022/02/24/Altium%20Designer/Altium%20Designer%20%E5%BF%AB%E6%8D%B7%E6%93%8D%E4%BD%9C/pcb_switch_layer.gif" alt="在不同层之间切换"></p><h3 id="显示-隐藏网络-N"><a href="#显示-隐藏网络-N" class="headerlink" title="显示&#x2F;隐藏网络 - N"></a>显示&#x2F;隐藏网络 - N</h3><p>在PCB布局中，有时候会有显示非常多的网络线，导致界面混乱，影响布局，可以按 N 键显示或隐藏网络。</p><p><img src="/2022/02/24/Altium%20Designer/Altium%20Designer%20%E5%BF%AB%E6%8D%B7%E6%93%8D%E4%BD%9C/pcb_display_net.gif" alt="显示&#x2F;隐藏网络"></p><h3 id="网络突出显示-Shift-鼠标光标"><a href="#网络突出显示-Shift-鼠标光标" class="headerlink" title="网络突出显示 - Shift+鼠标光标"></a>网络突出显示 - Shift+鼠标光标</h3><p>按住 Shift 键后，移动鼠标光标放在网络上，能高亮显示光标所指的网络。</p><p><img src="/2022/02/24/Altium%20Designer/Altium%20Designer%20%E5%BF%AB%E6%8D%B7%E6%93%8D%E4%BD%9C/pcb_highlight_net.gif" alt="突出网络"></p><h3 id="设置全局捕捉模式-Shift-E"><a href="#设置全局捕捉模式-Shift-E" class="headerlink" title="设置全局捕捉模式 - Shift+E"></a>设置全局捕捉模式 - Shift+E</h3><p>在PCB编辑界面，左下角显示了当前的捕捉模式：</p><p>  <img src="/2022/02/24/Altium%20Designer/Altium%20Designer%20%E5%BF%AB%E6%8D%B7%E6%93%8D%E4%BD%9C/pcb_capture_mode.png" alt="设置全局捕捉模式"></p><ol><li><p>Null：无捕捉模式，该模式不进行任何对象捕捉。</p></li><li><p>Hotspot Snap：只捕捉当前层的对象。</p></li><li><p>Hotspot Snap(All Layers)：捕捉所有层的对象。</p></li></ol><h3 id="高亮导线-Ctrl-左键"><a href="#高亮导线-Ctrl-左键" class="headerlink" title="高亮导线 - Ctrl+左键"></a>高亮导线 - Ctrl+左键</h3><p>选中的导线会高亮显示，高亮显示后，可以按键盘上的 <strong>[</strong> 或 <strong>]</strong> 对PCB的明暗进行调节。</p><p><img src="/2022/02/24/Altium%20Designer/Altium%20Designer%20%E5%BF%AB%E6%8D%B7%E6%93%8D%E4%BD%9C/pcb_wire_highlighting.png" alt="高亮导线"></p><h3 id="全选导线线段-Ctrl-H"><a href="#全选导线线段-Ctrl-H" class="headerlink" title="全选导线线段 - Ctrl+H"></a>全选导线线段 - Ctrl+H</h3><p>按 <strong>Ctrl+H</strong> ，选中需要选择的导线，即可全选该网络的所有连接线段。</p><p><img src="/2022/02/24/Altium%20Designer/Altium%20Designer%20%E5%BF%AB%E6%8D%B7%E6%93%8D%E4%BD%9C/pcb_select_all_wires.png" alt="全选导线线段"></p><h3 id="翻转PCB-V-B-Ctrl-F"><a href="#翻转PCB-V-B-Ctrl-F" class="headerlink" title="翻转PCB - V+B &#x2F; Ctrl+F"></a>翻转PCB - V+B &#x2F; Ctrl+F</h3><p>在2D、3D模式下，均可翻转PCB。</p><p><img src="/2022/02/24/Altium%20Designer/Altium%20Designer%20%E5%BF%AB%E6%8D%B7%E6%93%8D%E4%BD%9C/pcb_turn_board.png" alt="在2D，3D模式下进行翻转PCB"></p><h3 id="按选框放置器件-T-O-L"><a href="#按选框放置器件-T-O-L" class="headerlink" title="按选框放置器件 - T+O+L"></a>按选框放置器件 - T+O+L</h3><p>在进行元器件布局时（垂直分布），可以选中 <em><strong>原理图</strong></em> 中相应的器件，然后切换到 <strong>PCB</strong> 使用此快捷键进行框选布局，方便快速分类布局走线。</p><p><img src="/2022/02/24/Altium%20Designer/Altium%20Designer%20%E5%BF%AB%E6%8D%B7%E6%93%8D%E4%BD%9C/pcb_box_layout.png" alt="按选框放置器件"></p><h3 id="单层模式-Shift-S"><a href="#单层模式-Shift-S" class="headerlink" title="单层模式 - Shift+S"></a>单层模式 - Shift+S</h3><p>单层显示模式，可方便查看与操作当前层。</p><p><img src="/2022/02/24/Altium%20Designer/Altium%20Designer%20%E5%BF%AB%E6%8D%B7%E6%93%8D%E4%BD%9C/pcb_single_layer_mode.png" alt="单层模式"></p><blockquote><p>可以多次按 Shift+S 进行上述三种视图切换</p></blockquote>]]></content>
    
    
    <categories>
      
      <category>Altium Designer</category>
      
    </categories>
    
    
    <tags>
      
      <tag>快捷操作</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Altium Designer PCB规则详解</title>
    <link href="/2022/02/24/Altium%20Designer/Altium%20Designer%20PCB%E8%A7%84%E5%88%99%E8%AF%A6%E8%A7%A3/"/>
    <url>/2022/02/24/Altium%20Designer/Altium%20Designer%20PCB%E8%A7%84%E5%88%99%E8%AF%A6%E8%A7%A3/</url>
    
    <content type="html"><![CDATA[<h2 id="铺铜到板框之间的距离（铺铜内缩）"><a href="#铺铜到板框之间的距离（铺铜内缩）" class="headerlink" title="铺铜到板框之间的距离（铺铜内缩）"></a>铺铜到板框之间的距离（铺铜内缩）</h2><ol><li>当板框为Keep-Out Layer时，有2种方法控制铺铜到板框的距离：</li></ol><ul><li><p>方法1：</p><ul><li>打开AD，点击 <strong>设计</strong> -&gt; <strong>规则</strong>，在 <strong>Design Rules</strong> -&gt; <strong>Electrical</strong> -&gt; <strong>Clearance</strong>下，点击默认的 <strong>Clearance</strong> 右键 -&gt; 新规则(<strong>Clearance_1</strong>)，按如下图进行编辑，即可控制铺铜到板框之间的距离。</li></ul><p><img src="/2022/02/24/Altium%20Designer/Altium%20Designer%20PCB%E8%A7%84%E5%88%99%E8%AF%A6%E8%A7%A3/pcb_rule_clearance_1.png" alt="铺铜到板框之间的距离设置"></p></li><li><p>方法2：</p><ul><li>打开AD，点击 <strong>设计</strong> -&gt; <strong>规则</strong>，点击 <strong>Manufacturing</strong> -&gt; <strong>Board Outline Clearance</strong> -&gt; <strong>BoardOutlineClearance</strong>，按如下图进行编辑，即可控制铺铜到板框之间的距离。</li></ul><p><img src="/2022/02/24/Altium%20Designer/Altium%20Designer%20PCB%E8%A7%84%E5%88%99%E8%AF%A6%E8%A7%A3/pcb_rule_board_outline_clearance.png" alt="铺铜到板框之间的距离设置"></p></li></ul><blockquote><p>如果板框是<strong>Mechanical 1</strong>，则只有方法2有效。</p></blockquote><h2 id><a href="#" class="headerlink" title></a></h2>]]></content>
    
    
    <categories>
      
      <category>Altium Designer</category>
      
    </categories>
    
    
    <tags>
      
      <tag>PCB规则</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>AT指令</title>
    <link href="/2022/02/21/%E5%B5%8C%E5%85%A5%E5%BC%8F/AT%E6%8C%87%E4%BB%A4/"/>
    <url>/2022/02/21/%E5%B5%8C%E5%85%A5%E5%BC%8F/AT%E6%8C%87%E4%BB%A4/</url>
    
    <content type="html"><![CDATA[<blockquote><p>参考链接</p><p><a href="https://docs.espressif.com/projects/esp-at/zh_CN/latest/Get_Started/index.html">乐鑫ESP-AT</a></p></blockquote><h2 id="AT指令"><a href="#AT指令" class="headerlink" title="AT指令"></a>AT指令</h2><p>AT指令可以通过串口下发相应的指令来控制模块。</p><h2 id="模块与串口连接方式"><a href="#模块与串口连接方式" class="headerlink" title="模块与串口连接方式"></a>模块与串口连接方式</h2><figure class="highlight clean"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs clean">串口    模块<br><span class="hljs-number">3.3</span>V -&gt; <span class="hljs-number">3.3</span>V<br>RX   -&gt; TX<br>TX   -&gt; RX<br>GND  -&gt; GND<br></code></pre></td></tr></table></figure><h2 id="常用AT指令"><a href="#常用AT指令" class="headerlink" title="常用AT指令"></a>常用AT指令</h2><h3 id="进入AT指令模式-AT"><a href="#进入AT指令模式-AT" class="headerlink" title="进入AT指令模式 - AT"></a>进入AT指令模式 - AT</h3><p><code>AT</code></p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">OK</span> <span class="hljs-comment">#返回值为“**OK**”即表示可以进行AT指令操作。</span><br></code></pre></td></tr></table></figure><h3 id="查询-设置-Wi-Fi-模式-AT-CWMODE"><a href="#查询-设置-Wi-Fi-模式-AT-CWMODE" class="headerlink" title="查询&#x2F;设置 Wi-Fi 模式 - AT+CWMODE"></a>查询&#x2F;设置 Wi-Fi 模式 - AT+CWMODE</h3><p><code>AT+CWMODE=&lt;mode&gt;[,&lt;auto_connect&gt;]</code></p><figure class="highlight nestedtext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs nestedtext"><span class="hljs-attribute">&lt;mode&gt;：模式</span><br><span class="hljs-attribute">        0</span><span class="hljs-punctuation">:</span> <span class="hljs-string">无 Wi-Fi 模式，并且关闭 Wi-Fi RF</span><br>        <span class="hljs-attribute">1</span><span class="hljs-punctuation">:</span> <span class="hljs-string">Station 模式</span><br>        <span class="hljs-attribute">2</span><span class="hljs-punctuation">:</span> <span class="hljs-string">SoftAP 模式</span><br>        <span class="hljs-attribute">3</span><span class="hljs-punctuation">:</span> <span class="hljs-string">SoftAP+Station 模式</span><br><br><span class="hljs-attribute">&lt;auto_connect&gt;：切换 ESP 设备的 Wi-Fi 模式时（例如，从 SoftAP 或无 Wi-Fi 模式切换为 Station 模式或 SoftAP+Station 模式），是否启用自动连接 AP 的功能，默认值：1。参数缺省时，使用默认值，也就是能自动连接。</span><br><span class="hljs-attribute">        0</span><span class="hljs-punctuation">:</span> <span class="hljs-string">禁用自动连接 AP 的功能</span><br>        <span class="hljs-attribute">1</span><span class="hljs-punctuation">:</span> <span class="hljs-string">启用自动连接 AP 的功能，若之前已经将自动连接 AP 的配置保存到 flash 中，则 ESP 设备将自动连接 AP</span><br></code></pre></td></tr></table></figure><blockquote><p>示例：AT+CWMODE&#x3D;1</p></blockquote><h3 id="配置-SoftAP-参数-AT-CWSAP"><a href="#配置-SoftAP-参数-AT-CWSAP" class="headerlink" title="配置 SoftAP 参数 - AT+CWSAP"></a>配置 SoftAP 参数 - AT+CWSAP</h3><p><code>AT+CWSAP=&lt;ssid&gt;,&lt;pwd&gt;,&lt;chl&gt;,&lt;ecn&gt;[,&lt;max conn&gt;][,&lt;ssid hidden&gt;]</code></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">ssid</span>&gt;</span>：字符串参数，接入点名称<br><span class="hljs-tag">&lt;<span class="hljs-name">pwd</span>&gt;</span>：字符串参数，密码，范围：8 ~ 63 字节 ASCII<br><span class="hljs-tag">&lt;<span class="hljs-name">channel</span>&gt;</span>：信道号<br><span class="hljs-tag">&lt;<span class="hljs-name">ecn</span>&gt;</span>：加密方式，不支持 WEP<br>        0: OPEN<br>        2: WPA_PSK<br>        3: WPA2_PSK<br>        4: WPA_WPA2_PSK<br>[<span class="hljs-tag">&lt;<span class="hljs-name">max</span> <span class="hljs-attr">conn</span>&gt;</span>]：允许连入 ESP SoftAP 的最多 station 数目，取值范围：[1,10]<br>[<span class="hljs-tag">&lt;<span class="hljs-name">ssid</span> <span class="hljs-attr">hidden</span>&gt;</span>]：<br>        0: 广播 SSID（默认）<br>        1: 不广播 SSID<br></code></pre></td></tr></table></figure><blockquote><p>示例：AT+CWSAP&#x3D;”ESP”,”1234567890”,5,3</p></blockquote><h3 id="扫描当前可用的AP-AT-CWLAP"><a href="#扫描当前可用的AP-AT-CWLAP" class="headerlink" title="扫描当前可用的AP - AT+CWLAP"></a>扫描当前可用的AP - AT+CWLAP</h3><p><code>AT+CWLAP=[&lt;ssid&gt;,&lt;mac&gt;,&lt;channel&gt;,&lt;scan_type&gt;,&lt;scan_time_min&gt;,&lt;scan_time_max&gt;]</code></p><figure class="highlight nestedtext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs nestedtext"><span class="hljs-attribute">&lt;ecn&gt;：加密方式</span><br><span class="hljs-attribute">        0</span><span class="hljs-punctuation">:</span> <span class="hljs-string">OPEN</span><br>        <span class="hljs-attribute">1</span><span class="hljs-punctuation">:</span> <span class="hljs-string">WEP</span><br>        <span class="hljs-attribute">2</span><span class="hljs-punctuation">:</span> <span class="hljs-string">WPA_PSK</span><br>        <span class="hljs-attribute">3</span><span class="hljs-punctuation">:</span> <span class="hljs-string">WPA2_PSK</span><br>        <span class="hljs-attribute">4</span><span class="hljs-punctuation">:</span> <span class="hljs-string">WPA_WPA2_PSK</span><br>        <span class="hljs-attribute">5</span><span class="hljs-punctuation">:</span> <span class="hljs-string">WPA2_ENTERPRISE</span><br>        <span class="hljs-attribute">6</span><span class="hljs-punctuation">:</span> <span class="hljs-string">WPA3_PSK</span><br>        <span class="hljs-attribute">7</span><span class="hljs-punctuation">:</span> <span class="hljs-string">WPA2_WPA3_PSK</span><br>        <span class="hljs-attribute">[ESP32-C3 Only] 8</span><span class="hljs-punctuation">:</span> <span class="hljs-string">WAPI_PSK</span><br><span class="hljs-attribute">&lt;ssid&gt;：字符串参数，AP 的 SSID</span><br><span class="hljs-attribute">&lt;rssi&gt;：信号强度</span><br><span class="hljs-attribute">&lt;mac&gt;：字符串参数，AP 的 MAC 地址</span><br><span class="hljs-attribute">&lt;channel&gt;：信道号</span><br><span class="hljs-attribute">&lt;scan_type&gt;：Wi-Fi 扫描类型，默认值为：0</span><br><span class="hljs-attribute">        0</span><span class="hljs-punctuation">:</span> <span class="hljs-string">主动扫描</span><br>        <span class="hljs-attribute">1</span><span class="hljs-punctuation">:</span> <span class="hljs-string">被动扫描</span><br><span class="hljs-attribute">&lt;scan_time_min&gt;：每个信道最短扫描时间，单位：毫秒，范围：[0,1500]，如果扫描类型为被动扫描，本参数无效</span><br><span class="hljs-attribute">&lt;scan_time_max&gt;：每个信道最长扫描时间，单位：毫秒，范围：[0,1500]，如果设为 0，固件采用参数默认值，主动扫描为 120 ms，被动扫描为 360 ms</span><br><span class="hljs-attribute">&lt;freq_offset&gt;：频偏（保留项目）</span><br><span class="hljs-attribute">&lt;freqcal_val&gt;：频率校准值（保留项目）</span><br><span class="hljs-attribute">&lt;pairwise_cipher&gt;：成对加密类型</span><br><span class="hljs-attribute">        0</span><span class="hljs-punctuation">:</span> <span class="hljs-string">None</span><br>        <span class="hljs-attribute">1</span><span class="hljs-punctuation">:</span> <span class="hljs-string">WEP40</span><br>        <span class="hljs-attribute">2</span><span class="hljs-punctuation">:</span> <span class="hljs-string">WEP104</span><br>        <span class="hljs-attribute">3</span><span class="hljs-punctuation">:</span> <span class="hljs-string">TKIP</span><br>        <span class="hljs-attribute">4</span><span class="hljs-punctuation">:</span> <span class="hljs-string">CCMP</span><br>        <span class="hljs-attribute">5</span><span class="hljs-punctuation">:</span> <span class="hljs-string">TKIP and CCMP</span><br>        <span class="hljs-attribute">6</span><span class="hljs-punctuation">:</span> <span class="hljs-string">AES-CMAC-128</span><br>        <span class="hljs-attribute">7</span><span class="hljs-punctuation">:</span> <span class="hljs-string">未知</span><br><span class="hljs-attribute">&lt;group_cipher&gt;：组加密类型，与 &lt;pairwise_cipher&gt; 参数的枚举值相同</span><br><span class="hljs-attribute">&lt;bgn&gt;：802.11 b/g/n，若 bit 设为 1，则表示使能对应模式，若设为 0，则表示禁用对应模式</span><br><span class="hljs-attribute">        bit 0</span><span class="hljs-punctuation">:</span> <span class="hljs-string">是否使能 802.11b 模式</span><br>        <span class="hljs-attribute">bit 1</span><span class="hljs-punctuation">:</span> <span class="hljs-string">是否使能 802.11g 模式</span><br>        <span class="hljs-attribute">bit 2</span><span class="hljs-punctuation">:</span> <span class="hljs-string">是否使能 802.11n 模式</span><br><span class="hljs-attribute">&lt;wps&gt;：wps flag</span><br><span class="hljs-attribute">        0</span><span class="hljs-punctuation">:</span> <span class="hljs-string">不支持 WPS</span><br>        <span class="hljs-attribute">1</span><span class="hljs-punctuation">:</span> <span class="hljs-string">支持 WPS</span><br></code></pre></td></tr></table></figure><blockquote><p>示例：<br>AT+CWLAP&#x3D;”Wi-Fi”,”ca:d7:19:d8:a6:44”,6,0,400,1000</p><p>AT+CWLAP&#x3D;”Wi-Fi” #寻找指定 SSID 的 AP</p></blockquote><h3 id="连接AP-AT-CWJAP"><a href="#连接AP-AT-CWJAP" class="headerlink" title="连接AP - AT+CWJAP"></a>连接AP - AT+CWJAP</h3><p><code>AT+CWJAP:&lt;ssid&gt;,&lt;bssid&gt;,&lt;channel&gt;,&lt;rssi&gt;,&lt;pci_en&gt;,&lt;reconn_interval&gt;,&lt;listen_interval&gt;,&lt;scan_mode&gt;,&lt;pmf&gt;</code></p><figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs gherkin"><span class="hljs-variable">&lt;ssid&gt;</span>：目标 AP 的 SSID <span class="hljs-comment">#如果 SSID 和密码中有 ,、&quot;、\\ 等特殊字符，需转义</span><br><span class="hljs-variable">&lt;pwd&gt;</span>：密码最长 63 字节 ASCII<br><span class="hljs-variable">&lt;bssid&gt;</span>：目标 AP 的 MAC 地址，当多个 AP 有相同的 SSID 时，该参数不可省略<br><span class="hljs-variable">&lt;channel&gt;</span>：信道号<br><span class="hljs-variable">&lt;rssi&gt;</span>：信号强度<br><span class="hljs-variable">&lt;pci_en&gt;</span>：PCI 认证<br>        0: ESP station 可与任何一种加密方式的 AP 连接，包括 OPEN 和 WEP<br>        1: ESP station 可与除 OPEN 和 WEP 之外的任何一种加密方式的 AP 连接<br><span class="hljs-variable">&lt;reconn_interval&gt;</span>：Wi-Fi 重连间隔，单位：秒，默认值：1，最大值：7200<br>        0: 断开连接后，ESP station 不重连 AP<br>        [1,7200]: 断开连接后，ESP station 每隔指定的时间与 AP 重连<br><span class="hljs-variable">&lt;listen_interval&gt;</span>：监听 AP beacon 的间隔，单位为 AP beacon 间隔，默认值：3，范围：[1,100]<br><span class="hljs-variable">&lt;scan_mode&gt;</span>：扫描模式<br>       0: 快速扫描，找到目标 AP 后终止扫描，ESP station 与第一个扫描到的 AP 连接<br>       1: 全信道扫描，所有信道都扫描后才终止扫描，ESP station 与扫描到的信号最强的 AP 连接<br><span class="hljs-variable">&lt;jap_timeout&gt;</span>：AT+CWJAP 命令超时的最大值，单位：秒，默认值：15，范围：[3,600]<br><span class="hljs-variable">&lt;pmf&gt;</span>：PMF（Protected Management Frames，受保护的管理帧），默认值 0<br>        0 表示禁用 PMF<br>        bit 0: 具有 PMF 功能，提示支持 PMF，如果其他设备具有 PMF 功能，则 ESP 设备将优先选择以 PMF 模式连接<br>        bit 1: 需要 PMF，提示需要 PMF，设备将不会关联不支持 PMF 功能的设备<br><span class="hljs-variable">&lt;error code&gt;</span>：错误码，仅供参考<br>        1: 连接超时<br>        2: 密码错误<br>        3: 无法找到目标 AP<br>        4: 连接失败<br>        其它值: 发生未知错误<br></code></pre></td></tr></table></figure><blockquote><p>示例：AT+CWJAP&#x3D;”abc”,”0123456789”</p></blockquote><h3 id="断开与当前AP的连接-AT-CWQAP"><a href="#断开与当前AP的连接-AT-CWQAP" class="headerlink" title="断开与当前AP的连接 -AT+CWQAP"></a>断开与当前AP的连接 -AT+CWQAP</h3><p><code>AT+CWQAP</code></p><h3 id="查询本地-IP-地址和-MAC-地址-AT-CIFSR"><a href="#查询本地-IP-地址和-MAC-地址-AT-CIFSR" class="headerlink" title="查询本地 IP 地址和 MAC 地址 - AT+CIFSR"></a>查询本地 IP 地址和 MAC 地址 - AT+CIFSR</h3><p><code>AT+CIFSR:APIP,&lt;&quot;APIP&quot;&gt;</code><br><code>AT+CIFSR:APIP6LL,&lt;&quot;APIP6LL&quot;&gt;</code><br><code>AT+CIFSR:APIP6GL,&lt;&quot;APIP6GL&quot;&gt;</code><br><code>AT+CIFSR:APMAC,&lt;&quot;APMAC&quot;&gt;</code><br><code>AT+CIFSR:STAIP,&lt;&quot;STAIP&quot;&gt;</code><br><code>AT+CIFSR:STAIP6LL,&lt;&quot;STAIP6LL&quot;&gt;</code><br><code>AT+CIFSR:STAIP6GL,&lt;&quot;STAIP6GL&quot;&gt;</code><br><code>AT+CIFSR:STAMAC,&lt;&quot;STAMAC&quot;&gt;</code><br><code>AT+CIFSR:ETHIP,&lt;&quot;ETHIP&quot;&gt;</code><br><code>AT+CIFSR:ETHIP6LL,&lt;&quot;ETHIP6LL&quot;&gt;</code><br><code>AT+CIFSR:ETHIP6GL,&lt;&quot;ETHIP6GL&quot;&gt;</code><br><code>AT+CIFSR:ETHMAC,&lt;&quot;ETHMAC&quot;&gt;</code></p><figure class="highlight bnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs bnf"><span class="hljs-attribute">&lt;”APIP”&gt;</span>: ESP SoftAP 的 IPv4 地址<br><span class="hljs-attribute">&lt;”APIP6LL”&gt;</span>: ESP SoftAP 的 IPv6 本地链路地址<br><span class="hljs-attribute">&lt;”APIP6GL”&gt;</span>: ESP SoftAP 的 IPv6 全局地址<br><span class="hljs-attribute">&lt;”APMAC”&gt;</span>: ESP SoftAP 的 MAC 地址<br><span class="hljs-attribute">&lt;”STAIP”&gt;</span>: ESP station 的 IPv4 地址<br><span class="hljs-attribute">&lt;”STAIP6LL”&gt;</span>: ESP station 的 IPv6 本地链路地址<br><span class="hljs-attribute">&lt;”STAIP6GL”&gt;</span>: ESP station 的 IPv6 全局地址<br><span class="hljs-attribute">&lt;”STAMAC”&gt;</span>: ESP station 的 MAC 地址<br><span class="hljs-attribute">&lt;”ETHIP”&gt;</span>: ESP ethernet 的 IPv4 地址<br><span class="hljs-attribute">&lt;”ETHIP6LL”&gt;</span>: ESP ethernet 的 IPv6 本地链路地址<br><span class="hljs-attribute">&lt;”ETHIP6GL”&gt;</span>: ESP ethernet 的 IPv6 全局地址<br><span class="hljs-attribute">&lt;”ETHMAC”&gt;</span>: ESP ethernet 的 MAC 地址<br></code></pre></td></tr></table></figure><h3 id="断开与-AP-的连接-AT-CWQAP"><a href="#断开与-AP-的连接-AT-CWQAP" class="headerlink" title="断开与 AP 的连接 - AT+CWQAP"></a>断开与 AP 的连接 - AT+CWQAP</h3><p><code>AT+CWQAP</code></p><h3 id="建立-TCP-连接、UDP-传输或-SSL-连接-AT-CIPSTART"><a href="#建立-TCP-连接、UDP-传输或-SSL-连接-AT-CIPSTART" class="headerlink" title="建立 TCP 连接、UDP 传输或 SSL 连接 - AT+CIPSTART"></a>建立 TCP 连接、UDP 传输或 SSL 连接 - AT+CIPSTART</h3><blockquote><p>该功能适用于PC与模块之间进行TCP、UDP、SSL通讯。</p></blockquote><h4 id="1-建立-TCP-连接"><a href="#1-建立-TCP-连接" class="headerlink" title="1. 建立 TCP 连接"></a>1. 建立 TCP 连接</h4><p>&#x2F;&#x2F; 单连接 (AT+CIPMUX&#x3D;0):</p><p><code>AT+CIPSTART=&lt;&quot;type&quot;&gt;,&lt;&quot;remote host&quot;&gt;,&lt;remote port&gt;[,&lt;keep alive&gt;][,&lt;&quot;local IP&quot;&gt;]</code></p><p>&#x2F;&#x2F; 多连接 (AT+CIPMUX&#x3D;1):</p><p><code>AT+CIPSTART=&lt;link ID&gt;,&lt;&quot;type&quot;&gt;,&lt;&quot;remote host&quot;&gt;,&lt;remote port&gt;[,&lt;keep alive&gt;][,&lt;&quot;local IP&quot;&gt;]</code></p><figure class="highlight bnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bnf"><span class="hljs-attribute">&lt;link ID&gt;</span>：网络连接 ID (0 ~ 4)，用于多连接的情况。该参数范围取决于 menuconfig 中的两个配置项。一个是 AT 组件中的配置项 AT_SOCKET_MAX_CONN_NUM ，默认值为 5。另一个是 LWIP 组件中的配置项 LWIP_MAX_SOCKETS ，默认值为 10。要修改该参数的范围，您需要修改配置项 AT_SOCKET_MAX_CONN_NUM 的值并确保该值不大于 LWIP_MAX_SOCKETS 的值。（请参考 编译 ESP-AT 工程 获取更多信息。）<br><span class="hljs-attribute">&lt;”type”&gt;</span>：字符串参数，表示网络连接类型，”TCP” 或 “TCPv6”。默认值：”TCP”<br><span class="hljs-attribute">&lt;”remote host”&gt;</span>：字符串参数，表示远端 IPv4 地址、IPv6 地址，或域名<br><span class="hljs-attribute">&lt;remote port&gt;</span>：远端端口值<br><span class="hljs-attribute">&lt;keep alive&gt;</span>：TCP keep-alive 间隔，默认值：0<br>        0: 禁用 TCP keep-alive 功能<br>        1 ~ 7200: 检测间隔，单位：秒<br><span class="hljs-attribute">&lt;”local IP”&gt;</span>：连接绑定的本机 IPv4 地址或 IPv6 地址，该参数在本地多网络接口时和本地多 IP 地址时非常有用。默认为禁用，如果您想使用，需自行设置，空值也为有效值<br></code></pre></td></tr></table></figure><blockquote><p>示例：AT+CIPSTART&#x3D;”TCP”,”192.168.101.110”,1000</p></blockquote><h4 id="2-建立-UDP-传输"><a href="#2-建立-UDP-传输" class="headerlink" title="2. 建立 UDP 传输"></a>2. 建立 UDP 传输</h4><p>&#x2F;&#x2F; 单连接：(AT+CIPMUX&#x3D;0)</p><p><code>AT+CIPSTART=&lt;&quot;type&quot;&gt;,&lt;&quot;remote host&quot;&gt;,&lt;remote port&gt;[,&lt;local port&gt;,&lt;mode&gt;,&lt;&quot;local IP&quot;&gt;]</code></p><p>&#x2F;&#x2F; 多连接：(AT+CIPMUX&#x3D;1)</p><p><code>AT+CIPSTART=&lt;link ID&gt;,&lt;&quot;type&quot;&gt;,&lt;&quot;remote host&quot;&gt;,&lt;remote port&gt;[,&lt;local port&gt;,&lt;mode&gt;,&lt;&quot;local IP&quot;&gt;]</code></p><figure class="highlight bnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs bnf"><span class="hljs-attribute">&lt;link ID&gt;</span>：网络连接 ID (0 ~ 4)，用于多连接的情况<br><span class="hljs-attribute">&lt;”type”&gt;</span>：字符串参数，表示网络连接类型，”UDP” 或 “UDPv6”。默认值：”TCP”<br><span class="hljs-attribute">&lt;”remote host”&gt;</span>：字符串参数，表示远端 IPv4 地址、IPv6 地址，或域名<br><span class="hljs-attribute">&lt;remote port&gt;</span>：远端端口值<br><span class="hljs-attribute">&lt;local port&gt;</span>：ESP 设备的 UDP 端口值<br><span class="hljs-attribute">&lt;mode&gt;</span>：在 UDP Wi-Fi 透传下，本参数的值必须设为 0<br>        0: 接收到 UDP 数据后，不改变对端 UDP 地址信息（默认）<br>        1: 仅第一次接收到与初始设置不同的对端 UDP 数据时，改变对端 UDP 地址信息为发送数据设备的 IP 地址和端口<br>        2: 每次接收到 UDP 数据时，都改变对端 UDP 地址信息为发送数据的设备的 IP 地址和端口<br><span class="hljs-attribute">&lt;”local IP”&gt;</span>：连接绑定的本机 IPv4 地址或 IPv6 地址，该参数在本地多网络接口时和本地多 IP 地址时非常有用。默认为禁用，如果您想使用，需自行设置，空值也为有效值<br></code></pre></td></tr></table></figure><blockquote><p>示例：AT+CIPSTART&#x3D;”UDP”,”192.168.101.110”,1000,1002,2</p></blockquote><h4 id="3-建立-SSL-连接"><a href="#3-建立-SSL-连接" class="headerlink" title="3. 建立 SSL 连接"></a>3. 建立 SSL 连接</h4><p>&#x2F; 单连接：(AT+CIPMUX&#x3D;0)</p><p><code>AT+CIPSTART=&lt;&quot;type&quot;&gt;,&lt;&quot;remote host&quot;&gt;,&lt;remote port&gt;[,&lt;keep alive&gt;,&lt;&quot;local IP&quot;&gt;]</code></p><p>&#x2F;&#x2F; 多连接：(AT+CIPMUX&#x3D;1)</p><p><code>AT+CIPSTART=&lt;link ID&gt;,&lt;&quot;type&quot;&gt;,&lt;&quot;remote host&quot;&gt;,&lt;remote port&gt;[,&lt;keep alive&gt;,&lt;&quot;local IP&quot;&gt;]</code></p><figure class="highlight bnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bnf"><span class="hljs-attribute">&lt;link ID&gt;</span>：网络连接 ID (0 ~ 4)，用于多连接的情况<br><span class="hljs-attribute">&lt;”type”&gt;</span>：字符串参数，表示网络连接类型，”SSL” 或 “SSLv6”。默认值：”TCP”<br><span class="hljs-attribute">&lt;”remote host”&gt;</span>：字符串参数，表示远端 IPv4 地址、IPv6 地址，或域名<br><span class="hljs-attribute">&lt;remote port&gt;</span>：远端端口值<br><span class="hljs-attribute">&lt;keep alive&gt;</span>：SSL 保留配置，默认值：0<br><span class="hljs-attribute">&lt;”local IP”&gt;</span>：连接绑定的本机 IPv4 地址或 IPv6 地址，该参数在本地多网络接口时和本地多 IP 地址时非常有用。默认为禁用，如果您想使用，需自行设置，空值也为有效值<br></code></pre></td></tr></table></figure><blockquote><p>示例：AT+CIPSTART&#x3D;”SSL”,”iot.espressif.cn”,8443</p></blockquote><h3 id="查询-设置传输模式-AT-CIPMODE"><a href="#查询-设置传输模式-AT-CIPMODE" class="headerlink" title="查询&#x2F;设置传输模式 - AT+CIPMODE"></a>查询&#x2F;设置传输模式 - AT+CIPMODE</h3><p><code>AT+CIPMODE=&lt;mode&gt;</code></p><figure class="highlight nestedtext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs nestedtext"><span class="hljs-attribute">&lt;mode&gt;</span><span class="hljs-punctuation">:</span><br>        <span class="hljs-attribute">0</span><span class="hljs-punctuation">:</span> <span class="hljs-string">普通传输模式</span><br>        <span class="hljs-attribute">1</span><span class="hljs-punctuation">:</span> <span class="hljs-string">Wi-Fi 透传接收模式，仅支持 TCP 单连接、UDP 固定通信对端、SSL 单连接的情况</span><br>        <span class="hljs-comment">#配置更改不保存到 flash。</span><br></code></pre></td></tr></table></figure><blockquote><p>示例：AT+CIPMODE&#x3D;1</p></blockquote><h3 id="开始透传-AT-CIPSEND"><a href="#开始透传-AT-CIPSEND" class="headerlink" title="开始透传 - AT+CIPSEND"></a>开始透传 - AT+CIPSEND</h3><p><code>AT+CIPSEND</code></p><ul><li>退出透传：<code>+++</code> <strong>（不发送换行）</strong></li></ul><h3 id="设置开机-透传模式-信息-AT-SAVETRANSLINK"><a href="#设置开机-透传模式-信息-AT-SAVETRANSLINK" class="headerlink" title="设置开机 透传模式 信息 - AT+SAVETRANSLINK"></a>设置开机 透传模式 信息 - AT+SAVETRANSLINK</h3><p><code>AT+SAVETRANSLINK=&lt;mode&gt;,&lt;&quot;remote host&quot;&gt;,&lt;remote port&gt;[,&lt;&quot;type&quot;&gt;,&lt;keep alive&gt;]</code></p><figure class="highlight bnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs bnf"><span class="hljs-attribute">&lt;mode&gt;</span>:<br>        0: 关闭 ESP 上电进入 Wi-Fi 透传模式<br>        1: 开启 ESP 上电进入 Wi-Fi 透传模式<br><span class="hljs-attribute">&lt;”remote host”&gt;</span>：字符串参数，表示远端 IPv4 地址、IPv6 地址，或域名<br><span class="hljs-attribute">&lt;remote port&gt;</span>：远端端口值<br><span class="hljs-attribute">&lt;”type”&gt;</span>：字符串参数，表示传输类型：”TCP”，”TCPv6”，”SSL”，或 “SSLv6”。默认值：”TCP”<br><span class="hljs-attribute">&lt;keep alive&gt;</span>：TCP keep-alive 间隔，默认值：0<br>        0: 禁用 keep-alive 功能<br>        1 ~ 7200: 检测间隔，单位：秒<br></code></pre></td></tr></table></figure><h2 id="TCP-IP-AT示例"><a href="#TCP-IP-AT示例" class="headerlink" title="TCP-IP AT示例"></a>TCP-IP AT示例</h2><h3 id="ESP-设备作为-TCP-客户端，建立单连接，实现-UART-Wi-Fi-透传"><a href="#ESP-设备作为-TCP-客户端，建立单连接，实现-UART-Wi-Fi-透传" class="headerlink" title="ESP 设备作为 TCP 客户端，建立单连接，实现 UART Wi-Fi 透传"></a>ESP 设备作为 TCP 客户端，建立单连接，实现 UART Wi-Fi 透传</h3><blockquote><p>该功能可用于2个WIFI模块之间进行通讯测试。</p></blockquote><h4 id="模块1设置步骤："><a href="#模块1设置步骤：" class="headerlink" title="模块1设置步骤："></a>模块1设置步骤：</h4><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm"><span class="hljs-built_in">AT</span>+CWMODE=<span class="hljs-number">2</span>     <span class="hljs-comment">#设置 Wi-Fi 模式为 softAP</span><br><br><span class="hljs-built_in">AT</span>+CIPMUX=<span class="hljs-number">1</span>     <span class="hljs-comment">#使能多连接</span><br><br><span class="hljs-built_in">AT</span>+CWSAP=<span class="hljs-string">&quot;ESP32_softAP&quot;</span>,<span class="hljs-string">&quot;1234567890&quot;</span>,<span class="hljs-number">5</span>,<span class="hljs-number">3</span>        <span class="hljs-comment">#设置 softAP</span><br><br><span class="hljs-built_in">AT</span>+CIPAP?       <span class="hljs-comment">#查询 softAP 信息</span><br><br><span class="hljs-built_in">AT</span>+CIPSERVER=<span class="hljs-number">1</span>  <span class="hljs-comment">#建立 TCP 服务器，默认端口为 333</span><br><br><span class="hljs-built_in">AT</span>+CIPCLOSE=<span class="hljs-number">0</span>   <span class="hljs-comment">#关闭 TCP 连接</span><br></code></pre></td></tr></table></figure><h4 id="模块2设置步骤："><a href="#模块2设置步骤：" class="headerlink" title="模块2设置步骤："></a>模块2设置步骤：</h4><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm"><span class="hljs-built_in">AT</span>+CWMODE=<span class="hljs-number">1</span>     <span class="hljs-comment">#设置 Wi-Fi 模式为 station</span><br><br><span class="hljs-built_in">AT</span>+CWJAP=<span class="hljs-string">&quot;ESP32_softAP&quot;</span>,<span class="hljs-string">&quot;1234567890&quot;</span>       <span class="hljs-comment">#连接模块1的AP</span><br><br><span class="hljs-built_in">AT</span>+CIPSTA?      <span class="hljs-comment">#查询 ESP 设备 IP 地址</span><br><br><span class="hljs-built_in">AT</span>+CIPMUX=<span class="hljs-number">1</span>     <span class="hljs-comment">#使能多连接</span><br><br><span class="hljs-built_in">AT</span>+CIPSTART=<span class="hljs-string">&quot;TCP&quot;</span>,<span class="hljs-string">&quot;192.168.x.xxx&quot;</span>,<span class="hljs-number">333</span>  <span class="hljs-comment">#模块1的TCP服务器IP与端口</span><br><br><span class="hljs-built_in">AT</span>+CIPMODE=<span class="hljs-number">1</span>    <span class="hljs-comment">#进入透传模式</span><br><br><span class="hljs-built_in">AT</span>+CIPSEND      <span class="hljs-comment">#开始透传</span><br><br>+++     <span class="hljs-comment">#退出透传</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>ESP32</category>
      
      <category>ESP8266</category>
      
      <category>WIFI模块</category>
      
    </categories>
    
    
    <tags>
      
      <tag>AT指令</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Win10安装Windows Subsystem for Linux</title>
    <link href="/2022/01/23/Windows%E5%B7%A5%E5%85%B7/Win10%E5%AE%89%E8%A3%85Windows%20Subsystem%20for%20Linux/"/>
    <url>/2022/01/23/Windows%E5%B7%A5%E5%85%B7/Win10%E5%AE%89%E8%A3%85Windows%20Subsystem%20for%20Linux/</url>
    
    <content type="html"><![CDATA[<blockquote><p>参考链接：</p><p><a href="https://docs.microsoft.com/en-us/windows/wsl/about">What is the Windows Subsystem for Linux?</a></p><p><a href="https://docs.microsoft.com/zh-cn/windows/wsl/install">安装 WSL</a></p><p><a href="https://docs.microsoft.com/zh-cn/windows/wsl/setup/environment">设置 WSL 开发环境</a></p></blockquote><h2 id="安装WSL-1"><a href="#安装WSL-1" class="headerlink" title="安装WSL 1"></a>安装WSL 1</h2><h3 id="启用相应功能"><a href="#启用相应功能" class="headerlink" title="启用相应功能"></a>启用相应功能</h3><p>按<code>Win+Q</code>，输入<code>启用或关闭WIndows功能</code>，勾选下面的选项，点击确定，等待安装完成之后重启电脑</p><p><img src="/2022/01/23/Windows%E5%B7%A5%E5%85%B7/Win10%E5%AE%89%E8%A3%85Windows%20Subsystem%20for%20Linux/enable_wsl1_features.png" alt="勾选图中标记选项"></p><h3 id="重启电脑后，打开CMD，输入bash即可开始安装WSL-1。"><a href="#重启电脑后，打开CMD，输入bash即可开始安装WSL-1。" class="headerlink" title="重启电脑后，打开CMD，输入bash即可开始安装WSL 1。"></a>重启电脑后，打开<code>CMD</code>，输入<code>bash</code>即可开始安装WSL 1。</h3><hr><h2 id="安装WSL-2"><a href="#安装WSL-2" class="headerlink" title="安装WSL 2"></a>安装WSL 2</h2><p>使用管理员运行PowerShell或者Windows命令提示符，输入以下命令来安装WSL 2：</p><figure class="highlight ada"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ada">wsl <span class="hljs-comment">--install</span><br></code></pre></td></tr></table></figure><p>此命令将启用所需的可选组件，下载最新的Linux内核，将WSL 2设为默认值，并安装Linux发行版（默认安装Ubuntu）。</p><h2 id="更改默认安装的Linux发行版"><a href="#更改默认安装的Linux发行版" class="headerlink" title="更改默认安装的Linux发行版"></a>更改默认安装的Linux发行版</h2><p>查看可用的Linux发行版</p><figure class="highlight dsconfig"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dsconfig"><span class="hljs-string">wsl</span> <span class="hljs-built_in">--list</span> <span class="hljs-built_in">--online</span> <span class="hljs-comment">#wsl -l -o</span><br></code></pre></td></tr></table></figure><p><img src="/2022/01/23/Windows%E5%B7%A5%E5%85%B7/Win10%E5%AE%89%E8%A3%85Windows%20Subsystem%20for%20Linux/wsl_linux_version.png" alt="当前可用Linux发行版"></p><p>更改安装的发行版</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml">wsl --install -d <span class="hljs-tag">&lt;<span class="hljs-name">NAME</span>&gt;</span> #<span class="hljs-tag">&lt;<span class="hljs-name">NAME</span>&gt;</span>上方图片中的Linux发行版对应的名称<br></code></pre></td></tr></table></figure><h2 id="检查正在运行的WSL版本"><a href="#检查正在运行的WSL版本" class="headerlink" title="检查正在运行的WSL版本"></a>检查正在运行的WSL版本</h2><p>在PowerShell或者CMD中输入以下命令，查看当前系统中的WSL版本：</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">wsl -l -v</span><br></code></pre></td></tr></table></figure><p><img src="/2022/01/23/Windows%E5%B7%A5%E5%85%B7/Win10%E5%AE%89%E8%A3%85Windows%20Subsystem%20for%20Linux/wsl_install_version.png" alt="当前系统中安装的WSL版本"></p><h2 id="将版本从WSL-1-升级到WSL-2"><a href="#将版本从WSL-1-升级到WSL-2" class="headerlink" title="将版本从WSL 1 升级到WSL 2"></a>将版本从WSL 1 升级到WSL 2</h2><p>要将以前安装的Linux发行版从WSL 1更新到WSL 2，请分别使用以下命令：</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">wsl</span> --set-version &lt;distro name&gt; #&lt;distro name&gt;替换为要更新的 Linux 发行版的名称<br><br><span class="hljs-attribute">wsl</span> --set-default-version <span class="hljs-number">2</span> #将WSL <span class="hljs-number">2</span>设置为默认版本<br><br><span class="hljs-attribute">e</span>.g : wsl --set-version Ubuntu-<span class="hljs-number">20</span>.<span class="hljs-number">04</span> <span class="hljs-number">2</span>  #将Ubuntu <span class="hljs-number">20</span>.<span class="hljs-number">04</span>发行版设置为使用WSL <span class="hljs-number">2</span>。<br><br></code></pre></td></tr></table></figure><p>可能还需要<a href="https://docs.microsoft.com/zh-cn/windows/wsl/install-manual#step-3---enable-virtual-machine-feature">启用WSL 2使用的虚拟机可选组件</a>并<a href="https://docs.microsoft.com/zh-cn/windows/wsl/install-manual#step-4---download-the-linux-kernel-update-package">安装内核包</a>。</p><h2 id="设置WSL开发环境"><a href="#设置WSL开发环境" class="headerlink" title="设置WSL开发环境"></a>设置WSL开发环境</h2><h3 id="Linux发行版文件路径"><a href="#Linux发行版文件路径" class="headerlink" title="Linux发行版文件路径"></a>Linux发行版文件路径</h3><p>打开文件管理器，在地址栏输入<code>\\wsl$\</code>即可访问电脑中安装的Linux发行版路径：</p><p><img src="/2022/01/23/Windows%E5%B7%A5%E5%85%B7/Win10%E5%AE%89%E8%A3%85Windows%20Subsystem%20for%20Linux/wsl_path.png" alt="Liunx发行版安装文件路径"></p>]]></content>
    
    
    <categories>
      
      <category>Windows</category>
      
    </categories>
    
    
    <tags>
      
      <tag>WSL</tag>
      
      <tag>Linux</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Hexo主题配置</title>
    <link href="/2022/01/23/Hexo/Hexo%E4%B8%BB%E9%A2%98%E9%85%8D%E7%BD%AE/"/>
    <url>/2022/01/23/Hexo/Hexo%E4%B8%BB%E9%A2%98%E9%85%8D%E7%BD%AE/</url>
    
    <content type="html"><![CDATA[<h2 id="Hexo-Theme-Fluid主题配置"><a href="#Hexo-Theme-Fluid主题配置" class="headerlink" title="Hexo-Theme-Fluid主题配置"></a>Hexo-Theme-Fluid主题配置</h2><h3 id="代码块添加MAC风格"><a href="#代码块添加MAC风格" class="headerlink" title="代码块添加MAC风格"></a>代码块添加MAC风格</h3><blockquote><p>借鉴来源：<a href="https://github.com/fluid-dev/hexo-theme-fluid/issues/538">建议添加mac风格的代码块显示 #538</a></p></blockquote><p><img src="/2022/01/23/Hexo/Hexo%E4%B8%BB%E9%A2%98%E9%85%8D%E7%BD%AE/codestyle_mac.png" alt="MAC代码风格"></p><ol><li>在博客目录<code>...\Blog\node_modules\hexo-theme-fluid\source\css\</code>下新建一个文件：<code>macpanel.styl</code>，输入以下内容：</li></ol><figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs nix">.highlight<br>    <span class="hljs-params">background:</span> <span class="hljs-comment">#21252b</span><br>    <span class="hljs-params">border-radius:</span> <span class="hljs-number">5</span>px<br>    <span class="hljs-params">box-shadow:</span> <span class="hljs-number">0</span> <span class="hljs-number">10</span>px <span class="hljs-number">30</span>px <span class="hljs-number">0</span> rgba(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, .<span class="hljs-number">4</span>)<br>    <span class="hljs-params">padding-top:</span> <span class="hljs-number">30</span>px<br><br>    &amp;::before<br>      <span class="hljs-params">background:</span> <span class="hljs-comment">#fc625d</span><br>      <span class="hljs-params">border-radius:</span> <span class="hljs-number">50</span>%<br>      <span class="hljs-params">box-shadow:</span> <span class="hljs-number">20</span>px <span class="hljs-number">0</span> <span class="hljs-comment">#fdbc40, 40px 0 #35cd4b</span><br>      <span class="hljs-params">content:</span> &#x27; &#x27;<br>      <span class="hljs-params">height:</span> <span class="hljs-number">12</span>px<br>      <span class="hljs-params">left:</span> <span class="hljs-number">12</span>px<br>      <span class="hljs-params">margin-top:</span> <span class="hljs-operator">-</span><span class="hljs-number">20</span>px<br>      <span class="hljs-params">position:</span> absolute<br>      <span class="hljs-params">width:</span> <span class="hljs-number">12</span>px<br></code></pre></td></tr></table></figure><ol start="2"><li>修改主题的配置文件<code>_config_fluid.yml</code>，找到<code>custom_css:</code>字段，输入以下内容即可：</li></ol><figure class="highlight dts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs dts"><span class="hljs-symbol">custom_css:</span><br>  - <span class="hljs-keyword">/css/</span>macpanel<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Hexo</category>
      
    </categories>
    
    
    <tags>
      
      <tag>主题</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>小米路由器R3G编译OpenWRT固件</title>
    <link href="/2022/01/07/OpenWRT/%E5%B0%8F%E7%B1%B3%E8%B7%AF%E7%94%B1%E5%99%A8R3G%E7%BC%96%E8%AF%91OpenWRT%E5%9B%BA%E4%BB%B6/"/>
    <url>/2022/01/07/OpenWRT/%E5%B0%8F%E7%B1%B3%E8%B7%AF%E7%94%B1%E5%99%A8R3G%E7%BC%96%E8%AF%91OpenWRT%E5%9B%BA%E4%BB%B6/</url>
    
    <content type="html"><![CDATA[<p>OpenWrt是适合于嵌入式设备的一个Linux发行版。</p><p>相对原厂固件而言，OpenWrt不是一个单一、静态的固件，而是提供了一个可添加软件包的可写的文件系统。这使用户可以自由的选择应用程序和配置，而不必受设备提供商的限制，并且可以使用一些适合某方面应用的软件包来定制你的设备。对于开发者来说，OpenWrt是一个框架，开发者不必麻烦地构建整个固件就能得到想要的应用程序；对于用户来说，这意味着完全定制的能力，与以往不同的方式使用设备，OPKG包含超过3500个软件。 默认使用LuCI作为web交互界面。</p><p>OpenWrt另有一个复刻分支项目，名为LEDE，两者于2018年1月合并，合并后的项目使用OpenWrt的名字、LEDE的源代码</p><h2 id="本地编译"><a href="#本地编译" class="headerlink" title="本地编译"></a>本地编译</h2><h3 id="编译前须知"><a href="#编译前须知" class="headerlink" title="编译前须知"></a>编译前须知</h3><ol><li>不要用<strong>root</strong>用户进行编译</li><li>请全局使用魔法👁‍🗨</li><li>默认登陆IP：192.168.1.1 密码：password</li></ol><h3 id="编译环境配置"><a href="#编译环境配置" class="headerlink" title="编译环境配置"></a>编译环境配置</h3><blockquote><p>编译环境：<strong>Ubuntu 20.04 LTS</strong>，请在终端分别执行以下命令：</p></blockquote><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm">sudo apt update -y<br><br>sudo apt full-upgrade -y<br><br>sudo apt <span class="hljs-keyword">install </span>-y ack antlr3 asciidoc autoconf automake autopoint <span class="hljs-keyword">binutils </span><span class="hljs-keyword">bison </span><span class="hljs-keyword">build-essential </span>\<br><span class="hljs-keyword">bzip2 </span>ccache cmake cpio curl device-tree-compiler fastjar flex gawk gettext gcc-<span class="hljs-keyword">multilib </span>g++-<span class="hljs-keyword">multilib </span>\<br>git gperf haveged help2man intltool libc6-dev-i386 libelf-dev libglib2.<span class="hljs-number">0</span>-dev libgmp3-dev libltdl-dev \<br>libmpc-dev libmpfr-dev libncurses5-dev libncursesw5-dev libreadline-dev libssl-dev libtool lrzsz \<br>mkisofs msmtp nano ninja-<span class="hljs-keyword">build </span>p7zip p7zip-full patch pkgconf python2.<span class="hljs-number">7</span> python3 python3-pip qemu-utils \<br>rsync <span class="hljs-keyword">scons </span>squashfs-tools <span class="hljs-keyword">subversion </span><span class="hljs-keyword">swig </span>texinfo uglifyjs upx-ucl unzip vim wget xmlto xxd zlib1g-dev<br></code></pre></td></tr></table></figure><h3 id="下载Lean的OpenWRT源码"><a href="#下载Lean的OpenWRT源码" class="headerlink" title="下载Lean的OpenWRT源码"></a>下载Lean的OpenWRT源码</h3><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">git <span class="hljs-keyword">clone</span> <span class="hljs-title">https</span>://github.com/coolsnowwolf/lede<br></code></pre></td></tr></table></figure><h3 id="添加OpenWRT插件源"><a href="#添加OpenWRT插件源" class="headerlink" title="添加OpenWRT插件源"></a>添加OpenWRT插件源</h3><p>Git Clone 完成后，进入<strong>lede</strong>目录，根据实际需求添加以下插件库。</p><blockquote><p>科学上网插件仓库</p></blockquote><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-comment">#常用</span><br><span class="hljs-attribute">sed</span> -i <span class="hljs-string">&#x27;<span class="hljs-variable">$a</span> src-git helloworld https://github.com/fw876/helloworld&#x27;</span> feeds.conf.default<br><br><span class="hljs-comment">#次要</span><br>sed -i <span class="hljs-string">&#x27;<span class="hljs-variable">$a</span> src-git passwall https://github.com/xiaorouji/openwrt-passwall&#x27;</span> feeds.conf.default<br></code></pre></td></tr></table></figure><blockquote><p>openwrt插件合集仓库</p></blockquote><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs stylus">sed -<span class="hljs-selector-tag">i</span> <span class="hljs-string">&#x27;$a src-git kenzo https://github.com/kenzok8/openwrt-packages&#x27;</span> feeds<span class="hljs-selector-class">.conf</span><span class="hljs-selector-class">.default</span><br>sed -<span class="hljs-selector-tag">i</span> <span class="hljs-string">&#x27;$a src-git small https://github.com/kenzok8/small&#x27;</span> feeds<span class="hljs-selector-class">.conf</span>.default<br></code></pre></td></tr></table></figure><blockquote><p>openwrt插件合集仓库（每天更新）</p></blockquote><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dart">sed -i <span class="hljs-string">&#x27;<span class="hljs-subst">$a</span> src-git small8 https://github.com/kenzok8/small-package&#x27;</span> feeds.conf.<span class="hljs-keyword">default</span><br></code></pre></td></tr></table></figure><h3 id="更新feeds并安装插件，开启配置菜单"><a href="#更新feeds并安装插件，开启配置菜单" class="headerlink" title="更新feeds并安装插件，开启配置菜单"></a>更新feeds并安装插件，开启配置菜单</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs awk">git pull<br><br>.<span class="hljs-regexp">/scripts/</span>feeds update -a<br><br>.<span class="hljs-regexp">/scripts/</span>feeds install -a<br><br>make menuconfig<br></code></pre></td></tr></table></figure><h3 id="选择编译目标"><a href="#选择编译目标" class="headerlink" title="选择编译目标"></a>选择编译目标</h3><p><img src="/2022/01/07/OpenWRT/%E5%B0%8F%E7%B1%B3%E8%B7%AF%E7%94%B1%E5%99%A8R3G%E7%BC%96%E8%AF%91OpenWRT%E5%9B%BA%E4%BB%B6/xiaomi_router_r3g.png" alt="小米路由器R3G对应的编译设置"></p><h3 id="下载dl库，编译固件"><a href="#下载dl库，编译固件" class="headerlink" title="下载dl库，编译固件"></a>下载dl库，编译固件</h3><figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs gauss"><span class="hljs-built_in">make</span> download -j8<br><br><span class="hljs-built_in">make</span> V=s -j1  <span class="hljs-meta">#-j 后面是线程数，第一次编译推荐用单线程</span><br></code></pre></td></tr></table></figure><blockquote><p>编译完成后输出路径：<strong>lede&#x2F;bin&#x2F;targets&#x2F;.</strong></p></blockquote><h3 id="二次编译"><a href="#二次编译" class="headerlink" title="二次编译"></a>二次编译</h3><p>请分别执行以下命令：</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">cd</span> lede<br><br>git pull<br><br>./scripts/feeds <span class="hljs-keyword">update</span> -<span class="hljs-keyword">a</span><br><br>./scripts/feeds install -<span class="hljs-keyword">a</span><br><br><span class="hljs-keyword">make</span> defconfig<br><br><span class="hljs-keyword">make</span> download -j8<br><br><span class="hljs-keyword">make</span> V=s -<span class="hljs-keyword">j</span>$(nproc)<br></code></pre></td></tr></table></figure><h3 id="重新配置"><a href="#重新配置" class="headerlink" title="重新配置"></a>重新配置</h3><p>请分别执行以下命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">rm</span> -rf ./tmp &amp;&amp; <span class="hljs-built_in">rm</span> -rf .config<br><br>make menuconfig<br><br>make V=s -j$(<span class="hljs-built_in">nproc</span>)<br></code></pre></td></tr></table></figure><hr><h2 id="使用Github-Actions编译OpenWRT固件"><a href="#使用Github-Actions编译OpenWRT固件" class="headerlink" title="使用Github Actions编译OpenWRT固件"></a>使用Github Actions编译OpenWRT固件</h2><h3 id="编译前须知-1"><a href="#编译前须知-1" class="headerlink" title="编译前须知"></a>编译前须知</h3><ol><li>访问Github可能不顺畅，请使用魔法👁‍🗨</li><li>需要一个注册一个Github账号</li></ol><h3 id="创建自动编译脚本仓库"><a href="#创建自动编译脚本仓库" class="headerlink" title="创建自动编译脚本仓库"></a>创建自动编译脚本仓库</h3><p><a href="https://github.com/P3TERX/Actions-OpenWrt">P3TERX &#x2F; Actions-OpenWrt仓库</a></p><p><img src="/2022/01/07/OpenWRT/%E5%B0%8F%E7%B1%B3%E8%B7%AF%E7%94%B1%E5%99%A8R3G%E7%BC%96%E8%AF%91OpenWRT%E5%9B%BA%E4%BB%B6/actions_openwrt_by_P3TERX.png" alt="P3TERX &#x2F; Actions-OpenWrt"></p><h3 id="配置编译脚本"><a href="#配置编译脚本" class="headerlink" title="配置编译脚本"></a>配置编译脚本</h3><h4 id="diy-part1-sh"><a href="#diy-part1-sh" class="headerlink" title="diy-part1.sh"></a>diy-part1.sh</h4><p><img src="/2022/01/07/OpenWRT/%E5%B0%8F%E7%B1%B3%E8%B7%AF%E7%94%B1%E5%99%A8R3G%E7%BC%96%E8%AF%91OpenWRT%E5%9B%BA%E4%BB%B6/actions_openwrt_diy_part1.png" alt="配置diy-part1.sh"></p><h4 id="diy-part2-sh"><a href="#diy-part2-sh" class="headerlink" title="diy-part2.sh"></a>diy-part2.sh</h4><p><img src="/2022/01/07/OpenWRT/%E5%B0%8F%E7%B1%B3%E8%B7%AF%E7%94%B1%E5%99%A8R3G%E7%BC%96%E8%AF%91OpenWRT%E5%9B%BA%E4%BB%B6/actions_openwrt_diy_part2.png" alt="配置diy-part2.sh"></p><h4 id="创建-config"><a href="#创建-config" class="headerlink" title="创建.config"></a>创建.config</h4><p><img src="/2022/01/07/OpenWRT/%E5%B0%8F%E7%B1%B3%E8%B7%AF%E7%94%B1%E5%99%A8R3G%E7%BC%96%E8%AF%91OpenWRT%E5%9B%BA%E4%BB%B6/actions_openwrt_create_config_file.png" alt="配置.config"></p><p>输入以下内容：</p><blockquote><p>该配置文件仅针对Xiaomi r3g v1，请根据自己的编译目标配置该文件！</p></blockquote><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">CONFIG_TARGET_ramips</span>=y<br><span class="hljs-attr">CONFIG_TARGET_ramips_mt7621</span>=y<br><span class="hljs-attr">CONFIG_TARGET_ramips_mt7621_DEVICE_xiaomi_mi-router-3g</span>=y<br></code></pre></td></tr></table></figure><h3 id="开始编译"><a href="#开始编译" class="headerlink" title="开始编译"></a>开始编译</h3><blockquote><p>Xiaomi r3g v1不能将SSH connection to Actions设置为 <code>true</code> ，否则会编译失败。</p></blockquote><p><img src="/2022/01/07/OpenWRT/%E5%B0%8F%E7%B1%B3%E8%B7%AF%E7%94%B1%E5%99%A8R3G%E7%BC%96%E8%AF%91OpenWRT%E5%9B%BA%E4%BB%B6/actions_openwrt_start.png" alt="开始编译操作"></p><h3 id="SSH远程配置编译目标"><a href="#SSH远程配置编译目标" class="headerlink" title="SSH远程配置编译目标"></a>SSH远程配置编译目标</h3><blockquote><p>如果在 <strong>上一个步骤</strong> 中将 <strong>SSH connection to Actions</strong> 改为 <code>true</code>，则需要跟踪编译步骤，当编译步骤进行到 <strong>SSH connection to Actions</strong> 时，会给出类似下图所示的SSH链接，使用SSH工具连接到编译服务器进行编译目标配置：</p></blockquote><p><img src="/2022/01/07/OpenWRT/%E5%B0%8F%E7%B1%B3%E8%B7%AF%E7%94%B1%E5%99%A8R3G%E7%BC%96%E8%AF%91OpenWRT%E5%9B%BA%E4%BB%B6/actions_openwrt_make_view.png" alt="追踪编译进程"></p><p><img src="/2022/01/07/OpenWRT/%E5%B0%8F%E7%B1%B3%E8%B7%AF%E7%94%B1%E5%99%A8R3G%E7%BC%96%E8%AF%91OpenWRT%E5%9B%BA%E4%BB%B6/actions_openwrt_ssh.png" alt="SSH链接"></p><h3 id="等待编译完成"><a href="#等待编译完成" class="headerlink" title="等待编译完成"></a>等待编译完成</h3><p><img src="/2022/01/07/OpenWRT/%E5%B0%8F%E7%B1%B3%E8%B7%AF%E7%94%B1%E5%99%A8R3G%E7%BC%96%E8%AF%91OpenWRT%E5%9B%BA%E4%BB%B6/actions_openwrt_compile_successful.png" alt="编译成功，下载固件包"></p><p>编译成功后，脚本会自动将生成的固件打包，可下载刷入。</p><h2 id="补充说明"><a href="#补充说明" class="headerlink" title="补充说明"></a>补充说明</h2><h3 id="OpenWRT-更新软件包-和-安装软件包-命令"><a href="#OpenWRT-更新软件包-和-安装软件包-命令" class="headerlink" title="OpenWRT 更新软件包 和 安装软件包 命令"></a>OpenWRT 更新软件包 和 安装软件包 命令</h3><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs cmake">opkg update <span class="hljs-comment">#更新软件包</span><br><br>opkg <span class="hljs-keyword">install</span> software_name.ipk  <span class="hljs-comment">#安装软件包</span><br></code></pre></td></tr></table></figure><h3 id="如果使用的本地编译环境是WSL-Windows-Subsystem-for-Linux-，请使用以下命令进行编译："><a href="#如果使用的本地编译环境是WSL-Windows-Subsystem-for-Linux-，请使用以下命令进行编译：" class="headerlink" title="如果使用的本地编译环境是WSL(Windows Subsystem for Linux)，请使用以下命令进行编译："></a>如果使用的本地编译环境是WSL(Windows Subsystem for Linux)，请使用以下命令进行编译：</h3><p>首次编译：</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ruby"><span class="hljs-variable constant_">PATH</span>=<span class="hljs-regexp">/usr/local</span><span class="hljs-regexp">/sbin:/usr</span><span class="hljs-regexp">/local/bin</span><span class="hljs-symbol">:/usr/sbin</span><span class="hljs-symbol">:/usr/bin</span><span class="hljs-symbol">:/sbin</span><span class="hljs-symbol">:/bin</span> make V=s -j1<br></code></pre></td></tr></table></figure><p>二次编译：</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ruby"><span class="hljs-variable constant_">PATH</span>=<span class="hljs-regexp">/usr/local</span><span class="hljs-regexp">/sbin:/usr</span><span class="hljs-regexp">/local/bin</span><span class="hljs-symbol">:/usr/sbin</span><span class="hljs-symbol">:/usr/bin</span><span class="hljs-symbol">:/sbin</span><span class="hljs-symbol">:/bin</span> make -j<span class="hljs-variable">$(</span>(<span class="hljs-variable">$(</span>nproc) + <span class="hljs-number">1</span>)) V=s<br></code></pre></td></tr></table></figure><h2 id="添加插件"><a href="#添加插件" class="headerlink" title="添加插件"></a>添加插件</h2><p>OpenWRT通过LuCI来管理插件：</p><ul><li><p>通过<code>方向键</code>选择插件，<code>Y键</code>选中，<code>N键</code>不选中，<code>M键</code>编译成模块。</p></li><li><p><code>*</code>代表编译插件，<code>!</code>代表与其他插件依赖或冲突。</p></li><li><p>启用较多插件时可能会编译错误，请根据需求来启用插件，不要全部都要！！！</p></li></ul><p><img src="/2022/01/07/OpenWRT/%E5%B0%8F%E7%B1%B3%E8%B7%AF%E7%94%B1%E5%99%A8R3G%E7%BC%96%E8%AF%91OpenWRT%E5%9B%BA%E4%BB%B6/luci_applications_config.png" alt="LuCI插件管理界面"></p><h3 id="常用插件"><a href="#常用插件" class="headerlink" title="常用插件"></a>常用插件</h3><figure class="highlight xl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs xl">L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-accesscontrol  #访问时间控制<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-adblock  #AdBlock广告过滤<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-adbyby-plus  #广告屏蔽大师Plus<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-advancedsetting  #系统高级设置（Le库以外的插件<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-aria2  #Aria2下载工具<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-arpbind  #IP/MAC绑定<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-attendedsysupgrade  #固件更新升级相关<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-autoreboot  #支持计划重启<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-baidupcs-web  #百度网盘管理<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-cifs-mount  #CIFS/SMB挂载设置<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-cifsd  #CIFS/SMB网络共享<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-commands  #Shell命令模块<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-ddns  #动态域名 DNS（集成阿里DDNS客户端<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-dnscrypt-proxy  #DNSCrypt解决DNS污染<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-dnsfilter  #DNSFilter基于DNS的广告过滤<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-dnsforwarder  #DNSForwarder防DNS污染<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-filetransfer  #文件传输（可web安装ipk包）<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-firewall  #添加防火墙<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-frpc  #内网穿透Frp客户端<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-frps  #内网穿透Frp服务端<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-guest-wifi  #WiFi访客网络<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-hd-idle  #硬盘休眠<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-nlbwmon  #网络带宽监视器<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-noddos  #NodDOS Clients 阻止DDoS攻击<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-passwall  #科学上网（Li大佬插件）<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-qbittorrent  #BT下载工具(qBittorrent)<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-ramfree  #释放内存<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-samba  #网络共享（Samba）<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-ssr-plus  #SSR科学上网Plus+（Le大佬插件）<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-statistics  #流量监控工具<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-transmission  #BT下载工具<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-turboacc  #Turbo ACC 网络加速(支持 Fast Path 或者 硬件 NAT)<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-unblockmusic  #解锁网易云灰色歌曲<span class="hljs-number">3</span>合<span class="hljs-number">1</span>新版本<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-upnp  #通用即插即用UPnP（端口自动转发<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-vlmcsd  #KMS服务器设置<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-vsftpd  #FTP服务器<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-watchcat  #断网检测功能与定时重启<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-webadmin  #Web管理页面设置<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-wifischedule  #WiFi 计划<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-wol  #WOL网络唤醒<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-wrtbwmon  #实时流量监测<br></code></pre></td></tr></table></figure><h3 id="所有插件"><a href="#所有插件" class="headerlink" title="所有插件"></a>所有插件</h3><blockquote><p>最后更新时间：2022&#x2F;6&#x2F;19</p></blockquote><figure class="highlight xl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br></pre></td><td class="code"><pre><code class="hljs xl">L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-accesscontrol  #访问时间控制<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-adblock   #ADB广告过滤<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-adbyby-plus  #广告屏蔽大师Plus +<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-advanced-reboot  #Linksys高级重启<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-ahcp  #Ad-Hoc配置协议(AHCP) ipv6 <span class="hljs-built_in">and</span> 双栈 自动配置协议 !<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-airplay2   #Apple AirPlay2 无损音频接收服务器<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-amule  #aMule下载工具 !<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-aria2 # Aria2下载工具<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-arpbind  #IP/MAC绑定<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-asterisk  #支持Asterisk电话服务器<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-attendedsysupgrade  #固件更新升级相关<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-autoreboot  #支持计划重启<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-baidupcs-web  #百度网盘管理<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-bcp38  #BCP38网络入口过滤（不确定）<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-bird1-ipv4  #对Bird1-ipv4的支持<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-bird1-ipv6  #对Bird1-ipv6的支持<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-bmx6  #BMX6路由协议<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-cifs-mount   #CIFS/SMB挂载设置<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-cifsd  #CIFS/SMB网络共享<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-cjdns  #加密IPV6网络相关<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-clamav  #ClamAV杀毒软件<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-commands   #Shell命令模块<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-cshark   #CloudShark捕获工具<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-ddns   #动态域名 DNS（集成阿里DDNS客户端）<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-diag-core   #core诊断工具<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-diskman   #磁盘管理工具<br>    <span class="hljs-function"><span class="hljs-title">luci</span>-app-diskman ---&gt;</span> Include btrfs-progs   #新型的写时复制 (COW)<br>    <span class="hljs-function"><span class="hljs-title">luci</span>-app-diskman ---&gt;</span> Include lsblk   #lsblk命令 用于列出所有可用块设备的信息<br>    <span class="hljs-function"><span class="hljs-title">luci</span>-app-diskman ---&gt;</span> Include mdadm   #mdadm命令 用于创建、管理、监控RAID设备的工具<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-dnscrypt-proxy  #DNSCrypt解决DNS污染<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-dnsforwarder  #DNSForwarder防DNS污染<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-docker  #Docker容器(dockerman更名为docker)<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-dump1090  #民航无线频率（不确定）<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-dynapoint  #DynaPoint（未知）<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-e2guardian   #Web内容过滤器<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-familycloud   #家庭云盘<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-filetransfer  #文件传输（可web安装ipk包）<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-firewall   #添加防火墙<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-flowoffload  #Turbo ACC网络加速（集成FLOW,BBR,NAT,DNS...<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-freifunk-diagnostics   #freifunk组件 诊断（未知）<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-freifunk-policyrouting  #freifunk组件 策略路由（未知）<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-freifunk-widgets  #freifunk组件 索引（未知）<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-frpc   #内网穿透Frp客户端<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-frps   #内网穿透Frp服务端<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-fwknopd  #Firewall Knock Operator服务器<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-guest-wifi   #WiFi访客网络<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-gost  #隐蔽的https代理（Li大内插件）<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-haproxy-tcp   #HAProxy负载均衡-TCP<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-hd-idle  #硬盘休眠<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-hnet  #Homenet Status家庭网络控制协议<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-https-dns-proxy  #通过HTTPS代理为DNS提供Web UI<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-ipsec-vpnd  #VPN服务器 IPSec<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-kodexplorer  #KOD可道云私人网盘（与vnStat冲突 ! ）<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-kooldns  #virtual**服务器 ddns替代方案（丢弃）<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-koolproxy  #KP去广告（丢弃）<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-lxc   #LXC容器管理<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-meshwizard #网络设置向导<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-minidlna   #完全兼容DLNA / UPnP-AV客户端的服务器软件<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-mjpg-streamer   #兼容Linux-UVC的摄像头程序<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-music-remote-center   #PCHiFi 数字转盘遥控<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-mwan3   #MWAN3负载均衡<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-mwan3helper   #MWAN3分流助手<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-n2n_v2   #N2N内网穿透 N2N v2 virtual**服务<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-netdata  #Netdata实时监控（图形化）<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-nfs   #NFS网络共享<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-nft-qos  #QOS流控 Nftables版<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-nlbwmon   #网络带宽监视器<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-noddos  #NodDOS Clients 阻止DDoS攻击<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-nps   #内网穿透nps<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-ntpc   #NTP时间同步服务器<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-ocserv  #OpenConnect virtual**服务<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-olsr  #OLSR配置和状态模块<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-olsr-services  #OLSR服务器<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-olsr-viz   #OLSR可视化<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-openvpn  #OpenVPN客户端<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-openvpn-server  #易于使用的OpenVPN服务器 Web-UI<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-oscam   #OSCAM服务器（丢弃）<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-p910nd   #打印服务器模块<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-pagekitec   #Pagekitec内网穿透客户端<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-polipo  #Polipo代理(是一个小型且快速的网页缓存代理)<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-pppoe-relay  #PPPoE NAT穿透 点对点协议（PPP）<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-privoxy  #Privoxy网络代理(带过滤无缓存)<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-ps3netsrv  #PS3 NET服务器（用于加载蓝光/游戏ISO/PKG）<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-qbittorrent  #BT下载工具（qBittorrent）<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-qos   #流量服务质量(QoS)流控<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-radicale   #CalDAV/CardDAV同步工具<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-ramfree  #释放内存<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-rclone  #命令行云端同步工具<br>    Include rclone-webui  #Rclone界面<br>    Include rclone-ng (another webui)  #Rclone另一个界面<br>    Include fuse-utils (mount cloud storage)  #fuse-utils（挂载云存储）<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-rp-pppoe-server  #Roaring Penguin PPPoE Server 服务器<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-samba   #网络共享（Samba）<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-samba4   #网络共享（Samba4）<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-sfe  #Turbo ACC网络加速（flowoffload二选一）<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-shadowsocks-libev  #SS-libev服务端<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-shairplay  #支持AirPlay功能<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-siitwizard  #SIIT配置向导  SIIT-Wizzard<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-simple-adblock  #简单的广告拦截<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-softethervpn  #SoftEther VPN服务器  NAT穿透<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-splash  #Client-Splash是无线MESH网络的一个热点认证系统<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-sqm  #流量智能队列管理（QOS）<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-squid   #Squid代理服务器<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-ssr-plus   #SSR Plus+<br>    Include Shadowsocks  #新SS代理<br>    Include Shadowsocks V2ray Plugin  #新V2ray代理<br>    Include Xray  #Xray代理   *<br>    Include Trojan  #Trojan代理<br>    Include Redsocks2  #socks-red2代理<br>    Include NaiveProxy  #NaiveProxy代理<br>    Include Kcptun  #Kcptun加速<br>    Include ShadowsocksR Server  #ShadowsocksR服务器<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-ssrserver-python  #SSR Python服务器<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-statistics  #流量监控工具<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-syncdial  #多拨虚拟网卡（原macvlan）<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-tinyproxy  #Tinyproxy是 HTTP(S)代理服务器<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-transmission   #BT下载工具<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-travelmate  #旅行路由器<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-ttyd   #网页终端命令行<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-udpxy  #udpxy做组播服务器<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-uhttpd  #uHTTPd Web服务器<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-unblockmusic  #解锁网易云灰色歌曲<span class="hljs-number">3</span>合<span class="hljs-number">1</span>新版本<br>    UnblockNeteaseMusic Golang Version  #Golang版本<br>    UnblockNeteaseMusic <span class="hljs-built_in">NodeJS</span> Version  #<span class="hljs-built_in">NodeJS</span>版本<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-unbound  #Unbound DNS解析器<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-upnp   #通用即插即用UPnP（端口自动转发）<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-usb-printer  #USB 打印服务器<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-uugamebooster  #UU网游加速器   *<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-v2ray-server   #V2ray 服务器<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-verysync  #微力同步<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-vlmcsd  #KMS服务器设置<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-vnstat   #vnStat网络监控（图表）（与kodexplorer冲突 ! ）<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-vpnbypass  #VPN BypassWebUI  绕过VPN设置<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-vsftpd  #FTP服务器<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-watchcat  #断网检测功能与定时重启<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-webadmin  #Web管理页面设置<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-wifischedule  #WiFi 计划<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-wireguard  #WireGuard状态<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-wol   #WOL网络唤醒<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-wrtbwmon  #实时流量监测<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-xlnetacc  #迅雷快鸟<br>L<span class="hljs-function"><span class="hljs-title">uCI</span> ---&gt;</span> A<span class="hljs-function"><span class="hljs-title">pplications</span> ---&gt;</span> luci-app-zerotier  #ZeroTier内网穿透<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>OpenWRT</category>
      
    </categories>
    
    
    <tags>
      
      <tag>路由器</tag>
      
      <tag>编译固件</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Linux工具进阶</title>
    <link href="/2021/12/11/Linux/Linux%E5%B7%A5%E5%85%B7%E8%BF%9B%E9%98%B6/"/>
    <url>/2021/12/11/Linux/Linux%E5%B7%A5%E5%85%B7%E8%BF%9B%E9%98%B6/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Linux工具</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Linux基础命令</title>
    <link href="/2021/12/10/Linux/Linux%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/"/>
    <url>/2021/12/10/Linux/Linux%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/</url>
    
    <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><h2 id="学会使用命令帮助"><a href="#学会使用命令帮助" class="headerlink" title="学会使用命令帮助"></a>学会使用命令帮助</h2><p>在linux终端，面对命令不知道怎么用，或不记得命令的拼写及参数时，我们需要求助于系统的帮助文档； linux系统内置的帮助文档很详细，通常能解决我们的问题，我们需要掌握如何正确的去使用它们；</p><ul><li>在只记得部分命令关键字的场合，我们可通过man -k来搜索；</li><li>需要知道某个命令的简要说明，可以使用whatis；而更详细的介绍，则可用info命令；</li><li>查看命令在哪个位置，我们需要使用which；</li><li>而对于命令的具体参数及使用方法，我们需要用到强大的man；</li></ul><h3 id="查看命令的简要说明"><a href="#查看命令的简要说明" class="headerlink" title="查看命令的简要说明"></a>查看命令的简要说明</h3><ol><li>简要说明命令的作用（显示命令所处的man分类页面）:</li></ol><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">whatis</span><span class="hljs-meta"> [command]</span><br></code></pre></td></tr></table></figure><ol start="2"><li>正则匹配查询 “command*” 名称:</li></ol><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">whatis</span> -w <span class="hljs-string">&quot;loca*&quot;</span><br></code></pre></td></tr></table></figure><ol start="3"><li>更加详细的说明文档:</li></ol><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-built_in">info</span> [command]<br></code></pre></td></tr></table></figure><h3 id="使用man查询command的说明文档"><a href="#使用man查询command的说明文档" class="headerlink" title="使用man查询command的说明文档"></a>使用man查询command的说明文档</h3><figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs inform7"><span class="hljs-keyword">man</span> <span class="hljs-comment">[command]</span><br></code></pre></td></tr></table></figure><blockquote><p>使用page up和page down来上下翻页</p></blockquote><p>在man的帮助手册中，将帮助文档分为了9个类别，对于有的关键字可能存在多个类别中， 我们就需要指定特定的类别来查看；（一般我们查询bash命令，归类在1类中）；</p><p>man页面所属的分类标识(常用的是分类1和分类3)</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs scss">(<span class="hljs-number">1</span>)、用户可以操作的命令或者是可执行文件<br>(<span class="hljs-number">2</span>)、系统核心可调用的函数与工具等<br>(<span class="hljs-number">3</span>)、一些常用的函数与数据库<br>(<span class="hljs-number">4</span>)、设备文件的说明<br>(<span class="hljs-number">5</span>)、设置文件或者某些文件的格式<br>(<span class="hljs-number">6</span>)、游戏<br>(<span class="hljs-number">7</span>)、惯例与协议等。例如Linux标准文件系统、网络协议、ASCⅡ，码等说明内容<br>(<span class="hljs-number">8</span>)、系统管理员可用的管理条令<br>(<span class="hljs-number">9</span>)、与内核有关的文件<br></code></pre></td></tr></table></figure><p>前面说到使用whatis会显示命令所在的具体的文档类别，我们学习如何使用它</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs perl">eg:<br><span class="hljs-variable">$whatis</span> <span class="hljs-keyword">printf</span><br><span class="hljs-keyword">printf</span>               (<span class="hljs-number">1</span>)  - <span class="hljs-keyword">format</span> <span class="hljs-keyword">and</span> <span class="hljs-keyword">print</span> data<br><span class="hljs-keyword">printf</span>               (1p)  - <span class="hljs-keyword">write</span> formatted output<br><span class="hljs-keyword">printf</span>               (<span class="hljs-number">3</span>)  - formatted output conversion<br><span class="hljs-keyword">printf</span>               (3p)  - <span class="hljs-keyword">print</span> formatted output<br><span class="hljs-keyword">printf</span> [builtins]    (<span class="hljs-number">1</span>)  - bash built-in commands, see bash(<span class="hljs-number">1</span>)<br></code></pre></td></tr></table></figure><p>我们看到printf在分类1和分类3中都有；分类1中的页面是命令操作及可执行文件的帮助；而3是常用函数库说明；如果我们想看的是C语言中printf的用法，可以指定查看分类3的帮助：</p><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs gams"><span class="hljs-meta"><span class="hljs-keyword">$man</span> 3 printf</span><br><br><span class="hljs-meta"><span class="hljs-keyword">$man</span> -k keyword</span><br></code></pre></td></tr></table></figure><p>查询关键字 根据命令中部分关键字来查询命令，适用于只记住部分命令的场合；<br>eg：查找GNOME的config配置工具命令:</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs 1c">man <span class="hljs-punctuation">-</span>k GNOME config<span class="hljs-string">| grep 1</span><br></code></pre></td></tr></table></figure><p>对于某个单词搜索，可直接使用&#x2F;word来使用: &#x2F;-a; 多关注下SEE ALSO 可看到更多精彩内容</p><h3 id="查看路径"><a href="#查看路径" class="headerlink" title="查看路径"></a>查看路径</h3><p>查看程序的binary文件所在路径:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">which</span> [<span class="hljs-built_in">command</span>]<br></code></pre></td></tr></table></figure><p>查看程序的搜索路径:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-variable">$whereis</span> [<span class="hljs-built_in">command</span>]<br></code></pre></td></tr></table></figure><blockquote><p>当系统中安装了同一软件的多个版本时，不确定使用的是哪个版本时，这个命令就能派上用场；</p></blockquote><hr><h1 id="文件及目录管理"><a href="#文件及目录管理" class="headerlink" title="文件及目录管理"></a>文件及目录管理</h1><blockquote><p>文件管理不外乎文件或目录的创建、删除、查询、移动，有mkdir&#x2F;rm&#x2F;mv</p><p>文件查询是重点，用find来进行查询；find的参数丰富，也非常强大；</p><p>查看文件内容是个大的话题，文本的处理有太多的工具供我们使用，在本章中只是点到即止，后面会有专门的一章来介绍文本的处理工具；</p><p>有时候，需要给文件创建一个别名，我们需要用到ln，使用这个别名和使用原文件是相同的效果；</p></blockquote><h2 id="创建和删除"><a href="#创建和删除" class="headerlink" title="创建和删除"></a>创建和删除</h2><h3 id="创建文件夹"><a href="#创建文件夹" class="headerlink" title="创建文件夹"></a>创建文件夹</h3><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">mkdir</span><span class="hljs-meta"> [folder_name]</span><br></code></pre></td></tr></table></figure><h3 id="删除空文件夹"><a href="#删除空文件夹" class="headerlink" title="删除空文件夹"></a>删除空文件夹</h3><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">rmdir</span><span class="hljs-meta"> [folder_name]</span><br></code></pre></td></tr></table></figure><h3 id="删除文件"><a href="#删除文件" class="headerlink" title="删除文件"></a>删除文件</h3><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">rm</span><span class="hljs-meta"> [file_name]</span><br></code></pre></td></tr></table></figure><h3 id="删除文件或者非空文件夹"><a href="#删除文件或者非空文件夹" class="headerlink" title="删除文件或者非空文件夹"></a>删除文件或者非空文件夹</h3><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">rm</span> -rf<span class="hljs-meta"> [file_name / folder_name]</span><br></code></pre></td></tr></table></figure><h3 id="删除日志"><a href="#删除日志" class="headerlink" title="删除日志"></a>删除日志</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">rm</span> *<span class="hljs-built_in">log</span> ( 等价：find ./ -name “*<span class="hljs-built_in">log</span>” -<span class="hljs-built_in">exec</span> <span class="hljs-built_in">rm</span> &#123;&#125; ;)<br></code></pre></td></tr></table></figure><h3 id="移动"><a href="#移动" class="headerlink" title="移动"></a>移动</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css">mv <span class="hljs-selector-attr">[file_name / folder_name]</span> <span class="hljs-selector-attr">[path]</span><br></code></pre></td></tr></table></figure><h3 id="复制文件"><a href="#复制文件" class="headerlink" title="复制文件"></a>复制文件</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css">cp <span class="hljs-selector-attr">[file_name]</span> <span class="hljs-selector-attr">[path]</span><br></code></pre></td></tr></table></figure><h3 id="复制目录："><a href="#复制目录：" class="headerlink" title="复制目录："></a>复制目录：</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css">cp -<span class="hljs-attribute">r</span> <span class="hljs-selector-attr">[folder_name]</span> <span class="hljs-selector-attr">[path]</span><br></code></pre></td></tr></table></figure><h3 id="查看当前目录下文件个数："><a href="#查看当前目录下文件个数：" class="headerlink" title="查看当前目录下文件个数："></a>查看当前目录下文件个数：</h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-built_in">find</span> ./ | wc -l<br></code></pre></td></tr></table></figure><h2 id="目录切换"><a href="#目录切换" class="headerlink" title="目录切换"></a>目录切换</h2><h3 id="进入path目录："><a href="#进入path目录：" class="headerlink" title="进入path目录："></a>进入path目录：</h3><figure class="highlight dos"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dos"><span class="hljs-built_in">cd</span> [<span class="hljs-built_in">path</span>]<br></code></pre></td></tr></table></figure><h3 id="切换到上一个工作目录："><a href="#切换到上一个工作目录：" class="headerlink" title="切换到上一个工作目录："></a>切换到上一个工作目录：</h3><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gams"><span class="hljs-function"><span class="hljs-title">cd</span></span> ..<br></code></pre></td></tr></table></figure><h3 id="切换到home目录："><a href="#切换到home目录：" class="headerlink" title="切换到home目录："></a>切换到home目录：</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cd</span> / <span class="hljs-built_in">cd</span> - / <span class="hljs-built_in">cd</span> ~<br></code></pre></td></tr></table></figure><h3 id="显示当前路径："><a href="#显示当前路径：" class="headerlink" title="显示当前路径："></a>显示当前路径：</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">pwd</span><br></code></pre></td></tr></table></figure><h2 id="列出目录项"><a href="#列出目录项" class="headerlink" title="列出目录项"></a>列出目录项</h2><h3 id="显示当前目录下的文件和文件夹："><a href="#显示当前目录下的文件和文件夹：" class="headerlink" title="显示当前目录下的文件和文件夹："></a>显示当前目录下的文件和文件夹：</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">ls</span><br></code></pre></td></tr></table></figure><h3 id="按时间排序，以列表的方式显示目录项："><a href="#按时间排序，以列表的方式显示目录项：" class="headerlink" title="按时间排序，以列表的方式显示目录项："></a>按时间排序，以列表的方式显示目录项：</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">ls</span> -lrt<br></code></pre></td></tr></table></figure><h3 id="给列出的文件前面增加一个id编号，使得看上去更加整洁："><a href="#给列出的文件前面增加一个id编号，使得看上去更加整洁：" class="headerlink" title="给列出的文件前面增加一个id编号，使得看上去更加整洁："></a>给列出的文件前面增加一个id编号，使得看上去更加整洁：</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">ls</span> | <span class="hljs-built_in">cat</span> -n<br></code></pre></td></tr></table></figure><h2 id="查找目录及文件-find-locate"><a href="#查找目录及文件-find-locate" class="headerlink" title="查找目录及文件 find&#x2F;locate"></a>查找目录及文件 find&#x2F;locate</h2><h3 id="搜寻文件或目录"><a href="#搜寻文件或目录" class="headerlink" title="搜寻文件或目录"></a>搜寻文件或目录</h3><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gradle"><span class="hljs-keyword">find</span> ./ -name <span class="hljs-string">&quot;core*&quot;</span> | xargs <span class="hljs-keyword">file</span><br></code></pre></td></tr></table></figure><h3 id="查找目标文件夹中是否有obj文件"><a href="#查找目标文件夹中是否有obj文件" class="headerlink" title="查找目标文件夹中是否有obj文件"></a>查找目标文件夹中是否有obj文件</h3><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros"><span class="hljs-built_in">find</span> ./ -nmae <span class="hljs-string">&#x27;*.o&#x27;</span><br></code></pre></td></tr></table></figure><h3 id="递归当前目录及子目录删除所有-o文件"><a href="#递归当前目录及子目录删除所有-o文件" class="headerlink" title="递归当前目录及子目录删除所有.o文件"></a>递归当前目录及子目录删除所有.o文件</h3><figure class="highlight sqf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sqf"><span class="hljs-built_in">find</span> ./ -<span class="hljs-built_in">name</span> <span class="hljs-string">&quot;*.o&quot;</span> -<span class="hljs-built_in">exec</span> rm &#123;&#125; \<br></code></pre></td></tr></table></figure><p>find是实时查找，如果需要更快的查询，可以试试locate；locate会为文件系统建立索引数据库，如果有文件更新，需要定期执行更新命令来更新索引库</p><figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gauss"><span class="hljs-keyword">locate</span> <span class="hljs-keyword">string</span><br></code></pre></td></tr></table></figure><p>寻找包含string的路径</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">updatedb</span><br></code></pre></td></tr></table></figure><p>与find不同，locate并不是实时查找，你需要更新数据库，以获得最新的文件索引信息。</p><h2 id="查看文件内容"><a href="#查看文件内容" class="headerlink" title="查看文件内容"></a>查看文件内容</h2><p>查看文件：cat vi head tail more</p><h3 id="显示相同时显示行号"><a href="#显示相同时显示行号" class="headerlink" title="显示相同时显示行号"></a>显示相同时显示行号</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cat</span> -n<br></code></pre></td></tr></table></figure><h3 id="按页显示列表内容"><a href="#按页显示列表内容" class="headerlink" title="按页显示列表内容"></a>按页显示列表内容</h3><figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stata"><span class="hljs-keyword">ls</span> -al | <span class="hljs-keyword">more</span><br></code></pre></td></tr></table></figure><h3 id="只看前10行"><a href="#只看前10行" class="headerlink" title="只看前10行"></a>只看前10行</h3><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">head</span> - <span class="hljs-number">10</span> **<br></code></pre></td></tr></table></figure><h3 id="显示文件第一行"><a href="#显示文件第一行" class="headerlink" title="显示文件第一行"></a>显示文件第一行</h3><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">head</span> -<span class="hljs-number">1</span><span class="hljs-meta"> [file_name]</span><br></code></pre></td></tr></table></figure><h3 id="显示文件倒数第五行"><a href="#显示文件倒数第五行" class="headerlink" title="显示文件倒数第五行"></a>显示文件倒数第五行</h3><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">tail</span> -<span class="hljs-number">5</span><span class="hljs-meta"> [file_name]</span><br></code></pre></td></tr></table></figure><h3 id="查看两个文件间的区别"><a href="#查看两个文件间的区别" class="headerlink" title="查看两个文件间的区别"></a>查看两个文件间的区别</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css">diff <span class="hljs-selector-attr">[file1]</span> <span class="hljs-selector-attr">[file2]</span><br></code></pre></td></tr></table></figure><h3 id="动态显示文本最新信息"><a href="#动态显示文本最新信息" class="headerlink" title="动态显示文本最新信息"></a>动态显示文本最新信息</h3><figure class="highlight stan"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stan"><span class="hljs-built_in">tail</span> -f crawler.<span class="hljs-built_in">log</span><br></code></pre></td></tr></table></figure><h2 id="查找文件内容"><a href="#查找文件内容" class="headerlink" title="查找文件内容"></a>查找文件内容</h2><p>使用egrep查询文件内容</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs vim">egrep <span class="hljs-string">&#x27;03.1\/CO\/AE&#x27;</span> TSF_STAT_111130.<span class="hljs-built_in">log</span>.<span class="hljs-number">012</span><br>egrep <span class="hljs-string">&#x27;A_LMCA777:C&#x27;</span> TSF_STAT_111130.<span class="hljs-built_in">log</span>.<span class="hljs-number">035</span> &gt; <span class="hljs-keyword">co</span>.out2<br></code></pre></td></tr></table></figure><h2 id="文件与目录权限修改"><a href="#文件与目录权限修改" class="headerlink" title="文件与目录权限修改"></a>文件与目录权限修改</h2><h3 id="改变文件的拥有者："><a href="#改变文件的拥有者：" class="headerlink" title="改变文件的拥有者："></a>改变文件的拥有者：</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">chown</span><br></code></pre></td></tr></table></figure><h3 id="改变文件读、写、执行等属性："><a href="#改变文件读、写、执行等属性：" class="headerlink" title="改变文件读、写、执行等属性："></a>改变文件读、写、执行等属性：</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">chmod</span><br></code></pre></td></tr></table></figure><h3 id="递归子目录修改："><a href="#递归子目录修改：" class="headerlink" title="递归子目录修改："></a>递归子目录修改：</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">chown</span> -R tuxapp <span class="hljs-built_in">source</span>/<br></code></pre></td></tr></table></figure><h3 id="增加脚本可执行权限："><a href="#增加脚本可执行权限：" class="headerlink" title="增加脚本可执行权限："></a>增加脚本可执行权限：</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css">chmod <span class="hljs-selector-tag">a</span>+<span class="hljs-attribute">x</span> muscript<br></code></pre></td></tr></table></figure><h2 id="给文件增加别名"><a href="#给文件增加别名" class="headerlink" title="给文件增加别名"></a>给文件增加别名</h2><p>传感符号链接&#x2F;硬链接</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">ln</span> <span class="hljs-keyword">cc</span> ccAgain :硬连接；删除一个，将仍能找到；<br><span class="hljs-keyword">ln</span> -s <span class="hljs-keyword">cc</span> ccTo :符号链接(软链接)；删除源，另一个无法使用；（后面一个ccTo 为新建的文件）<br></code></pre></td></tr></table></figure><h2 id="管道和重定向"><a href="#管道和重定向" class="headerlink" title="管道和重定向"></a>管道和重定向</h2><h3 id="批处理命令连接执行："><a href="#批处理命令连接执行：" class="headerlink" title="批处理命令连接执行："></a>批处理命令连接执行：</h3><p><code>|</code></p><h3 id="串联："><a href="#串联：" class="headerlink" title="串联："></a>串联：</h3><p><code>;</code></p><h3 id="前面成功，则执行后面一条，否则，不执行："><a href="#前面成功，则执行后面一条，否则，不执行：" class="headerlink" title="前面成功，则执行后面一条，否则，不执行："></a>前面成功，则执行后面一条，否则，不执行：</h3><p><code>&amp;&amp;</code></p><h3 id="前面失败，则最后一条执行："><a href="#前面失败，则最后一条执行：" class="headerlink" title="前面失败，则最后一条执行："></a>前面失败，则最后一条执行：</h3><p><code>||</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">ls</span> /proc &amp;&amp; <span class="hljs-built_in">echo</span>  suss! || <span class="hljs-built_in">echo</span> failed.<br></code></pre></td></tr></table></figure><p>能给提升命令是否执行成功or失败</p><p>与上述相同效果的是</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">if</span> <span class="hljs-built_in">ls</span> /proc; <span class="hljs-keyword">then</span> <span class="hljs-built_in">echo</span> suss; <span class="hljs-keyword">else</span> <span class="hljs-built_in">echo</span> fail; <span class="hljs-keyword">fi</span><br></code></pre></td></tr></table></figure><p>重定向</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli"><span class="hljs-keyword">ls</span>  proc/*<span class="hljs-string">.c</span> &gt; list 2&gt; &amp;l 将标准输出和标准错误重定向到同一文件；<br></code></pre></td></tr></table></figure><p>等价的是：</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs jboss-cli"><span class="hljs-keyword">ls</span>  proc/*<span class="hljs-string">.c</span> &amp;&gt; list<br></code></pre></td></tr></table></figure><p>清空文件：</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-symbol">:&gt;</span> a.txt<br></code></pre></td></tr></table></figure><p>重定向</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">echo</span> aa &gt;&gt; a.txt<br></code></pre></td></tr></table></figure><h2 id="设置环境变量"><a href="#设置环境变量" class="headerlink" title="设置环境变量"></a>设置环境变量</h2><p>启动账号后自动执行的是文件为 .profile 。然后通过这个文件可以设置自己的环境变量</p><p>安装软件路径一般需要加入到path中</p><figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir"><span class="hljs-title class_">PATH</span>=<span class="hljs-variable">$APPDIR</span><span class="hljs-symbol">:/opt/app/soft/bin</span><span class="hljs-symbol">:</span><span class="hljs-variable">$PATH</span><span class="hljs-symbol">:/usr/local/bin</span><span class="hljs-symbol">:</span><span class="hljs-variable">$TUXDIR</span>/<span class="hljs-symbol">bin:</span><span class="hljs-variable">$ORACLE_HOME</span>/bin;export <span class="hljs-title class_">PATH</span><br></code></pre></td></tr></table></figure><h2 id="Bash快捷输入或删除"><a href="#Bash快捷输入或删除" class="headerlink" title="Bash快捷输入或删除"></a>Bash快捷输入或删除</h2><p>快捷键：</p><figure class="highlight tp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs tp">Ctl-U   删除光标到行首的所有字符,在某些设置下,删除全行<br>Ctl-<span class="hljs-keyword">W</span>   删除当前光标到前边的最近一个空格之间的字符<br>Ctl-H   backspace,删除光标前边的字符<br>Ctl-<span class="hljs-keyword">R</span>   匹配最相近的一个文件，然后输出<br></code></pre></td></tr></table></figure><h2 id="综合应用"><a href="#综合应用" class="headerlink" title="综合应用"></a>综合应用</h2><p>查找record.log中包含AAA，但不包含BBB的记录的总数</p><figure class="highlight coq"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs coq">cat -v <span class="hljs-built_in">record</span>.log | <span class="hljs-type">grep</span> AAA | <span class="hljs-type">grep</span> -v BBB | <span class="hljs-type">wc</span> -l<br></code></pre></td></tr></table></figure><hr><h2 id="文件下载"><a href="#文件下载" class="headerlink" title="文件下载"></a>文件下载</h2><h3 id="wget"><a href="#wget" class="headerlink" title="wget"></a>wget</h3><blockquote><p>Linux系统中的wget是一个下载文件的工具，它用在命令行下。对于Linux用户是必不可少的工具，我们经常要下载一些软件或从远程服务器恢复备份到本地服务器。wget支持HTTP，HTTPS和FTP协议，可以使用HTTP代理。<br>wget 可以跟踪HTML页面上的链接依次下载来创建远程服务器的本地版本，完全重建原始站点的目录结构。这又常被称作”递归下载”。在递归下载的时候，wget 遵循Robot Exclusion标准(&#x2F;robots.txt). wget可以在下载的同时，将链接转换成指向本地文件，以方便离线浏览。<br>wget 非常稳定，它在带宽很窄的情况下和不稳定网络中有很强的适应性.如果是由于网络的原因下载失败，wget会不断的尝试，直到整个文件下载完毕。如果是服务器打断下载过程，它会再次联到服务器上从停止的地方继续下载。这对从那些限定了链接时间的服务器上下载大文件非常有用。</p></blockquote><h4 id="命令格式"><a href="#命令格式" class="headerlink" title="命令格式"></a>命令格式</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css">wget <span class="hljs-selector-attr">[参数]</span> <span class="hljs-selector-attr">[URL]</span><br></code></pre></td></tr></table></figure><h4 id="命令参数"><a href="#命令参数" class="headerlink" title="命令参数"></a>命令参数</h4><h5 id="1-启动参数"><a href="#1-启动参数" class="headerlink" title="1. 启动参数"></a>1. 启动参数</h5><ul><li>-V, –version 显示wget的版本后退出</li><li>-h, –help 打印语法帮助</li><li>-b, –background 启动后转入后台执行</li></ul><h5 id="2-下载参数"><a href="#2-下载参数" class="headerlink" title="2. 下载参数"></a>2. 下载参数</h5><ul><li>-t, –tries&#x3D;NUMBER 设定最大尝试链接次数(0 表示无限制).</li><li>-c, –continue 接着下载没下载完的文件</li><li>-N, –timestamping 不要重新下载文件，除非比本地文件新</li><li>-T, –timeout&#x3D;SECONDS 设定响应超时的秒数</li><li>-Y, -proxy&#x3D;on&#x2F;off 打开或关闭代理</li><li>-Q, -quota&#x3D;NUMBER 设置下载的容量限制</li><li>-limit-rate&#x3D;RATE 限定下载输率</li></ul><h5 id="3-目录参数"><a href="#3-目录参数" class="headerlink" title="3. 目录参数"></a>3. 目录参数</h5><ul><li>-nd –no-directories 不创建目录</li><li>-x, –force-directories 强制创建目录</li><li>-nH, –no-host-directories 不创建主机目录</li><li>-P, –directory-prefix&#x3D;PREFIX 将文件保存到目录 PREFIX&#x2F;…</li></ul><h4 id="使用实例"><a href="#使用实例" class="headerlink" title="使用实例"></a>使用实例</h4><h5 id="1-下载单个文件"><a href="#1-下载单个文件" class="headerlink" title="1. 下载单个文件"></a>1. 下载单个文件</h5><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">wget</span><span class="hljs-meta"> [URL]</span><br></code></pre></td></tr></table></figure><blockquote><p>说明：以上例子从网络下载一个文件并保存在当前目录，在下载的过程中会显示进度条，包含（下载完成百分比，已经下载的字节，当前下载速度，剩余下载时间）。</p></blockquote><h5 id="2-下载并以不同的文件名保存"><a href="#2-下载并以不同的文件名保存" class="headerlink" title="2. 下载并以不同的文件名保存"></a>2. 下载并以不同的文件名保存</h5><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css">wget -O <span class="hljs-selector-attr">[FILE_NAME]</span> <span class="hljs-selector-attr">[URL]</span><br></code></pre></td></tr></table></figure><blockquote><p>wget默认会以<code>[URL]</code>最后一个符合”&#x2F;“的后面的字符来对文件进行命名，对于动态链接的下载通常文件名会不正确。</p></blockquote><ul><li>错误：下面的例子会下载一个文件并以名称为<code>download.aspx?id=1000</code>保存：</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">wget http://www,baidu.com/download.aspx?<span class="hljs-built_in">id</span>=1000<br></code></pre></td></tr></table></figure><p>即使下载的文件是zip格式，它仍然以<code>download.aspx?id=1000</code>来命名文件</p><ul><li>正确：为了解决这个问题，我们可以使用参数<code>-O</code>来指定文件名：</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">wget -O test.zip http://www,baidu.com/download.aspx?<span class="hljs-built_in">id</span>=1000<br></code></pre></td></tr></table></figure><h5 id="3-限速下载"><a href="#3-限速下载" class="headerlink" title="3. 限速下载"></a>3. 限速下载</h5><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">wget</span> --limit-rate=<span class="hljs-number">300</span>k<span class="hljs-meta"> [URL]</span><br></code></pre></td></tr></table></figure><blockquote><p>当你执行wget的时候，它默认会占用全部可能的宽带下载。但是当你准备下载一个大文件，而你还需要下载其它文件时就有必要限速了。</p></blockquote><h5 id="4-断点续传"><a href="#4-断点续传" class="headerlink" title="4. 断点续传"></a>4. 断点续传</h5><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">wget</span> -c<span class="hljs-meta"> [URL]</span><br></code></pre></td></tr></table></figure><blockquote><p>使用wget -c重新启动下载中断的文件，对于我们下载大文件时突然由于网络等原因中断非常有帮助，我们可以继续接着下载而不是重新下载一个文件。需要继续中断的下载时可以使用-c参数。</p></blockquote><h5 id="5-后台下载"><a href="#5-后台下载" class="headerlink" title="5. 后台下载"></a>5. 后台下载</h5><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver">wget -b [<span class="hljs-built_in">URL</span>]<br><br>Continuing <span class="hljs-keyword">in</span> background, pid <span class="hljs-number">1840.</span><br>Output will be written <span class="hljs-built_in">to</span> <span class="hljs-string">&#x27;wget-log&#x27;</span>.<br></code></pre></td></tr></table></figure><blockquote><p>对于下载非常大的文件的时候，我们可以使用参数-b进行后台下载。</p><p>你可以使用以下命令来察看下载进度:<code>tail -f wget-log</code></p></blockquote><h5 id="6-伪装代理名称下载"><a href="#6-伪装代理名称下载" class="headerlink" title="6. 伪装代理名称下载"></a>6. 伪装代理名称下载</h5><figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs accesslog">wget --user-agent=<span class="hljs-string">&quot;Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US) AppleWebKit/534.16 (KHTML, like Gecko) Chrome/10.0.648.204 Safari/534.16&quot;</span> <span class="hljs-string">[URL]</span><br></code></pre></td></tr></table></figure><blockquote><p>有些网站能通过根据判断代理名称不是浏览器而拒绝你的下载请求。不过你可以通过–user-agent参数伪装。</p></blockquote><h5 id="7-下载多个文件"><a href="#7-下载多个文件" class="headerlink" title="7. 下载多个文件"></a>7. 下载多个文件</h5><p>首先，保存一份下载链接文件,接着使用这个文件和参数-i下载:</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs powershell"><span class="hljs-built_in">cat</span> &gt; filelist.txt<br>url1<br>url2<br>url3<br>url4<br><br><span class="hljs-built_in">wget</span> <span class="hljs-literal">-i</span> filelist.txt<br></code></pre></td></tr></table></figure><h5 id="8-增加重试次数"><a href="#8-增加重试次数" class="headerlink" title="8. 增加重试次数"></a>8. 增加重试次数</h5><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">wget</span> --tries=<span class="hljs-number">40</span><span class="hljs-meta"> [URL]</span><br></code></pre></td></tr></table></figure><blockquote><p>如果网络有问题或者下载一个大文件失败，wget默认会重试20次连接下载文件，如果需要，你可以使用<code>--tries</code>增加重试次数。</p></blockquote><h5 id="9-下载指定格式文件"><a href="#9-下载指定格式文件" class="headerlink" title="9. 下载指定格式文件"></a>9. 下载指定格式文件</h5><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css">wget -<span class="hljs-attribute">r</span> -<span class="hljs-selector-tag">A</span><span class="hljs-selector-class">.pdf</span> url<br></code></pre></td></tr></table></figure><blockquote><p>可以在以下情况使用该功能：</p><p>下载一个网站的所有图片</p><p>下载一个网站的所有视频</p><p>下载一个网站的所有PDF文件</p></blockquote><h5 id="10-FTP下载"><a href="#10-FTP下载" class="headerlink" title="10. FTP下载"></a>10. FTP下载</h5><p>可以使用wget来完成ftp链接的下载：</p><ul><li>使用wget匿名ftp下载：</li></ul><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">wget ftp-url</span><br></code></pre></td></tr></table></figure><ul><li>使用wget用户名和密码认证的ftp下载：</li></ul><figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs routeros">wget –<span class="hljs-attribute">ftp-user</span>=USERNAME –<span class="hljs-attribute">ftp-password</span>=PASSWORD url<br></code></pre></td></tr></table></figure><h4 id="详细使用"><a href="#详细使用" class="headerlink" title="详细使用"></a>详细使用</h4><p><a href="https://linuxtools-rst.readthedocs.io/zh_CN/latest/tool/wget.html">wget 详细使用方法</a></p><hr><h2 id="高级命令"><a href="#高级命令" class="headerlink" title="高级命令"></a>高级命令</h2>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Linux命令</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>OpenMediaVault安装与配置</title>
    <link href="/2021/12/08/OpenMediaVault/OpenMediaVault%E5%AE%89%E8%A3%85%E4%B8%8E%E9%85%8D%E7%BD%AE/"/>
    <url>/2021/12/08/OpenMediaVault/OpenMediaVault%E5%AE%89%E8%A3%85%E4%B8%8E%E9%85%8D%E7%BD%AE/</url>
    
    <content type="html"><![CDATA[<p>OpenMediaVault是基于Debian系统进行开发的网络附加存储 (NAS) 解决方案。它包含 SSH、(S)FTP、SMB&#x2F;CIFS、DAAP媒体服务器、RSync、BitTorrent客户端等服务。由于框架的模块化设计，它可以通过插件进行增强；主要设计用于小型办公室或家庭办公室，但不限于这些场景。这是一个简单且易于使用的开箱即用解决方案，允许每个人安装和管理网络附加存储，而无需深入了解。</p><h2 id="安装OpenMediaVault"><a href="#安装OpenMediaVault" class="headerlink" title="安装OpenMediaVault"></a>安装OpenMediaVault</h2><h3 id="下载镜像文件"><a href="#下载镜像文件" class="headerlink" title="下载镜像文件"></a>下载镜像文件</h3><p><a href="https://www.openmediavault.org/">Openmediavault官方网站</a></p><h3 id="烧写镜像文件"><a href="#烧写镜像文件" class="headerlink" title="烧写镜像文件"></a>烧写镜像文件</h3><p>下载并安装<a href="https://www.raspberrypi.com/software/">Raspberry Pi Imager</a>软件，先对U盘擦除再进行镜像烧录。</p><h3 id="首次开机启动"><a href="#首次开机启动" class="headerlink" title="首次开机启动"></a>首次开机启动</h3><p>首次开机需要使用root用户登录进行配置。</p><h4 id="配置网络"><a href="#配置网络" class="headerlink" title="配置网络"></a>配置网络</h4><p>查看系统中的网卡信息：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">ip a<br></code></pre></td></tr></table></figure><p><img src="/2021/12/08/OpenMediaVault/OpenMediaVault%E5%AE%89%E8%A3%85%E4%B8%8E%E9%85%8D%E7%BD%AE/view_network_card.png" alt="查看系统网卡"></p><p>如图所示，我的电脑有2个网卡：<code>enp6s0</code>为板载网卡，<code>wlp4s0</code>为无线网卡。</p><p>连接WIFI</p><blockquote><p>如果使用的网线连接，那么该步骤可跳过。</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">omv-firstaid<br></code></pre></td></tr></table></figure><p>选择<code>Configure network interface</code>回车，然后选择无线网卡名称：<code>wlp4s0</code>，询问是否开启DHCP以及IPv6，都选择YES即可，后续输入WIFI名称及密码，系统会尝试连接，连接成功后退出即可。</p><h3 id="网络代理"><a href="#网络代理" class="headerlink" title="网络代理"></a>网络代理</h3><p>详情请查看这篇文章：<a href="xxx"></a></p><h3 id="安装Docker"><a href="#安装Docker" class="headerlink" title="安装Docker"></a>安装Docker</h3><p>以下只记录部分安装操作，详细安装说明请查看官网文档：<a href="https://docs.docker.com/engine/install/debian/">Install Docker Engine on Debian</a>。</p><blockquote><p>如果使用root用户登录，命令前不用添加<code>sudo</code>。</p></blockquote><p>卸载所有冲突的软件包</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-keyword">for</span> pkg <span class="hljs-keyword">in</span> docker.io docker-doc docker-compose podman-docker containerd runc; <span class="hljs-keyword">do</span> <span class="hljs-built_in">sudo</span> apt-get remove <span class="hljs-variable">$pkg</span>; <span class="hljs-keyword">done</span><br></code></pre></td></tr></table></figure><p>添加Docker官网GPG密钥</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> apt-get update<br><br><span class="hljs-built_in">sudo</span> apt-get install ca-certificates curl<br><br><span class="hljs-built_in">sudo</span> install -m 0755 -d /etc/apt/keyrings<br><br><span class="hljs-built_in">sudo</span> curl -fsSL https://download.docker.com/linux/debian/gpg -o /etc/apt/keyrings/docker.asc<br><br><span class="hljs-built_in">sudo</span> <span class="hljs-built_in">chmod</span> a+r /etc/apt/keyrings/docker.asc<br></code></pre></td></tr></table></figure><p>将官方Docker存储库添加到apt源</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">echo</span> \<br>  <span class="hljs-string">&quot;deb [arch=<span class="hljs-subst">$(dpkg --print-architecture)</span> signed-by=/etc/apt/keyrings/docker.asc] https://download.docker.com/linux/debian \</span><br><span class="hljs-string">  <span class="hljs-subst">$(. /etc/os-release &amp;&amp; echo <span class="hljs-string">&quot;<span class="hljs-variable">$VERSION_CODENAME</span>&quot;</span>)</span> stable&quot;</span> | \<br>  <span class="hljs-built_in">sudo</span> <span class="hljs-built_in">tee</span> /etc/apt/sources.list.d/docker.list &gt; /dev/null<br></code></pre></td></tr></table></figure><p>更新源</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> apt-get update<br></code></pre></td></tr></table></figure><p>安装Docker</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> apt-get install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin<br></code></pre></td></tr></table></figure><p>验证Docker是否安装成功</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> docker run hello-world<br></code></pre></td></tr></table></figure><p>由于Docker默认镜像源为国外镜像源，所以这一步大概率会报错：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">Unable to find image <span class="hljs-string">&#x27;hello-world:latest&#x27;</span> locally<br>docker: Error response from daemon: Get <span class="hljs-string">&quot;https://registry-1.docker.io/v2/&quot;</span>: net/http: request canceled <span class="hljs-keyword">while</span> waiting <span class="hljs-keyword">for</span> connection (Client.Timeout exceeded <span class="hljs-keyword">while</span> awaiting headers)<br><br>Run <span class="hljs-string">&#x27;docker run --help&#x27;</span> <span class="hljs-keyword">for</span> more information<br></code></pre></td></tr></table></figure><p>将默认镜像源更换为国内镜像加速</p><blockquote><p>建议使用root用户执行，不用担心文件权限。</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> nano /etc/docker/daemon.json<br></code></pre></td></tr></table></figure><p>输入以下内容<sup id="fnref:1" class="footnote-ref"><a href="#fn:1" rel="footnote"><span class="hint--top hint--rounded" aria-label="[CentOS docker换镜像源](https://www.cnblogs.com/HookDing/p/18853142)">[1]</span></a></sup></p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs txt">&#123;<br>    &quot;registry-mirrors&quot;: [<br>        &quot;https://docker.1ms.run&quot;,<br>        &quot;https://docker.xuanyuan.me&quot;<br>    ]<br>&#125;<br></code></pre></td></tr></table></figure><p>重启相关服务</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> systemctl daemon-reload<br><br><span class="hljs-built_in">sudo</span> systemctl restart docker<br></code></pre></td></tr></table></figure><p>为docker pull 及 push 设置代理<sup id="fnref:2" class="footnote-ref"><a href="#fn:2" rel="footnote"><span class="hint--top hint--rounded" aria-label="[docker 设置代理，以及国内加速镜像设置](https://neucrack.com/p/286)">[2]</span></a></sup></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> <span class="hljs-built_in">mkdir</span> -p /etc/systemd/system/docker.service.d<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> nano /etc/systemd/system/docker.service.d/http-proxy.conf<br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">[Service]<br>Environment=<span class="hljs-string">&quot;HTTP_PROXY=http://ip:port&quot;</span><br>Environment=<span class="hljs-string">&quot;HTTPS_PROXY=http://ip:port&quot;</span><br></code></pre></td></tr></table></figure><p>查看docker环境变量</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> systemctl show --property=Environment docker<br></code></pre></td></tr></table></figure><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs txt">Environment=HTTP_PROXY=http://ip:port HTTPS_PROXY=http://ip:port<br></code></pre></td></tr></table></figure><p>为docker run设置代理</p><blockquote><p>在<code>run</code>命令后添加<code>-e</code>参数设置代理。</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> docker compose run -e http_proxy=http://ip:port -e https_proxy=http://ip:port xxx<br></code></pre></td></tr></table></figure><p>再次验证Docker是否安装成功</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> docker run hello-world<br></code></pre></td></tr></table></figure><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs txt">Hello from Docker!<br>This message shows that your installation appears to be working correctly.<br></code></pre></td></tr></table></figure><h3 id="管理Docker"><a href="#管理Docker" class="headerlink" title="管理Docker"></a>管理Docker</h3><p>以下列出使用Docker时的一些相关操作。</p><h4 id="容器管理"><a href="#容器管理" class="headerlink" title="容器管理"></a>容器管理</h4><p>列出本地容器。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> docker ps -a<br></code></pre></td></tr></table></figure><p>停止容器。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> docker stop &lt;CONTAINER ID&gt;<br></code></pre></td></tr></table></figure><p>删除容器。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> docker <span class="hljs-built_in">rm</span> &lt;CONTAINER ID&gt;<br></code></pre></td></tr></table></figure><h4 id="镜像管理"><a href="#镜像管理" class="headerlink" title="镜像管理"></a>镜像管理</h4><p>列出本地镜像。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> docker images<br></code></pre></td></tr></table></figure><p>（强制）删除镜像。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> docker rmi -f &lt;IMAGE ID&gt;<br></code></pre></td></tr></table></figure><h4 id="卷管理"><a href="#卷管理" class="headerlink" title="卷管理"></a>卷管理</h4><p>列出本地卷。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> docker volume list<br></code></pre></td></tr></table></figure><p>删除卷。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> docker volume <span class="hljs-built_in">rm</span> &lt;VOLUME NAME&gt;<br></code></pre></td></tr></table></figure><h4 id="日志"><a href="#日志" class="headerlink" title="日志"></a>日志</h4><p>查看运行日志。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> journalctl -u docker.service<br></code></pre></td></tr></table></figure><h3 id="开启OMV-EXTRAS"><a href="#开启OMV-EXTRAS" class="headerlink" title="开启OMV-EXTRAS"></a>开启OMV-EXTRAS</h3><p>开启社区插件功能。<sup id="fnref:3" class="footnote-ref"><a href="#fn:3" rel="footnote"><span class="hint--top hint--rounded" aria-label="[omv-extras.org](https://wiki.omv-extras.org/)">[3]</span></a></sup></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">sudo</span> wget -O - https://github.com/OpenMediaVault-Plugin-Developers/packages/raw/master/install | bash<br></code></pre></td></tr></table></figure><h2 id="特别鸣谢"><a href="#特别鸣谢" class="headerlink" title="特别鸣谢"></a>特别鸣谢</h2><section class="footnotes"><div class="footnote-list"><ol><li><span id="fn:1" class="footnote-text"><span><a href="https://www.cnblogs.com/HookDing/p/18853142">CentOS docker换镜像源</a><a href="#fnref:1" rev="footnote" class="footnote-backref"> ↩</a></span></span></li><li><span id="fn:2" class="footnote-text"><span><a href="https://neucrack.com/p/286">docker 设置代理，以及国内加速镜像设置</a><a href="#fnref:2" rev="footnote" class="footnote-backref"> ↩</a></span></span></li><li><span id="fn:3" class="footnote-text"><span><a href="https://wiki.omv-extras.org/">omv-extras.org</a><a href="#fnref:3" rev="footnote" class="footnote-backref"> ↩</a></span></span></li></ol></div></section>]]></content>
    
    
    <categories>
      
      <category>OpenMediaVault</category>
      
    </categories>
    
    
    <tags>
      
      <tag>OpenMediaVault</tag>
      
      <tag>NAS</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>一加6刷机笔记</title>
    <link href="/2021/12/06/%E5%88%B7%E6%9C%BA/%E4%B8%80%E5%8A%A06%E5%88%B7%E6%9C%BA%E7%AC%94%E8%AE%B0/"/>
    <url>/2021/12/06/%E5%88%B7%E6%9C%BA/%E4%B8%80%E5%8A%A06%E5%88%B7%E6%9C%BA%E7%AC%94%E8%AE%B0/</url>
    
    <content type="html"><![CDATA[<h2 id="刷机步骤"><a href="#刷机步骤" class="headerlink" title="刷机步骤"></a>刷机步骤</h2><h3 id="1-开启USB调试模式"><a href="#1-开启USB调试模式" class="headerlink" title="1. 开启USB调试模式"></a>1. 开启USB调试模式</h3><p>进入 <em>设置 &gt; 关于手机</em>，连续点击 <em>版本号</em> 5次，开启 <strong>开发者选项</strong></p><h3 id="2-进入Bootloder模式"><a href="#2-进入Bootloder模式" class="headerlink" title="2. 进入Bootloder模式"></a>2. 进入Bootloder模式</h3><p>手机关机，按住 <em>开机键+音量下键</em> 进入Bootloder模式</p><h3 id="3-解OEM锁"><a href="#3-解OEM锁" class="headerlink" title="3. 解OEM锁"></a>3. 解OEM锁</h3><p>使用数据线，将手机与电脑连接起来，打开电脑上的CMD，输入<code>adb start-server</code>连接手机，然后输入<code>fastboot oem unlock</code>解锁，此时手机上会有解锁风险提示，使用音量上下键，选择最下面的选项，按一下开机键确认解锁，系统会擦除原有手机数据，完成解锁。</p><h3 id="4-刷入Recovery"><a href="#4-刷入Recovery" class="headerlink" title="4. 刷入Recovery"></a>4. 刷入Recovery</h3><p>老方法：</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">fastboot</span> flash recovery recovery.img<br></code></pre></td></tr></table></figure><p>由于一加6采用双系统（a&#x2F;b），所以不能按老方法直接使用命令刷入第三方recovery</p><p>新方法：  </p><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm">fastboot flash <span class="hljs-keyword">boot </span>recovery.img <span class="hljs-comment">#获取临时第三方recovery</span><br></code></pre></td></tr></table></figure><p>然后使用<code>fastboot reboot recovery</code>重启进入临时第三方recovery，在recovery里刷入第三方recovery的zip包即可获得永久recovery。</p><h3 id="5-刷入第三方刷机包"><a href="#5-刷入第三方刷机包" class="headerlink" title="5. 刷入第三方刷机包"></a>5. 刷入第三方刷机包</h3><p>将下载好的第三方刷机包，放入手机目录，进入第三方Recovery刷入即可。</p>]]></content>
    
    
    <categories>
      
      <category>刷机</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Android</tag>
      
      <tag>一加6</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Fastboot命令</title>
    <link href="/2021/12/06/%E5%88%B7%E6%9C%BA/Fastboot%E5%91%BD%E4%BB%A4/"/>
    <url>/2021/12/06/%E5%88%B7%E6%9C%BA/Fastboot%E5%91%BD%E4%BB%A4/</url>
    
    <content type="html"><![CDATA[<blockquote><p>Fastboot：英文翻译为快速启动的意思；在Android手机中Fastboot是一种比Recovery更底层的刷机模式；是使用USB数据线连接手机进行刷机的工具（俗称线刷）。</p></blockquote><h2 id="基础命令"><a href="#基础命令" class="headerlink" title="基础命令"></a>基础命令</h2><h3 id="1-重启进入系统"><a href="#1-重启进入系统" class="headerlink" title="1. 重启进入系统"></a>1. 重启进入系统</h3><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">fastboot reboot</span><br></code></pre></td></tr></table></figure><h3 id="2-解锁OEM锁"><a href="#2-解锁OEM锁" class="headerlink" title="2. 解锁OEM锁"></a>2. 解锁OEM锁</h3><ul><li>对于新款设备（2015 年及之后发布的设备）：</li></ul><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">fastboot flashing unlock</span><br></code></pre></td></tr></table></figure><ul><li>对于老款设备（2014 年及之前发布的设备）：</li></ul><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">fastboot oem unlock</span><br></code></pre></td></tr></table></figure><h3 id="3-OEM上锁"><a href="#3-OEM上锁" class="headerlink" title="3. OEM上锁"></a>3. OEM上锁</h3><ul><li>对于新款设备（2015 年及之后发布的设备）：</li></ul><figure class="highlight cos"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cos">fastboot flashing <span class="hljs-keyword">lock</span><br></code></pre></td></tr></table></figure><ul><li>对于老款设备（2014 年及之前发布的设备）：</li></ul><figure class="highlight cos"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cos">fastboot oem <span class="hljs-keyword">lock</span><br></code></pre></td></tr></table></figure><hr><h2 id="刷机相关"><a href="#刷机相关" class="headerlink" title="刷机相关"></a>刷机相关</h2><h3 id="1-切换到分区a"><a href="#1-切换到分区a" class="headerlink" title="1. 切换到分区a"></a>1. 切换到分区a</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css">fastboot set_active <span class="hljs-selector-tag">a</span><br></code></pre></td></tr></table></figure><h3 id="2-擦除对应分区"><a href="#2-擦除对应分区" class="headerlink" title="2. 擦除对应分区"></a>2. 擦除对应分区</h3><figure class="highlight arcade"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs arcade">fastboot <span class="hljs-built_in">erase</span> &#123;partition&#125;<br></code></pre></td></tr></table></figure><blockquote><p>{partition} 可选参数：<br><code>recovery</code>：Recovery分区<br><code>system</code>：系统分区<br><code>boot</code>：Boot分区<br><code>cache</code>：缓存分区<br><code>userdata</code>：用户数据分区</p></blockquote><h3 id="3-刷入对应分区"><a href="#3-刷入对应分区" class="headerlink" title="3. 刷入对应分区"></a>3. 刷入对应分区</h3><figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dust"><span class="language-xml">fastboot flash </span><span class="hljs-template-variable">&#123;partition&#125;</span><span class="language-xml"> </span><span class="hljs-template-variable">&#123;img&#125;</span><span class="language-xml">：刷入对应分区的镜像文件</span><br></code></pre></td></tr></table></figure><blockquote><p>{partition} 和 {img} 是配合使用的命令参数，使用方法为：<br><code>recovery recovery.img</code>：刷入recovery<br><code>boot boot.img</code>：刷入boot<br><code>system system.img</code>：刷入system<br><code>persist persist.img</code>：刷入persist  </p></blockquote>]]></content>
    
    
    <categories>
      
      <category>刷机</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Android</tag>
      
      <tag>Fastboot</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Adb命令</title>
    <link href="/2021/12/04/%E5%88%B7%E6%9C%BA/Adb%E5%91%BD%E4%BB%A4/"/>
    <url>/2021/12/04/%E5%88%B7%E6%9C%BA/Adb%E5%91%BD%E4%BB%A4/</url>
    
    <content type="html"><![CDATA[<blockquote><p><a href="https://developer.android.com/studio/command-line/adb">ADB官方介绍</a></p><blockquote><p>ADB全称为：Android Debug Bridge，可翻译为Android 调试桥(adb)，是一种功能多样的命令行工具，可让您与设备进行通信。adb 命令可用于执行各种设备操作（例如安装和调试应用），并提供对 Unix shell（可用来在设备上运行各种命令）的访问权限。</p></blockquote></blockquote><h2 id="基础命令"><a href="#基础命令" class="headerlink" title="基础命令"></a>基础命令</h2><h3 id="1-查看使用帮助"><a href="#1-查看使用帮助" class="headerlink" title="1. 查看使用帮助"></a>1. 查看使用帮助</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">adb <span class="hljs-built_in">help</span><br></code></pre></td></tr></table></figure><h3 id="2-启动adb服务："><a href="#2-启动adb服务：" class="headerlink" title="2. 启动adb服务："></a>2. 启动adb服务：</h3><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">adb <span class="hljs-keyword">start</span>-<span class="hljs-keyword">server</span><br></code></pre></td></tr></table></figure><h3 id="3-杀死adb服务："><a href="#3-杀死adb服务：" class="headerlink" title="3. 杀死adb服务："></a>3. 杀死adb服务：</h3><figure class="highlight axapta"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs axapta">adb kill-<span class="hljs-keyword">server</span><br></code></pre></td></tr></table></figure><h3 id="4-通过-Wi-Fi-连接到设备"><a href="#4-通过-Wi-Fi-连接到设备" class="headerlink" title="4. 通过 Wi-Fi 连接到设备"></a>4. 通过 Wi-Fi 连接到设备</h3><figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs lasso">adb <span class="hljs-built_in">pair</span> ipaddr:port #Android版本 &gt;= <span class="hljs-number">11</span>才支持该命令<br></code></pre></td></tr></table></figure><h3 id="5-启动网络adb服务："><a href="#5-启动网络adb服务：" class="headerlink" title="5. 启动网络adb服务："></a>5. 启动网络adb服务：</h3><figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dust"><span class="language-xml">adb connect </span><span class="hljs-template-variable">&#123;ipaddr&#125;</span><span class="language-xml">:</span><span class="hljs-template-variable">&#123;port&#125;</span><br></code></pre></td></tr></table></figure><blockquote><p><code>&#123;ipaddr&#125;</code>：IP地址<br><code>&#123;port&#125;</code>：端口号</p></blockquote><h3 id="6-断开网络adb服务"><a href="#6-断开网络adb服务" class="headerlink" title="6. 断开网络adb服务:"></a>6. 断开网络adb服务:</h3><figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dust"><span class="language-xml">adb disconnent </span><span class="hljs-template-variable">&#123;ipaddr&#125;</span><span class="language-xml">:</span><span class="hljs-template-variable">&#123;port&#125;</span><br></code></pre></td></tr></table></figure><blockquote><p><code>&#123;ipaddr&#125;</code>：IP地址<br><code>&#123;port&#125;</code>：端口号</p></blockquote><h3 id="7-设置网络adb端口号"><a href="#7-设置网络adb端口号" class="headerlink" title="7. 设置网络adb端口号"></a>7. 设置网络adb端口号</h3><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">adb</span> forward tcp:<span class="hljs-number">5555</span> tcp:<span class="hljs-number">8888</span> #更改网络adb端口号为<span class="hljs-number">8888</span><br></code></pre></td></tr></table></figure><blockquote><p>网络adb默认端口号为：5555</p></blockquote><h3 id="8-显示当前连接的全部安卓设备"><a href="#8-显示当前连接的全部安卓设备" class="headerlink" title="8. 显示当前连接的全部安卓设备"></a>8. 显示当前连接的全部安卓设备</h3><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">adb devices -l</span><br></code></pre></td></tr></table></figure><hr><h2 id="文件操作"><a href="#文件操作" class="headerlink" title="文件操作"></a>文件操作</h2><h3 id="1-拷贝手机里的文件到电脑上-默认拷贝路径为命令行所在路径-："><a href="#1-拷贝手机里的文件到电脑上-默认拷贝路径为命令行所在路径-：" class="headerlink" title="1. 拷贝手机里的文件到电脑上(默认拷贝路径为命令行所在路径)："></a>1. 拷贝手机里的文件到电脑上(默认拷贝路径为命令行所在路径)：</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs awk">adb pull <span class="hljs-regexp">/system/</span>etc/hosts <span class="hljs-comment">#拷贝手机文件到电脑命令行所在路径</span><br><br>adb pull <span class="hljs-regexp">/system/</span>etc/hosts D:\ <span class="hljs-comment">#拷贝手机文件到电脑D盘根目录</span><br></code></pre></td></tr></table></figure><h3 id="2-拷贝电脑的文件到手机上："><a href="#2-拷贝电脑的文件到手机上：" class="headerlink" title="2. 拷贝电脑的文件到手机上："></a>2. 拷贝电脑的文件到手机上：</h3><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">adb</span> push Markdown语法.md /storage/<span class="hljs-number">92</span>C4-<span class="hljs-number">1</span>BE6<br>    <br><span class="hljs-attribute">adb</span> push D:\hosts /storage/<span class="hljs-number">92</span>C4-<span class="hljs-number">1</span>BE6<br></code></pre></td></tr></table></figure><h3 id="3-在命令行中访问手机目录："><a href="#3-在命令行中访问手机目录：" class="headerlink" title="3. 在命令行中访问手机目录："></a>3. 在命令行中访问手机目录：</h3><figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dockerfile">adb <span class="hljs-keyword">shell</span><br></code></pre></td></tr></table></figure><blockquote><p>使用<code>adb shell</code>进入Android设备目录后，如需退出，输入<code>exit</code>即可回到cmd</p></blockquote><h3 id="4-安装APP"><a href="#4-安装APP" class="headerlink" title="4. 安装APP"></a>4. 安装APP</h3><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake">adb <span class="hljs-keyword">install</span> &#123;path_to_apk&#125;<br></code></pre></td></tr></table></figure><blockquote><p><code>&#123;path_to_apk&#125;</code>：安装包的路径，包含后缀名.apk</p></blockquote><h3 id="5-卸载APP"><a href="#5-卸载APP" class="headerlink" title="5. 卸载APP"></a>5. 卸载APP</h3><figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dust"><span class="language-xml">adb uninstall </span><span class="hljs-template-variable">&#123;apk_package_name&#125;</span><br></code></pre></td></tr></table></figure><blockquote><p><code>&#123;apk_package_name&#125;</code>：软件的包名</p></blockquote><hr><h2 id="刷机相关"><a href="#刷机相关" class="headerlink" title="刷机相关"></a>刷机相关</h2><h3 id="1-使用adb重启手机进入-recovery-bootloader："><a href="#1-使用adb重启手机进入-recovery-bootloader：" class="headerlink" title="1. 使用adb重启手机进入 recovery&#x2F;bootloader："></a>1. 使用adb重启手机进入 recovery&#x2F;bootloader：</h3><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs mipsasm">adb reboot recovery <span class="hljs-comment">#重启到Recovery</span><br><br>adb rebot <span class="hljs-keyword">bootloader </span> <span class="hljs-comment">#重启到Fastboot</span><br></code></pre></td></tr></table></figure><h3 id="2-使adb获取Root权限"><a href="#2-使adb获取Root权限" class="headerlink" title="2. 使adb获取Root权限"></a>2. 使adb获取Root权限</h3><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">adb root</span><br></code></pre></td></tr></table></figure><hr><h2 id="开发者相关"><a href="#开发者相关" class="headerlink" title="开发者相关"></a>开发者相关</h2><h3 id="1-启动对应包名的MainActivity"><a href="#1-启动对应包名的MainActivity" class="headerlink" title="1.启动对应包名的MainActivity"></a>1.启动对应包名的MainActivity</h3><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">adb shell am <span class="hljs-literal">start</span> -n &#123;apk_package_name&#125; <span class="hljs-comment">#启动包名为apk_package_name的MainActivity</span><br></code></pre></td></tr></table></figure><blockquote><p><code>&#123;apk_package_name&#125;</code>：应用包名</p></blockquote><h3 id="2-对指定设备执行命令"><a href="#2-对指定设备执行命令" class="headerlink" title="2. 对指定设备执行命令"></a>2. 对指定设备执行命令</h3><figure class="highlight dust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs dust"><span class="language-xml">adb -s </span><span class="hljs-template-variable">&#123;devices_id&#125;</span><span class="language-xml"> </span><span class="hljs-template-variable">&#123;command&#125;</span><br></code></pre></td></tr></table></figure><blockquote><p><code>&#123;devices_id&#125;</code>：设备ID<br><code>&#123;command&#125;</code>：命令</p></blockquote><h3 id="3-打印Log信息"><a href="#3-打印Log信息" class="headerlink" title="3. 打印Log信息"></a>3. 打印Log信息</h3><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs crmsh">adb logcat -s <span class="hljs-keyword">tag</span> <span class="hljs-title">#在命令行中查看标签名为tag</span>的Log信息<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>刷机</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Android</tag>
      
      <tag>adb</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Hexo进阶</title>
    <link href="/2021/12/03/Hexo/Hexo%E8%BF%9B%E9%98%B6/"/>
    <url>/2021/12/03/Hexo/Hexo%E8%BF%9B%E9%98%B6/</url>
    
    <content type="html"><![CDATA[<h2 id="Hexo生成的文件夹目录结构"><a href="#Hexo生成的文件夹目录结构" class="headerlink" title="Hexo生成的文件夹目录结构"></a>Hexo生成的文件夹目录结构</h2><p>使用<code>hexo init &lt;folder&gt;</code>创建博客根目录，并在该目录下使用命令<code>npm install</code>安装默认插件后，目录组成如下：</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-string">Blog/</span><br><span class="hljs-string">.</span><br><span class="hljs-string">├──</span> <span class="hljs-string">node_modules</span> <span class="hljs-comment">#Hexo第三方模块安装目录</span><br><span class="hljs-string">│</span>   <span class="hljs-string">├──</span> <span class="hljs-string">hexo-theme-fluid</span><br><span class="hljs-string">├──</span> <span class="hljs-string">public</span><br><span class="hljs-string">│</span>   <span class="hljs-string">├──</span> <span class="hljs-string">...</span>      <span class="hljs-comment">#Hexo生成的网页文件目录</span><br><span class="hljs-string">├──</span> <span class="hljs-string">scaffolds</span>    <span class="hljs-comment">#新建文章时使用的Markdown文件模板</span><br><span class="hljs-string">│</span>   <span class="hljs-string">├──</span> <span class="hljs-string">draft.md</span> <span class="hljs-comment">#草稿模板，生成的文章位于source/_drafts</span><br><span class="hljs-string">│</span>   <span class="hljs-string">├──</span> <span class="hljs-string">page.md</span>  <span class="hljs-comment">#分页模板，生成的文章位于source</span><br><span class="hljs-string">│</span>   <span class="hljs-string">└──</span> <span class="hljs-string">post.md</span>  <span class="hljs-comment">#默认文章模板，生成的文章位于source/_posts</span><br><span class="hljs-string">├──</span> <span class="hljs-string">source</span>       <span class="hljs-comment">#用于存放原始的Markdown文件</span><br><span class="hljs-string">│</span>   <span class="hljs-string">├──</span> <span class="hljs-string">_drafts</span>  <span class="hljs-comment">#存放草稿文章的目录</span><br><span class="hljs-string">│</span>   <span class="hljs-string">├──</span> <span class="hljs-string">_posts</span>   <span class="hljs-comment">#存放主要文章的目录</span><br><span class="hljs-string">│</span>   <span class="hljs-string">├──</span> <span class="hljs-string">about</span>    <span class="hljs-comment">#“关于”页面</span><br><span class="hljs-string">│</span>   <span class="hljs-string">├──</span> <span class="hljs-string">js</span>       <span class="hljs-comment">#JavaScript脚本</span><br><span class="hljs-string">│</span>   <span class="hljs-string">└──</span> <span class="hljs-string">share</span>    <span class="hljs-comment">#“分享”页面</span><br><span class="hljs-string">├──</span> <span class="hljs-string">themes</span>       <span class="hljs-comment">#主题存放目录</span><br><span class="hljs-string">├──</span> <span class="hljs-string">_config.fluid.yml</span>     <span class="hljs-comment">#fluid主题配置文件</span><br><span class="hljs-string">├──</span> <span class="hljs-string">_config.landscape.yml</span> <span class="hljs-comment">#默认主题配置文件</span><br><span class="hljs-string">├──</span> <span class="hljs-string">_config.yml</span>           <span class="hljs-comment">#博客网站配置文件</span><br><span class="hljs-string">├──</span> <span class="hljs-string">db.json</span>               <span class="hljs-comment">#自动生成的数据库文件</span><br><span class="hljs-string">├──</span> <span class="hljs-string">package-lock.json</span>     <span class="hljs-comment">#第三方插件信息</span><br><span class="hljs-string">└──</span> <span class="hljs-string">package.json</span>          <span class="hljs-comment">#Hexo相关脚本与包管理信息</span><br></code></pre></td></tr></table></figure><p>相关链接：<a href="https://hexo.io/docs/configuration">_config.yml配置介绍</a></p><h2 id="Hexo使用模板文件生成文章"><a href="#Hexo使用模板文件生成文章" class="headerlink" title="Hexo使用模板文件生成文章"></a>Hexo使用模板文件生成文章</h2><ol><li><p>生成文章命令：</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">hexo new [layout] <span class="hljs-string">&quot;title&quot;</span><br></code></pre></td></tr></table></figure><p> <strong>[layout]</strong> : draft &#x2F; page &#x2F; post，该参数可省略，默认为post。<br> <strong>title</strong>  : 文章标题</p><ul><li><p>draft（草稿）：<br>文件路径为： <strong>.&#x2F;source&#x2F;_drafts</strong></p><p>  该目录下的文章，在使用<code>hexo g</code>编译时，会被忽略，所以也不会显示在网页上。<br>  如果想要把草稿文章显示出来，可以使用<code>hexo publish [layout] title</code>，或者将草稿文章移动到source&#x2F;_posts目录下，重新编译生成网页文件即可。</p></li><li><p>page（分页）：<br>文件路径为： <strong>.&#x2F;source</strong></p><p>  直接将文章放置在资源文件根目录。</p></li><li><p>post（文章）<br>生成文章路径为： <strong>.&#x2F;source&#x2F;_posts</strong></p><p>  该目录为网页显示正文文章。</p></li></ul><p>相关链接：<a href="https://hexo.io/docs/writing#Scaffolds">scaffolds使用方法</a></p></li><li><p>将生成的文章存放到指定路径：</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">hexo new [layout] --path <span class="hljs-string">&quot;path/title.md&quot;</span> <span class="hljs-string">&quot;title&quot;</span><br></code></pre></td></tr></table></figure><p> <strong>[layout]</strong> : 使用示例模板：draft &#x2F; page &#x2F; post<br> <strong>path&#x2F;title.md</strong>  : 指定文章存放路径&#x2F;文章标题及<strong>后缀</strong><br> <strong>title</strong>  : 文章标题</p></li></ol><h2 id="Hexo资源文件夹"><a href="#Hexo资源文件夹" class="headerlink" title="Hexo资源文件夹"></a>Hexo资源文件夹</h2><p>资源（Asset）代表 <code>source</code> 文件夹中除了文章以外的所有文件，例如图片、CSS、JS或其他类型的文件。比方说，如果你的Hexo项目中只有少量图片，那最简单的方法就是将它们放在 <code>source/images</code> 文件夹中。然后通过类似于 <code>![](/images/image.jpg)</code> 的方法来访问它们。</p><p>对于那些想要更有规律地提供图片和其他资源以及想要将他们的资源分布在各个文章上的人来说，Hexo也提供了更组织化的方式来管理资源，通过修改 <code>_config.yml</code> 文件中以下配置来开启资源文件管理功能：</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-attr">post_asset_folder:</span> <span class="hljs-literal">true</span><br></code></pre></td></tr></table></figure><p>当资源文件管理功能打开后，Hexo将会在你每一次通过 <code>hexo new [layout] &lt;title&gt;</code> 命令创建新文章时自动创建一个文件夹。这个资源文件夹名称会与这个文章文件名保持一致。接下来将所有与你的文章有关的资源放在这个关联文件夹中之后，你可以通过相对路径来引用它们，这样你就得到了一个更简单而且方便得多的工作流。</p><p>上述方法虽然可以显示出图片，但是不支持在Markdown编辑器中预览图片，只支持在网页中显示，可以使用以下第三方模块来达到Markdown编辑器和网页都能预览图片：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install https://github.com/CodeFalling/hexo-asset-image --save<br></code></pre></td></tr></table></figure><blockquote><p>不要使用这条命令来安装：<code>npm install hexo-asset-image --save</code>，该插件被hexo渲染后，生成的HTML图片引用路径有问题。</p></blockquote><h2 id="Hexo主题"><a href="#Hexo主题" class="headerlink" title="Hexo主题"></a>Hexo主题</h2><p><a href="https://github.com/fluid-dev/hexo-theme-fluid">Hexo-Theme-Fluid - 一款 Material Design 风格的主题</a></p><h2 id="Hexo看板娘"><a href="#Hexo看板娘" class="headerlink" title="Hexo看板娘"></a>Hexo看板娘</h2><ol><li><p>安装模块</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install --save hexo-helper-live2d<br></code></pre></td></tr></table></figure></li><li><p>配置模块</p><p>请在Blog根目录的<code>_config.yml</code>文件中添加以下配置：</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-attr">live2d:</span><br><span class="hljs-attr">enable:</span> <span class="hljs-literal">true</span><br><span class="hljs-attr">scriptFrom:</span> <span class="hljs-string">local</span><br><span class="hljs-attr">pluginRootPath:</span> <span class="hljs-string">live2dw/</span><br><span class="hljs-attr">pluginJsPath:</span> <span class="hljs-string">lib/</span><br><span class="hljs-attr">pluginModelPath:</span> <span class="hljs-string">assets/</span><br><span class="hljs-attr">tagMode:</span> <span class="hljs-literal">false</span><br><span class="hljs-attr">debug:</span> <span class="hljs-literal">false</span><br><span class="hljs-attr">model:</span><br> <span class="hljs-attr">use:</span> <span class="hljs-string">live2d-widget-model-wanko</span>  <span class="hljs-comment">#模型文件名称</span><br><span class="hljs-attr">display:</span><br> <span class="hljs-attr">position:</span> <span class="hljs-string">right</span> <span class="hljs-comment">#模型位于网页中的位置</span><br> <span class="hljs-attr">width:</span> <span class="hljs-number">150</span><br> <span class="hljs-attr">height:</span> <span class="hljs-number">300</span><br><span class="hljs-attr">mobile:</span><br> <span class="hljs-attr">show:</span> <span class="hljs-literal">true</span><br><span class="hljs-attr">react:</span><br> <span class="hljs-attr">opacity:</span> <span class="hljs-number">0.7</span><br></code></pre></td></tr></table></figure></li><li><p>下载看板娘模型</p><p>使用以下命令安装模型：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install &#123;packagename&#125;<br></code></pre></td></tr></table></figure><p> {packagename}：</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs bash">live2d-widget-model-chitose<br>live2d-widget-model-epsilon2_1<br>live2d-widget-model-gf<br>live2d-widget-model-haru/01 (use npm install --save live2d-widget-model-haru)<br>live2d-widget-model-haru/02 (use npm install --save live2d-widget-model-haru)<br>live2d-widget-model-haruto<br>live2d-widget-model-hibiki<br>live2d-widget-model-hijiki<br>live2d-widget-model-izumi<br>live2d-widget-model-koharu<br>live2d-widget-model-miku<br>live2d-widget-model-ni-j<br>live2d-widget-model-nico<br>live2d-widget-model-nietzsche<br>live2d-widget-model-nipsilon<br>live2d-widget-model-nito<br>live2d-widget-model-shizuku<br>live2d-widget-model-tororo<br>live2d-widget-model-tsumiki<br>live2d-widget-model-unitychan<br>live2d-widget-model-wanko<br>live2d-widget-model-z16<br></code></pre></td></tr></table></figure></li></ol>]]></content>
    
    
    <categories>
      
      <category>Hexo</category>
      
    </categories>
    
    
    <tags>
      
      <tag>主题</tag>
      
      <tag>Hexo</tag>
      
      <tag>博客</tag>
      
      <tag>Live2D</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>通过Github搭建在线Hexo博客网站</title>
    <link href="/2021/12/03/Hexo/%E9%80%9A%E8%BF%87Github%E6%90%AD%E5%BB%BAHexo%E5%8D%9A%E5%AE%A2%EF%BC%8C%E5%AE%9E%E7%8E%B0%E8%BF%9C%E7%A8%8B%E8%AE%BF%E9%97%AE%E5%8D%9A%E5%AE%A2/"/>
    <url>/2021/12/03/Hexo/%E9%80%9A%E8%BF%87Github%E6%90%AD%E5%BB%BAHexo%E5%8D%9A%E5%AE%A2%EF%BC%8C%E5%AE%9E%E7%8E%B0%E8%BF%9C%E7%A8%8B%E8%AE%BF%E9%97%AE%E5%8D%9A%E5%AE%A2/</url>
    
    <content type="html"><![CDATA[<h2 id="所需工具"><a href="#所需工具" class="headerlink" title="所需工具"></a>所需工具</h2><ul><li><a href="https://nodejs.org/zh-cn/">Node.js</a></li><li><a href="https://git-scm.com/">Git</a></li></ul><hr><h2 id="安装Hexo"><a href="#安装Hexo" class="headerlink" title="安装Hexo"></a>安装Hexo</h2><ol><li><p>安装完所需工具后，依次查询各工具的版本号</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">node -v <span class="hljs-comment">#查看node版本</span><br><br>npm -v <span class="hljs-comment">#查看npm版本</span><br><br>git -v <span class="hljs-comment">#查看git版本</span><br></code></pre></td></tr></table></figure></li><li><p>安装hexo</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install -g hexo-cli<br></code></pre></td></tr></table></figure></li><li><p>查看hexo的版本</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">hexo -v <span class="hljs-comment">#查看hexo版本</span><br></code></pre></td></tr></table></figure><blockquote><p>大概率会显示查询不到版本号，需要手动添加hexo到系统环境变量：我的nodejs安装在D盘，所以hexo的安装目录在：D:\nodejs\node_global，只需要把这个路径添加到Windows的系统环境变量中即可。</p></blockquote></li></ol><h2 id="搭建本地博客"><a href="#搭建本地博客" class="headerlink" title="搭建本地博客"></a>搭建本地博客</h2><p>在本地磁盘新建一个Blog文件夹，进入该目录，打开CMD，依次执行以下命令。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">hexo init <span class="hljs-comment">#初始化本地博客</span><br><br>hexo s <span class="hljs-comment">#开启本地服务，就可以在浏览器中输入http://localhost:4000/，即可查看本地博客</span><br></code></pre></td></tr></table></figure><h2 id="搭建在线博客"><a href="#搭建在线博客" class="headerlink" title="搭建在线博客"></a>搭建在线博客</h2><p>本教程使用Github来搭建在线博客，当然也可以使用云服务器和线上域名来搭建，具体操作方法可以Bing一下。</p><ol><li><p>创建远程访问仓库：<br>登录<a href="https://github.com/">Github官网</a>，新建一个<strong>Repositories</strong>，在<strong>Repository name</strong>中输入：<strong>Your_Github_Name.github.io</strong>，点击<strong>Create repository</strong>即可。</p></li><li><p>安装Hexo的Git部署工具</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install --save hexo-deployer-git<br></code></pre></td></tr></table></figure></li><li><p>安装完成后，打开博客根目录的_config.yml，滑到最下面，修改最后几行为：</p> <figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-comment"># Deployment</span><br><span class="hljs-comment">## Docs: https://hexo.io/docs/one-command-deployment</span><br><span class="hljs-attr">deploy:</span><br>  <span class="hljs-attr">type:</span> <span class="hljs-string">git</span><br>  <span class="hljs-attr">repo:</span> <span class="hljs-comment">#你的Github仓库地址</span><br>  <span class="hljs-attr">branch:</span> <span class="hljs-string">master</span><br></code></pre></td></tr></table></figure></li><li><p>将本地博客部署到Github上，实现远程访问</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">hexo d<br></code></pre></td></tr></table></figure><blockquote><p>期间可能需要输入你的Github用户名和密码，输入后即可将本地博客同步到Github.</p></blockquote></li><li><p>修改Github远程网页显示分支<br>浏览器打开步骤1新建的远程访问仓库，点击上方选项卡中的<strong>Settings</strong>，在左侧选项卡中，点击<strong>Pages</strong>，在<strong>Source</strong>下点击<strong>Branch:main</strong>选项框，选择<strong>master</strong>分支，点击右侧<strong>Save</strong>按钮即可。</p><blockquote><p>完成上述步骤，即可实现远程访问博客，博客地址为：<code>https://Your_Github_Name.github.io</code></p></blockquote></li><li><p>解决hexo d部署网站时git报错<sup id="fnref:1" class="footnote-ref"><a href="#fn:1" rel="footnote"><span class="hint--top hint--rounded" aria-label="[【新手坑】GitHub常见问题解决「Permission denied (publickey)」](https://chihokyo.com/post/2/)">[1]</span></a></sup> <sup id="fnref:2" class="footnote-ref"><a href="#fn:2" rel="footnote"><span class="hint--top hint--rounded" aria-label="[解决git@github.com: Permission denied (publickey)](https://blog.csdn.net/qq_40047019/article/details/122898308)">[2]</span></a></sup></p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">Permission denied (publickey).  <br>fatal: Could not <span class="hljs-built_in">read</span> from remote repository.  <br>Please make sure you have the correct access rights<br></code></pre></td></tr></table></figure><p> 解决步骤</p><p> 打开 Git Bash ，执行：</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">ssh-keygen -t rsa -C <span class="hljs-string">&quot;xxx@example.com&quot;</span><br></code></pre></td></tr></table></figure><p> <code>xxx@example.com</code>改成自己的Github邮箱地址；</p><p> 第一步会询问新建密钥的名称及密码，可以都不填，直接回车。</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">ssh-agent -s<br></code></pre></td></tr></table></figure> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">ssh-add ~/.ssh/id_rsa<br></code></pre></td></tr></table></figure><p> 如果刚刚没有修改密钥名称，那么默认名称为<code>id_rsa</code>，否则请修改成命令中的密钥名称。</p><p> 执行后可能会报错：<br> <code>Could not open a connection to your authentication agent</code></p><p> 修复该问题执行如下命令：</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">ssh-agent bash<br></code></pre></td></tr></table></figure><p> 打开C盘目录：<code>C:\Users\UserName\.ssh</code>，里面会有一个公钥文件：<code>id_rsa.pub</code>，使用记事本打开，复制里面的所有内容，打开<a href="https://github.com/">Github官网</a>并登录，点击<strong>Settings &gt; SSH and GPG keys &gt; New SSH key</strong>，<strong>Title</strong>随便起个名称，<strong>Key type</strong>选择<code>Authentication Key</code>，在<strong>Key</strong>输入框中输入刚刚复制的内容，点击<strong>Add SSH key</strong>即可。</p><p> 此时回到Git Bash中，输入以下命令测试是否成功连接：</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">ssh -T git@github.com<br></code></pre></td></tr></table></figure><p> 此时控制台输出：<code>Hi dongxunz! You&#39;ve successfully authenticated, but GitHub does not provide shell access.</code>表示已经成功。</p></li></ol><h2 id="补充内容"><a href="#补充内容" class="headerlink" title="补充内容"></a>补充内容</h2><p>每次修改本地博客后，需要先执行<code>hexo cl</code>清理一下本地缓存，然后使用<code>hexo g</code>重新生成博客网页文件，生成后输入<code>hexo s</code>在浏览器中查看修改是否正常，确认无误后，使用<code>hexo d</code>同步到Github，即可完成同步。</p><h2 id="特别鸣谢"><a href="#特别鸣谢" class="headerlink" title="特别鸣谢"></a>特别鸣谢</h2><section class="footnotes"><div class="footnote-list"><ol><li><span id="fn:1" class="footnote-text"><span><a href="https://chihokyo.com/post/2/">【新手坑】GitHub常见问题解决「Permission denied (publickey)」</a><a href="#fnref:1" rev="footnote" class="footnote-backref"> ↩</a></span></span></li><li><span id="fn:2" class="footnote-text"><span><a href="https://blog.csdn.net/qq_40047019/article/details/122898308">解决git@github.com: Permission denied (publickey)</a><a href="#fnref:2" rev="footnote" class="footnote-backref"> ↩</a></span></span></li></ol></div></section>]]></content>
    
    
    <categories>
      
      <category>Hexo</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Hexo</tag>
      
      <tag>博客</tag>
      
      <tag>Github</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Markdown基本语法</title>
    <link href="/2021/12/02/Markdown/Markdown%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/"/>
    <url>/2021/12/02/Markdown/Markdown%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/</url>
    
    <content type="html"><![CDATA[<h2 id="标题"><a href="#标题" class="headerlink" title="标题"></a>标题</h2><p>在标题文字前面添加井号<code>#</code>，#号的数量代表标题的级别。</p><figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs md"><span class="hljs-section"># 一级标题</span><br><br><span class="hljs-section">## 二级标题</span><br><br><span class="hljs-section">### 三级标题</span><br><br><span class="hljs-section">#### 四级标题</span><br><br><span class="hljs-section">##### 五级标题</span><br><br><span class="hljs-section">###### 六级标题</span><br></code></pre></td></tr></table></figure><p>可选语法：在标题文字下方添加一个<code>=</code>用来一级标题，<code>-</code>代表二级标题：</p><figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs md">一级标题<br>=<br><br>二级标题<br>-<br></code></pre></td></tr></table></figure><h2 id="段落"><a href="#段落" class="headerlink" title="段落"></a>段落</h2><p>使用换行或空白行将一行或多行文本进行分隔。</p><figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs md">one<br>two<br><br>three<br><br><br>four<br></code></pre></td></tr></table></figure><h2 id="换行"><a href="#换行" class="headerlink" title="换行"></a>换行</h2><p>在一行的末尾添加两个或多个空格，然后按回车键，即可创建一个换行，用于阻断分割内容。</p><figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs md">This is the first line.  &lt;--此处有2个空格，即可实现换行<br>And this is the second line.<br></code></pre></td></tr></table></figure><blockquote><p>该语法通过在末尾添加两个或多个空格进行换行 (称为 “结尾空格（trailing whitespace）”) ，但这种方式是有争议的，因为人眼很难在编辑器中直接看到空格，所以不推荐使用这个方式，而是使用HTML的<code>&lt;br&gt;</code>标签来实现换行。</p></blockquote><h2 id="强调"><a href="#强调" class="headerlink" title="强调"></a>强调</h2><h3 id="粗体"><a href="#粗体" class="headerlink" title="粗体"></a>粗体</h3><p>在单词或短语的前后各添加两个星号<code>*</code>（asterisks）或下划线<code>_</code>（underscores）。</p><figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs md"><span class="hljs-strong">**粗体**</span><br><br><span class="hljs-strong">__粗体__</span><br></code></pre></td></tr></table></figure><blockquote><p>由于市面上的Markdown应用程序种类繁多，对于粗体的语法不完全一样，所以为兼容考虑，粗体请使用星号<code>*</code>（asterisks）。</p></blockquote><h3 id="斜体"><a href="#斜体" class="headerlink" title="斜体"></a>斜体</h3><p>在单词或短语前后添加一个星号（asterisk）或下划线（underscore）。</p><figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs md"><span class="hljs-emphasis">*斜体*</span><br><br><span class="hljs-emphasis">_斜体_</span><br></code></pre></td></tr></table></figure><blockquote><p>由于市面上的Markdown应用程序种类繁多，对于斜体的语法不完全一样，所以为兼容考虑，斜体请使用星号<code>*</code>（asterisks）。</p></blockquote><h3 id="删除线"><a href="#删除线" class="headerlink" title="删除线"></a>删除线</h3><p>在单词或短语前后各添加两个波浪号<code>~</code>。</p><figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs md">~~删除线~~<br></code></pre></td></tr></table></figure><h3 id="粗体和斜体混合使用"><a href="#粗体和斜体混合使用" class="headerlink" title="粗体和斜体混合使用"></a>粗体和斜体混合使用</h3><p>在单词或短语的前后各添加三个星号<code>*</code>（asterisk）或下划线<code>_</code>（underscore）。</p><figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs md"><span class="hljs-strong">**<span class="hljs-emphasis">*粗斜体*</span>**</span><br><br><span class="hljs-strong">__<span class="hljs-emphasis">_粗斜体_</span>__</span><br></code></pre></td></tr></table></figure><h2 id="引用"><a href="#引用" class="headerlink" title="引用"></a>引用</h2><p>在段落前添加一个<code>&gt;</code>符号。</p><figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs md"><span class="hljs-quote">&gt; 一级引用</span><br><span class="hljs-quote">&gt; &gt; 二级引用</span><br><span class="hljs-quote">&gt; &gt; &gt; 三级引用</span><br><span class="hljs-quote">&gt; &gt; &gt; &gt; 四级引用</span><br><span class="hljs-quote">&gt; &gt; &gt; &gt; &gt; 五级引用</span><br><span class="hljs-quote">&gt; &gt; &gt; &gt; &gt; &gt; 六级引用</span><br><span class="hljs-quote">&gt; &gt; &gt; &gt; &gt; &gt; &gt; 七级引用</span><br></code></pre></td></tr></table></figure><p>进阶语法：</p><ol><li>多段落引用</li></ol><figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs md"><span class="hljs-quote">&gt; one</span><br><span class="hljs-quote">&gt; </span><br><span class="hljs-quote">&gt; two</span><br><span class="hljs-quote">&gt; three</span><br></code></pre></td></tr></table></figure><ol start="2"><li>嵌套块引用</li></ol><figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs md"><span class="hljs-quote">&gt; 标题</span><br><span class="hljs-quote">&gt; </span><br><span class="hljs-quote">&gt;&gt; 内容</span><br></code></pre></td></tr></table></figure><ol start="3"><li>带有其它元素的块引用</li></ol><figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs md"><span class="hljs-quote">&gt; #### title</span><br><span class="hljs-quote">&gt; </span><br><span class="hljs-quote">&gt; - one</span><br><span class="hljs-quote">&gt; - two</span><br><span class="hljs-quote">&gt; </span><br><span class="hljs-quote">&gt; <span class="hljs-emphasis">*斜体*</span> xxx</span><br></code></pre></td></tr></table></figure><h2 id="列表"><a href="#列表" class="headerlink" title="列表"></a>列表</h2><h3 id="有序列表"><a href="#有序列表" class="headerlink" title="有序列表"></a>有序列表</h3><p>在每个列表项前添加数字并紧跟一个英文句点加空格，并从1开始进行依次排序。</p><figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs md"><span class="hljs-bullet">1.</span> one<br><span class="hljs-bullet">2.</span> two<br><span class="hljs-bullet">3.</span> three<br><br><span class="hljs-bullet">4.</span> one<br><span class="hljs-bullet">5.</span> two<br><span class="hljs-bullet">6.</span> three<br><br><span class="hljs-bullet">7.</span> one<br><span class="hljs-bullet">8.</span> two<br><span class="hljs-bullet">    1.</span> three<br><span class="hljs-bullet">    2.</span> four<br><span class="hljs-bullet">9.</span> five<br></code></pre></td></tr></table></figure><h3 id="无序列表"><a href="#无序列表" class="headerlink" title="无序列表"></a>无序列表</h3><p>在每个列表项前面添加破折号<code>-</code>、星号<code>*</code> 或加号<code>+</code>。缩进一个或多个列表项可创建嵌套列表。</p><figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs md"><span class="hljs-bullet">-</span> one<br><span class="hljs-bullet">-</span> two<br><span class="hljs-bullet">-</span> three<br><br><span class="hljs-bullet">*</span> one<br><span class="hljs-bullet">*</span> two<br><span class="hljs-bullet">*</span> three<br><br><span class="hljs-bullet">+</span> one<br><span class="hljs-bullet">+</span> two<br><span class="hljs-bullet">+</span> three<br></code></pre></td></tr></table></figure><h2 id="图片"><a href="#图片" class="headerlink" title="图片"></a>图片</h2><figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs md">![<span class="hljs-string">图片文字描述</span>](<span class="hljs-link">图片存放路径</span>)<br></code></pre></td></tr></table></figure><p>进阶语法：为图片添加网络链接。</p><figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs md">[<span class="hljs-string">![图片名称</span>](<span class="hljs-link">图片路径</span>)](<span class="hljs-link">网址</span>)<br></code></pre></td></tr></table></figure><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><p>使用以下语法将代码包括起来。</p><figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs md"><span class="hljs-code">`Your code`</span><br></code></pre></td></tr></table></figure><h2 id="代码块"><a href="#代码块" class="headerlink" title="代码块"></a>代码块</h2><p>代码块（Code blocks）通常采用一对&#96;&#96;&#96;将代码块包括到内部。</p><figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs md">无法演示...<br></code></pre></td></tr></table></figure><h2 id="分隔线"><a href="#分隔线" class="headerlink" title="分隔线"></a>分隔线</h2><p>在单独一行上使用三个或多个星号<code>***</code>、破折号<code>---</code>或下划线<code>___</code>，并且不能包含其他内容。</p><figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs md"><span class="hljs-strong">***</span><br><span class="hljs-strong"></span><br><span class="hljs-strong">---</span><br><span class="hljs-strong"></span><br><span class="hljs-strong">__<span class="hljs-emphasis">_</span></span><br></code></pre></td></tr></table></figure><h2 id="链接"><a href="#链接" class="headerlink" title="链接"></a>链接</h2><p>将链接文本内容填入方括号<code>[]</code>，后面的圆括号填写对应的URL链接<code>()</code>。</p><figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs md">[<span class="hljs-string">显示文本</span>](<span class="hljs-link">http://xxx</span>)<br></code></pre></td></tr></table></figure><p>可选语法：直接附上网址或电子邮件地址。</p><figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs md"><span class="language-xml">&lt;https://wwww.baidu.com&gt;</span><br><br>&lt;1639945679@qq.com&gt;<br></code></pre></td></tr></table></figure><h2 id="表格"><a href="#表格" class="headerlink" title="表格"></a>表格</h2><figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs md">| Tables        | Are           | Cool  |<br>|:-------------:|:-------------:|:-----:|<br>| col 3 is      | right-aligned | $1600 |<br>| col 2 is      | centered      |   $12 |<br>| zebra stripes | are neat      |    $1 |<br><br>dog | bird | cat<br>----|------|----<br>foo | foo  | foo<br>bar | bar  | bar<br>baz | baz  | baz<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Markdown</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Markdown语法</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Hello World</title>
    <link href="/2021/11/30/Hello%20World/hello-world/"/>
    <url>/2021/11/30/Hello%20World/hello-world/</url>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo new <span class="hljs-string">&quot;My New Post&quot;</span><br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo server<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo generate<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo deploy<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
    
    
    <categories>
      
      <category>Hello World</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Hello World</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
